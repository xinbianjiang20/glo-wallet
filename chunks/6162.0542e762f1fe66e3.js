(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6162],{79285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newFilter=void 0;const r=n(10224);t.newFilter=function(e,t){const n=8*e.length;return{contains(s){let i=r.blake2b256(s).readUInt32BE(0);const o=i>>>17|i<<15>>>0;for(let r=0;r<t;r++){const t=i%n,r=1<<t%8;if(!(e[t>>>3]&r))return!1;i=i+o>>>0}return!0}}}},7674:function(e,t,n){"use strict";var r=n(48764).Buffer,s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;const i=n(27251),o=n(17787),a=n(79285);function c(e,t){let n=r.from(t.slice(2),"hex");const s=n.findIndex((e=>0!==e));return n=s<0?r.alloc(0):n.slice(s),e.contains(n)}t.Cache=class{constructor(){this.irreversible={blocks:new i(256),txs:new i(512),receipts:new i(512)},this.window=[]}handleNewBlock(e,t,n){for(;this.window.length>0;){const t=this.window[this.window.length-1];if(t.id===e.id)return;if(t.id===e.parentID)break;this.window.pop()}for(this.window.push(Object.assign(Object.assign({},e),{bloom:t?a.newFilter(r.from(t.bits.slice(2),"hex"),t.k):void 0,block:n,accounts:new Map,txs:new Map,receipts:new Map,tied:new Map}));this.window.length>12;){const e=this.window.shift();e.txs.forEach(((e,t)=>this.irreversible.txs.set(t,e))),e.receipts.forEach(((e,t)=>this.irreversible.receipts.set(t,e))),e.block&&(this.irreversible.blocks.set(e.block.id,e.block),this.irreversible.blocks.set(e.block.number,e.block))}}getBlock(e,t){return s(this,void 0,void 0,(function*(){let n=this.irreversible.blocks.get(e)||null;if(n)return n;const{slot:r}=this.findSlot(e);return r&&r.block?r.block:(n=yield t(),n&&(r&&r.id===n.id&&(r.block=n),this.isIrreversible(n.number)&&(this.irreversible.blocks.set(n.id,n),n.isTrunk&&this.irreversible.blocks.set(n.number,n))),n)}))}getTx(e,t){return s(this,void 0,void 0,(function*(){let n=this.irreversible.txs.get(e)||null;if(n)return n;for(const t of this.window)if(n=t.txs.get(e)||null,n)return n;if(n=yield t(),n&&n.meta){const{slot:t}=this.findSlot(n.meta.blockID);t&&t.txs.set(e,n),this.isIrreversible(n.meta.blockNumber)&&this.irreversible.txs.set(e,n)}return n}))}getReceipt(e,t){return s(this,void 0,void 0,(function*(){let n=this.irreversible.receipts.get(e)||null;if(n)return n;for(const t of this.window)if(n=t.receipts.get(e)||null,n)return n;if(n=yield t(),n){const{slot:t}=this.findSlot(n.meta.blockID);t&&t.receipts.set(e,n),this.isIrreversible(n.meta.blockNumber)&&this.irreversible.receipts.set(e,n)}return n}))}getAccount(e,t,n){return s(this,void 0,void 0,(function*(){const r=this.findSlot(t);for(let t=r.index;t>=0;t--){const n=this.window[t],s=n.accounts.get(e);if(s)return t!==r.index&&r.slot.accounts.set(e,s),s.snapshot(r.slot.timestamp);if(!n.bloom||c(n.bloom,e))break}const s=yield n();return r.slot&&r.slot.accounts.set(e,new l(s,r.slot.timestamp)),s}))}getTied(e,t,n,r){return s(this,void 0,void 0,(function*(){const s=this.findSlot(t);for(let t=s.index;t>=0;t--){const n=this.window[t],i=n.tied.get(e);if(i)return t!==s.index&&s.slot.tied.set(e,i),i;if(!n.bloom||!r)break;if(r.some((e=>c(n.bloom,e))))break}const i=yield n();return s.slot&&s.slot.tied.set(e,i),i}))}findSlot(e){const t=this.window.findIndex((t=>t.id===e||t.number===e));return t>=0?{slot:this.window[t],index:t}:{index:t}}isIrreversible(e){return this.window.length>0&&e<this.window[this.window.length-1].number-12}};class l{constructor(e,t){this.obj=e,this.initTimestamp=t}snapshot(e){return Object.assign(Object.assign({},this.obj),{energy:this.energyAt(e)})}energyAt(e){return e<this.initTimestamp?this.obj.energy:"0x"+new o.default(this.obj.balance).times(e-this.initTimestamp).times(5e9).dividedToIntegerBy(1e18).plus(this.obj.energy).toString(16)}}},17335:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0,t.sleep=function(e){return new Promise((t=>setTimeout(t,e)))}},83410:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DriverNoVendor=void 0;const s=n(29036),i=n(7674),o=n(10224),a=n(17335);t.DriverNoVendor=class{constructor(e,t,n){this.net=e,this.genesis=t,this.headResolvers=[],this.int=new s.PromInt,this.cache=new i.Cache,this.pendingRequests={},this.head=n||{id:t.id,number:t.number,timestamp:t.timestamp,parentID:t.parentID,txsFeatures:t.txsFeatures,gasLimit:t.gasLimit},this.headTrackerLoop()}close(){this.int.interrupt()}pollHead(){return this.int.wrap(new Promise((e=>{this.headResolvers.push((()=>e(this.head)))})))}getBlock(e){return this.cache.getBlock(e,(()=>this.httpGet(`blocks/${e}`)))}getTransaction(e,t){return this.cache.getTx(e,(()=>{const n={head:this.head.id};return t&&(n.pending="true"),this.httpGet(`transactions/${e}`,n)}))}getReceipt(e){return this.cache.getReceipt(e,(()=>this.httpGet(`transactions/${e}/receipt`,{head:this.head.id})))}getAccount(e,t){return this.cache.getAccount(e,t,(()=>this.httpGet(`accounts/${e}`,{revision:t})))}getCode(e,t){return this.cache.getTied(`code-${e}`,t,(()=>this.httpGet(`accounts/${e}/code`,{revision:t})))}getStorage(e,t,n){return this.cache.getTied(`storage-${e}-${t}`,n,(()=>this.httpGet(`accounts/${e}/storage/${t}`,{revision:n})))}explain(e,t,n){const r=`explain-${o.blake2b256(JSON.stringify(e)).toString("hex")}`;return this.cache.getTied(r,t,(()=>this.httpPost("accounts/*",e,{revision:t})),n)}filterEventLogs(e,t){const n=`event-${o.blake2b256(JSON.stringify(e)).toString("hex")}`;return this.cache.getTied(n,this.head.id,(()=>this.httpPost("logs/event",e)),t)}filterTransferLogs(e,t){const n=`transfer-${o.blake2b256(JSON.stringify(e)).toString("hex")}`;return this.cache.getTied(n,this.head.id,(()=>this.httpPost("logs/transfer",e)),t)}signTx(e,t){throw new Error("signer not implemented")}signCert(e,t){throw new Error("signer not implemented")}mergeRequest(e,...t){const n=JSON.stringify(t),s=this.pendingRequests[n];return s||(this.pendingRequests[n]=(()=>r(this,void 0,void 0,(function*(){try{return yield e()}finally{delete this.pendingRequests[n]}})))())}httpGet(e,t){return this.mergeRequest((()=>this.net.http("GET",e,{query:t,validateResponseHeader:this.headerValidator})),e,t||"")}httpPost(e,t,n){return this.mergeRequest((()=>this.net.http("POST",e,{query:n,body:t,validateResponseHeader:this.headerValidator})),e,n||"",t||"")}get headerValidator(){return e=>{const t=e["x-genesis-id"];if(t&&t!==this.genesis.id)throw new Error("responded 'x-genesis-id' not matched")}}emitNewHead(){const e=this.headResolvers;this.headResolvers=[],e.forEach((e=>e()))}headTrackerLoop(){return r(this,void 0,void 0,(function*(){for(;;){let n=!1;try{const e=yield this.int.wrap(this.httpGet("blocks/best"));e.id!==this.head.id&&e.number>=this.head.number&&(this.head={id:e.id,number:e.number,timestamp:e.timestamp,parentID:e.parentID,txsFeatures:e.txsFeatures,gasLimit:e.gasLimit},this.cache.handleNewBlock(this.head,void 0,e),this.emitNewHead(),Date.now()-1e3*this.head.timestamp<6e4&&(n=!0))}catch(e){if(e instanceof s.InterruptedError)break}if(n)try{yield this.trackWs()}catch(e){if(e instanceof s.InterruptedError)break}try{yield this.int.wrap(a.sleep(8e3))}catch(t){break}}}))}trackWs(){return r(this,void 0,void 0,(function*(){const e=`subscriptions/beat2?pos=${this.head.parentID}`,t=this.net.openWebSocketReader(e);try{for(;;){const e=yield this.int.wrap(t.read()),n=JSON.parse(e);!n.obsolete&&n.id!==this.head.id&&n.number>=this.head.number&&(this.head={id:n.id,number:n.number,timestamp:n.timestamp,parentID:n.parentID,txsFeatures:n.txsFeatures,gasLimit:n.gasLimit},this.cache.handleNewBlock(this.head,{k:n.k,bits:n.bloom}),this.emitNewHead())}}finally{t.close()}}))}}},45793:function(e,t,n){"use strict";var r=n(48764).Buffer,s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Driver=void 0;const i=n(83410),o=n(10224),a=n(42474);class c extends i.DriverNoVendor{constructor(e,t,n,r){super(e,t,n),this.wallet=r,this.txParams={expiration:18,gasPriceCoef:0}}static connect(e,t){return s(this,void 0,void 0,(function*(){const n=yield e.http("GET","blocks/0"),r=yield e.http("GET","blocks/best",{validateResponseHeader:e=>{const t=e["x-genesis-id"];if(t&&t!==n.id)throw new Error("responded 'x-genesis-id' not matched")}});return new c(e,n,{id:r.id,number:r.number,timestamp:r.timestamp,parentID:r.parentID,txsFeatures:r.txsFeatures,gasLimit:r.gasLimit},t)}))}signTx(e,t){return s(this,void 0,void 0,(function*(){t.onAccepted&&t.onAccepted();const n=this.findKey(t.signer),i=e.map((e=>({to:e.to?e.to.toLowerCase():null,value:e.value.toString().toLowerCase(),data:(e.data||"0x").toLowerCase()}))),c=t.gas||(yield this.estimateGas(i,n.address)),l={chainTag:Number.parseInt(this.genesis.id.slice(-2),16),blockRef:this.head.id.slice(0,18),expiration:this.txParams.expiration,clauses:i,gasPriceCoef:this.txParams.gasPriceCoef,gas:c,dependsOn:t.dependsOn||null,nonce:"0x"+a.randomBytes(8).toString("hex")};let u;if(t.delegator){const e=new o.Transaction(Object.assign(Object.assign({},l),{reserved:{features:1}})),s=yield n.sign(e.signingHash()),i={raw:"0x"+e.encode().toString("hex"),origin:n.address};try{const n=yield this.net.http("POST",t.delegator.url,{body:i});e.signature=r.concat([s,r.from(n.signature.slice(2),"hex")]),u=e}catch(d){console.warn("tx delegation error: ",d)}}u||(u=new o.Transaction(l),u.signature=yield n.sign(u.signingHash()));const h="0x"+u.encode().toString("hex");return this.onTxCommit&&this.onTxCommit({id:u.id,raw:h,resend:()=>s(this,void 0,void 0,(function*(){yield this.sendTx(h)}))}),yield this.sendTx(h),{txid:u.id,signer:n.address}}))}signCert(e,t){return s(this,void 0,void 0,(function*(){t.onAccepted&&t.onAccepted();const n=this.findKey(t.signer),r={domain:"localhost",timestamp:this.head.timestamp,signer:n.address},s=o.Certificate.encode(Object.assign(Object.assign({},e),r));return{annex:r,signature:"0x"+(yield n.sign(o.blake2b256(s))).toString("hex")}}))}findKey(e){if(this.wallet){const t=this.wallet.list,n=e?t.find((t=>t.address===e)):t[0];if(n)return n}throw new Error("empty wallet")}sendTx(e){return this.httpPost("transactions",{raw:e})}estimateGas(e,t){return s(this,void 0,void 0,(function*(){const n=(yield this.explain({clauses:e,caller:t},this.head.id)).reduce(((e,t)=>e+t.gasUsed),0);return o.Transaction.intrinsicGas(e)+(n?n+15e3:0)}))}}t.Driver=c},93405:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(45793),t),s(n(83410),t),s(n(85216),t),s(n(75149),t),s(n(92332),t)},85216:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29036:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterruptedError=t.PromInt=void 0;t.PromInt=class{constructor(){this.rejectors=new Set}interrupt(){const e=this.rejectors;this.rejectors=new Set,e.forEach((e=>e(new n)))}wrap(e){return new Promise(((t,n)=>{const r=this.rejectors;r.add(n),e.then(t).catch(n).then((()=>r.delete(n)))}))}};class n extends Error{constructor(){super("promise interrupted")}}t.InterruptedError=n,n.prototype.name="InterruptedError"},75149:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleNet=void 0;const s=n(36921),i=n(9327),o=n(11987),a=n(22321),c=n(78428);t.SimpleNet=class{constructor(e,t=3e4,n=3e4){this.baseURL=e,this.wsTimeout=n,this.axios=s.default.create({httpAgent:new a.Agent({keepAlive:!0}),httpsAgent:new c.Agent({keepAlive:!0}),baseURL:e,timeout:t})}http(e,t,n){return r(this,void 0,void 0,(function*(){n=n||{};try{const r=yield this.axios.request({method:e,url:t,data:n.body,headers:n.headers,params:n.query});return n.validateResponseHeader&&n.validateResponseHeader(r.headers),r.data}catch(r){if(r.isAxiosError)throw function(e){if(e.response){const t=e.response;if("string"===typeof t.data){let n=t.data.trim();return n.length>50&&(n=n.slice(0,50)+"..."),new Error(`${t.status} ${e.config.method} ${e.config.url}: ${n}`)}return new Error(`${t.status} ${e.config.method} ${e.config.url}`)}return new Error(`${e.config.method} ${e.config.url}: ${e.message}`)}(r);throw new Error(`${e} ${o.resolve(this.baseURL,t)}: ${r.message}`)}}))}openWebSocketReader(e){const t=o.resolve(this.baseURL,e).replace(/^http:/i,"ws:").replace(/^https:/i,"wss:");return new i.SimpleWebSocketReader(t,this.wsTimeout)}}},92332:function(e,t,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleWallet=void 0;const s=n(10224);t.SimpleWallet=class{constructor(){this.keys=[]}get list(){return this.keys.map((e=>({address:e.address,sign:t=>Promise.resolve(s.secp256k1.sign(t,e.privateKey))})))}import(e){if(e.startsWith("0x")&&(e=e.slice(2)),!/^[0-9a-f]{64}$/i.test(e))throw new Error("invalid private key");const t=r.from(e,"hex"),n=s.address.fromPublicKey(s.secp256k1.derivePublicKey(t));return this.keys.push({address:n,privateKey:t}),n}remove(e){const t=this.keys.findIndex((t=>t.address===e.toLowerCase()));return t>=0&&(this.keys.splice(t,1),!0)}}},9327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleWebSocketReader=void 0;const r=n(46792);t.SimpleWebSocketReader=class{constructor(e,t=3e4){this.timeout=t,this.callbacks=[],this.ws=new r(e),this.ws.onmessage=e=>{try{const t=this.callbacks;this.callbacks=[],t.forEach((t=>t(e.data)))}catch(t){this.setError(t),this.ws.close()}},this.ws.onerror=e=>{this.setError(e.error),this.ws.close()},this.ws.onclose=()=>{this.setError(new Error("closed"))}}read(){return new Promise(((e,t)=>{if(this.error)return t(this.error);const n=setTimeout((()=>{t(new Error("ws read timeout"))}),this.timeout);this.callbacks.push(((r,s)=>{if(clearTimeout(n),s)return t(s);e(r)}))}))}close(){this.ws.close()}setError(e){if(!this.error){this.error=e;const t=this.callbacks;this.callbacks=[],t.forEach((t=>t(null,e)))}}}},45203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEARTBEAT_EVENTS=t.HEARTBEAT_INTERVAL=void 0;const r=n(66736);t.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,t.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},55076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(70655).__exportStar(n(45203),t)},9483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeat=void 0;const r=n(70655),s=n(17187),i=n(66736),o=n(72406),a=n(55076);class c extends o.IHeartBeat{constructor(e){super(e),this.events=new s.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(null===e||void 0===e?void 0:e.interval)||a.HEARTBEAT_INTERVAL}static init(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=new c(e);return yield t.init(),t}))}init(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return r.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),i.toMiliseconds(this.interval))}))}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}t.HeartBeat=c},46934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(9483),t),r.__exportStar(n(72406),t),r.__exportStar(n(55076),t)},97867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHeartBeat=void 0;const r=n(30997);class s extends r.IEvents{constructor(e){super()}}t.IHeartBeat=s},72406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(70655).__exportStar(n(97867),t)},355:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});const r=n(7996),s=["rgb(244, 67, 54)","rgb(233, 30, 99)","rgb(156, 39, 176)","rgb(103, 58, 183)","rgb(63, 81, 181)","rgb(33, 150, 243)","rgb(3, 169, 244)","rgb(0, 188, 212)","rgb(0, 150, 136)","rgb(76, 175, 80)","rgb(139, 195, 74)","rgb(205, 220, 57)","rgb(255, 193, 7)","rgb(255, 152, 0)","rgb(255, 87, 34)"],i=function(e){if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++)t=31*t+e.charCodeAt(n),t%=Math.pow(2,32);return t};function o(e,t){t=t||s;const n=i(e),o=new r(n);t=t.slice();const a=()=>{const e=Math.floor(t.length*o.random());return t.splice(e,1)[0]},c=`<rect fill="${a()}" width="100" height="100"/>`;let l="";const u=[35,40,45,50,55,60],h=[0,10,20,30,40,50,60,70,80,90,100],d=[30,40,50,60,70];for(let r=0;r<3;r++){l+=`<circle r="${u.splice(Math.floor(u.length*o.random()),1)[0]}" cx="${h.splice(Math.floor(h.length*o.random()),1)[0]}" cy="${d.splice(Math.floor(d.length*o.random()),1)[0]}" fill="${a()}"/>`}return`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" class="picasso" width="100" height="100" viewBox="0 0 100 100"><style>.picasso circle{mix-blend-mode:soft-light;}</style>${c}${l}</svg>`}},30997:function(e,t,n){"use strict";n.r(t),n.d(t,{IEvents:function(){return r.q}});var r=n(38200)},7996:function(e){var t=function(e){void 0==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var n,r,s;for(this.init_seed(19650218),n=1,r=0,s=this.N>t?this.N:t;s;s--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=t&&(r=0)}for(s=this.N-1;s;s--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},e.exports=t},63144:function(e){"use strict";const t=self.fetch.bind(self);e.exports=t,e.exports.default=e.exports},93996:function(e,t,n){"use strict";function r(e,t,n){if(n>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function s(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return l(c(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const n=p(e),r=p(t+55+n.length/2);return Uint8Array.from(u(r+n))}function o(e){let t,n,i,a,c;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(u<=183){if(t=u-127,i=128===u?Uint8Array.from([]):r(e,1,t),2===t&&i[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:i,remainder:e.subarray(t)}}if(u<=191){if(n=u-182,e.length-1<n)throw new Error("invalid RLP: not enough bytes for string length");if(t=s(r(e,1,n)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return i=r(e,n,t+n),{data:i,remainder:e.subarray(t+n)}}if(u<=247){for(t=u-191,a=r(e,1,t);a.length;)c=o(a),l.push(c.data),a=c.remainder;return{data:l,remainder:e.subarray(t)}}{if(n=u-246,t=s(r(e,1,n)),t<56)throw new Error("invalid RLP: encoded list too short");const i=n+t;if(i>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=r(e,n,i);a.length;)c=o(a),l.push(c.data),a=c.remainder;return{data:l,remainder:e.subarray(i)}}}n.d(t,{yH:function(){return m}});const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function c(e){let t="";for(let n=0;n<e.length;n++)t+=a[e[n]];return t}function l(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function u(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n;t[n]=l(e.slice(r,r+2))}return t}function h(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const t=e[r];n.set(t,s),s+=t.length}return n}function d(e){return(new TextEncoder).encode(e)}function p(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function f(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function g(e){if(e instanceof Uint8Array)return e;if("string"===typeof e)return f(e)?u((t="string"!==typeof(n=e)?n:f(n)?n.slice(2):n).length%2?`0${t}`:t):d(e);var t,n;if("number"===typeof e||"bigint"===typeof e)return e?u(p(e)):Uint8Array.from([]);if(null===e||void 0===e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}const m={encode:function e(t){if(Array.isArray(t)){const n=[];let r=0;for(let s=0;s<t.length;s++){const i=e(t[s]);n.push(i),r+=i.length}return h(i(r,192),...n)}const n=g(t);return 1===n.length&&n[0]<128?n:h(i(n.length,128),n)},decode:function(e,t=!1){if("undefined"===typeof e||null===e||0===e.length)return Uint8Array.from([]);const n=o(g(e));if(t)return{data:n.data,remainder:n.remainder.slice()};if(0!==n.remainder.length)throw new Error("invalid RLP: remainder must be zero");return n.data}}},22476:function(e,t,n){"use strict";n.d(t,{ij:function(){return N}});var r=n(74207);const s=16,i=new Uint8Array(16),o=(0,r.Jq)(i),a=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;class c{constructor(e,t){this.blockLen=s,this.outputLen=s,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,r.O0)(e),(0,r.gk)(e,16);const n=(0,r.GL)(e);let i=n.getUint32(0,!1),o=n.getUint32(4,!1),c=n.getUint32(8,!1),l=n.getUint32(12,!1);const u=[];for(let r=0;r<128;r++)u.push({s0:a(i),s1:a(o),s2:a(c),s3:a(l)}),({s0:i,s1:o,s2:c,s3:l}={s3:(p=c)<<31|(f=l)>>>1,s2:(d=o)<<31|p>>>1,s1:(h=i)<<31|d>>>1,s0:h>>>1^225<<24&-(1&f)});var h,d,p,f;const g=(m=t||1024)>65536?8:m>1024?4:2;var m;if(![1,2,4,8].includes(g))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=g;const y=128/g,w=this.windowSize=2**g,b=[];for(let r=0;r<y;r++)for(let e=0;e<w;e++){let t=0,n=0,s=0,i=0;for(let o=0;o<g;o++){if(!(e>>>g-o-1&1))continue;const{s0:a,s1:c,s2:l,s3:h}=u[g*r+o];t^=a,n^=c,s^=l,i^=h}b.push({s0:t,s1:n,s2:s,s3:i})}this.t=b}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:s,t:i,windowSize:o}=this;let a=0,c=0,l=0,u=0;const h=(1<<s)-1;let d=0;for(const p of[e,t,n,r])for(let e=0;e<4;e++){const t=p>>>8*e&255;for(let e=8/s-1;e>=0;e--){const n=t>>>s*e&h,{s0:r,s1:p,s2:f,s3:g}=i[d*o+n];a^=r,c^=p,l^=f,u^=g,d+=1}}this.s0=a,this.s1=c,this.s2=l,this.s3=u}update(e){(0,r.$h)(this),e=(0,r.O0)(e),(0,r.gk)(e);const t=(0,r.Jq)(e),n=Math.floor(e.length/s),a=e.length%s;for(let r=0;r<n;r++)this._updateBlock(t[4*r+0],t[4*r+1],t[4*r+2],t[4*r+3]);return a&&(i.set(e.subarray(n*s)),this._updateBlock(o[0],o[1],o[2],o[3]),(0,r.ru)(o)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,r.$h)(this),(0,r.eB)(e,this),this.finished=!0;const{s0:t,s1:n,s2:s,s3:i}=this,o=(0,r.Jq)(e);return o[0]=t,o[1]=n,o[2]=s,o[3]=i,e}digest(){const e=new Uint8Array(s);return this.digestInto(e),this.destroy(),e}}class l extends c{constructor(e,t){e=(0,r.O0)(e),(0,r.gk)(e);const n=function(e){e.reverse();const t=1&e[15];let n=0;for(let r=0;r<e.length;r++){const t=e[r];e[r]=t>>>1|n,n=(1&t)<<7}return e[0]^=225&-t,e}((0,r.HV)(e));super(n,t),(0,r.ru)(n)}update(e){e=(0,r.O0)(e),(0,r.$h)(this);const t=(0,r.Jq)(e),n=e.length%s,c=Math.floor(e.length/s);for(let r=0;r<c;r++)this._updateBlock(a(t[4*r+3]),a(t[4*r+2]),a(t[4*r+1]),a(t[4*r+0]));return n&&(i.set(e.subarray(c*s)),this._updateBlock(a(o[3]),a(o[2]),a(o[1]),a(o[0])),(0,r.ru)(o)),this}digestInto(e){(0,r.$h)(this),(0,r.eB)(e,this),this.finished=!0;const{s0:t,s1:n,s2:s,s3:i}=this,o=(0,r.Jq)(e);return o[0]=t,o[1]=n,o[2]=s,o[3]=i,e.reverse()}}function u(e){const t=(t,n)=>e(n,t.length).update((0,r.O0)(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}u(((e,t)=>new c(e,t))),u(((e,t)=>new l(e,t)));const h=16,d=283;function p(e){return e<<1^d&-(e>>7)}function f(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=p(e);return n}const g=(()=>{const e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=p(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,r.ru)(e),t})(),m=e=>e<<24|e>>>8,y=e=>e<<8|e>>>24;function w(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((n,r)=>t(e[r]))),r=n.map(y),s=r.map(y),i=s.map(y),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let t=0;t<256;t++){const u=256*l+t;o[u]=n[l]^r[t],a[u]=s[l]^i[t],c[u]=e[l]<<8|e[t]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:s,T3:i,T01:o,T23:a}}const b=w(g,(e=>f(e,3)<<24|e<<16|e<<8|f(e,2))),v=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=p(n))e[t]=n;return e})();function E(e){(0,r.gk)(e);const t=e.length;if(![16,24,32].includes(t))throw new Error("aes: invalid key size, should be 16, 24 or 32, got "+t);const{sbox2:n}=b,s=[];(0,r.uf)(e)||s.push(e=(0,r.HV)(e));const i=(0,r.Jq)(e),o=i.length,a=e=>I(n,e,e,e,e),c=new Uint32Array(t+28);c.set(i);for(let r=o;r<c.length;r++){let e=c[r-1];r%o===0?e=a(m(e))^v[r/o-1]:o>6&&r%o===4&&(e=a(e)),c[r]=c[r-o]^e}return(0,r.ru)(...s),c}function P(e,t,n,r,s,i){return e[n<<8&65280|r>>>8&255]^t[s>>>8&65280|i>>>24&255]}function I(e,t,n,r,s){return e[255&t|65280&n]|e[r>>>16&255|s>>>16&65280]<<16}function k(e,t,n,r,s){const{sbox2:i,T01:o,T23:a}=b;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const l=e.length/4-2;for(let u=0;u<l;u++){const i=e[c++]^P(o,a,t,n,r,s),l=e[c++]^P(o,a,n,r,s,t),u=e[c++]^P(o,a,r,s,t,n),h=e[c++]^P(o,a,s,t,n,r);t=i,n=l,r=u,s=h}return{s0:e[c++]^I(i,t,n,r,s),s1:e[c++]^I(i,n,r,s,t),s2:e[c++]^I(i,r,s,t,n),s3:e[c++]^I(i,s,t,n,r)}}function x(e,t,n,s){(0,r.gk)(t,h),(0,r.gk)(n);const i=n.length;s=(0,r.M_)(i,s),(0,r.AZ)(n,s);const o=t,a=(0,r.Jq)(o);let{s0:c,s1:l,s2:u,s3:d}=k(e,a[0],a[1],a[2],a[3]);const p=(0,r.Jq)(n),f=(0,r.Jq)(s);for(let r=0;r+4<=p.length;r+=4){f[r+0]=p[r+0]^c,f[r+1]=p[r+1]^l,f[r+2]=p[r+2]^u,f[r+3]=p[r+3]^d;let t=1;for(let e=o.length-1;e>=0;e--)t=t+(255&o[e])|0,o[e]=255&t,t>>>=8;({s0:c,s1:l,s2:u,s3:d}=k(e,a[0],a[1],a[2],a[3]))}const g=h*Math.floor(p.length/4);if(g<i){const e=new Uint32Array([c,l,u,d]),t=(0,r.u8)(e);for(let r=g,o=0;r<i;r++,o++)s[r]=n[r]^t[o];(0,r.ru)(e)}return s}const N=(0,r.uU)({blockSize:16,nonceLength:16},(function(e,t){function n(n,s){if((0,r.gk)(n),void 0!==s&&((0,r.gk)(s),!(0,r.uf)(s)))throw new Error("unaligned destination");const i=E(e),o=(0,r.HV)(t),a=[i,o];(0,r.uf)(n)||a.push(n=(0,r.HV)(n));const c=x(i,o,n,s);return(0,r.ru)(...a),c}return{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}))},74207:function(e,t,n){"use strict";function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function a(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function c(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function l(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function u(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}n.d(t,{$H:function(){return I},$h:function(){return i},AZ:function(){return y},GL:function(){return u},HV:function(){return x},Hq:function(){return P},Hv:function(){return f},Jq:function(){return c},M_:function(){return E},O0:function(){return g},VE:function(){return m},Wd:function(){return b},eB:function(){return o},eV:function(){return w},gk:function(){return s},ru:function(){return l},u8:function(){return a},uU:function(){return v},uf:function(){return k}});const h=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),d=(()=>"function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex)(),p=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function f(e){return function(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x"+e)}(function(e){if(s(e),d)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=p[e[n]];return t}(e))}function g(e){if("string"===typeof e)e=function(e){if("string"!==typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!r(e))throw new Error("Uint8Array expected, got "+typeof e);e=x(e)}return e}function m(e,t){return e.buffer===t.buffer&&e.byteOffset<t.byteOffset+t.byteLength&&t.byteOffset<e.byteOffset+e.byteLength}function y(e,t){if(m(e,t)&&e.byteOffset<t.byteOffset)throw new Error("complex overlap of input and output is not supported")}function w(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];s(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const t=e[r];n.set(t,s),s+=t.length}return n}function b(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}const v=(e,t)=>{function n(n,...r){if(s(n),!h)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==e.nonceLength){const t=r[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?s(t):s(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==r[1]&&s(r[1]);const o=t(n,...r),a=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");s(t)}};let c=!1;return{encrypt(e,t){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,s(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(s(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(n,e),n};function E(e,t,n=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!k(t))throw new Error("invalid output, must be aligned");return t}function P(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,a,r)}function I(e,t,n){!function(e){if("boolean"!==typeof e)throw new Error(`boolean expected, not ${e}`)}(n);const r=new Uint8Array(16),s=u(r);return P(s,0,BigInt(t),n),P(s,8,BigInt(e),n),r}function k(e){return e.byteOffset%4===0}function x(e){return Uint8Array.from(e)}},20830:function(e,t,n){"use strict";n.d(t,{bP:function(){return b}});var r=n(4359),s=n(66409);r.VR;r.VR;const i=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=(()=>Uint8Array.from(new Array(16).fill(0).map(((e,t)=>t))))(),a=(()=>o.map((e=>(9*e+5)%16)))(),c=(()=>{const e=[[o],[a]];for(let t=0;t<4;t++)for(let n of e)n.push(n[t].map((e=>i[e])));return e})(),l=(()=>c[0])(),u=(()=>c[1])(),h=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>Uint8Array.from(e))),d=l.map(((e,t)=>e.map((e=>h[t][e])))),p=u.map(((e,t)=>e.map((e=>h[t][e])))),f=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),g=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function m(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const y=new Uint32Array(16);class w extends r.VR{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let s=0;s<16;s++,t+=4)y[s]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,a=0|this.h2,c=a,h=0|this.h3,w=h,b=0|this.h4,v=b;for(let E=0;E<5;E++){const e=4-E,t=f[E],P=g[E],I=l[E],k=u[E],x=d[E],N=p[E];for(let r=0;r<16;r++){const e=(0,s.XG)(n+m(E,i,a,h)+y[I[r]]+t,x[r])+b|0;n=b,b=h,h=0|(0,s.XG)(a,10),a=i,i=e}for(let n=0;n<16;n++){const t=(0,s.XG)(r+m(e,o,c,w)+y[k[n]]+P,N[n])+v|0;r=v,v=w,w=0|(0,s.XG)(c,10),c=o,o=t}}this.set(this.h1+a+w|0,this.h2+h+v|0,this.h3+b+r|0,this.h4+n+o|0,this.h0+i+c|0)}roundClean(){(0,s.ru)(y)}destroy(){this.destroyed=!0,(0,s.ru)(this.buffer),this.set(0,0,0,0,0)}}const b=(0,s.V1)((()=>new w))},47410:function(e,t,n){"use strict";function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"===typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function o(e){if("function"!==typeof e)throw new Error("function expected");return!0}function a(e,t){if("string"!==typeof t)throw new Error(`${e}: string expected`);return!0}function c(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function l(e){if(!Array.isArray(e))throw new Error("array expected")}function u(e,t){if(!i(!0,t))throw new Error(`${e}: array of strings expected`)}function h(e,t){if(!i(!1,t))throw new Error(`${e}: array of numbers expected`)}function d(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function p(e){const t="string"===typeof e?e.split(""):e,n=t.length;u("alphabet",t);const r=new Map(t.map(((e,t)=>[e,t])));return{encode:r=>(l(r),r.map((r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]}))),decode:t=>(l(t),t.map((t=>{a("alphabet.decode",t);const n=r.get(t);if(void 0===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})))}}function f(e=""){return a("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(a("join.decode",t),t.split(e))}}function g(e,t="="){return c(e),a("padding",t),{encode(n){for(u("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){u("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--){if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding")}return n.slice(0,r)}}}function m(e){return o(e),{encode:e=>e,decode:t=>e(t)}}function y(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(l(e),!e.length)return[];let r=0;const s=[],i=Array.from(e,(e=>{if(c(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),o=i.length;for(;;){let e=0,a=!0;for(let s=r;s<o;s++){const o=i[s],c=t*e,l=c+o;if(!Number.isSafeInteger(l)||c/t!==e||l-o!==c)throw new Error("convertRadix: carry overflow");const u=l/n;e=l%n;const h=Math.floor(u);if(i[s]=h,!Number.isSafeInteger(h)||h*n+e!==l)throw new Error("convertRadix: carry overflow");a&&(h?a=!1:r=s)}if(s.push(e),a)break}for(let a=0;a<e.length-1&&0===e[a];a++)s.push(0);return s.reverse()}n.d(t,{Jq:function(){return D},P6:function(){return N},Xd:function(){return $}});const w=(e,t)=>0===t?e:w(t,e%t),b=(e,t)=>e+(t-w(e,t)),v=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function E(e,t,n,r){if(l(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(b(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${b(t,n)}`);let s=0,i=0;const o=v[t],a=v[n]-1,u=[];for(const l of e){if(c(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(s=s<<t|l,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)u.push((s>>i-n&a)>>>0);const e=v[i];if(void 0===e)throw new Error("invalid carry");s&=e-1}if(s=s<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&u.push(s>>>0),u}function P(e){c(e);return{encode:t=>{if(!r(t))throw new Error("radix.encode input should be Uint8Array");return y(Array.from(t),256,e)},decode:t=>(h("radix.decode",t),Uint8Array.from(y(t,e,256)))}}function I(e,t=!1){if(c(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(b(8,e)>32||b(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw new Error("radix2.encode input should be Uint8Array");return E(Array.from(n),8,e,!t)},decode:n=>(h("radix2.decode",n),Uint8Array.from(E(n,e,8,t)))}}function k(e){return o(e),function(...t){try{return e.apply(null,t)}catch(n){}}}function x(e,t){return c(e),o(t),{encode(n){if(!r(n))throw new Error("checksum.encode: input should be Uint8Array");const s=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(s,n.length),i},decode(n){if(!r(n))throw new Error("checksum.decode: input should be Uint8Array");const s=n.slice(0,-e),i=n.slice(-e),o=t(s).slice(0,e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw new Error("Invalid checksum");return s}}}const N={alphabet:p,chain:d,checksum:x,convertRadix:y,convertRadix2:E,radix:P,radix2:I,join:f,padding:g},S=d(I(4),p("0123456789ABCDEF"),f("")),R=d(I(5),p("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),g(5),f("")),A=(d(I(5),p("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),d(I(5),p("0123456789ABCDEFGHIJKLMNOPQRSTUV"),g(5),f("")),d(I(5),p("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),d(I(5),p("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),m((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),(()=>"function"===typeof Uint8Array.from([]).toBase64&&"function"===typeof Uint8Array.fromBase64)()),O=(e,t)=>{a("base64",e);const n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})},T=A?{encode:e=>(s(e),e.toBase64()),decode:e=>O(e,!1)}:d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g(6),f("")),_=(d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),A?{encode:e=>(s(e),e.toBase64({alphabet:"base64url"})),decode:e=>O(e,!0)}:d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),g(6),f(""))),C=(d(I(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f("")),e=>d(P(58),p(e),f(""))),D=C("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),U=(C("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),C("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),[0,2,3,5,6,7,9,10,11]),L={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=D.encode(r).padStart(U[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),s=U.indexOf(r.length),i=D.decode(r);for(let e=0;e<i.length-s;e++)if(0!==i[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-s)))}return Uint8Array.from(t)}},$=e=>d(x(4,(t=>e(e(t)))),D),B=d(p("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),F=[996825010,642813549,513874426,1027748829,705979059];function M(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<F.length;r++)1===(t>>r&1)&&(n^=F[r]);return n}function j(e,t,n=1){const r=e.length;let s=1;for(let i=0;i<r;i++){const t=e.charCodeAt(i);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);s=M(s)^t>>5}s=M(s);for(let i=0;i<r;i++)s=M(s)^31&e.charCodeAt(i);for(let i of t)s=M(s)^i;for(let i=0;i<6;i++)s=M(s);return s^=n,B.encode(E([s%v[30]],30,5,!1))}function q(e){const t="bech32"===e?1:734539939,n=I(5),s=n.decode,i=n.encode,o=k(s);function c(e,n,s=90){a("bech32.encode prefix",e),r(n)&&(n=Array.from(n)),h("bech32.encode",n);const i=e.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const o=i+7+n.length;if(!1!==s&&o>s)throw new TypeError(`Length ${o} exceeds limit ${s}`);const c=e.toLowerCase(),l=j(c,n,t);return`${c}1${B.encode(n)}${l}`}function l(e,n=90){a("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const s=e.toLowerCase();if(e!==s&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=s.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=s.slice(0,i),c=s.slice(i+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const l=B.decode(c).slice(0,-6),u=j(o,l,t);if(!c.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}return{encode:c,decode:l,encodeFromBytes:function(e,t){return c(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:n}=l(e,!1);return{prefix:t,words:n,bytes:s(n)}},decodeUnsafe:k(l),fromWords:s,fromWordsUnsafe:o,toWords:i}}q("bech32"),q("bech32m");const K={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)};(()=>"function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex)()||d(I(4),p("0123456789abcdef"),f(""),m((e=>{if("string"!==typeof e||e.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})))},55536:function(e,t,n){"use strict";n.d(t,{B:function(){return y}});var r=n(55525),s=n(89326),i=n(9905),o=n(20830),a=n(45602),c=n(66409),l=n(47410);const u=s.kA.ProjectivePoint,h=(0,l.Xd)(a.JQ);function d(e){(0,c.gk)(e);const t=0===e.length?"0":(0,c.ci)(e);return BigInt("0x"+t)}const p=(0,c.iY)("Bitcoin seed"),f={private:76066276,public:76067358},g=2147483648,m=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+e);const t=new Uint8Array(4);return(0,c.GL)(t).setUint32(0,e,!1),t};class y{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.GL)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,c.eV)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=f){if((0,c.gk)(e),8*e.length<128||8*e.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);const n=(0,i.b)(a.o,p,e);return new y({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=f){const n=h.decode(e),r=(0,c.GL)(n),s=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},o=n.slice(45),a=0===o[0];if(s!==t[a?"private":"public"])throw new Error("Version mismatch");return new y(a?{...i,privateKey:o.slice(1)}:{...i,publicKey:o})}static fromJSON(e){return y.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!==typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||f,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!s.kA.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"===typeof e.privateKey?e.privateKey:d(e.privateKey),this.privKeyBytes=function(e){if("bigint"!==typeof e)throw new Error("bigint expected");return(0,c.nr)(e.toString(16).padStart(64,"0"))}(this.privKey),this.pubKey=s.kA.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=u.fromHex(e.publicKey).toRawBytes(!0)}var t;this.pubHash=(t=this.pubKey,(0,o.bP)((0,a.JQ)(t)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const r of t){const e=/^(\d+)('?)$/.exec(r),t=e&&e[1];if(!e||3!==e.length||"string"!==typeof t)throw new Error("invalid child index: "+r);let s=+t;if(!Number.isSafeInteger(s)||s>=g)throw new Error("Invalid index");"'"===e[2]&&(s+=g),n=n.deriveChild(s)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=m(e);if(e>=g){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=(0,c.eV)(new Uint8Array([0]),e,t)}else t=(0,c.eV)(this.pubKey,t);const n=(0,i.b)(a.o,this.chainCode,t),o=d(n.slice(0,32)),l=n.slice(32);if(!s.kA.utils.isValidPrivateKey(o))throw new Error("Tweak bigger than curve order");const h={versions:this.versions,chainCode:l,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=(0,r.wQ)(this.privKey+o,s.kA.CURVE.n);if(!s.kA.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");h.privateKey=e}else{const e=u.fromHex(this.pubKey).add(u.fromPrivateKey(o));if(e.equals(u.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");h.publicKey=e.toRawBytes(!0)}return new y(h)}catch(p){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,c.gk)(e,32),s.kA.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,c.gk)(e,32),(0,c.gk)(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=s.kA.Signature.fromCompact(t)}catch(r){return!1}return s.kA.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,c.gk)(t,33),(0,c.eV)(m(e),new Uint8Array([this.depth]),m(this.parentFingerprint),m(this.index),this.chainCode,t)}}},66890:function(e,t,n){"use strict";n.d(t,{JJ:function(){return m},OF:function(){return p},Z1:function(){return b},_I:function(){return y}});var r=n(9905),s=n(66409);function i(e,t,n,i){(0,s.z3)(e);const o=(0,s.U5)({dkLen:32,asyncTick:10},i),{c:a,dkLen:c,asyncTick:l}=o;if((0,s.k8)(a),(0,s.k8)(c),(0,s.k8)(l),a<1)throw new Error("iterations (c) should be >= 1");const u=(0,s.A0)(t),h=(0,s.A0)(n),d=new Uint8Array(c),p=r.b.create(e,u),f=p._cloneInto().update(h);return{c:a,dkLen:c,asyncTick:l,DK:d,PRF:p,PRFSalt:f}}function o(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),(0,s.ru)(i),n}var a=n(45602),c=n(47410);const l=e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0];function u(e){if("string"!==typeof e)throw new TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function h(e){const t=u(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function d(e){(0,s.gk)(e,16,20,24,28,32)}function p(e,t=128){if((0,s.k8)(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return m((0,s.O6)(t/8),e)}const f=e=>{const t=8-e.length/4;return new Uint8Array([(0,a.JQ)(e)[0]>>t<<t])};function g(e){if(!Array.isArray(e)||2048!==e.length||"string"!==typeof e[0])throw new Error("Wordlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!==typeof e)throw new Error("wordlist: non-string element: "+e)})),c.P6.chain(c.P6.checksum(1,f),c.P6.radix2(11,!0),c.P6.alphabet(e))}function m(e,t){d(e);return g(t).encode(e).join(l(t)?"\u3000":" ")}function y(e,t){try{!function(e,t){const{words:n}=h(e),r=g(t).decode(n);d(r)}(e,t)}catch(n){return!1}return!0}const w=e=>u("mnemonic"+e);function b(e,t=""){return function(e,t,n,r){const{c:a,dkLen:c,DK:l,PRF:u,PRFSalt:h}=i(e,t,n,r);let d;const p=new Uint8Array(4),f=(0,s.GL)(p),g=new Uint8Array(u.outputLen);for(let s=1,i=0;i<c;s++,i+=u.outputLen){const e=l.subarray(i,i+u.outputLen);f.setInt32(0,s,!1),(d=h._cloneInto(d)).update(p).digestInto(g),e.set(g.subarray(0,e.length));for(let t=1;t<a;t++){u._cloneInto(d).update(g).digestInto(g);for(let t=0;t<e.length;t++)e[t]^=g[t]}}return o(u,h,l,d,g)}(a.o,h(e).nfkd,w(t),{c:2048,dkLen:64})}},25957:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});const r="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")},70259:function(e,t,n){"use strict";n.d(t,{DAppKitProvider:function(){return d},J3:function(){return p},Os:function(){return f},hB:function(){return g}});var r=n(67294),s=n(58139),i=n(73932),o=n(85893);const a=new Set(["children","localName","ref","style","className"]),c=new WeakMap,l=(e,t,n,r,s)=>{const i=s?.[t];void 0===i?(e[t]=n,null==n&&t in HTMLElement.prototype&&e.removeAttribute(t)):n!==r&&((e,t,n)=>{let r=c.get(e);void 0===r&&c.set(e,r=new Map);let s=r.get(t);void 0!==n?void 0===s?(r.set(t,s={handleEvent:n}),e.addEventListener(t,s)):s.handleEvent=n:void 0!==s&&(r.delete(t),e.removeEventListener(t,s))})(e,i,n)};n(90354),n(10330);var u=(0,r.createContext)(void 0),h=({children:e,connex:t})=>{let[n,a]=(0,r.useState)(t.wallet.state.address),[c,l]=(0,r.useState)(t.wallet.state.accountDomain),[h,d]=(0,r.useState)(t.wallet.state.isAccountDomainLoading),[p,f]=(0,r.useState)(t.wallet.state.source),[g,m]=(0,r.useState)(t.wallet.state.connectionCertificate);(0,r.useEffect)((()=>{let e=(0,i.VW)(t.wallet.state,"address",(e=>{a(e)})),n=(0,i.VW)(t.wallet.state,"accountDomain",(e=>{l(e)})),r=(0,i.VW)(t.wallet.state,"isAccountDomainLoading",(e=>{d(e)})),s=(0,i.VW)(t.wallet.state,"source",(e=>{f(e)})),o=(0,i.VW)(t.wallet.state,"connectionCertificate",(e=>{m(e)}));return()=>{e(),n(),r(),s(),o()}}),[t.wallet.state]);let y=(0,r.useCallback)((()=>{s.ly.modal.open()}),[]),w=(0,r.useCallback)((()=>{s.ly.modal.close()}),[]),b=(0,r.useCallback)((e=>s.ly.modal.onConnectionStatusChange(e)),[]),v=(0,r.useMemo)((()=>({connex:{thor:t.thor,vendor:t.vendor},wallet:{setSource:t.wallet.setSource,disconnect:t.wallet.disconnect,connect:t.wallet.connect,availableWallets:t.wallet.state.availableSources,account:n,accountDomain:c,isAccountDomainLoading:h,source:p,connectionCertificate:g,signTypedData:t.wallet.signTypedData},modal:{open:y,close:w,onConnectionStatusChange:b}})),[t,n,c,h,p,g,y,w,b]);return(0,o.jsx)(u.Provider,{value:v,children:e})},d=({children:e,nodeUrl:t,genesis:n,walletConnectOptions:i,usePersistence:a=!1,logLevel:c,requireCertificate:l,themeMode:u,themeVariables:d,i18n:p,language:f,modalParent:g,onSourceClick:m,connectionCertificate:y,allowedWallets:w})=>{let[b,v]=(0,r.useState)(null);return(0,r.useEffect)((()=>{v(s.ly.configure({nodeUrl:t,genesis:n,walletConnectOptions:i,usePersistence:a,logLevel:c,requireCertificate:l,themeVariables:d,themeMode:u,i18n:p,language:f,modalParent:g,onSourceClick:m,connectionCertificate:y,allowedWallets:w}))}),[t,n,i,a,c,l,d,u,p,f,g,m,y,w]),b?(0,o.jsx)(h,{connex:b,children:e}):null},p=()=>{let e=(0,r.useContext)(u);if(!e)throw new Error('"useConnex" must be used within a ConnexProvider');return e.connex},f=()=>{let e=(0,r.useContext)(u);if(!e)throw new Error('"useWallet" must be used within a ConnexProvider');return e.wallet},g=()=>{let e=(0,r.useContext)(u);if(!e)throw new Error('"useWalletModal" must be used within a ConnexProvider');return e.modal};(({react:e,tagName:t,elementClass:n,events:r,displayName:s})=>{const i=new Set(Object.keys(r??{})),o=e.forwardRef(((s,o)=>{const c=e.useRef(new Map),u=e.useRef(null),h={},d={};for(const[e,t]of Object.entries(s))a.has(e)?h["className"===e?"class":e]=t:i.has(e)||e in n.prototype?d[e]=t:h[e]=t;return e.useLayoutEffect((()=>{if(null===u.current)return;const e=new Map;for(const t in d)l(u.current,t,s[t],c.current.get(t),r),c.current.delete(t),e.set(t,s[t]);for(const[t,n]of c.current)l(u.current,t,void 0,n,r);c.current=e})),e.useLayoutEffect((()=>{u.current?.removeAttribute("defer-hydration")}),[]),h.suppressHydrationWarning=!0,e.createElement(t,{...h,ref:e.useCallback((e=>{u.current=e,"function"==typeof o?o(e):null!==o&&(o.current=e)}),[o])})}));o.displayName=s??n.name})({tagName:"vdk-button",elementClass:s.zx,react:r})},70256:function(e,t,n){"use strict";n.d(t,{fl:function(){return x},iv:function(){return c},Ts:function(){return P},Qu:function(){return I}});const r=globalThis,s=r.ShadowRoot&&(void 0===r.ShadyCSS||r.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),o=new WeakMap;class a{constructor(e,t,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(s&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&o.set(t,e))}return e}toString(){return this.cssText}}const c=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1]),e[0]);return new a(n,e,i)},l=(e,t)=>{if(s)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const n of t){const t=document.createElement("style"),s=r.litNonce;void 0!==s&&t.setAttribute("nonce",s),t.textContent=n.cssText,e.appendChild(t)}},u=s?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new a("string"==typeof e?e:e+"",void 0,i))(t)})(e):e,{is:h,defineProperty:d,getOwnPropertyDescriptor:p,getOwnPropertyNames:f,getOwnPropertySymbols:g,getPrototypeOf:m}=Object,y=globalThis,w=y.trustedTypes,b=w?w.emptyScript:"",v=y.reactiveElementPolyfillSupport,E=(e,t)=>e,P={toAttribute(e,t){switch(t){case Boolean:e=e?b:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},I=(e,t)=>!h(e,t),k={attribute:!0,type:String,converter:P,reflect:!1,useDefault:!1,hasChanged:I};Symbol.metadata??=Symbol("metadata"),y.litPropertyMetadata??=new WeakMap;class x extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=k){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&d(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){const{get:r,set:s}=p(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:r,set(t){const i=r?.call(this);s?.call(this,t),this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??k}static _$Ei(){if(this.hasOwnProperty(E("elementProperties")))return;const e=m(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(E("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(E("properties"))){const e=this.properties,t=[...f(e),...g(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const e=this._$Eu(t,n);void 0!==e&&this._$Eh.set(e,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(u(e))}else void 0!==e&&t.push(u(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return l(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(void 0!==r&&!0===n.reflect){const s=(void 0!==n.converter?.toAttribute?n.converter:P).toAttribute(t,n.type);this._$Em=e,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(e,t){const n=this.constructor,r=n._$Eh.get(e);if(void 0!==r&&this._$Em!==r){const e=n.getPropertyOptions(r),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:P;this._$Em=r;const i=s.fromAttribute(t,e.type);this[r]=i??this._$Ej?.get(r)??i,this._$Em=null}}requestUpdate(e,t,n){if(void 0!==e){const r=this.constructor,s=this[e];if(n??=r.getPropertyOptions(e),!((n.hasChanged??I)(s,t)||n.useDefault&&n.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(r._$Eu(e,n))))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:r,wrapped:s},i){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,i??t??this[e]),!0!==s||void 0!==i)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),!0===r&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e){const{wrapped:e}=n,r=this[t];!0!==e||this._$AL.has(t)||void 0===r||this.C(t,void 0,n,r)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((e=>this._$ET(e,this[e]))),this._$EM()}updated(e){}firstUpdated(e){}}x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[E("elementProperties")]=new Map,x[E("finalized")]=new Map,v?.({ReactiveElement:x}),(y.reactiveElementVersions??=[]).push("2.1.1")},32471:function(e,t,n){"use strict";n.d(t,{Mo:function(){return r},Cb:function(){return a},IO:function(){return l}});const r=e=>(t,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)};var s=n(70256);const i={attribute:!0,type:String,converter:s.Ts,reflect:!1,hasChanged:s.Qu},o=(e=i,t,n)=>{const{kind:r,metadata:s}=n;let o=globalThis.litPropertyMetadata.get(s);if(void 0===o&&globalThis.litPropertyMetadata.set(s,o=new Map),"setter"===r&&((e=Object.create(e)).wrapped=!0),o.set(n.name,e),"accessor"===r){const{name:r}=n;return{set(n){const s=t.get.call(this);t.set.call(this,n),this.requestUpdate(r,s,e)},init(t){return void 0!==t&&this.C(r,void 0,e,t),t}}}if("setter"===r){const{name:r}=n;return function(n){const s=this[r];t.call(this,n),this.requestUpdate(r,s,e)}}throw Error("Unsupported decorator location: "+r)};function a(e){return(t,n)=>"object"==typeof n?o(e,t,n):((e,t,n)=>{const r=t.hasOwnProperty(n);return t.constructor.createProperty(n,e),r?Object.getOwnPropertyDescriptor(t,n):void 0})(e,t,n)}const c=(e,t,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&"object"!=typeof t&&Object.defineProperty(e,t,n),n);function l(e,t){return(n,r,s)=>{const i=t=>t.renderRoot?.querySelector(e)??null;if(t){const{get:e,set:t}="object"==typeof r?n:s??(()=>{const e=Symbol();return{get(){return this[e]},set(t){this[e]=t}}})();return c(n,r,{get(){let n=e.call(this);return void 0===n&&(n=i(this),(null!==n||this.hasUpdated)&&t.call(this,n)),n}})}return c(n,r,{get(){return i(this)}})}}},81964:function(e,t,n){"use strict";n.d(t,{oi:function(){return V},iv:function(){return r.iv},dy:function(){return x},Ld:function(){return R},YP:function(){return N}});var r=n(70256);const s=globalThis,i=s.trustedTypes,o=i?i.createPolicy("lit-html",{createHTML:e=>e}):void 0,a="$lit$",c=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+c,u=`<${l}>`,h=document,d=()=>h.createComment(""),p=e=>null===e||"object"!=typeof e&&"function"!=typeof e,f=Array.isArray,g=e=>f(e)||"function"==typeof e?.[Symbol.iterator],m="[ \t\n\f\r]",y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,w=/-->/g,b=/>/g,v=RegExp(`>|${m}(?:([^\\s"'>=/]+)(${m}*=${m}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),E=/'/g,P=/"/g,I=/^(?:script|style|textarea|title)$/i,k=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),x=k(1),N=k(2),S=(k(3),Symbol.for("lit-noChange")),R=Symbol.for("lit-nothing"),A=new WeakMap,O=h.createTreeWalker(h,129);function T(e,t){if(!f(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(t):t}const _=(e,t)=>{const n=e.length-1,r=[];let s,i=2===t?"<svg>":3===t?"<math>":"",o=y;for(let l=0;l<n;l++){const t=e[l];let n,h,d=-1,p=0;for(;p<t.length&&(o.lastIndex=p,h=o.exec(t),null!==h);)p=o.lastIndex,o===y?"!--"===h[1]?o=w:void 0!==h[1]?o=b:void 0!==h[2]?(I.test(h[2])&&(s=RegExp("</"+h[2],"g")),o=v):void 0!==h[3]&&(o=v):o===v?">"===h[0]?(o=s??y,d=-1):void 0===h[1]?d=-2:(d=o.lastIndex-h[2].length,n=h[1],o=void 0===h[3]?v:'"'===h[3]?P:E):o===P||o===E?o=v:o===w||o===b?o=y:(o=v,s=void 0);const f=o===v&&e[l+1].startsWith("/>")?" ":"";i+=o===y?t+u:d>=0?(r.push(n),t.slice(0,d)+a+t.slice(d)+c+f):t+c+(-2===d?l:f)}return[T(e,i+(e[n]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),r]};class C{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let s=0,o=0;const u=e.length-1,h=this.parts,[p,f]=_(e,t);if(this.el=C.createElement(p,n),O.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(r=O.nextNode())&&h.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const e of r.getAttributeNames())if(e.endsWith(a)){const t=f[o++],n=r.getAttribute(e).split(c),i=/([.?@])?(.*)/.exec(t);h.push({type:1,index:s,name:i[2],strings:n,ctor:"."===i[1]?B:"?"===i[1]?F:"@"===i[1]?M:$}),r.removeAttribute(e)}else e.startsWith(c)&&(h.push({type:6,index:s}),r.removeAttribute(e));if(I.test(r.tagName)){const e=r.textContent.split(c),t=e.length-1;if(t>0){r.textContent=i?i.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],d()),O.nextNode(),h.push({type:2,index:++s});r.append(e[t],d())}}}else if(8===r.nodeType)if(r.data===l)h.push({type:2,index:s});else{let e=-1;for(;-1!==(e=r.data.indexOf(c,e+1));)h.push({type:7,index:s}),e+=c.length-1}s++}}static createElement(e,t){const n=h.createElement("template");return n.innerHTML=e,n}}function D(e,t,n=e,r){if(t===S)return t;let s=void 0!==r?n._$Co?.[r]:n._$Cl;const i=p(t)?void 0:t._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),void 0===i?s=void 0:(s=new i(e),s._$AT(e,n,r)),void 0!==r?(n._$Co??=[])[r]=s:n._$Cl=s),void 0!==s&&(t=D(e,s._$AS(e,t.values),s,r)),t}class U{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,r=(e?.creationScope??h).importNode(t,!0);O.currentNode=r;let s=O.nextNode(),i=0,o=0,a=n[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new L(s,s.nextSibling,this,e):1===a.type?t=new a.ctor(s,a.name,a.strings,this,e):6===a.type&&(t=new j(s,this,e)),this._$AV.push(t),a=n[++o]}i!==a?.index&&(s=O.nextNode(),i++)}return O.currentNode=h,r}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class L{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,r){this.type=2,this._$AH=R,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=D(this,e,t),p(e)?e===R||null==e||""===e?(this._$AH!==R&&this._$AR(),this._$AH=R):e!==this._$AH&&e!==S&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):g(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==R&&p(this._$AH)?this._$AA.nextSibling.data=e:this.T(h.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=C.createElement(T(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(t);else{const e=new U(r,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=A.get(e.strings);return void 0===t&&A.set(e.strings,t=new C(e)),t}k(e){f(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const s of e)r===t.length?t.push(n=new L(this.O(d()),this.O(d()),this,this.options)):n=t[r],n._$AI(s),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class ${get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,r,s){this.type=1,this._$AH=R,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=s,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=R}_$AI(e,t=this,n,r){const s=this.strings;let i=!1;if(void 0===s)e=D(this,e,t,0),i=!p(e)||e!==this._$AH&&e!==S,i&&(this._$AH=e);else{const r=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=D(this,r[n+o],t,o),a===S&&(a=this._$AH[o]),i||=!p(a)||a!==this._$AH[o],a===R?e=R:e!==R&&(e+=(a??"")+s[o+1]),this._$AH[o]=a}i&&!r&&this.j(e)}j(e){e===R?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class B extends ${constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===R?void 0:e}}class F extends ${constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==R)}}class M extends ${constructor(e,t,n,r,s){super(e,t,n,r,s),this.type=5}_$AI(e,t=this){if((e=D(this,e,t,0)??R)===S)return;const n=this._$AH,r=e===R&&n!==R||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==R&&(n===R||r);r&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class j{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){D(this,e)}}const q=s.litHtmlPolyfillSupport;q?.(C,L),(s.litHtmlVersions??=[]).push("3.3.1");const K=globalThis;class V extends r.fl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{const r=n?.renderBefore??t;let s=r._$litPart$;if(void 0===s){const e=n?.renderBefore??null;r._$litPart$=s=new L(t.insertBefore(d(),e),e,void 0,n??{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return S}}V._$litElement$=!0,V.finalized=!0,K.litElementHydrateSupport?.({LitElement:V});const z=K.litElementPolyfillSupport;z?.({LitElement:V});(K.litElementVersions??=[]).push("4.2.1")},10330:function(e,t,n){"use strict";n.d(t,{ny:function(){return po},o7:function(){return Bi},Yo:function(){return oo}});var r=n(93405),s=n(1996),i=n(90354),o=n(17832),a=n(73932),c=n(38662),l=n(17187),u=n.n(l),h=n(82673),d=n(48764).Buffer;function p(e,...t){try{return(n=e(...t))&&"function"===typeof n.then?n:Promise.resolve(n)}catch(r){return Promise.reject(r)}var n}function f(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"===typeof e.toJSON)return f(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const g="base64:";function m(e){return"string"===typeof e?e:g+function(e){if(globalThis.Buffer)return d.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function y(e){return"string"!==typeof e?e:e.startsWith(g)?function(e){if(globalThis.Buffer)return d.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(g.length)):e}function w(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function b(...e){return w(e.join(":"))}function v(e){return(e=w(e))?e+":":""}const E=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function P(e={}){const t={mounts:{"":e.driver||E()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=e=>{for(const n of t.mountpoints)if(e.startsWith(n))return{base:n,relativeKey:e.slice(n.length),driver:t.mounts[n]};return{base:"",relativeKey:e,driver:t.mounts[""]}},r=(e,n)=>t.mountpoints.filter((t=>t.startsWith(e)||n&&e.startsWith(t))).map((n=>({relativeBase:e.length>n.length?e.slice(n.length):void 0,mountpoint:n,driver:t.mounts[n]}))),s=(e,n)=>{if(t.watching){n=w(n);for(const r of t.watchListeners)r(e,n)}},i=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,r)=>{const s=new Map,i=e=>{let t=s.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},s.set(e.base,t)),t};for(const o of e){const e="string"===typeof o,r=w(e?o:o.key),s=e?void 0:o.value,a=e||!o.options?t:{...t,...o.options},c=n(r);i(c).items.push({key:r,value:s,relativeKey:c.relativeKey,options:a})}return Promise.all([...s.values()].map((e=>r(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=w(e);const{relativeKey:r,driver:s}=n(e);return p(s.hasItem,r,t)},getItem(e,t={}){e=w(e);const{relativeKey:r,driver:s}=n(e);return p(s.getItem,r,t).then((e=>(0,h.ZP)(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?p(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:b(e.base,t.key),value:(0,h.ZP)(t.value)}))))):Promise.all(e.items.map((t=>p(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:(0,h.ZP)(e)})))))))),getItemRaw(e,t={}){e=w(e);const{relativeKey:r,driver:s}=n(e);return s.getItemRaw?p(s.getItemRaw,r,t):p(s.getItem,r,t).then((e=>y(e)))},async setItem(e,t,r={}){if(void 0===t)return a.removeItem(e);e=w(e);const{relativeKey:i,driver:o}=n(e);o.setItem&&(await p(o.setItem,i,f(t),r),o.watch||s("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return p(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:f(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>p(e.driver.setItem,t.relativeKey,f(t.value),t.options))))}))},async setItemRaw(e,t,r={}){if(void 0===t)return a.removeItem(e,r);e=w(e);const{relativeKey:i,driver:o}=n(e);if(o.setItemRaw)await p(o.setItemRaw,i,t,r);else{if(!o.setItem)return;await p(o.setItem,i,m(t),r)}o.watch||s("update",e)},async removeItem(e,t={}){"boolean"===typeof t&&(t={removeMeta:t}),e=w(e);const{relativeKey:r,driver:i}=n(e);i.removeItem&&(await p(i.removeItem,r,t),(t.removeMeta||t.removeMata)&&await p(i.removeItem,r+"$",t),i.watch||s("remove",e))},async getMeta(e,t={}){"boolean"===typeof t&&(t={nativeOnly:t}),e=w(e);const{relativeKey:r,driver:s}=n(e),i=Object.create(null);if(s.getMeta&&Object.assign(i,await p(s.getMeta,r,t)),!t.nativeOnly){const e=await p(s.getItem,r+"$",t).then((e=>(0,h.ZP)(e)));e&&"object"===typeof e&&("string"===typeof e.atime&&(e.atime=new Date(e.atime)),"string"===typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(i,e))}return i},setMeta(e,t,n={}){return this.setItem(e+"$",t,n)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=v(e);const n=r(e,!0);let s=[];const i=[];let o=!0;for(const r of n){r.driver.flags?.maxDepth||(o=!1);const e=await p(r.driver.getKeys,r.relativeBase,t);for(const t of e){const e=r.mountpoint+w(t);s.some((t=>e.startsWith(t)))||i.push(e)}s=[r.mountpoint,...s.filter((e=>!e.startsWith(r.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return i.filter((n=>(!a||function(e,t){if(void 0===t)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}(n,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(n,e)))},async clear(e,t={}){e=v(e),await Promise.all(r(e,!1).map((async e=>{if(e.driver.clear)return p(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const n=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(n.map((n=>e.driver.removeItem(n,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>k(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await I(t.mounts[e],s,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await i()}),async unwatch(){t.watchListeners=[],await i()},mount(e,n){if((e=v(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=n,t.watching&&Promise.resolve(I(n,s,e)).then((n=>{t.unwatch[e]=n})).catch(console.error),a},async unmount(e,n=!0){(e=v(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),n&&await k(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=w(e)+":";const t=n(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=w(e);return r(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,n={})=>a.setItem(e,t,n),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function I(e,t,n){return e.watch?e.watch(((e,r)=>t(e,n+r))):()=>{}}async function k(e){"function"===typeof e.dispose&&await p(e.dispose)}var x=n(24678),N=n(85094);var S=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=e=>t+e;let r;return e.dbName&&e.storeName&&(r=(0,x.MT)(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof(await(0,x.U2)(n(e),r))>"u"),getItem:async e=>await(0,x.U2)(n(e),r)??null,setItem:(e,t)=>(0,x.t8)(n(e),t,r),removeItem:e=>(0,x.IV)(n(e),r),getKeys:()=>(0,x.XP)(r),clear:()=>(0,x.ZH)(r)}};class R{constructor(){this.indexedDb=P({driver:S({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,N.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{},O={exports:{}};function T(e){var t;return[e[0],(0,N.D)(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof A<"u"&&A.localStorage?O.exports=A.localStorage:typeof window<"u"&&window.localStorage?O.exports=window.localStorage:O.exports=new t}();class _{constructor(){this.localStorage=O.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(T)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return(0,N.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,N.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}const C=async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))};class D{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new _;this.storage=e;try{(async(e,t,n)=>{const r="wc_storage_version",s=await t.getItem(r);if(s&&s>=1)return void n(t);const i=await e.getKeys();if(!i.length)return void n(t);const o=[];for(;i.length;){const n=i.shift();if(!n)continue;const r=n.toLowerCase();if(r.includes("wc@")||r.includes("walletconnect")||r.includes("wc_")||r.includes("wallet_connect")){const r=await e.getItem(n);await t.setItem(n,r),o.push(n)}}await t.setItem(r,1),n(t),C(e,o)})(e,new R,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var U=n(46934),L=n(12044),$=n(38200);class B extends $.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class F extends $.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class M{constructor(e,t){this.logger=e,this.core=t}}class j extends $.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class q extends $.q{constructor(e){super()}}class K{constructor(e,t,n,r){this.core=e,this.logger=t,this.name=n}}class V extends $.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class z extends $.q{constructor(e,t){super(),this.core=e,this.logger=t}}class G{constructor(e,t){this.projectId=e,this.logger=t}}class H{constructor(e,t){this.projectId=e,this.logger=t}}u();class W{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}l.EventEmitter;class J{constructor(e){this.client=e}}var Z=n(49392),Y=n(15501),Q=n(512),X=n(31416),ee=n(73294),te=n(57664),ne=n(11799),re=n(43631),se=n(66736),ie=n(62873),oe=n(65755),ae=n(17563),ce=n(37968),le=n(34155);function ue(e,t){return e.includes(":")?[e]:t.chains||[]}const he="base10",de="base16",pe="base64pad",fe="utf8",ge=0,me=1,ye=0,we=1,be=12,ve=32;function Ee(){const e=(0,X.randomBytes)(ve);return(0,ne.BB)(e,de)}function Pe(e){const t=(0,ee.vp)((0,ne.mL)(e,fe));return(0,ne.BB)(t,de)}function Ie(e){return Number((0,ne.BB)(e,he))}function ke(e){const t=function(e){return(0,ne.mL)(`${e}`,he)}(typeof e.type<"u"?e.type:ge);if(Ie(t)===me&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,ne.mL)(e.senderPublicKey,de):void 0,r=typeof e.iv<"u"?(0,ne.mL)(e.iv,de):(0,X.randomBytes)(be);return function(e){if(Ie(e.type)===me){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,ne.BB)((0,ne.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),pe)}return(0,ne.BB)((0,ne.zo)([e.type,e.iv,e.sealed]),pe)}({type:t,sealed:new Y.OK((0,ne.mL)(e.symKey,de)).seal(r,(0,ne.mL)(e.message,fe)),iv:r,senderPublicKey:n})}function xe(e){const t=(0,ne.mL)(e,pe),n=t.slice(ye,we),r=we;if(Ie(n)===me){const e=r+ve,s=e+be,i=t.slice(r,e),o=t.slice(e,s);return{type:n,sealed:t.slice(s),iv:o,senderPublicKey:i}}const s=r+be,i=t.slice(r,s);return{type:n,sealed:t.slice(s),iv:i}}function Ne(e){const t=e?.type||ge;if(t===me){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Se(e){return e.type===me&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var Re=Object.defineProperty,Ae=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,_e=(e,t,n)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ce=(e,t)=>{for(var n in t||(t={}))Oe.call(t,n)&&_e(e,n,t[n]);if(Ae)for(var n of Ae(t))Te.call(t,n)&&_e(e,n,t[n]);return e};const De="ReactNative",Ue={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Le="js";function $e(){return typeof le<"u"&&typeof le.versions<"u"&&typeof le.versions.node<"u"}function Be(){return!(0,ie.getDocument)()&&!!(0,ie.getNavigator)()&&navigator.product===De}function Fe(){return!$e()&&!!(0,ie.getNavigator)()&&!!(0,ie.getDocument)()}function Me(){return Be()?Ue.reactNative:$e()?Ue.node:Fe()?Ue.browser:Ue.unknown}function je(e,t,r){const s=function(){if(Me()===Ue.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=(0,re.qY)();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),i=function(){var e;const t=Me();return t===Ue.browser?[t,(null==(e=(0,ie.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Le,r].join("-"),s,i].join("/")}function qe({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a}){const c=n.split("?"),l={auth:s,ua:je(e,t,r),projectId:i,useOnCloseEvent:o||void 0,origin:a||void 0},u=function(e,t){let n=ae.parse(e);return n=Ce(Ce({},n),t),ae.stringify(n)}(c[1]||"",l);return c[0]+"?"+u}function Ke(e,t){return e.filter((e=>t.includes(e))).length===e.length}function Ve(e){return Object.fromEntries(e.entries())}function ze(e){return new Map(Object.entries(e))}function Ge(e=se.FIVE_MINUTES,t){const n=(0,se.toMiliseconds)(e||se.FIVE_MINUTES);let r,s,i;return{resolve:e=>{i&&r&&(clearTimeout(i),r(e))},reject:e=>{i&&s&&(clearTimeout(i),s(e))},done:()=>new Promise(((e,o)=>{i=setTimeout((()=>{o(new Error(t))}),n),r=e,s=o}))}}function He(e,t,n){return new Promise((async(r,s)=>{const i=setTimeout((()=>s(new Error(n))),t);try{r(await e)}catch(o){s(o)}clearTimeout(i)}))}function We(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Je(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)r.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);r.id=Number(n)}return r}function Ze(e,t){return(0,se.fromMiliseconds)((t||Date.now())+(0,se.toMiliseconds)(e))}function Ye(e){return Date.now()>=(0,se.toMiliseconds)(e)}function Qe(e,t){return`${e}${t?`:${t}`:""}`}function Xe(e){return e?.relay||{protocol:"irn"}}function et(e){const t=ce.iO[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var tt=Object.defineProperty,nt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,at=(e,t,n)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function ct(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(r)){const s=t.replace(r,""),i=e[t];n[s]=i}})),n}function lt(e){const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,t),s=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",o=ae.parse(i);return{protocol:r,topic:ut(s[0]),version:parseInt(s[1],10),symKey:o.symKey,relay:ct(o),expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function ut(e){return e.startsWith("//")?e.substring(2):e}function ht(e){return`${e.protocol}:${e.topic}@${e.version}?`+ae.stringify(((e,t)=>nt(e,rt(t)))(((e,t)=>{for(var n in t||(t={}))it.call(t,n)&&at(e,n,t[n]);if(st)for(var n of st(t))ot.call(t,n)&&at(e,n,t[n]);return e})({symKey:e.symKey},function(e,t="-"){const n={};return Object.keys(e).forEach((r=>{const s="relay"+t+r;e[r]&&(n[s]=e[r])})),n}(e.relay)),{expiryTimestamp:e.expiryTimestamp}))}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function dt(e){const t=[];return e.forEach((e=>{const[n,r]=e.split(":");t.push(`${n}:${r}`)})),t}const pt={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ft={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function gt(e,t){const{message:n,code:r}=ft[e];return{message:t?`${n} ${t}`:n,code:r}}function mt(e,t){const{message:n,code:r}=pt[e];return{message:t?`${n} ${t}`:n,code:r}}function yt(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function wt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function bt(e){return typeof e>"u"}function vt(e,t){return!(!t||!bt(e))||"string"==typeof e&&!!e.trim().length}function Et(e,t){return!(!t||!bt(e))||"number"==typeof e&&!isNaN(e)}function Pt(e){return!(!vt(e,!1)||!e.includes(":"))&&2===e.split(":").length}function It(e){let t=!0;return yt(e)?e.length&&(t=e.every((e=>vt(e,!1)))):t=!1,t}function kt(e,t,n){let r=null;return Object.entries(e).forEach((([e,s])=>{if(r)return;const i=function(e,t,n){let r=null;return yt(t)&&t.length?t.forEach((e=>{r||Pt(e)||(r=mt("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Pt(e)||(r=mt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}(e,ue(e,s),`${t} ${n}`);i&&(r=i)})),r}function xt(e,t){let n=null;return yt(e)?e.forEach((e=>{n||function(e){if(vt(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Pt(e)}}return!1}(e)||(n=mt("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=mt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Nt(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const r=function(e,t){let n=null;return It(e?.methods)?It(e?.events)||(n=mt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=mt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);r&&(n=r)})),n}function St(e,t){let n=null;if(e&&wt(e)){const r=Nt(e,t);r&&(n=r);const s=function(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const r=xt(e?.accounts,`${t} namespace`);r&&(n=r)})),n}(e,t);s&&(n=s)}else n=gt("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Rt(e){return vt(e.protocol,!0)}function At(e){return typeof e<"u"&&null!==typeof e}function Ot(e,t){return!(!Pt(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...dt(e.accounts))})),t}(e).includes(t))}function Tt(e,t,n){return!!vt(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{dt(e.accounts).includes(t)&&n.push(...e.methods)})),n}(e,t).includes(n)}function _t(e,t,n){return!!vt(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{dt(e.accounts).includes(t)&&n.push(...e.events)})),n}(e,t).includes(n)}function Ct(e,t,n){let r=null;const s=function(e){const t={};return Object.keys(e).forEach((n=>{var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach((r=>{t[r]={methods:e[n].methods,events:e[n].events}}))})),t}(e),i=function(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const r=dt(e[n].accounts);r?.forEach((r=>{t[r]={accounts:e[n].accounts.filter((e=>e.includes(`${r}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}(t),o=Object.keys(s),a=Object.keys(i),c=Dt(Object.keys(e)),l=Dt(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(r=gt("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),Ke(o,a)||(r=gt("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||r)return;const s=dt(t[e].accounts);s.includes(e)||(r=gt("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${s.toString()}`))})),o.forEach((e=>{r||(Ke(s[e].methods,i[e].methods)?Ke(s[e].events,i[e].events)||(r=gt("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):r=gt("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),r}function Dt(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Ut(){const e=Me();return new Promise((t=>{switch(e){case Ue.browser:t(Fe()&&navigator?.onLine);break;case Ue.reactNative:t(async function(){if(Be()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case Ue.node:default:t(!0)}}))}function Lt(e){switch(Me()){case Ue.browser:!function(e){!Be()&&Fe()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Ue.reactNative:!function(e){Be()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case Ue.node:}}const $t={};class Bt{static get(e){return $t[e]}static set(e,t){$t[e]=t}static delete(e){delete $t[e]}}var Ft=n(56186);class Mt extends Ft.IJsonRpcProvider{constructor(e){super(e),this.events=new l.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,Ft.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,Ft.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise((async(n,r)=>{if(!this.connection.connected)try{await this.open()}catch(s){r(s)}this.events.on(`${e.id}`,(e=>{(0,Ft.isJsonRpcError)(e)?r(e.error):n(e.result)}));try{await this.connection.send(e,t)}catch(s){r(s)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,Ft.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"===typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const jt=e=>e.split("?")[0],qt=typeof WebSocket<"u"?WebSocket:typeof n.g<"u"&&typeof n.g.WebSocket<"u"?n.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:n(57026);class Kt{constructor(e){if(this.url=e,this.events=new l.EventEmitter,this.registering=!1,!(0,Ft.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,N.u)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!(0,Ft.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,r)=>{const s=new URLSearchParams(e).get("origin"),i=(0,Ft.isReactNative)()?{headers:{origin:s}}:{rejectUnauthorized:!(0,Ft.isLocalhostUrl)(e)},o=new qt(e,[],i);typeof WebSocket<"u"||typeof n.g<"u"&&typeof n.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?o.onerror=e=>{const t=e;r(this.emitError(t.error))}:o.on("error",(e=>{r(this.emitError(e))})),o.onopen=()=>{this.onOpen(o),t(o)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,N.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),r=n.message||n.toString(),s=(0,Ft.formatJsonRpcError)(e,r);this.events.emit("payload",s)}parseError(e,t=this.url){return(0,Ft.parseConnectionError)(e,jt(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${jt(this.url)}`));return this.events.emit("register_error",t),t}}var Vt=n(72307),zt=n.n(Vt),Gt=n(63144),Ht=n.n(Gt),Wt=n(34155);var Jt=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(255!==n[o])throw new TypeError(i+" is ambiguous");n[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*l+1>>>0,o=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<s)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");s=h,t++}if(" "!==e[t]){for(var p=i-s;p!==i&&0===o[p];)p++;for(var f=new Uint8Array(r+(i-p)),g=r;p!==i;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,i=t.length;s!==i&&0===t[s];)s++,n++;for(var o=(i-s)*u+1>>>0,l=new Uint8Array(o);s!==i;){for(var h=t[s],d=0,p=o-1;(0!==h||d<r)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,s++}for(var f=o-r;f!==o&&0===l[f];)f++;for(var g=c.repeat(n);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw new Error(`Non-${t} character`)}}},Zt=Jt;const Yt=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Qt{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Xt{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return tn(this,e)}}class en{constructor(e){this.decoders=e}or(e){return tn(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const tn=(e,t)=>new en({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class nn{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Qt(e,t,n),this.decoder=new Xt(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const rn=({name:e,prefix:t,encode:n,decode:r})=>new nn(e,t,n,r),sn=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=Zt(n,t);return rn({prefix:e,name:t,encode:r,decode:e=>Yt(s(e))})},on=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>rn({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,i+=t[s&a>>o];if(o&&(i+=t[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const t=s[e[u]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,r,n,e)}),an=rn({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var cn=Object.freeze({__proto__:null,identity:an});const ln=on({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var un=Object.freeze({__proto__:null,base2:ln});const hn=on({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var dn=Object.freeze({__proto__:null,base8:hn});const pn=sn({prefix:"9",name:"base10",alphabet:"0123456789"});var fn=Object.freeze({__proto__:null,base10:pn});const gn=on({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mn=on({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yn=Object.freeze({__proto__:null,base16:gn,base16upper:mn});const wn=on({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bn=on({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vn=on({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),En=on({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Pn=on({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),In=on({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kn=on({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xn=on({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nn=on({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sn=Object.freeze({__proto__:null,base32:wn,base32upper:bn,base32pad:vn,base32padupper:En,base32hex:Pn,base32hexupper:In,base32hexpad:kn,base32hexpadupper:xn,base32z:Nn});const Rn=sn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),An=sn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var On=Object.freeze({__proto__:null,base36:Rn,base36upper:An});const Tn=sn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_n=sn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Cn=Object.freeze({__proto__:null,base58btc:Tn,base58flickr:_n});const Dn=on({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Un=on({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ln=on({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$n=on({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Bn=Object.freeze({__proto__:null,base64:Dn,base64pad:Un,base64url:Ln,base64urlpad:$n});const Fn=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Mn=Fn.reduce(((e,t,n)=>(e[n]=t,e)),[]),jn=Fn.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const qn=rn({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Mn[t]),"")},decode:function(e){const t=[];for(const n of e){const e=jn[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var Kn=Object.freeze({__proto__:null,base256emoji:qn}),Vn=function e(t,n,r){n=n||[];for(var s=r=r||0;t>=Hn;)n[r++]=255&t|zn,t/=128;for(;t&Gn;)n[r++]=255&t|zn,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},zn=128,Gn=-128,Hn=Math.pow(2,31);var Wn=function e(t,n){var r,s=0,i=0,o=n=n||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],s+=i<28?(r&Zn)<<i:(r&Zn)*Math.pow(2,i),i+=7}while(r>=Jn);return e.bytes=o-n,s},Jn=128,Zn=127;var Yn=Math.pow(2,7),Qn=Math.pow(2,14),Xn=Math.pow(2,21),er=Math.pow(2,28),tr=Math.pow(2,35),nr=Math.pow(2,42),rr=Math.pow(2,49),sr=Math.pow(2,56),ir=Math.pow(2,63),or={encode:Vn,decode:Wn,encodingLength:function(e){return e<Yn?1:e<Qn?2:e<Xn?3:e<er?4:e<tr?5:e<nr?6:e<rr?7:e<sr?8:e<ir?9:10}},ar=or;const cr=(e,t,n=0)=>(ar.encode(e,t,n),t),lr=e=>ar.encodingLength(e),ur=(e,t)=>{const n=t.byteLength,r=lr(e),s=r+lr(n),i=new Uint8Array(s+n);return cr(e,i,0),cr(n,i,r),i.set(t,s),new hr(e,n,t,i)};class hr{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const dr=({name:e,code:t,encode:n})=>new pr(e,t,n);class pr{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ur(this.code,t):t.then((e=>ur(this.code,e)))}throw Error("Unknown type, must be binary type")}}const fr=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),gr=dr({name:"sha2-256",code:18,encode:fr("SHA-256")}),mr=dr({name:"sha2-512",code:19,encode:fr("SHA-512")});Object.freeze({__proto__:null,sha256:gr,sha512:mr});const yr=Yt,wr={code:0,name:"identity",encode:yr,digest:e=>ur(0,yr(e))};Object.freeze({__proto__:null,identity:wr});new TextEncoder,new TextDecoder;const br={...cn,...un,...dn,...fn,...yn,...Sn,...On,...Cn,...Bn,...Kn};function vr(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Er(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Pr=Er("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Ir=Er("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?vr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),kr={utf8:Pr,"utf-8":Pr,hex:br.base16,latin1:Ir,ascii:Ir,binary:Ir,...br};const xr="core",Nr=`wc@2:${xr}:`,Sr="error",Rr={database:":memory:"},Ar="client_ed25519_seed",Or=se.ONE_DAY,Tr=se.SIX_HOURS,_r="wss://relay.walletconnect.com",Cr="wss://relay.walletconnect.org",Dr="relayer_message",Ur="relayer_message_ack",Lr="relayer_connect",$r="relayer_disconnect",Br="relayer_error",Fr="relayer_connection_stalled",Mr="relayer_publish",jr="payload",qr="connect",Kr="disconnect",Vr="error",zr=se.ONE_SECOND,Gr="subscription_created",Hr="subscription_deleted",Wr="subscription_sync",Jr="subscription_resubscribed",Zr=1e3*se.FIVE_SECONDS,Yr={wc_pairingDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:se.ONE_DAY,prompt:!1,tag:0},res:{ttl:se.ONE_DAY,prompt:!1,tag:0}}},Qr="pairing_create",Xr="pairing_expire",es="pairing_delete",ts="pairing_ping",ns="history_created",rs="history_updated",ss="history_deleted",is="history_sync",os="expirer_created",as="expirer_deleted",cs="expirer_expired",ls="expirer_sync",us="verify-api",hs="https://verify.walletconnect.com",ds="https://verify.walletconnect.org",ps=[hs,ds];class fs{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Nr,this.init=async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=gt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,L.Ep)(t,this.name)}get context(){return(0,L.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ve(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ze(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class gs{constructor(e,t,n){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>{this.isInitialized();const e=await this.getClientSeed(),t=Z.Au(e);return Z.bG(t.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const e=function(){const e=te.Au();return{privateKey:(0,ne.BB)(e.secretKey,de),publicKey:(0,ne.BB)(e.publicKey,de)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();const t=await this.getClientSeed(),n=Z.Au(t),r=Ee(),s=Or;return await Z.vf(r,e,s,n)},this.generateSharedKey=(e,t,n)=>{this.isInitialized();const r=function(e,t){const n=te.gi((0,ne.mL)(e,de),(0,ne.mL)(t,de),!0),r=new Q.t(ee.mE,n).expand(ve);return(0,ne.BB)(r,de)}(this.getPrivateKey(e),t);return this.setSymKey(r,n)},this.setSymKey=async(e,t)=>{this.isInitialized();const n=t||function(e){const t=(0,ee.vp)((0,ne.mL)(e,de));return(0,ne.BB)(t,de)}(e);return await this.keychain.set(n,e),n},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,n)=>{this.isInitialized();const r=Ne(n),s=(0,N.u)(t);if(Se(r)){const t=r.senderPublicKey,n=r.receiverPublicKey;e=await this.generateSharedKey(t,n)}const i=this.getSymKey(e),{type:o,senderPublicKey:a}=r;return ke({type:o,symKey:i,message:s,senderPublicKey:a})},this.decode=async(e,t,n)=>{this.isInitialized();const r=function(e,t){const n=xe(e);return Ne({type:Ie(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,ne.BB)(n.senderPublicKey,de):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,n);if(Se(r)){const t=r.receiverPublicKey,n=r.senderPublicKey;e=await this.generateSharedKey(t,n)}try{const n=function(e){const t=new Y.OK((0,ne.mL)(e.symKey,de)),{sealed:n,iv:r}=xe(e.encoded),s=t.open(r,n);if(null===s)throw new Error("Failed to decrypt");return(0,ne.BB)(s,fe)}({symKey:this.getSymKey(e),encoded:t});return(0,N.D)(n)}catch(D){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(D)}},this.getPayloadType=e=>Ie(xe(e).type),this.getPayloadSenderPublicKey=e=>{const t=xe(e);return t.senderPublicKey?(0,ne.BB)(t.senderPublicKey,de):void 0},this.core=e,this.logger=(0,L.Ep)(t,this.name),this.keychain=n||new fs(this.core,this.logger)}get context(){return(0,L.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ar)}catch{e=Ee(),await this.keychain.set(Ar,e)}return function(e,t="utf8"){const n=kr[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):vr(globalThis.Buffer.from(e,"utf-8"))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ms extends M{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Nr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();const n=Pe(t);let r=this.messages.get(e);return typeof r>"u"&&(r={}),typeof r[n]<"u"||(r[n]=t,this.messages.set(e,r),await this.persist()),n},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>{this.isInitialized();return typeof this.get(e)[Pe(t)]<"u"},this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,L.Ep)(e,this.name),this.core=t}get context(){return(0,L.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ve(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ze(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ys extends j{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new l.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,se.toMiliseconds)(se.ONE_MINUTE),this.failedPublishTimeout=(0,se.toMiliseconds)(se.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(e,t,n)=>{var r;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:n}});const s=n?.ttl||Tr,i=Xe(n),o=n?.prompt||!1,a=n?.tag||0,c=n?.id||(0,Ft.getBigIntRpcId)().toString(),l={topic:e,message:t,opts:{ttl:s,relay:i,prompt:o,tag:a,id:c}},u=`Failed to publish payload, please try again. id:${c} tag:${a}`,h=Date.now();let d,p=1;try{for(;void 0===d;){if(Date.now()-h>this.publishTimeout)throw new Error(u);this.logger.trace({id:c,attempts:p},`publisher.publish - attempt ${p}`),d=await await He(this.rpcPublish(e,t,s,i,o,a,c).catch((e=>this.logger.warn(e))),this.publishTimeout,u),p++,d||await new Promise((e=>setTimeout(e,this.failedPublishTimeout)))}this.relayer.events.emit(Mr,l),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:n}})}catch(f){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(f),null!=(r=n?.internal)&&r.throwOnFailedPublish)throw f;this.queue.set(c,l)}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,L.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,L.Fd)(this.logger)}rpcPublish(e,t,n,r,s,i,o){var a,c,l,u;const h={method:et(r.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:s,tag:i},id:o};return bt(null==(a=h.params)?void 0:a.prompt)&&(null==(c=h.params)||delete c.prompt),bt(null==(l=h.params)?void 0:l.tag)&&(null==(u=h.params)||delete u.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:h}),this.relayer.request(h)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:n,opts:r}=e;await this.publish(t,n,r)}))}registerEventListeners(){this.relayer.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Fr);this.checkQueue()})),this.relayer.on(Ur,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}class ws{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const r=n.filter((e=>e!==t));r.length?this.map.set(e,r):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var bs=Object.defineProperty,vs=Object.defineProperties,Es=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertySymbols,Is=Object.prototype.hasOwnProperty,ks=Object.prototype.propertyIsEnumerable,xs=(e,t,n)=>t in e?bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ns=(e,t)=>{for(var n in t||(t={}))Is.call(t,n)&&xs(e,n,t[n]);if(Ps)for(var n of Ps(t))ks.call(t,n)&&xs(e,n,t[n]);return e},Ss=(e,t)=>vs(e,Es(t));class Rs extends V{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new ws,this.events=new l.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Nr,this.subscribeTimeout=(0,se.toMiliseconds)(se.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const n=Xe(t),r={topic:e,relay:n};this.pending.set(e,r);const s=await this.rpcSubscribe(e,n);return"string"==typeof s&&(this.onSubscribe(s,r),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),s}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;const t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise(((n,r)=>{const s=new se.Watch;s.start(t);const i=setInterval((()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(i),s.stop(t),n(!0)),s.elapsed(t)>=Zr&&(clearInterval(i),s.stop(t),r(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1))},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,L.Ep)(t,this.name),this.clientId=""}get context(){return(0,L.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map((async n=>await this.unsubscribeById(e,n,t))))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const r=Xe(n);await this.rpcUnsubscribe(e,t,r);const s=mt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(r){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(r),r}}async rpcSubscribe(e,t){const n={method:et(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await He(this.relayer.request(n).catch((e=>this.logger.warn(e))),this.subscribeTimeout)?Pe(e+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Fr)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:et(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{return await await He(this.relayer.request(t).catch((e=>this.logger.warn(e))),this.subscribeTimeout)}catch{this.relayer.events.emit(Fr)}}rpcUnsubscribe(e,t,n){const r={method:et(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(e,t){this.setSubscription(e,Ss(Ns({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Ns({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Ns({},t)),this.topicMap.set(t.topic,e),this.events.emit(Gr,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=gt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Hr,Ss(Ns({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Wr)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(e)}}this.events.emit(Jr)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);yt(t)&&this.onBatchSubscribe(t.map(((t,n)=>Ss(Ns({},e[n]),{id:t}))))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.events.on(Gr,(async e=>{const t=Gr;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(Hr,(async e=>{const t=Hr;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var As=Object.defineProperty,Os=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,Cs=(e,t,n)=>t in e?As(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Ds extends q{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new l.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,se.toMiliseconds)(se.THIRTY_SECONDS+se.ONE_SECOND),this.request=async e=>{var t,n;this.logger.debug("Publishing Request Payload");const r=e.id||(0,Ft.getBigIntRpcId)().toString();await this.toEstablishConnection();try{const s=this.provider.request(e);this.requestsInFlight.set(r,{promise:s,request:e}),this.logger.trace({id:r,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - attempt to publish...");const i=await new Promise((async(e,t)=>{const n=()=>{t(new Error(`relayer.request - publish interrupted, id: ${r}`))};this.provider.on(Kr,n);const i=await s;this.provider.off(Kr,n),e(i)}));return this.logger.trace({id:r,method:e.method,topic:null==(n=e.params)?void 0:n.topic},"relayer.request - published"),i}catch(Di){throw this.logger.debug(`Failed to Publish Request: ${r}`),Di}finally{this.requestsInFlight.delete(r)}},this.resetPingTimeout=()=>{if($e())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,n;null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||n.terminate()}),this.heartBeatTimeout)}catch(e){this.logger.warn(e)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(Lr)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(Br,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(jr,this.onPayloadHandler),this.provider.on(qr,this.onConnectHandler),this.provider.on(Kr,this.onDisconnectHandler),this.provider.on(Vr,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,L.Ep)(e.logger,this.name):(0,L.gw)((0,L.jI)({level:e.logger||"error"})),this.messages=new ms(this.logger,e.core),this.subscriber=new Rs(this,this.logger),this.publisher=new ys(this,this.logger),this.relayUrl=e?.relayUrl||_r,this.projectId=e.projectId,this.bundleId=function(){var e;try{return Be()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Application)<"u"?null==(e=n.g.Application)?void 0:e.applicationId:void 0}catch{return}}(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Cr}...`),await this.restartTransport(Cr)}this.initialized=!0,setTimeout((async()=>{0===this.subscriber.topics.length&&0===this.subscriber.pending.size&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),1e4)}get context(){return(0,L.Fd)(this.logger)}get connected(){var e,t,n;return 1===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)}get connecting(){var e,t,n;return 0===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var n;this.isInitialized();let r,s=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"";const i=t=>{t.topic===e&&(this.subscriber.off(Gr,i),r())};return await Promise.all([new Promise((e=>{r=e,this.subscriber.on(Gr,i)})),new Promise((async n=>{s=await this.subscriber.subscribe(e,t)||s,n()}))]),s}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map((e=>e.promise)))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await He(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect(),await this.createProvider()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise((async(e,t)=>{const n=()=>{this.provider.off(Kr,n),t(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Kr,n),await He(this.provider.connect(),(0,se.toMiliseconds)(se.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(t){this.logger.error(t);const e=t;if(!this.isConnectionStalled(e.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!(await Ut()))throw new Error("No internet connection detected. Please restart your network and try again.")}startPingTimeout(){var e,t,n,r,s;if($e())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(s=null==(r=null==(n=this.provider)?void 0:n.connection)?void 0:r.socket)||s.once("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(Di){this.logger.warn(Di)}}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Mt(new Kt(qe({sdkVersion:"2.11.3",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:n}=e;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;if(!n||0===n.length)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!(await this.subscriber.isSubscribed(t)))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const r=this.messages.has(t,n);return r&&this.logger.debug(`Ignoring duplicate message: ${n}`),r}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,Ft.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:n,message:r,publishedAt:s}=t.data,i={topic:n,message:r,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(((e,t)=>{for(var n in t||(t={}))Ts.call(t,n)&&Cs(e,n,t[n]);if(Os)for(var n of Os(t))_s.call(t,n)&&Cs(e,n,t[n]);return e})({type:"event",event:t.id},i)),this.events.emit(t.id,i),await this.acknowledgePayload(e),await this.onMessageEvent(i)}else(0,Ft.isJsonRpcResponse)(e)&&this.events.emit(Ur,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Dr,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=(0,Ft.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(jr,this.onPayloadHandler),this.provider.off(qr,this.onConnectHandler),this.provider.off(Kr,this.onDisconnectHandler),this.provider.off(Vr,this.onProviderErrorHandler)}async registerEventListeners(){let e=await Ut();Lt((async t=>{e!==t&&(e=t,t?await this.restartTransport().catch((e=>this.logger.error(e))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){await this.subscriber.stop(),this.events.emit($r),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e)))}),(0,se.toMiliseconds)(zr))}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)})),await this.transportOpen())}}var Us=Object.defineProperty,Ls=Object.getOwnPropertySymbols,$s=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable,Fs=(e,t,n)=>t in e?Us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ms=(e,t)=>{for(var n in t||(t={}))$s.call(t,n)&&Fs(e,n,t[n]);if(Ls)for(var n of Ls(t))Bs.call(t,n)&&Fs(e,n,t[n]);return e};class js extends K{constructor(e,t,n,r=Nr,s=void 0){super(e,t,n,r),this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Nr,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!bt(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((n=>zt()(t[n],e[n]))))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const n=Ms(Ms({},this.getData(e)),t);this.map.set(e,n),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())},this.logger=(0,L.Ep)(t,this.name),this.storagePrefix=r,this.getKey=s}get context(){return(0,L.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=gt("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=gt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class qs{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(u()),this.initialized=!1,this.storagePrefix=Nr,this.ignoredPayloadTypes=[me],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async()=>{this.isInitialized();const e=Ee(),t=await this.core.crypto.setSymKey(e),n=Ze(se.FIVE_MINUTES),r={protocol:"irn"},s={topic:t,expiry:n,relay:r,active:!1},i=ht({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:e,relay:r,expiryTimestamp:n});return await this.pairings.set(t,s),await this.core.relayer.subscribe(t),this.core.expirer.set(t,n),{topic:t,uri:i}},this.pair=async e=>{this.isInitialized(),this.isValidPair(e);const{topic:t,symKey:n,relay:r,expiryTimestamp:s}=lt(e.uri);let i;if(this.pairings.keys.includes(t)&&(i=this.pairings.get(t),i.active))throw new Error(`Pairing already exists: ${t}. Please try again with a new connection URI.`);const o=s||Ze(se.FIVE_MINUTES),a={topic:t,relay:r,expiry:o,active:!1};return await this.pairings.set(t,a),this.core.expirer.set(t,o),e.activatePairing&&await this.activate({topic:t}),this.events.emit(Qr,a),this.core.crypto.keychain.has(t)||await this.core.crypto.setSymKey(n,t),await this.core.relayer.subscribe(t,{relay:r}),a},this.activate=async({topic:e})=>{this.isInitialized();const t=Ze(se.THIRTY_DAYS);await this.pairings.update(e,{active:!0,expiry:t}),this.core.expirer.set(e,t)},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:n,resolve:r,reject:s}=Ge();this.events.once(Qe("pairing_ping",e),(({error:e})=>{e?s(e):r()})),await n()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",mt("USER_DISCONNECTED")),await this.deletePairing(t))},this.sendRequest=async(e,t,n)=>{const r=(0,Ft.formatJsonRpcRequest)(t,n),s=await this.core.crypto.encode(e,r),i=Yr[t].req;return this.core.history.set(e,r),this.core.relayer.publish(e,s,i),r.id},this.sendResult=async(e,t,n)=>{const r=(0,Ft.formatJsonRpcResult)(e,n),s=await this.core.crypto.encode(t,r),i=await this.core.history.get(t,e),o=Yr[i.request.method].res;await this.core.relayer.publish(t,s,o),await this.core.history.resolve(r)},this.sendError=async(e,t,n)=>{const r=(0,Ft.formatJsonRpcError)(e,n),s=await this.core.crypto.encode(t,r),i=await this.core.history.get(t,e),o=Yr[i.request.method]?Yr[i.request.method].res:Yr.unregistered_method.res;await this.core.relayer.publish(t,s,o),await this.core.history.resolve(r)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,mt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{const e=this.pairings.getAll().filter((e=>Ye(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))},this.onRelayEventRequest=e=>{const{topic:t,payload:n}=e;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(t,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,n);default:return this.onUnknownRpcMethodRequest(t,n)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:n}=e,r=(await this.core.history.get(t,n.id)).request.method;return"wc_pairingPing"===r?this.onPairingPingResponse(t,n):this.onUnknownRpcMethodResponse(r)},this.onPairingPingRequest=async(e,t)=>{const{id:n}=t;try{this.isValidPing({topic:e}),await this.sendResult(n,e,!0),this.events.emit(ts,{id:n,topic:e})}catch(Di){await this.sendError(n,e,Di),this.logger.error(Di)}},this.onPairingPingResponse=(e,t)=>{const{id:n}=t;setTimeout((()=>{(0,Ft.isJsonRpcResult)(t)?this.events.emit(Qe("pairing_ping",n),{}):(0,Ft.isJsonRpcError)(t)&&this.events.emit(Qe("pairing_ping",n),{error:t.error})}),500)},this.onPairingDeleteRequest=async(e,t)=>{const{id:n}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(es,{id:n,topic:e})}catch(Di){await this.sendError(n,e,Di),this.logger.error(Di)}},this.onUnknownRpcMethodRequest=async(e,t)=>{const{id:n,method:r}=t;try{if(this.registeredMethods.includes(r))return;const t=mt("WC_METHOD_UNSUPPORTED",r);await this.sendError(n,e,t),this.logger.error(t)}catch(M){await this.sendError(n,e,M),this.logger.error(M)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(mt("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=e=>{var t;if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`pair() params: ${e}`);throw new Error(t)}if(!function(e){if(vt(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}(e.uri)){const{message:t}=gt("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw new Error(t)}const n=lt(e.uri);if(null==(t=n?.relay)||!t.protocol){const{message:e}=gt("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(e)}if(null==n||!n.symKey){const{message:e}=gt("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,se.toMiliseconds)(n?.expiryTimestamp)<Date.now()){const{message:e}=gt("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}},this.isValidPing=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!vt(e,!1)){const{message:t}=gt("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=gt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ye(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=gt("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}},this.core=e,this.logger=(0,L.Ep)(t,this.name),this.pairings=new js(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,L.Fd)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Dr,(async e=>{const{topic:t,message:n}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const r=await this.core.crypto.decode(t,n);try{(0,Ft.isJsonRpcRequest)(r)?(this.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r})):(0,Ft.isJsonRpcResponse)(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.core.history.delete(t,r.id))}catch(s){this.logger.error(s)}}))}registerExpirerEvents(){this.core.expirer.on(cs,(async e=>{const{topic:t}=Je(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Xr,{topic:t}))}))}}class Ks extends F{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new l.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Nr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:n}),this.records.has(t.id))return;const r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:n,expiry:Ze(se.THIRTY_DAYS)};this.records.set(r.id,r),this.events.emit(ns,r)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,Ft.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.events.emit(rs,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((n=>{if(n.topic===e){if(typeof t<"u"&&n.id!==t)return;this.records.delete(n.id),this.events.emit(ss,n)}}))},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,L.Ep)(t,this.name)}get context(){return(0,L.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:(0,Ft.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=gt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(is)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ns,(e=>{const t=ns;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(rs,(e=>{const t=rs;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(ss,(e=>{const t=ss;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((e=>{(0,se.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))}))}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Vs extends z{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new l.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Nr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}},this.set=(e,t)=>{this.isInitialized();const n=this.formatTarget(e),r={target:n,expiry:t};this.expirations.set(n,r),this.checkExpiry(n,r),this.events.emit(os,{target:n,expiration:r})},this.get=e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),n=this.getExpiration(t);this.expirations.delete(t),this.events.emit(as,{target:t,expiration:n})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,L.Ep)(t,this.name)}get context(){return(0,L.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return We("topic",e)}(e);if("number"==typeof e)return function(e){return We("id",e)}(e);const{message:t}=gt("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ls)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=gt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=gt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:n}=t;(0,se.toMiliseconds)(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(cs,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(os,(e=>{const t=os;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(cs,(e=>{const t=cs;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(as,(e=>{const t=as;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class zs extends G{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=us,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async e=>{if(this.verifyDisabled||Be()||!Fe())return;const t=this.getVerifyUrl(e?.verifyUrl);this.verifyUrl!==t&&this.removeIframe(),this.verifyUrl=t;try{await this.createIframe()}catch(n){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(n)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ds;try{await this.createIframe()}catch(n){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(n),this.verifyDisabled=!0}}},this.register=async e=>{this.initialized?this.sendPost(e.attestationId):(this.addToQueue(e.attestationId),await this.init())},this.resolve=async e=>{if(this.isDevEnv)return"";const t=this.getVerifyUrl(e?.verifyUrl);let n;try{n=await this.fetchAttestation(e.attestationId,t)}catch(Di){this.logger.info(`failed to resolve attestation: ${e.attestationId} from url: ${t}`),this.logger.info(Di),n=await this.fetchAttestation(e.attestationId,ds)}return n},this.fetchAttestation=async(e,t)=>{this.logger.info(`resolving attestation: ${e} from url: ${t}`);const n=this.startAbortTimer(2*se.ONE_SECOND),r=await fetch(`${t}/attestation/${e}`,{signal:this.abortController.signal});return clearTimeout(n),200===r.status?await r.json():void 0},this.addToQueue=e=>{this.queue.push(e)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach((e=>this.sendPost(e))),this.queue=[])},this.sendPost=e=>{var t;try{if(!this.iframe)return;null==(t=this.iframe.contentWindow)||t.postMessage(e,"*"),this.logger.info(`postMessage sent: ${e} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let e;const t=n=>{"verify_ready"===n.data&&(this.onInit(),window.removeEventListener("message",t),e())};await Promise.race([new Promise((n=>{const r=document.getElementById(us);if(r)return this.iframe=r,this.onInit(),n();window.addEventListener("message",t);const s=document.createElement("iframe");s.id=us,s.src=`${this.verifyUrl}/${this.projectId}`,s.style.display="none",document.body.append(s),this.iframe=s,e=n})),new Promise(((e,n)=>setTimeout((()=>{window.removeEventListener("message",t),n("verify iframe load timeout")}),(0,se.toMiliseconds)(se.FIVE_SECONDS))))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=e=>{let t=e||hs;return ps.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${hs}`),t=hs),t},this.logger=(0,L.Ep)(t,this.name),this.verifyUrl=hs,this.abortController=new AbortController,this.isDevEnv=$e()&&Wt.env.IS_VITEST}get context(){return(0,L.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,se.toMiliseconds)(e))}}class Gs extends H{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{const{clientId:t,token:n,notificationType:r,enableEncrypted:s=!1}=e,i=`https://echo.walletconnect.com/${this.projectId}/clients`;await Ht()(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:r,token:n,always_raw:s})})},this.logger=(0,L.Ep)(t,this.context)}}var Hs=Object.defineProperty,Ws=Object.getOwnPropertySymbols,Js=Object.prototype.hasOwnProperty,Zs=Object.prototype.propertyIsEnumerable,Ys=(e,t,n)=>t in e?Hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qs=(e,t)=>{for(var n in t||(t={}))Js.call(t,n)&&Ys(e,n,t[n]);if(Ws)for(var n of Ws(t))Zs.call(t,n)&&Ys(e,n,t[n]);return e};class Xs extends B{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=xr,this.events=new l.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||_r,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,L.gw)((0,L.jI)({level:e?.logger||Sr}));this.logger=(0,L.Ep)(t,this.name),this.heartbeat=new U.HeartBeat,this.crypto=new gs(this,this.logger,e?.keychain),this.history=new Ks(this,this.logger),this.expirer=new Vs(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new D(Qs(Qs({},Rr),e?.storageOptions)),this.relayer=new Ds({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new qs(this,this.logger),this.verify=new zs(this.projectId||"",this.logger),this.echoClient=new Gs(this.projectId||"",this.logger)}static async init(e){const t=new Xs(e);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",n),t}get context(){return(0,L.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const ei=Xs,ti="client",ni=`wc@2:${ti}:`,ri=ti,si="error",ii="WALLETCONNECT_DEEPLINK_CHOICE",oi=se.SEVEN_DAYS,ai={wc_sessionPropose:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1114},res:{ttl:se.ONE_DAY,prompt:!1,tag:1115}}},ci={min:se.FIVE_MINUTES,max:se.SEVEN_DAYS},li="IDLE",ui="ACTIVE",hi=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var di=Object.defineProperty,pi=Object.defineProperties,fi=Object.getOwnPropertyDescriptors,gi=Object.getOwnPropertySymbols,mi=Object.prototype.hasOwnProperty,yi=Object.prototype.propertyIsEnumerable,wi=(e,t,n)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bi=(e,t)=>{for(var n in t||(t={}))mi.call(t,n)&&wi(e,n,t[n]);if(gi)for(var n of gi(t))yi.call(t,n)&&wi(e,n,t[n]);return e},vi=(e,t)=>pi(e,fi(t));class Ei extends J{constructor(e){super(e),this.name="engine",this.events=new(u()),this.initialized=!1,this.ignoredPayloadTypes=[me],this.requestQueue={state:li,queue:[]},this.sessionRequestQueue={state:li,queue:[]},this.requestQueueDelay=se.ONE_SECOND,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(ai)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,se.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();const t=vi(bi({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:n,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:i,relays:o}=t;let a,c=n,l=!1;try{c&&(l=this.client.core.pairing.pairings.get(c).active)}catch(Vi){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),Vi}if(!c||!l){const{topic:e,uri:t}=await this.client.core.pairing.create();c=e,a=t}if(!c){const{message:e}=gt("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(e)}const u=await this.client.core.crypto.generateKeyPair(),h=ai.wc_sessionPropose.req.ttl||se.FIVE_MINUTES,d=Ze(h),p=bi({requiredNamespaces:r,optionalNamespaces:s,relays:o??[{protocol:"irn"}],proposer:{publicKey:u,metadata:this.client.metadata},expiryTimestamp:d},i&&{sessionProperties:i}),{reject:f,resolve:g,done:m}=Ge(h,"Proposal expired");this.events.once(Qe("session_connect"),(async({error:e,session:t})=>{if(e)f(e);else if(t){t.self.publicKey=u;const e=vi(bi({},t),{requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:t.peer.metadata}),g(e)}}));const y=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0});return await this.setProposal(y,bi({id:y},p)),{uri:a,approval:m}},this.pair=async e=>{await this.isInitialized();try{return await this.client.core.pairing.pair(e)}catch(t){throw this.client.logger.error("pair() failed"),t}},this.approve=async e=>{await this.isInitialized();try{await this.isValidApprove(e)}catch(g){throw this.client.logger.error("approve() -> isValidApprove() failed"),g}const{id:t,relayProtocol:n,namespaces:r,sessionProperties:s}=e;let i;try{i=this.client.proposal.get(t)}catch(g){throw this.client.logger.error(`approve() -> proposal.get(${t}) failed`),g}let{pairingTopic:o,proposer:a,requiredNamespaces:c,optionalNamespaces:l}=i;o=o||"";const u=await this.client.core.crypto.generateKeyPair(),h=a.publicKey,d=await this.client.core.crypto.generateSharedKey(u,h),p=bi({relay:{protocol:n??"irn"},namespaces:r,pairingTopic:o,controller:{publicKey:u,metadata:this.client.metadata},expiry:Ze(oi)},s&&{sessionProperties:s});await this.client.core.relayer.subscribe(d);const f=vi(bi({},p),{topic:d,requiredNamespaces:c,optionalNamespaces:l,pairingTopic:o,acknowledged:!1,self:p.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:u});await this.client.session.set(d,f);try{await this.sendResult({id:t,topic:o,result:{relay:{protocol:n??"irn"},responderPublicKey:u},throwOnFailedPublish:!0}),await this.sendRequest({topic:d,method:"wc_sessionSettle",params:p,throwOnFailedPublish:!0})}catch(g){throw this.client.logger.error(g),this.client.session.delete(d,mt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(d),g}return await this.client.core.pairing.updateMetadata({topic:o,metadata:a.metadata}),await this.client.proposal.delete(t,mt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}),await this.setExpiry(d,Ze(oi)),{topic:d,acknowledged:()=>new Promise((e=>setTimeout((()=>e(this.client.session.get(d))),500)))}},this.reject=async e=>{await this.isInitialized();try{await this.isValidReject(e)}catch(s){throw this.client.logger.error("reject() -> isValidReject() failed"),s}const{id:t,reason:n}=e;let r;try{r=this.client.proposal.get(t).pairingTopic}catch(s){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),s}r&&(await this.sendError(t,r,n),await this.client.proposal.delete(t,mt("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized();try{await this.isValidUpdate(e)}catch(K){throw this.client.logger.error("update() -> isValidUpdate() failed"),K}const{topic:t,namespaces:n}=e,{done:r,resolve:s,reject:i}=Ge(),o=(0,Ft.payloadId)(),a=(0,Ft.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once(Qe("session_update",o),(async({error:e})=>{e?i(e):(await this.client.session.update(t,{namespaces:n}),s())})),this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),i(e)})),{acknowledged:r}},this.extend=async e=>{await this.isInitialized();try{await this.isValidExtend(e)}catch(M){throw this.client.logger.error("extend() -> isValidExtend() failed"),M}const{topic:t}=e,n=(0,Ft.payloadId)(),{done:r,resolve:s,reject:i}=Ge();return this.events.once(Qe("session_extend",n),(({error:e})=>{e?i(e):s()})),await this.setExpiry(t,Ze(oi)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch((e=>{i(e)})),{acknowledged:r}},this.request=async e=>{await this.isInitialized();try{await this.isValidRequest(e)}catch(D){throw this.client.logger.error("request() -> isValidRequest() failed"),D}const{chainId:t,request:r,topic:s,expiry:i=ai.wc_sessionRequest.req.ttl}=e,o=(0,Ft.payloadId)(),a=(0,Ft.getBigIntRpcId)().toString(),{done:c,resolve:l,reject:u}=Ge(i,"Request expired. Please try again.");return this.events.once(Qe("session_request",o),(({error:e,result:t})=>{e?u(e):l(t)})),await Promise.all([new Promise((async e=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:vi(bi({},r),{expiryTimestamp:Ze(i)}),chainId:t},expiry:i,throwOnFailedPublish:!0}).catch((e=>u(e))),this.client.events.emit("session_request_sent",{topic:s,request:r,chainId:t,id:o}),e()})),new Promise((async e=>{const t=await async function(e,t){try{return await e.getItem(t)||(Fe()?localStorage.getItem(t):void 0)}catch(r){console.error(r)}}(this.client.core.storage,ii);(async function({id:e,topic:t,wcDeepLink:r}){try{if(!r)return;const s="string"==typeof r?JSON.parse(r):r;let i=s?.href;if("string"!=typeof i)return;i.endsWith("/")&&(i=i.slice(0,-1));const o=`${i}/wc?requestId=${e}&sessionTopic=${t}`,a=Me();a===Ue.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===Ue.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(o)}catch(i){console.error(i)}})({id:o,topic:s,wcDeepLink:t}),e()})),c()]).then((e=>e[2]))},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:n}=e,{id:r}=n;(0,Ft.isJsonRpcResult)(n)?await this.sendResult({id:r,topic:t,result:n.result,throwOnFailedPublish:!0}):(0,Ft.isJsonRpcError)(n)&&await this.sendError(r,t,n.error),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized();try{await this.isValidPing(e)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=(0,Ft.payloadId)(),n=(0,Ft.getBigIntRpcId)().toString(),{done:r,resolve:s,reject:i}=Ge();this.events.once(Qe("session_ping",e),(({error:e})=>{e?i(e):s()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:n}),r()])}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);const{topic:t,event:n,chainId:r}=e,s=(0,Ft.getBigIntRpcId)().toString();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:n,chainId:r},throwOnFailedPublish:!0,relayRpcId:s})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:mt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=gt("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),s=Object.keys(n);let i=!0;return!!Ke(s,r)&&(r.forEach((t=>{const{accounts:r,methods:s,events:o}=e.namespaces[t],a=dt(r),c=n[t];(!Ke(ue(t,c),a)||!Ke(c.methods,s)||!Ke(c.events,o))&&(i=!1)})),i)}(t,e)))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter((n=>{var r,s;return(null==(r=n.peerMetadata)?void 0:r.url)&&(null==(s=n.peerMetadata)?void 0:s.url)===e.peer.metadata.url&&n.topic&&n.topic!==t.topic}));if(0===n.length)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async e=>{const{topic:t,expirerHasDeleted:n=!1,emitEvent:r=!0,id:s=0}=e,{self:i}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),await this.client.session.delete(t,mt("USER_DISCONNECTED")),this.addToRecentlyDeleted(t,"session"),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t),this.client.core.storage.removeItem(ii).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===t&&this.deletePendingSessionRequest(e.id,mt("USER_DISCONNECTED"))})),r&&this.client.events.emit("session_delete",{id:s,topic:t})},this.deleteProposal=async(e,t)=>{await Promise.all([this.client.proposal.delete(e,mt("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,t,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),n?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),n&&(this.sessionRequestQueue.state=li,this.client.events.emit("session_request_expire",{id:e}))},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:t}),this.client.core.expirer.set(e,t)},this.setProposal=async(e,t)=>{await this.client.proposal.set(e,t),this.client.core.expirer.set(e,Ze(ai.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async e=>{const{id:t,topic:n,params:r,verifyContext:s}=e,i=r.request.expiryTimestamp||Ze(ai.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(t,{id:t,topic:n,params:r,verifyContext:s}),i&&this.client.core.expirer.set(t,i)},this.sendRequest=async e=>{const{topic:t,method:n,params:r,expiry:s,relayRpcId:i,clientRpcId:o,throwOnFailedPublish:a}=e,c=(0,Ft.formatJsonRpcRequest)(n,r,o);if(Fe()&&hi.includes(n)){const e=Pe(JSON.stringify(c));this.client.core.verify.register({attestationId:e})}let l;try{l=await this.client.core.crypto.encode(t,c)}catch(q){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),q}const u=ai[n].req;return s&&(u.ttl=s),i&&(u.id=i),this.client.core.history.set(t,c),a?(u.internal=vi(bi({},u.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,l,u)):this.client.core.relayer.publish(t,l,u).catch((e=>this.client.logger.error(e))),c.id},this.sendResult=async e=>{const{id:t,topic:n,result:r,throwOnFailedPublish:s}=e,i=(0,Ft.formatJsonRpcResult)(t,r);let o,a;try{o=await this.client.core.crypto.encode(n,i)}catch(K){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),K}try{a=await this.client.core.history.get(n,t)}catch(K){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${t}) failed`),K}const c=ai[a.request.method].res;s?(c.internal=vi(bi({},c.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,o,c)):this.client.core.relayer.publish(n,o,c).catch((e=>this.client.logger.error(e))),await this.client.core.history.resolve(i)},this.sendError=async(e,t,n)=>{const r=(0,Ft.formatJsonRpcError)(e,n);let s,i;try{s=await this.client.core.crypto.encode(t,r)}catch(O){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${t} failed`),O}try{i=await this.client.core.history.get(t,e)}catch(O){throw this.client.logger.error(`sendError() -> history.get(${t}, ${e}) failed`),O}const o=ai[i.request.method].res;this.client.core.relayer.publish(t,s,o),await this.client.core.history.resolve(r)},this.cleanup=async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let n=!1;Ye(t.expiry)&&(n=!0),this.client.core.crypto.keychain.has(t.topic)||(n=!0),n&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Ye(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state!==ui){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ui;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise((e=>setTimeout(e,300)))}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=li}else this.client.logger.info("Request queue already active, skipping...")},this.processRequest=e=>{const{topic:t,payload:n}=e,r=n.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeRequest(t,n);case"wc_sessionSettle":return this.onSessionSettleRequest(t,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(t,n);case"wc_sessionExtend":return this.onSessionExtendRequest(t,n);case"wc_sessionPing":return this.onSessionPingRequest(t,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(t,n);case"wc_sessionRequest":return this.onSessionRequest(t,n);case"wc_sessionEvent":return this.onSessionEventRequest(t,n);default:return this.client.logger.info(`Unsupported request method ${r}`)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:n}=e,r=(await this.client.core.history.get(t,n.id)).request.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeResponse(t,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,n);case"wc_sessionExtend":return this.onSessionExtendResponse(t,n);case"wc_sessionPing":return this.onSessionPingResponse(t,n);case"wc_sessionRequest":return this.onSessionRequestResponse(t,n);default:return this.client.logger.info(`Unsupported response method ${r}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:t}=e,{message:n}=gt("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.onSessionProposeRequest=async(e,t)=>{const{params:n,id:r}=t;try{this.isValidConnect(bi({},t.params));const s=n.expiryTimestamp||Ze(ai.wc_sessionPropose.req.ttl),i=bi({id:r,pairingTopic:e,expiryTimestamp:s},n);await this.setProposal(r,i);const o=Pe(JSON.stringify(t)),a=await this.getVerifyContext(o,i.proposer.metadata);this.client.events.emit("session_proposal",{id:r,params:i,verifyContext:a})}catch(s){await this.sendError(r,e,s),this.client.logger.error(s)}},this.onSessionProposeResponse=async(e,t)=>{const{id:n}=t;if((0,Ft.isJsonRpcResult)(t)){const{result:r}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:r});const s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const i=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:i});const o=r.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(i,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const c=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else if((0,Ft.isJsonRpcError)(t)){await this.client.proposal.delete(n,mt("USER_DISCONNECTED"));const e=Qe("session_connect");if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(Qe("session_connect"),{error:t.error})}},this.onSessionSettleRequest=async(e,t)=>{const{id:n,params:r}=t;try{this.isValidSessionSettleRequest(r);const{relay:n,controller:s,expiry:i,namespaces:o,sessionProperties:a,pairingTopic:c}=t.params,l=bi({topic:e,relay:n,expiry:i,namespaces:o,acknowledged:!0,pairingTopic:c,requiredNamespaces:{},optionalNamespaces:{},controller:s.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:s.publicKey,metadata:s.metadata}},a&&{sessionProperties:a});await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0});const u=Qe("session_connect");if(0===this.events.listenerCount(u))throw new Error(`emitting ${u} without any listeners 997`);this.events.emit(Qe("session_connect"),{session:l}),this.cleanupDuplicatePairings(l)}catch(s){await this.sendError(n,e,s),this.client.logger.error(s)}},this.onSessionSettleResponse=async(e,t)=>{const{id:n}=t;(0,Ft.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Qe("session_approve",n),{})):(0,Ft.isJsonRpcError)(t)&&(await this.client.session.delete(e,mt("USER_DISCONNECTED")),this.events.emit(Qe("session_approve",n),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{const{params:n,id:r}=t;try{const t=`${e}_session_update`,s=Bt.get(t);if(s&&this.isRequestOutOfSync(s,r))return this.client.logger.info(`Discarding out of sync request - ${r}`),void this.sendError(r,e,mt("INVALID_UPDATE_REQUEST"));this.isValidUpdate(bi({topic:e},n));try{Bt.set(t,r),await this.client.session.update(e,{namespaces:n.namespaces}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0})}catch(M){throw Bt.delete(t),M}this.client.events.emit("session_update",{id:r,topic:e,params:n})}catch(s){await this.sendError(r,e,s),this.client.logger.error(s)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{const{id:n}=t,r=Qe("session_update",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,Ft.isJsonRpcResult)(t)?this.events.emit(Qe("session_update",n),{}):(0,Ft.isJsonRpcError)(t)&&this.events.emit(Qe("session_update",n),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{const{id:n}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Ze(oi)),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:e})}catch(r){await this.sendError(n,e,r),this.client.logger.error(r)}},this.onSessionExtendResponse=(e,t)=>{const{id:n}=t,r=Qe("session_extend",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,Ft.isJsonRpcResult)(t)?this.events.emit(Qe("session_extend",n),{}):(0,Ft.isJsonRpcError)(t)&&this.events.emit(Qe("session_extend",n),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{const{id:n}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:e})}catch(r){await this.sendError(n,e,r),this.client.logger.error(r)}},this.onSessionPingResponse=(e,t)=>{const{id:n}=t,r=Qe("session_ping",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);setTimeout((()=>{(0,Ft.isJsonRpcResult)(t)?this.events.emit(Qe("session_ping",n),{}):(0,Ft.isJsonRpcError)(t)&&this.events.emit(Qe("session_ping",n),{error:t.error})}),500)},this.onSessionDeleteRequest=async(e,t)=>{const{id:n}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise((t=>{this.client.core.relayer.once(Mr,(async()=>{t(await this.deleteSession({topic:e,id:n}))}))})),this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:mt("USER_DISCONNECTED")})])}catch(r){this.client.logger.error(r)}},this.onSessionRequest=async(e,t)=>{const{id:n,params:r}=t;try{this.isValidRequest(bi({topic:e},r));const t=Pe(JSON.stringify((0,Ft.formatJsonRpcRequest)("wc_sessionRequest",r,n))),s=this.client.session.get(e),i={id:n,topic:e,params:r,verifyContext:await this.getVerifyContext(t,s.peer.metadata)};await this.setPendingSessionRequest(i),this.addSessionRequestToSessionRequestQueue(i),this.processSessionRequestQueue()}catch(s){await this.sendError(n,e,s),this.client.logger.error(s)}},this.onSessionRequestResponse=(e,t)=>{const{id:n}=t,r=Qe("session_request",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,Ft.isJsonRpcResult)(t)?this.events.emit(Qe("session_request",n),{result:t.result}):(0,Ft.isJsonRpcError)(t)&&this.events.emit(Qe("session_request",n),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{const{id:n,params:r}=t;try{const t=`${e}_session_event_${r.event.name}`,s=Bt.get(t);if(s&&this.isRequestOutOfSync(s,n))return void this.client.logger.info(`Discarding out of sync request - ${n}`);this.isValidEmit(bi({topic:e},r)),this.client.events.emit("session_event",{id:n,topic:e,params:r}),Bt.set(t,n)}catch(s){await this.sendError(n,e,s),this.client.logger.error(s)}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=li,this.processSessionRequestQueue()}),(0,se.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{const n=this.client.core.history.pending;n.length>0&&n.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const n=Qe("session_request",e.request.id);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);this.events.emit(Qe("session_request",e.request.id),{error:t})}))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ui)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=ui,this.client.events.emit("session_request",e)}catch(t){this.client.logger.error(t)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=e=>{if(e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest(e.topic,(0,Ft.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id))},this.isValidConnect=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:n,optionalNamespaces:r,sessionProperties:s,relays:i}=e;if(bt(t)||await this.isValidPairingTopic(t),!function(e,t){let n=!1;return t&&!e?n=!0:e&&yt(e)&&e.length&&e.forEach((e=>{n=Rt(e)})),n}(i,!0)){const{message:e}=gt("MISSING_OR_INVALID",`connect() relays: ${i}`);throw new Error(e)}!bt(n)&&0!==wt(n)&&this.validateNamespaces(n,"requiredNamespaces"),!bt(r)&&0!==wt(r)&&this.validateNamespaces(r,"optionalNamespaces"),bt(s)||this.validateSessionProps(s,"sessionProperties")},this.validateNamespaces=(e,t)=>{const n=function(e,t,n){let r=null;if(e&&wt(e)){const s=Nt(e,t);s&&(r=s);const i=kt(e,t,n);i&&(r=i)}else r=gt("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}(e,"connect()",t);if(n)throw new Error(n.message)},this.isValidApprove=async e=>{if(!At(e))throw new Error(gt("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:n,relayProtocol:r,sessionProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const i=this.client.proposal.get(t),o=St(n,"approve()");if(o)throw new Error(o.message);const a=Ct(i.requiredNamespaces,n,"approve()");if(a)throw new Error(a.message);if(!vt(r,!0)){const{message:e}=gt("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw new Error(e)}bt(s)||this.validateSessionProps(s,"sessionProperties")},this.isValidReject=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:n}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!(!e||"object"!=typeof e||!e.code||!Et(e.code,!1)||!e.message||!vt(e.message,!1))}(n)){const{message:e}=gt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidSessionSettleRequest=e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:n,namespaces:r,expiry:s}=e;if(!Rt(t)){const{message:e}=gt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const i=function(e,t){let n=null;return vt(e?.publicKey,!1)||(n=gt("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}(n,"onSessionSettleRequest()");if(i)throw new Error(i.message);const o=St(r,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Ye(s)){const{message:e}=gt("EXPIRED","onSessionSettleRequest()");throw new Error(e)}},this.isValidUpdate=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:n}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const r=this.client.session.get(t),s=St(n,"update()");if(s)throw new Error(s.message);const i=Ct(r.requiredNamespaces,n,"update()");if(i)throw new Error(i.message)},this.isValidExtend=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:n,chainId:r,expiry:s}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!Ot(i,r)){const{message:e}=gt("MISSING_OR_INVALID",`request() chainId: ${r}`);throw new Error(e)}if(!function(e){return!(bt(e)||!vt(e.method,!1))}(n)){const{message:e}=gt("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(e)}if(!Tt(i,r,n.method)){const{message:e}=gt("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(e)}if(s&&!function(e,t){return Et(e,!1)&&e<=t.max&&e>=t.min}(s,ci)){const{message:e}=gt("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${ci.min} and ${ci.max}`);throw new Error(e)}},this.isValidRespond=async e=>{var t;if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:n,response:r}=e;try{await this.isValidSessionTopic(n)}catch(s){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),s}if(!function(e){return!(bt(e)||bt(e.result)&&bt(e.error)||!Et(e.id,!1)||!vt(e.jsonrpc,!1))}(r)){const{message:e}=gt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidPing=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:n,chainId:r}=e;await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!Ot(s,r)){const{message:e}=gt("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw new Error(e)}if(!function(e){return!(bt(e)||!vt(e.name,!1))}(n)){const{message:e}=gt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(e)}if(!_t(s,r,n.name)){const{message:e}=gt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidDisconnect=async e=>{if(!At(e)){const{message:t}=gt("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.getVerifyContext=async(e,t)=>{const n={verified:{verifyUrl:t.verifyUrl||hs,validation:"UNKNOWN",origin:t.url||""}};try{const r=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});r&&(n.verified.origin=r.origin,n.verified.isScam=r.isScam,n.verified.validation=r.origin===new URL(t.url).origin?"VALID":"INVALID")}catch(r){this.client.logger.info(r)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(e,t)=>{Object.values(e).forEach((e=>{if(!vt(e,!1)){const{message:n}=gt("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw new Error(n)}}))},this.addToRecentlyDeleted=(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const n of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(n)}}},this.checkRecentlyDeleted=e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:n}=gt("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(n)}}}async isInitialized(){if(!this.initialized){const{message:e}=gt("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Dr,(async e=>{const{topic:t,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const r=await this.client.core.crypto.decode(t,n);try{(0,Ft.isJsonRpcRequest)(r)?(this.client.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r})):(0,Ft.isJsonRpcResponse)(r)?(await this.client.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.client.core.history.delete(t,r.id)):this.onRelayEventUnknownPayload({topic:t,payload:r})}catch(s){this.client.logger.error(s)}}))}registerExpirerEvents(){this.client.core.expirer.on(cs,(async e=>{const{topic:t,id:n}=Je(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,gt("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))}))}registerPairingEvents(){this.client.core.pairing.events.on(Qr,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(es,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!vt(e,!1)){const{message:t}=gt("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=gt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ye(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=gt("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!vt(e,!1)){const{message:t}=gt("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=gt("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ye(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=gt("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=gt("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(vt(e,!1)){const{message:t}=gt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=gt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if("number"!=typeof e){const{message:t}=gt("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=gt("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ye(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=gt("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Pi extends js{constructor(e,t){super(e,t,"proposal",ni),this.core=e,this.logger=t}}class Ii extends js{constructor(e,t){super(e,t,"session",ni),this.core=e,this.logger=t}}class ki extends js{constructor(e,t){super(e,t,"request",ni,(e=>e.id)),this.core=e,this.logger=t}}class xi extends W{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=ri,this.events=new l.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(t){throw this.logger.error(t.message),t}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(t){throw this.logger.error(t.message),t}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(t){throw this.logger.error(t.message),t}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(t){throw this.logger.error(t.message),t}},this.update=async e=>{try{return await this.engine.update(e)}catch(t){throw this.logger.error(t.message),t}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(t){throw this.logger.error(t.message),t}},this.request=async e=>{try{return await this.engine.request(e)}catch(t){throw this.logger.error(t.message),t}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(t){throw this.logger.error(t.message),t}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(t){throw this.logger.error(t.message),t}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(t){throw this.logger.error(t.message),t}},this.find=e=>{try{return this.engine.find(e)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||ri,this.metadata=e?.metadata||(0,oe.D)()||{name:"",description:"",url:"",icons:[""]};const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,L.gw)((0,L.jI)({level:e?.logger||si}));this.core=e?.core||new ei(e),this.logger=(0,L.Ep)(t,this.name),this.session=new Ii(this.core,this.logger),this.proposal=new Pi(this.core,this.logger),this.pendingRequest=new ki(this.core,this.logger),this.engine=new Ei(this)}static async init(e){const t=new xi(e);return await t.initialize(),t}get context(){return(0,L.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(B){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(B.message),B}}}const Ni=xi;var Si=n(80236);class Ri{constructor(e){this.openModal=Si.jb.open,this.closeModal=Si.jb.close,this.subscribeModal=Si.jb.subscribe,this.setTheme=Si.ThemeCtrl.setThemeConfig,Si.ThemeCtrl.setThemeConfig(e),Si.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.all([n.e(766),n.e(1878),n.e(2572)]).then(n.bind(n,42572));const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Si.OptionsCtrl.setIsUiLoaded(!0)}}}var Ai={purpose:"identification",payload:{type:"text",content:`The following dApp would like to see your public address: ${typeof window<"u"?window.origin:""}`}},Oi={main:{number:0,id:"0x00000000851caf3cfdb6e899cf5958bfb1ac3413d346d43539627e6be7ec1b4a",size:170,parentID:"0xffffffff53616c757465202620526573706563742c20457468657265756d2100",timestamp:1530316800,gasLimit:1e7,beneficiary:"0x0000000000000000000000000000000000000000",gasUsed:0,totalScore:0,txsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",txsFeatures:0,stateRoot:"0x09bfdf9e24dd5cd5b63f3c1b5d58b97ff02ca0490214a021ed7d99b93867839c",receiptsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",signer:"0x0000000000000000000000000000000000000000",isTrunk:!0,transactions:[]},test:{number:0,id:"0x000000000b2bce3c70bc649a02749e8687721b09ed2e15997f466536b20bb127",size:170,parentID:"0xffffffff00000000000000000000000000000000000000000000000000000000",timestamp:1530014400,gasLimit:1e7,beneficiary:"0x0000000000000000000000000000000000000000",gasUsed:0,totalScore:0,txsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",txsFeatures:0,stateRoot:"0x4ec3af0acbad1ae467ad569337d2fe8576fe303928d35b8cdd91de47e9ac84bb",receiptsRoot:"0x45b0cfc220ceec5b7c1c62c4d4193d38e4eba48e8815729ce75f9c0ab0e4c1c0",signer:"0x0000000000000000000000000000000000000000",isTrunk:!0,transactions:[]}},Ti={requiresCertificate:!0},_i={"wallet-connect":{requiresCertificate:!1},veworld:Ti,sync2:Ti,sync:Ti},Ci=Object.keys(_i);Object.freeze(_i),Object.freeze(Ci);var Di,Ui=((Di=Ui||{}).RequestTransaction="thor_sendTransaction",Di.SignCertificate="thor_signCertificate",Di.SignTypedData="thor_signTypedData",Di),Li={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},$i=Li.NONE,Bi={configure(e){$i=Li[e]},debug(e,t,...n){$i>=Li.DEBUG&&console.log(`[${e}] (${t})`,...n)},info(e,t,...n){$i>=Li.INFO&&console.info(`[${e}] (${t})`,...n)},warn(e,t,...n){$i>=Li.WARN&&console.warn(`[${e}] (${t})`,...n)},error(e,t,...n){$i>=Li.ERROR&&console.error(`[${e}] (${t})`,...n)}},Fi=e=>({signTx:(t,n)=>{let r=e.sign("tx",t);return n.gas&&r.gas(n.gas),n.signer&&r.signer(n.signer),n.dependsOn&&r.dependsOn(n.dependsOn),n.link&&r.link(n.link),n.comment&&r.comment(n.comment),n.delegator&&r.delegate(n.delegator.url,n.delegator.signer),n.onAccepted&&r.accepted(n.onAccepted),Bi.debug("vendor","signTx",{messages:t.length,options:n}),r.request()},signCert:(t,n)=>{let r=e.sign("cert",t);return n.signer&&r.signer(n.signer),n.link&&r.link(n.link),n.onAccepted&&r.accepted(n.onAccepted),Bi.debug("vendor","signCert",{message:t,options:n}),r.request()},signTypedData(e,t,n,r){throw new Error("Sign typed data it is not available with sync2")}}),Mi="dappkit@vechain",ji=`${Mi}/source`,qi=`${Mi}/account`,Ki=`${Mi}/connectionCertificate`,Vi=`${Mi}/accountDomain`,zi=e=>{Bi.debug("LocalStorage","setAccount",e),e?localStorage.setItem(qi,e):localStorage.removeItem(qi)},Gi=e=>{Bi.debug("LocalStorage","setSource",e),e?localStorage.setItem(ji,e):localStorage.removeItem(ji)},Hi=e=>{Bi.debug("LocalStorage","setConnectionCertificate",e),e?localStorage.setItem(Ki,JSON.stringify(e)):localStorage.removeItem(Ki)},Wi=e=>{Bi.debug("LocalStorage","setAccountDomain",e),e?localStorage.setItem(Vi,e):localStorage.removeItem(Vi)},Ji=()=>localStorage.getItem(Vi)||null,Zi=()=>localStorage.getItem(qi)||null,Yi=()=>localStorage.getItem(ji)||null,Qi=()=>{let e=localStorage.getItem(Ki);return e?JSON.parse(e):null},Xi=class{constructor(e,t){this.wallet=e,this.connect=async e=>{let t=e?.message||this.certificateData.message,n=e?.options??this.certificateData.options,{annex:{domain:r,signer:s,timestamp:o},signature:a}=await this.signCert(t,n),c={...t,signature:a,signer:s,domain:r,timestamp:o};try{return i.KB.of(c).verify(),{account:s,verified:!0,connectionCertificate:c}}catch(l){return console.error("Failed to verify connection certificate",l),{account:s,verified:!1}}},this.signCert=(e,t)=>this.wallet.signCert(e,t),this.signTx=(e,t)=>this.wallet.signTx(e,t),this.signTypedData=(e,t,n,r)=>this.wallet.signTypedData(e,t,n,r),this.disconnect=async()=>this.wallet.disconnect?.(),this.certificateData={message:t?.message??Ai,options:t?.options??{}}}},eo=class{constructor(e){this.signer=e,this.connect=async()=>({account:await this.signer.connect(),verified:!1}),this.signCert=(e,t)=>this.signer.signCert(e,t),this.signTx=(e,t)=>this.signer.signTx(e,t),this.signTypedData=async(e,t,n,r)=>this.signer.signTypedData(e,t,n,r),this.disconnect=()=>this.signer.disconnect()}},to={},no={},ro=["0x00000000851caf3cfdb6e899cf5958bfb1ac3413d346d43539627e6be7ec1b4a","0x000000000b2bce3c70bc649a02749e8687721b09ed2e15997f466536b20bb127"].map((e=>`vechain:${e.slice(-32)}`)),so=({genesisId:e,wcClient:t,web3Modal:n,onDisconnected:r})=>{let s,i=`vechain:${e.slice(-32)}`;t.get().then((e=>{o(e),a(e)})).catch((()=>{throw new Error("Failed to get the wallet connect sign client")})),window&&(window.onfocus=async()=>{s&&await(await t.get()).ping({topic:s.topic})});let o=e=>{e.on("session_update",(({topic:t,params:n})=>{Bi.debug("wallet connect signer","session_update",{topic:t,params:n});let{namespaces:r}=n;s={...e.session.get(t),namespaces:r}})),e.on("session_delete",(()=>{r(),h().catch((()=>{throw new Error("Failed to disconnect")}))}))},a=t=>{if(typeof s<"u")return;Bi.debug("wallet connect signer","restore session");let n=t.session.keys;for(let r of n){let n=t.session.get(r),i=n.namespaces.vechain.accounts;for(let t of i)if(t.split(":")[1]===e.slice(-32))return void(s=n)}},c=async()=>{Bi.debug("wallet connect signer","connect");let e=await t.get(),r={methods:Object.values(Ui),chains:[i],events:[]};try{let t={vechain:r},i=await e.connect({requiredNamespaces:t});return i.uri&&await n.openModal({uri:i.uri}),await new Promise(((e,t)=>{let r=n.subscribeModal((e=>{e.open||(t(new Error("User closed modal while connecting")),r())}));i.approval().then((t=>{s=t,r(),e(t)})).catch((e=>{n.closeModal(),t(e)}))}))}catch(V){throw console.error("wc connect failed",V),new Error("wc connect failed")}},l=async t=>{let n=(t=>{if(!s)return;Bi.debug("wallet connect signer","validate session");let n=s.namespaces.vechain.accounts[0],r=n.split(":")[2],i=n.split(":")[1];return i!==e.slice(-32)||t&&t.toLowerCase()!==r.toLowerCase()?void 0:{address:r,networkIdentifier:i,topic:s.topic}})(t);return n?n.topic:(await c()).topic},u=async(e,n)=>{let r=await l(n);return(await t.get()).request({topic:r,chainId:i,request:e})},h=async()=>{if(!s)return;let e=s.topic;s=void 0;let n=await t.get();try{await n.disconnect({topic:e,reason:mt("USER_DISCONNECTED")})}catch(V){throw console.error("SignClient.disconnect failed",V),new Error("SignClient.disconnect failed")}};return{signTx:async(e,t)=>u({method:"thor_sendTransaction",params:[{message:e,options:t}]}),signCert:async(e,t)=>u({method:"thor_signCertificate",params:[{message:e,options:t}]}),signTypedData:async(e,t,n,r)=>u({method:"thor_signTypedData",params:[{domain:e,types:t,value:n,options:r}]}),disconnect:h,genesisId:e,connect:async()=>{s||(s=await c());let e=s.namespaces.vechain;if(!e)throw new Error("Failed to create a vechain session with wallet connect");let t=e.accounts[0];try{return t.split(":")[2]}catch(V){throw console.error("Failed to get account from session",V),new Error("Failed to get account from session")}}}},io=({source:e,genesis:t,walletConnectOptions:n,onDisconnected:r,connectionCertificate:s})=>{let i=(e=>e?"main"===e||"test"===e?Oi[e].id:e.id:Oi.main.id)(t);switch(Bi.debug("createWallet",e),e){case"sync":{if(!window.connex)throw new Error("User is not in a Sync wallet");let e=new c.Connex.Vendor(i,"sync");return new Xi(Fi(e),s)}case"sync2":{let e=new c.Connex.Vendor(i,"sync2");return new Xi(Fi(e),s)}case"veworld":{if(!window.vechain)throw new Error("VeWorld Extension is not installed");let e=window.vechain.newConnexSigner(i);return new Xi(e,s)}case"wallet-connect":{if(!n)throw new Error("WalletConnect options are not provided");let{projectId:e,metadata:t,modal:s}=n,o=(({projectId:e,metadata:t})=>{let n=to[e];if(n)return n;let r=Ni.init({projectId:e,metadata:t}),s={get:async()=>{try{return await r}catch(i){throw console.error("Failed to initialise the wallet connect sign client",i),new Error("Failed to initialise the wallet connect sign client")}}};return to[e]=s,s})({projectId:e,metadata:t}),a=s??(e=>{let t=no[e];if(t)return t;let n=new Ri({projectId:e,explorerRecommendedWalletIds:"NONE",mobileWallets:[{name:"VeWorld",id:"veworld-mobile",links:{native:"veworld://org.vechain.veworld.app/",universal:"https://veworld.com"}}],chains:ro,themeVariables:{"--wcm-z-index":"99999999"},walletImages:{"veworld-mobile":"https://www.veworld.net/assets/logo/logo.svg"}});return no[e]=n,n})(e),c=so({genesisId:i,wcClient:o,web3Modal:a,onDisconnected:r});return new eo(c)}}},oo=(e,t=10,n=7)=>e.length>t+n+1?`${e.slice(0,t)}\u2026${e.slice(-n)}`:e,ao="0xA11413086e163e41901bb81fdc5617c975Fa5a1A",co="0xc403b8EA53F707d7d4de095f0A20bC491Cf2bc94",lo={inputs:[{internalType:"address[]",name:"addresses",type:"address[]"}],name:"getNames",outputs:[{internalType:"string[]",name:"names",type:"string[]"}],stateMutability:"view",type:"function"},uo=class{constructor(e,t){this.options=e,this.driver=t,this.wallets={},this.setAccountDomain=e=>{e?(this.state.isAccountDomainLoading=!0,(async({address:e,driver:t})=>{if(!e)return null;let n=new s.g(t),r=t.genesis.id===Oi.test.id?co:ao,i=await n.thor.account(r).method(lo).call([e]),{decoded:{names:o}}=i;return o?.[0]||null})({address:e,driver:this.driver}).then((e=>{this.state.accountDomain=e})).catch((e=>{console.error("Error getting account domain",e),this.state.accountDomain=null})).finally((()=>{this.state.isAccountDomainLoading=!1}))):(this.state.accountDomain=null,this.state.isAccountDomainLoading=!1)},this.setAddress=e=>{this.state.address=e},this.setAddressAndDomain=e=>{this.setAddress(e),this.setAccountDomain(e)},this.signConnectionCertificate=async e=>{let t=e?.message||this.options.connectionCertificate?.message||Ai,n=e?.options||this.options.connectionCertificate?.options||{},{annex:{domain:r,signer:s,timestamp:o},signature:a}=await this.wallet.signCert(t,n),c={...t,signature:a,signer:s,domain:r,timestamp:o};try{return i.KB.of(c).verify(),this.setAddressAndDomain(s),this.state.connectionCertificate=c,{account:s,verified:!0,connectionCertificate:c}}catch(l){return console.error("Failed to sign connection certificate",l),{account:s,verified:!1}}finally{this.options.walletConnectOptions?.modal?.onConnectionCertificateSigned?.()}},this.connect=e=>this.wallet.connect(e).then((e=>("wallet-connect"===this.state.source&&this.options.requireCertificate&&this.options.walletConnectOptions?.modal?.askForConnectionCertificate?this.options.walletConnectOptions.modal.askForConnectionCertificate():(this.setAddressAndDomain(e.account),this.state.connectionCertificate=e.connectionCertificate??null),e))).catch((e=>{throw Bi.error("WalletManager","connect",e),e})),this.disconnect=(e=!1)=>{if(!this.state.source)return this.state.source=null,this.setAddressAndDomain(null),void(this.state.connectionCertificate=null);Bi.debug("WalletManager","disconnect","current source",this.state.source);let t=this.wallets[this.state.source];if(t&&!e&&t.disconnect){let e=t.disconnect();e instanceof Promise&&e.catch((e=>{Bi.error("WalletManager","disconnect",e)}))}this.state.source=null,this.setAddressAndDomain(null),this.state.connectionCertificate=null},this.signTx=(e,t)=>this.wallet.signTx(e,t).catch((e=>{throw Bi.error("WalletManager","signTx",e),e})),this.signCert=(e,t)=>this.wallet.signCert(e,t).catch((e=>{throw Bi.error("WalletManager","signCert",e),e})),this.signTypedData=(e,t,n,r)=>this.wallet.signTypedData(e,t,n,r).catch((e=>{throw Bi.error("WalletManager","signTypedData",e),e})),this.setSource=e=>{if(this.state.source!==e){if(this.state.source&&this.state.source!==e&&this.disconnect(),"wallet-connect"===e&&!this.options.walletConnectOptions)throw new Error("WalletConnect options are not provided");if("veworld"===e&&!window.vechain)throw new Error("VeWorld Extension is not installed");if("sync"===e&&!window.connex)throw new Error("User is not in a Sync wallet");Bi.debug("WalletManager","setSource",e),this.disconnect(),this.state.source=e}},this.subscribe=e=>(0,o.Ld)(this.state,(()=>{e(this.state)})),this.subscribeToKey=(e,t)=>(0,a.VW)(this.state,e,(e=>{t(e)})),this.initState=e=>{let t=this.getAvailableSources();if(!e)return(0,o.sj)({source:null,address:null,accountDomain:null,isAccountDomainLoading:!1,availableSources:t,connectionCertificate:null});let n=Zi(),r=Ji(),s=Yi(),i=Qi();return(0,o.sj)({source:s,address:n,accountDomain:r,isAccountDomainLoading:!1,availableSources:t,connectionCertificate:i})},this.initPersistence=e=>{e&&(this.subscribeToKey("address",zi),this.subscribeToKey("accountDomain",Wi),this.subscribeToKey("source",Gi),this.subscribeToKey("connectionCertificate",Hi))},this.getAvailableSources=()=>{let e=Ci,t=this.options.allowedWallets??e,n=[];return t.includes("veworld")&&n.push("veworld"),this.options.walletConnectOptions&&t.includes("wallet-connect")&&n.push("wallet-connect"),t.includes("sync2")&&n.push("sync2"),window.connex&&t.includes("sync")&&n.push("sync"),n},this.setFirstDetectedSource=()=>{window.vechain?this.setSource("veworld"):this.options.walletConnectOptions?this.setSource("wallet-connect"):window.connex?this.setSource("sync"):this.setSource("sync2")},this.state=this.initState(e.usePersistence??!1),this.initPersistence(e.usePersistence??!1),Bi.debug("WalletManager","constructor",this.state),!0===window.vechain?.isInAppBrowser?this.setSource("veworld"):e.useFirstDetectedSource&&this.setFirstDetectedSource()}get wallet(){let e=this.state.source;if(Bi.debug("WalletManager","get wallet","current source",e),!e)throw new Error("No wallet has been selected");let t=this.wallets[e];if(!t){if(!Ci.includes(e))throw new Error(`No wallet found for: ${e}`);Bi.debug("WalletManager","get wallet","creating a new wallet",e);let n={...this.options,source:e,onDisconnected:()=>this.disconnect(!0)};t=io(n),this.wallets[e]=t}return t}},ho={},po=class{constructor(e){e.logLevel&&(Bi.configure(e.logLevel),Bi.debug("DAppKit","constructor",e));let{nodeUrl:t,genesis:n}=e,o=(e=>e?"main"===e||"test"===e?Oi[e]:e:Oi.main)(n),a=((e,t,n)=>{let s=JSON.stringify({node:e,genesis:t}),o=(new TextEncoder).encode(s.normalize()),a=i.pU.of((0,i.yf)(o,"hex")).digits,c=ho[a];return c||(c=new r.DriverNoVendor(n,t),ho[a]=c),c})(t,o,e.customNet||new r.SimpleNet(t)),c=new uo(e,a);a.signTx=c.signTx.bind(c),a.signCert=c.signCert.bind(c);let l=new s.g(a);this.thor=l.thor,this.vendor=l.vendor,this.wallet=c}}},80236:function(e,t,n){"use strict";n.d(t,{AV:function(){return i},ConfigCtrl:function(){return p},ExplorerCtrl:function(){return T},OptionsCtrl:function(){return h},ThemeCtrl:function(){return M},ToastCtrl:function(){return q},jb:function(){return C},uA:function(){return l},zv:function(){return o}});var r=n(17832);const s=(0,r.sj)({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),i={state:s,subscribe:e=>(0,r.Ld)(s,(()=>e(s))),push(e,t){e!==s.view&&(s.view=e,t&&(s.data=t),s.history.push(e))},reset(e){s.view=e,s.history=[e]},replace(e){s.history.length>1&&(s.history[s.history.length-1]=e,s.view=e)},goBack(){if(s.history.length>1){s.history.pop();const[e]=s.history.slice(-1);s.view=e}},setData(e){s.data=e}},o={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>typeof window<"u"&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>o.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return o.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);return`${r}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,n){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let r=e;r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);return`${r}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(o.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(o.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(o.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(o.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=i.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},a=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),c=(0,r.sj)({enabled:a,userSessionId:"",events:[],connectedWalletId:void 0}),l={state:c,subscribe:e=>(0,r.Ld)(c.events,(()=>e((0,r.CO)(c.events[c.events.length-1])))),initialize(){c.enabled&&typeof(null==crypto?void 0:crypto.randomUUID)<"u"&&(c.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){c.connectedWalletId=e},click(e){if(c.enabled){const t={type:"CLICK",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}},track(e){if(c.enabled){const t={type:"TRACK",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}},view(e){if(c.enabled){const t={type:"VIEW",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}}},u=(0,r.sj)({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),h={state:u,subscribe:e=>(0,r.Ld)(u,(()=>e(u))),setChains(e){u.chains=e},setWalletConnectUri(e){u.walletConnectUri=e},setIsCustomDesktop(e){u.isCustomDesktop=e},setIsCustomMobile(e){u.isCustomMobile=e},setIsDataLoaded(e){u.isDataLoaded=e},setIsUiLoaded(e){u.isUiLoaded=e},setIsAuth(e){u.isAuth=e}},d=(0,r.sj)({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),p={state:d,subscribe:e=>(0,r.Ld)(d,(()=>e(d))),setConfig(e){var t,n;l.initialize(),h.setChains(e.chains),h.setIsAuth(Boolean(e.enableAuthMode)),h.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),h.setIsCustomDesktop(Boolean(null==(n=e.desktopWallets)?void 0:n.length)),o.setModalVersionInStorage(),Object.assign(d,e)}};var f=Object.defineProperty,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const b="https://explorer-api.walletconnect.com",v="wcm",E="js-2.6.2";async function P(e,t){const n=((e,t)=>{for(var n in t||(t={}))m.call(t,n)&&w(e,n,t[n]);if(g)for(var n of g(t))y.call(t,n)&&w(e,n,t[n]);return e})({sdkType:v,sdkVersion:E},t),r=new URL(e,b);return r.searchParams.append("projectId",p.state.projectId),Object.entries(n).forEach((([e,t])=>{t&&r.searchParams.append(e,String(t))})),(await fetch(r)).json()}const I={getDesktopListings:async e=>P("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>P("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>P("/w3m/v1/getInjectedListings",e),getAllListings:async e=>P("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${b}/w3m/v1/getWalletImage/${e}?projectId=${p.state.projectId}&sdkType=${v}&sdkVersion=${E}`,getAssetImageUrl:e=>`${b}/w3m/v1/getAssetImage/${e}?projectId=${p.state.projectId}&sdkType=${v}&sdkVersion=${E}`};var k=Object.defineProperty,x=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,R=(e,t,n)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const A=o.isMobile(),O=(0,r.sj)({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),T={state:O,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=p.state;if("NONE"===e||"ALL"===t&&!e)return O.recomendedWallets;if(o.isArray(e)){const t={recommendedIds:e.join(",")},{listings:n}=await I.getAllListings(t),r=Object.values(n);r.sort(((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))),O.recomendedWallets=r}else{const{chains:e,isAuth:n}=h.state,r=e?.join(","),s=o.isArray(t),i={page:1,sdks:n?"auth_v1":void 0,entries:o.RECOMMENDED_WALLET_AMOUNT,chains:r,version:2,excludedIds:s?t.join(","):void 0},{listings:a}=A?await I.getMobileListings(i):await I.getDesktopListings(i);O.recomendedWallets=Object.values(a)}return O.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var n in t||(t={}))N.call(t,n)&&R(e,n,t[n]);if(x)for(var n of x(t))S.call(t,n)&&R(e,n,t[n]);return e})({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:r}=p.state,{recomendedWallets:s}=O;if("ALL"===r)return O.wallets;s.length?t.excludedIds=s.map((e=>e.id)).join(","):o.isArray(n)&&(t.excludedIds=n.join(",")),o.isArray(r)&&(t.excludedIds=[t.excludedIds,r].filter(Boolean).join(",")),h.state.isAuth&&(t.sdks="auth_v1");const{page:i,search:a}=e,{listings:c,total:l}=A?await I.getMobileListings(t):await I.getDesktopListings(t),u=Object.values(c),d=a?"search":"wallets";return O[d]={listings:[...O[d].listings,...u],total:l,page:i??1},{listings:u,total:l}},getWalletImageUrl:e=>I.getWalletImageUrl(e),getAssetImageUrl:e=>I.getAssetImageUrl(e),resetSearch(){O.search={listings:[],total:0,page:1}}},_=(0,r.sj)({open:!1}),C={state:_,subscribe:e=>(0,r.Ld)(_,(()=>e(_))),open:async e=>new Promise((t=>{const{isUiLoaded:n,isDataLoaded:r}=h.state;if(o.removeWalletConnectDeepLink(),h.setWalletConnectUri(e?.uri),h.setChains(e?.chains),i.reset("ConnectWallet"),n&&r)_.open=!0,t();else{const e=setInterval((()=>{const n=h.state;n.isUiLoaded&&n.isDataLoaded&&(clearInterval(e),_.open=!0,t())}),200)}})),close(){_.open=!1}};var D=Object.defineProperty,U=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,B=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=(0,r.sj)({themeMode:typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),M={state:F,subscribe:e=>(0,r.Ld)(F,(()=>e(F))),setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(F.themeMode=t),n&&(F.themeVariables=((e,t)=>{for(var n in t||(t={}))L.call(t,n)&&B(e,n,t[n]);if(U)for(var n of U(t))$.call(t,n)&&B(e,n,t[n]);return e})({},n))}},j=(0,r.sj)({open:!1,message:"",variant:"success"}),q={state:j,subscribe:e=>(0,r.Ld)(j,(()=>e(j))),openToast(e,t){j.open=!0,j.message=e,j.variant=t},closeToast(){j.open=!1}}},61972:function(e,t,n){"use strict";n.d(t,{FF:function(){return I},S5:function(){return f},Yt:function(){return g},bytesToNumberBE:function(){return h},ci:function(){return a},dQ:function(){return w},eV:function(){return y},hexToBytes:function(){return u},ly:function(){return l},n$:function(){return E},ql:function(){return m},tL:function(){return p},ty:function(){return d},uz:function(){return c}});BigInt(0);const r=BigInt(1),s=BigInt(2),i=e=>e instanceof Uint8Array,o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=o[e[n]];return t}function c(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function l(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function u(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,s=e.slice(t,t+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function h(e){return l(a(e))}function d(e){if(!i(e))throw new Error("Uint8Array expected");return l(a(Uint8Array.from(e).reverse()))}function p(e,t){return u(e.toString(16).padStart(2*t,"0"))}function f(e,t){return p(e,t).reverse()}function g(e){return u(c(e))}function m(e,t,n){let r;if("string"===typeof t)try{r=u(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!i(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const s=r.length;if("number"===typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function y(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const w=e=>(s<<BigInt(e-1))-r,b=e=>new Uint8Array(e),v=e=>Uint8Array.from(e);function E(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=b(e),s=b(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...e)=>n(s,r,...e),c=(e=b())=>{s=a(v([0]),e),r=a(),0!==e.length&&(s=a(v([1]),e),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return y(...n)};return(e,t)=>{let n;for(o(),c(e);!(n=t(l()));)c();return o(),n}}const P={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function I(e,t,n={}){const r=(t,n,r)=>{const s=P[n];if("function"!==typeof s)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if((!r||void 0!==i)&&!s(i,e))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}},43497:function(e,t,n){"use strict";n.d(t,{kA:function(){return q}});var r=n(99443),s=n(61972);const i=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(3),l=BigInt(4),u=BigInt(5),h=BigInt(8);BigInt(9),BigInt(16);function d(e,t){const n=e%t;return n>=i?n:t+n}function p(e,t,n){if(n<=i||t<i)throw new Error("Expected power/modulo > 0");if(n===o)return i;let r=o;for(;t>i;)t&o&&(r=r*e%n),e=e*e%n,t>>=o;return r}function f(e,t,n){let r=e;for(;t-- >i;)r*=r,r%=n;return r}function g(e,t){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=d(e,t),r=t,s=i,a=o,c=o,l=i;for(;n!==i;){const e=r/n,t=r%n,i=s-c*e,o=a-l*e;r=n,n=t,s=c,a=l,c=i,l=o}if(r!==o)throw new Error("invert: does not exist");return d(s,t)}function m(e){if(e%l===c){const t=(e+o)/l;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%h===u){const t=(e-u)/h;return function(e,n){const r=e.mul(n,a),s=e.pow(r,t),i=e.mul(n,s),o=e.mul(e.mul(i,a),s),c=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return function(e){const t=(e-o)/a;let n,r,s;for(n=e-o,r=0;n%a===i;n/=a,r++);for(s=a;s<e&&p(s,t,e)!==e-o;s++);if(1===r){const t=(e+o)/l;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const c=(n+o)/a;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,s),n),u=e.pow(i,c),h=e.pow(i,n);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,o<<BigInt(a-t-1));l=e.sqr(n),u=e.mul(u,n),h=e.mul(h,l),a=t}return u}}(e)}const y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function w(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function b(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function v(e){const t=b(e);return t+Math.ceil(t/2)}var E=n(90505),P=n(7309);const I=BigInt(0),k=BigInt(1);function x(e){return function(e){const t=y.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});(0,s.FF)(e,t)}(e.Fp),(0,s.FF)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...w(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:N,hexToBytes:S}=s,R={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=R;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:N(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=R,n="string"===typeof e?S(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=R._parseInt(n.subarray(2)),{d:o,l:a}=R._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),s=t(n(e.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},A=BigInt(0),O=BigInt(1),T=(BigInt(2),BigInt(3));BigInt(4);function _(e){const t=function(e){const t=x(e);s.FF(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return s.eV(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:s}=t,i=n.sqr(e),o=n.mul(i,e);return n.add(n.add(o,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"===typeof e&&A<e&&e<t.n}function c(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=s.ci(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"===typeof e?e:s.bytesToNumberBE((0,s.ql)("private key",e,r))}catch(l){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(a=d(a,o)),c(a),a}const u=new Map;function h(e){if(!(e instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof p)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?p.ZERO:new p(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(p.fromAffine)}static fromHex(e){const t=p.fromAffine(i((0,s.ql)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const s=n.sqr(r),i=o(e);if(!n.eql(s,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){h(e);const{px:t,py:r,pz:s}=this,{px:i,py:o,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(i,s)),l=n.eql(n.mul(r,a),n.mul(o,s));return c&&l}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,T),{px:i,py:o,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,h=n.mul(i,i),d=n.mul(o,o),f=n.mul(a,a),g=n.mul(i,o);return g=n.add(g,g),u=n.mul(i,a),u=n.add(u,u),c=n.mul(e,u),l=n.mul(s,f),l=n.add(c,l),c=n.sub(d,l),l=n.add(d,l),l=n.mul(c,l),c=n.mul(g,c),u=n.mul(s,u),f=n.mul(e,f),g=n.sub(h,f),g=n.mul(e,g),g=n.add(g,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,f),h=n.mul(h,g),l=n.add(l,h),f=n.mul(o,a),f=n.add(f,f),h=n.mul(f,g),c=n.sub(c,h),u=n.mul(f,d),u=n.add(u,u),u=n.add(u,u),new p(c,l,u)}add(e){h(e);const{px:r,py:s,pz:i}=this,{px:o,py:a,pz:c}=e;let l=n.ZERO,u=n.ZERO,d=n.ZERO;const f=t.a,g=n.mul(t.b,T);let m=n.mul(r,o),y=n.mul(s,a),w=n.mul(i,c),b=n.add(r,s),v=n.add(o,a);b=n.mul(b,v),v=n.add(m,y),b=n.sub(b,v),v=n.add(r,i);let E=n.add(o,c);return v=n.mul(v,E),E=n.add(m,w),v=n.sub(v,E),E=n.add(s,i),l=n.add(a,c),E=n.mul(E,l),l=n.add(y,w),E=n.sub(E,l),d=n.mul(f,v),l=n.mul(g,w),d=n.add(l,d),l=n.sub(y,d),d=n.add(y,d),u=n.mul(l,d),y=n.add(m,m),y=n.add(y,m),w=n.mul(f,w),v=n.mul(g,v),y=n.add(y,w),w=n.sub(m,w),w=n.mul(f,w),v=n.add(v,w),m=n.mul(y,v),u=n.add(u,m),m=n.mul(E,v),l=n.mul(b,l),l=n.sub(l,m),m=n.mul(b,y),d=n.mul(E,d),d=n.add(d,m),new p(l,u,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return g.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(p.fromAffine)}))}multiplyUnsafe(e){const r=p.ZERO;if(e===A)return r;if(c(e),e===O)return this;const{endo:s}=t;if(!s)return g.unsafeLadder(this,e);let{k1neg:i,k1:o,k2neg:a,k2:l}=s.splitScalar(e),u=r,h=r,d=this;for(;o>A||l>A;)o&O&&(u=u.add(d)),l&O&&(h=h.add(d)),d=d.double(),o>>=O,l>>=O;return i&&(u=u.negate()),a&&(h=h.negate()),h=new p(n.mul(h.px,s.beta),h.py,h.pz),u.add(h)}multiply(e){c(e);let r,s,i=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:c}=o.splitScalar(i);let{p:l,f:u}=this.wNAF(t),{p:h,f:d}=this.wNAF(c);l=g.constTimeNegate(e,l),h=g.constTimeNegate(a,h),h=new p(n.mul(h.px,o.beta),h.py,h.pz),r=l.add(h),s=u.add(d)}else{const{p:e,f:t}=this.wNAF(i);r=e,s=t}return p.normalizeZ([r,s])[0]}multiplyAndAddUnsafe(e,t,n){const r=p.BASE,s=(e,t)=>t!==A&&t!==O&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){const{px:t,py:r,pz:s}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(s));const o=n.mul(t,e),a=n.mul(r,e),c=n.mul(s,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===O)return!0;if(n)return n(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===O?this:n?n(p,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(p,this,e)}toHex(e=!0){return s.ci(this.toRawBytes(e))}}p.BASE=new p(t.Gx,t.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,g=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,s=t;for(;n>I;)n&k&&(r=r.add(s)),s=s.double(),n>>=k;return r},precomputeWindow(e,t){const{windows:n,windowSize:s}=r(t),i=[];let o=e,a=o;for(let r=0;r<n;r++){a=o,i.push(a);for(let e=1;e<s;e++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(t,s,i){const{windows:o,windowSize:a}=r(t);let c=e.ZERO,l=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let r=Number(i&u);i>>=d,r>a&&(r-=h,i+=k);const o=t,p=t+Math.abs(r)-1,f=e%2!==0,g=r<0;0===r?l=l.add(n(f,s[o])):c=c.add(n(g,s[p]))}return{p:c,f:l}},wNAFCached(e,t,n,r){const s=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,s),1!==s&&t.set(e,r(i))),this.wNAF(s,i,n)}}}(p,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function C(e){const t=function(e){const t=x(e);return s.FF(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,a=2*n.BYTES+1;function c(e){return d(e,r)}function l(e){return g(e,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:p,isWithinCurveOrder:f}=_({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),a=s.eV;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===a&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}{const e=s.bytesToNumberBE(o);if(!(A<(c=e)&&c<n.ORDER))throw new Error("Point is not on curve");const t=p(e);let i=n.sqrt(t);return 1===(1&r)!==((i&O)===O)&&(i=n.neg(i)),{x:e,y:i}}var c}}),m=e=>s.ci(s.tL(e,t.nByteLength));function y(e){return e>r>>O}const w=(e,t,n)=>s.bytesToNumberBE(e.slice(t,n));class E{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=(0,s.ql)("compactSignature",e,2*n),new E(w(e,0,n),w(e,n,2*n))}static fromDER(e){const{r:t,s:n}=R.toSig((0,s.ql)("DER",e));return new E(t,n)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new E(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:o}=this,a=N((0,s.ql)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const h=2===o||3===o?r+t.n:r;if(h>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0===(1&o)?"02":"03",p=u.fromHex(d+m(h)),f=l(h),g=c(-a*f),y=c(i*f),w=u.BASE.multiplyAndAddUnsafe(p,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return s.hexToBytes(this.toDERHex())}toDERHex(){return R.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s.hexToBytes(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const P={isValidPrivateKey(e){try{return h(e),!0}catch(t){return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const e=v(t.n);return function(e,t,n=!1){const r=e.length,i=b(t),a=v(t);if(r<16||r<a||r>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${r}`);const c=d(n?(0,s.bytesToNumberBE)(e):(0,s.ty)(e),t-o)+o;return n?(0,s.S5)(c,i):(0,s.tL)(c,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function I(e){const t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===i||r===a:n?r===2*i||r===2*a:e instanceof u}const k=t.bits2int||function(e){const n=s.bytesToNumberBE(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},N=t.bits2int_modN||function(e){return c(k(e))},S=s.dQ(t.nBitLength);function T(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(A<=e&&e<S))throw new Error(`bigint expected < 2^${t.nBitLength}`);return s.tL(e,t.nByteLength)}function C(e,r,i=D){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:a}=t;let{lowS:d,prehash:p,extraEntropy:g}=i;null==d&&(d=!0),e=(0,s.ql)("msgHash",e),p&&(e=(0,s.ql)("prehashed msgHash",o(e)));const m=N(e),w=h(r),b=[T(w),T(m)];if(null!=g){const e=!0===g?a(n.BYTES):g;b.push((0,s.ql)("extraEntropy",e))}const v=s.eV(...b),P=m;return{seed:v,k2sig:function(e){const t=k(e);if(!f(t))return;const n=l(t),r=u.BASE.multiply(t).toAffine(),s=c(r.x);if(s===A)return;const i=c(n*c(P+s*w));if(i===A)return;let o=(r.x===s?0:2)|Number(r.y&O),a=i;return d&&y(i)&&(a=function(e){return y(e)?c(-e):e}(i),o^=1),new E(s,a,o)}}}const D={lowS:t.lowS,prehash:!1},U={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(I(e))throw new Error("first arg must be private key");if(!I(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(h(e)).toRawBytes(n)},sign:function(e,n,r=D){const{seed:i,k2sig:o}=C(e,n,r),a=t;return s.n$(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(e,n,r,i=U){const o=e;if(n=(0,s.ql)("msgHash",n),r=(0,s.ql)("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:a,prehash:h}=i;let d,p;try{if("string"===typeof o||o instanceof Uint8Array)try{d=E.fromDER(o)}catch(P){if(!(P instanceof R.Err))throw P;d=E.fromCompact(o)}else{if("object"!==typeof o||"bigint"!==typeof o.r||"bigint"!==typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;d=new E(e,t)}}p=u.fromHex(r)}catch(I){if("PARSE"===I.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(a&&d.hasHighS())return!1;h&&(n=t.hash(n));const{r:f,s:g}=d,m=N(n),y=l(g),w=c(m*y),b=c(f*y),v=u.BASE.multiplyAndAddUnsafe(p,w,b)?.toAffine();return!!v&&c(v.x)===f},ProjectivePoint:u,Signature:E,utils:P}}function D(e){return{hash:e,hmac:(t,...n)=>(0,E.b)(e,t,(0,P.eV)(...n)),randomBytes:P.O6}}const U=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),L=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$=BigInt(1),B=BigInt(2),F=(e,t)=>(e+t/B)/t;function M(e){const t=U,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=f(u,n,t)*u%t,d=f(h,n,t)*u%t,p=f(d,B,t)*l%t,g=f(p,s,t)*p%t,m=f(g,i,t)*g%t,y=f(m,a,t)*m%t,w=f(y,c,t)*y%t,b=f(w,a,t)*m%t,v=f(b,n,t)*u%t,E=f(v,o,t)*g%t,P=f(E,r,t)*l%t,I=f(P,B,t);if(!j.eql(j.sqr(I),e))throw new Error("Cannot find square root");return I}const j=function(e,t,n=!1,r={}){if(e<=i)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:a,nByteLength:c}=w(e,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const l=m(e),u=Object.freeze({ORDER:e,BITS:a,BYTES:c,MASK:(0,s.dQ)(a),ZERO:i,ONE:o,create:t=>d(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&o)===o,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,n)=>d(t+n,e),sub:(t,n)=>d(t-n,e),mul:(t,n)=>d(t*n,e),pow:(e,t)=>function(e,t,n){if(n<i)throw new Error("Expected power > 0");if(n===i)return e.ONE;if(n===o)return t;let r=e.ONE,s=t;for(;n>i;)n&o&&(r=e.mul(r,s)),s=e.sqr(s),n>>=o;return r}(u,e,t),div:(t,n)=>d(t*g(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>g(t,e),sqrt:r.sqrt||(e=>l(u,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r))),e.ONE),s=e.inv(r);return t.reduceRight(((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r))),s),n}(u,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,s.S5)(e,c):(0,s.tL)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${e.length}`);return n?(0,s.ty)(e):(0,s.bytesToNumberBE)(e)}});return Object.freeze(u)}(U,void 0,void 0,{sqrt:M}),q=function(e,t){const n=t=>C({...e,...D(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:j,n:L,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=L,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=F(i*e,t),c=F(-r*e,t);let l=d(e-a*n-c*s,t),u=d(-a*r-c*i,t);const h=l>o,p=u>o;if(h&&(l=t-l),p&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:p,k2:u}}}},r.J);BigInt(0);q.ProjectivePoint},93745:function(e,t,n){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.d(t,{Gg:function(){return o},J8:function(){return a},Rx:function(){return r},aI:function(){return s},vp:function(){return i}})},88646:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(93745),s=n(7309);class i extends s.kb{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,s.GL)(this.buffer)}update(e){(0,r.Gg)(this);const{view:t,buffer:n,blockLen:i}=this,o=(e=(0,s.O0)(e)).length;for(let r=0;r<o;){const a=Math.min(i-this.pos,o-r);if(a!==i)n.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,s.GL)(e);for(;i<=o-r;r+=i)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.Gg)(this),(0,r.J8)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let r=a;r<i;r++)t[r]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,a,r)}(n,i-8,BigInt(8*this.length),o),this.process(n,0);const c=(0,s.GL)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let r=0;r<u;r++)c.setUint32(4*r,h[r],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.length=r,e.pos=o,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}},96586:function(e,t,n){"use strict";n.d(t,{EP:function(){return a},SD:function(){return l},Vl:function(){return o},gm:function(){return c},mk:function(){return u}});const r=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>s&r)}:{h:0|Number(e>>s&r),l:0|Number(e&r)}}function o(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:a}=i(e[s],t);[n[s],r[s]]=[o,a]}return[n,r]}const a=(e,t,n)=>e<<n|t>>>32-n,c=(e,t,n)=>t<<n|e>>>32-n,l=(e,t,n)=>t<<n-32|e>>>64-n,u=(e,t,n)=>e<<n-32|t>>>64-n;const h={fromBig:i,split:o,toBig:(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:a,rotlSL:c,rotlBH:l,rotlBL:u,add:function(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,add5H:(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,add5L:(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0)};t.ZP=h},31042:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(93745),s=n(7309);const i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class o extends s.kb{constructor(e,t,n={},i,o,a){if(super(),this.blockLen=e,this.outputLen=t,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,(0,r.Rx)(e),(0,r.Rx)(t),(0,r.Rx)(i),t<0||t>i)throw new Error("outputLen bigger than keyLen");if(void 0!==n.key&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(void 0!==n.salt&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(void 0!==n.personalization&&n.personalization.length!==a)throw new Error(`personalization must be ${a} byte long or undefined`);this.buffer32=(0,s.Jq)(this.buffer=new Uint8Array(e))}update(e){(0,r.Gg)(this);const{blockLen:t,buffer:n,buffer32:i}=this,o=(e=(0,s.O0)(e)).length,a=e.byteOffset,c=e.buffer;for(let r=0;r<o;){this.pos===t&&(this.compress(i,0,!1),this.pos=0);const s=Math.min(t-this.pos,o-r),l=a+r;if(s!==t||l%4||!(r+s<o))n.set(e.subarray(r,r+s),this.pos),this.pos+=s,this.length+=s,r+=s;else{const e=new Uint32Array(c,l,Math.floor((o-r)/4));for(let n=0;r+t<o;n+=i.length,r+=t)this.length+=t,this.compress(e,n,!1)}}return this}digestInto(e){(0,r.Gg)(this),(0,r.J8)(e,this);const{pos:t,buffer32:n}=this;this.finished=!0,this.buffer.subarray(t).fill(0),this.compress(n,0,!0);const i=(0,s.Jq)(e);this.get().forEach(((e,t)=>i[t]=e))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){const{buffer:t,length:n,finished:r,destroyed:s,outputLen:i,pos:o}=this;return e||(e=new this.constructor({dkLen:i})),e.set(...this.get()),e.length=n,e.finished=r,e.destroyed=s,e.outputLen=i,e.buffer.set(t),e.pos=o,e}}var a=n(96586);const c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l=new Uint32Array(32);function u(e,t,n,r,s,i){const o=s[i],c=s[i+1];let u=l[2*e],h=l[2*e+1],d=l[2*t],p=l[2*t+1],f=l[2*n],g=l[2*n+1],m=l[2*r],y=l[2*r+1],w=a.ZP.add3L(u,d,o);h=a.ZP.add3H(w,h,p,c),u=0|w,({Dh:y,Dl:m}={Dh:y^h,Dl:m^u}),({Dh:y,Dl:m}={Dh:a.ZP.rotr32H(y,m),Dl:a.ZP.rotr32L(y,m)}),({h:g,l:f}=a.ZP.add(g,f,y,m)),({Bh:p,Bl:d}={Bh:p^g,Bl:d^f}),({Bh:p,Bl:d}={Bh:a.ZP.rotrSH(p,d,24),Bl:a.ZP.rotrSL(p,d,24)}),l[2*e]=u,l[2*e+1]=h,l[2*t]=d,l[2*t+1]=p,l[2*n]=f,l[2*n+1]=g,l[2*r]=m,l[2*r+1]=y}function h(e,t,n,r,s,i){const o=s[i],c=s[i+1];let u=l[2*e],h=l[2*e+1],d=l[2*t],p=l[2*t+1],f=l[2*n],g=l[2*n+1],m=l[2*r],y=l[2*r+1],w=a.ZP.add3L(u,d,o);h=a.ZP.add3H(w,h,p,c),u=0|w,({Dh:y,Dl:m}={Dh:y^h,Dl:m^u}),({Dh:y,Dl:m}={Dh:a.ZP.rotrSH(y,m,16),Dl:a.ZP.rotrSL(y,m,16)}),({h:g,l:f}=a.ZP.add(g,f,y,m)),({Bh:p,Bl:d}={Bh:p^g,Bl:d^f}),({Bh:p,Bl:d}={Bh:a.ZP.rotrBH(p,d,63),Bl:a.ZP.rotrBL(p,d,63)}),l[2*e]=u,l[2*e+1]=h,l[2*t]=d,l[2*t+1]=p,l[2*n]=f,l[2*n+1]=g,l[2*r]=m,l[2*r+1]=y}class d extends o{constructor(e={}){super(128,void 0===e.dkLen?64:e.dkLen,e,64,16,16),this.v0l=0|c[0],this.v0h=0|c[1],this.v1l=0|c[2],this.v1h=0|c[3],this.v2l=0|c[4],this.v2h=0|c[5],this.v3l=0|c[6],this.v3h=0|c[7],this.v4l=0|c[8],this.v4h=0|c[9],this.v5l=0|c[10],this.v5h=0|c[11],this.v6l=0|c[12],this.v6h=0|c[13],this.v7l=0|c[14],this.v7h=0|c[15];const t=e.key?e.key.length:0;if(this.v0l^=this.outputLen|t<<8|65536|1<<24,e.salt){const t=(0,s.Jq)((0,s.O0)(e.salt));this.v4l^=t[0],this.v4h^=t[1],this.v5l^=t[2],this.v5h^=t[3]}if(e.personalization){const t=(0,s.Jq)((0,s.O0)(e.personalization));this.v6l^=t[0],this.v6h^=t[1],this.v7l^=t[2],this.v7h^=t[3]}if(e.key){const t=new Uint8Array(this.blockLen);t.set((0,s.O0)(e.key)),this.update(t)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:r,v2l:s,v2h:i,v3l:o,v3h:a,v4l:c,v4h:l,v5l:u,v5h:h,v6l:d,v6h:p,v7l:f,v7h:g}=this;return[e,t,n,r,s,i,o,a,c,l,u,h,d,p,f,g]}set(e,t,n,r,s,i,o,a,c,l,u,h,d,p,f,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|s,this.v2h=0|i,this.v3l=0|o,this.v3h=0|a,this.v4l=0|c,this.v4h=0|l,this.v5l=0|u,this.v5h=0|h,this.v6l=0|d,this.v6h=0|p,this.v7l=0|f,this.v7h=0|g}compress(e,t,n){this.get().forEach(((e,t)=>l[t]=e)),l.set(c,16);let{h:r,l:s}=a.ZP.fromBig(BigInt(this.length));l[24]=c[8]^s,l[25]=c[9]^r,n&&(l[28]=~l[28],l[29]=~l[29]);let o=0;const d=i;for(let i=0;i<12;i++)u(0,4,8,12,e,t+2*d[o++]),h(0,4,8,12,e,t+2*d[o++]),u(1,5,9,13,e,t+2*d[o++]),h(1,5,9,13,e,t+2*d[o++]),u(2,6,10,14,e,t+2*d[o++]),h(2,6,10,14,e,t+2*d[o++]),u(3,7,11,15,e,t+2*d[o++]),h(3,7,11,15,e,t+2*d[o++]),u(0,5,10,15,e,t+2*d[o++]),h(0,5,10,15,e,t+2*d[o++]),u(1,6,11,12,e,t+2*d[o++]),h(1,6,11,12,e,t+2*d[o++]),u(2,7,8,13,e,t+2*d[o++]),h(2,7,8,13,e,t+2*d[o++]),u(3,4,9,14,e,t+2*d[o++]),h(3,4,9,14,e,t+2*d[o++]);this.v0l^=l[0]^l[16],this.v0h^=l[1]^l[17],this.v1l^=l[2]^l[18],this.v1h^=l[3]^l[19],this.v2l^=l[4]^l[20],this.v2h^=l[5]^l[21],this.v3l^=l[6]^l[22],this.v3h^=l[7]^l[23],this.v4l^=l[8]^l[24],this.v4h^=l[9]^l[25],this.v5l^=l[10]^l[26],this.v5h^=l[11]^l[27],this.v6l^=l[12]^l[28],this.v6h^=l[13]^l[29],this.v7l^=l[14]^l[30],this.v7h^=l[15]^l[31],l.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const p=(0,s.K$)((e=>new d(e)))},90505:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(93745),s=n(7309);class i extends s.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.vp)(e);const n=(0,s.O0)(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let r=0;r<o.length;r++)o[r]^=54;this.iHash.update(o),this.oHash=e.create();for(let r=0;r<o.length;r++)o[r]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,r.Gg)(this),this.iHash.update(e),this}digestInto(e){(0,r.Gg)(this),(0,r.aI)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const o=(e,t,n)=>new i(e,t).update(n).digest();o.create=(e,t)=>new i(e,t)},78890:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});var r=n(93745),s=n(90505),i=n(7309);function o(e,t,n,o){(0,r.vp)(e);const a=(0,i.U5)({dkLen:32,asyncTick:10},o),{c:c,dkLen:l,asyncTick:u}=a;if((0,r.Rx)(c),(0,r.Rx)(l),(0,r.Rx)(u),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const h=(0,i.O0)(t),d=(0,i.O0)(n),p=new Uint8Array(l),f=s.b.create(e,h),g=f._cloneInto().update(d);return{c:c,dkLen:l,asyncTick:u,DK:p,PRF:f,PRFSalt:g}}function a(e,t,n,r,s){return e.destroy(),t.destroy(),r&&r.destroy(),s.fill(0),n}function c(e,t,n,r){const{c:s,dkLen:c,DK:l,PRF:u,PRFSalt:h}=o(e,t,n,r);let d;const p=new Uint8Array(4),f=(0,i.GL)(p),g=new Uint8Array(u.outputLen);for(let i=1,o=0;o<c;i++,o+=u.outputLen){const e=l.subarray(o,o+u.outputLen);f.setInt32(0,i,!1),(d=h._cloneInto(d)).update(p).digestInto(g),e.set(g.subarray(0,e.length));for(let t=1;t<s;t++){u._cloneInto(d).update(g).digestInto(g);for(let t=0;t<e.length;t++)e[t]^=g[t]}}return a(u,h,l,d,g)}},23677:function(e,t,n){"use strict";n.d(t,{E:function(){return p},f:function(){return d}});var r=n(93745),s=n(99443),i=n(78890),o=n(7309);const a=(e,t)=>e<<t|e>>>32-t;function c(e,t,n,r,s,i){let o=e[t++]^n[r++],c=e[t++]^n[r++],l=e[t++]^n[r++],u=e[t++]^n[r++],h=e[t++]^n[r++],d=e[t++]^n[r++],p=e[t++]^n[r++],f=e[t++]^n[r++],g=e[t++]^n[r++],m=e[t++]^n[r++],y=e[t++]^n[r++],w=e[t++]^n[r++],b=e[t++]^n[r++],v=e[t++]^n[r++],E=e[t++]^n[r++],P=e[t++]^n[r++],I=o,k=c,x=l,N=u,S=h,R=d,A=p,O=f,T=g,_=m,C=y,D=w,U=b,L=v,$=E,B=P;for(let F=0;F<8;F+=2)S^=a(I+U|0,7),T^=a(S+I|0,9),U^=a(T+S|0,13),I^=a(U+T|0,18),_^=a(R+k|0,7),L^=a(_+R|0,9),k^=a(L+_|0,13),R^=a(k+L|0,18),$^=a(C+A|0,7),x^=a($+C|0,9),A^=a(x+$|0,13),C^=a(A+x|0,18),N^=a(B+D|0,7),O^=a(N+B|0,9),D^=a(O+N|0,13),B^=a(D+O|0,18),k^=a(I+N|0,7),x^=a(k+I|0,9),N^=a(x+k|0,13),I^=a(N+x|0,18),A^=a(R+S|0,7),O^=a(A+R|0,9),S^=a(O+A|0,13),R^=a(S+O|0,18),D^=a(C+_|0,7),T^=a(D+C|0,9),_^=a(T+D|0,13),C^=a(_+T|0,18),U^=a(B+$|0,7),L^=a(U+B|0,9),$^=a(L+U|0,13),B^=a($+L|0,18);s[i++]=o+I|0,s[i++]=c+k|0,s[i++]=l+x|0,s[i++]=u+N|0,s[i++]=h+S|0,s[i++]=d+R|0,s[i++]=p+A|0,s[i++]=f+O|0,s[i++]=g+T|0,s[i++]=m+_|0,s[i++]=y+C|0,s[i++]=w+D|0,s[i++]=b+U|0,s[i++]=v+L|0,s[i++]=E+$|0,s[i++]=P+B|0}function l(e,t,n,r,s){let i=r+0,o=r+16*s;for(let a=0;a<16;a++)n[o+a]=e[t+16*(2*s-1)+a];for(let a=0;a<s;a++,i+=16,t+=16)c(n,o,e,t,n,i),a>0&&(o+=16),c(n,i,e,t+=16,n,o)}function u(e,t,n){const a=(0,o.U5)({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:c,r:l,p:u,dkLen:h,asyncTick:d,maxmem:p,onProgress:f}=a;if((0,r.Rx)(c),(0,r.Rx)(l),(0,r.Rx)(u),(0,r.Rx)(h),(0,r.Rx)(d),(0,r.Rx)(p),void 0!==f&&"function"!==typeof f)throw new Error("progressCb should be function");const g=128*l,m=g/4;if(c<=1||0!==(c&c-1)||c>=2**(g/8)||c>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(u<0||u>137438953440/g)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(h<0||h>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const y=g*(c+u);if(y>p)throw new Error(`Scrypt: parameters too large, ${y} (128 * r * (N + p)) > ${p} (maxmem)`);const w=(0,i.n)(s.J,e,t,{c:1,dkLen:g*u}),b=(0,o.Jq)(w),v=(0,o.Jq)(new Uint8Array(g*c)),E=(0,o.Jq)(new Uint8Array(g));let P=()=>{};if(f){const e=2*c*u,t=Math.max(Math.floor(e/1e4),1);let n=0;P=()=>{n++,!f||n%t&&n!==e||f(n/e)}}return{N:c,r:l,p:u,dkLen:h,blockSize32:m,V:v,B32:b,B:w,tmp:E,blockMixCb:P,asyncTick:d}}function h(e,t,n,r,o){const a=(0,i.n)(s.J,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),o.fill(0),a}function d(e,t,n){const{N:r,r:s,p:i,dkLen:o,blockSize32:a,V:c,B32:d,B:p,tmp:f,blockMixCb:g}=u(e,t,n);for(let u=0;u<i;u++){const e=a*u;for(let t=0;t<a;t++)c[t]=d[e+t];for(let t=0,n=0;t<r-1;t++)l(c,n,c,n+=a,s),g();l(c,(r-1)*a,d,e,s),g();for(let t=0;t<r;t++){const t=d[e+a-16]%r;for(let n=0;n<a;n++)f[n]=d[e+n]^c[t*a+n];l(f,0,d,e,s),g()}}return h(e,o,p,c,f)}async function p(e,t,n){const{N:r,r:s,p:i,dkLen:a,blockSize32:c,V:d,B32:p,B:f,tmp:g,blockMixCb:m,asyncTick:y}=u(e,t,n);for(let u=0;u<i;u++){const e=c*u;for(let n=0;n<c;n++)d[n]=p[e+n];let t=0;await(0,o.oY)(r-1,y,(()=>{l(d,t,d,t+=c,s),m()})),l(d,(r-1)*c,p,e,s),m(),await(0,o.oY)(r,y,(()=>{const t=p[e+c-16]%r;for(let n=0;n<c;n++)g[n]=p[e+n]^d[t*c+n];l(g,0,p,e,s),m()}))}return h(e,a,f,d,g)}},99443:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var r=n(88646),s=n(7309);const i=(e,t,n)=>e&t^e&n^t&n,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends r.N{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[e,t,n,r,s,i,o,a]}set(e,t,n,r,s,i,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let s=0;s<16;s++,t+=4)c[s]=e.getUint32(t,!1);for(let i=16;i<64;i++){const e=c[i-15],t=c[i-2],n=(0,s.np)(e,7)^(0,s.np)(e,18)^e>>>3,r=(0,s.np)(t,17)^(0,s.np)(t,19)^t>>>10;c[i]=r+c[i-7]+n+c[i-16]|0}let{A:n,B:r,C:a,D:l,E:u,F:h,G:d,H:p}=this;for(let g=0;g<64;g++){const e=p+((0,s.np)(u,6)^(0,s.np)(u,11)^(0,s.np)(u,25))+((f=u)&h^~f&d)+o[g]+c[g]|0,t=((0,s.np)(n,2)^(0,s.np)(n,13)^(0,s.np)(n,22))+i(n,r,a)|0;p=d,d=h,h=u,u=l+e|0,l=a,a=r,r=n,n=e+t|0}var f;n=n+this.A|0,r=r+this.B|0,a=a+this.C|0,l=l+this.D|0,u=u+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(n,r,a,l,u,h,d,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const u=(0,s.hE)((()=>new l))},65305:function(e,t,n){"use strict";n.d(t,{fr:function(){return E}});var r=n(93745),s=n(96586),i=n(7309);const[o,a,c]=[[],[],[]],l=BigInt(0),u=BigInt(1),h=BigInt(2),d=BigInt(7),p=BigInt(256),f=BigInt(113);for(let P=0,I=u,k=1,x=0;P<24;P++){[k,x]=[x,(2*k+3*x)%5],o.push(2*(5*x+k)),a.push((P+1)*(P+2)/2%64);let e=l;for(let t=0;t<7;t++)I=(I<<u^(I>>d)*f)%p,I&h&&(e^=u<<(u<<BigInt(t))-u);c.push(e)}const[g,m]=(0,s.Vl)(c,!0),y=(e,t,n)=>n>32?(0,s.SD)(e,t,n):(0,s.EP)(e,t,n),w=(e,t,n)=>n>32?(0,s.mk)(e,t,n):(0,s.gm)(e,t,n);class b extends i.kb{constructor(e,t,n,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.Rx)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.Jq)(this.state)}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const t=(r+8)%10,s=(r+2)%10,i=n[s],o=n[s+1],a=y(i,o,1)^n[t],c=w(i,o,1)^n[t+1];for(let n=0;n<50;n+=10)e[r+n]^=a,e[r+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=a[n],i=y(t,s,r),c=w(t,s,r),l=o[n];t=e[l],s=e[l+1],e[l]=i,e[l+1]=c}for(let r=0;r<50;r+=10){for(let t=0;t<10;t++)n[t]=e[r+t];for(let t=0;t<10;t++)e[r+t]^=~n[(t+2)%10]&n[(t+4)%10]}e[0]^=g[r],e[1]^=m[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,r.Gg)(this);const{blockLen:t,state:n}=this,s=(e=(0,i.O0)(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!==(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,r.Gg)(this,!1),(0,r.aI)(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,r.Rx)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,r.J8)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new b(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const v=(e,t,n)=>(0,i.hE)((()=>new b(t,e,n))),E=v(1,136,32)},7309:function(e,t,n){"use strict";n.d(t,{kb:function(){return d},oY:function(){return l},U5:function(){return f},eV:function(){return h},GL:function(){return o},O6:function(){return y},np:function(){return a},O0:function(){return u},Jq:function(){return i},hE:function(){return g},K$:function(){return m}});const r="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,s=e=>e instanceof Uint8Array,i=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),a=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const c=async()=>{};async function l(e,t,n){let r=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-r;e>=0&&e<t||(await c(),r+=e)}}function u(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!s(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function h(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!s(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}class d{clone(){return this._cloneInto()}}const p={}.toString;function f(e,t){if(void 0!==t&&"[object Object]"!==p.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function g(e){const t=t=>e().update(u(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function m(e){const t=(t,n)=>e(n).update(u(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}function y(e=32){if(r&&"function"===typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},39978:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});const r="6.13.2"},85070:function(e,t,n){"use strict";n.d(t,{Eh:function(){return J},HY:function(){return K},IC:function(){return G},Js:function(){return V},QV:function(){return H},Xg:function(){return W},YW:function(){return Z},_R:function(){return q},xs:function(){return Y}});var r=n(87197),s=n(50033),i=n(38784),o=n(70153);function a(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const c=a("external public payable override".split(" ")),l="constant external internal payable private public pure view override",u=a(l.split(" ")),h="constructor error event fallback function receive struct",d=a(h.split(" ")),p="calldata memory storage payable indexed",f=a(p.split(" ")),g=a([h,p,"tuple returns",l].join(" ").split(" ")),m={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},y=new RegExp("^(\\s*)"),w=new RegExp("^([0-9]+)"),b=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),v=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),E=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class P{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new P(this.#t)}reset(){this.#e=0}#n(e=0,t=0){return new P(this.#t.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#n(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const e=this.peek().linkNext;t.push(this.#n(this.#e+1,e)),this.#e=e}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const n=this.#t[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function I(e){const t=[],n=t=>{const n=o<e.length?JSON.stringify(e[o]):"$EOI";throw new Error(`invalid token ${n} at ${o}: ${t}`)};let s=[],i=[],o=0;for(;o<e.length;){let a=e.substring(o),c=a.match(y);c&&(o+=c[1].length,a=e.substring(o));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};t.push(l);let u=m[a[0]]||"";if(u){if(l.type=u,l.text=a[0],o++,"OPEN_PAREN"===u)s.push(t.length-1),i.push(t.length-1);else if("CLOSE_PAREN"==u)0===s.length&&n("no matching open bracket"),l.match=s.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===u)l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if("OPEN_BRACKET"===u)l.type="BRACKET";else if("CLOSE_BRACKET"===u){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=(0,r.Dx)(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(c=a.match(b),c){if(l.text=c[1],o+=l.text.length,g.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(E)){l.type="TYPE";continue}l.type="ID"}else{if(c=a.match(w),!c)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${o}`);l.text=c[1],l.type="NUMBER",o+=l.text.length}}return new P(t.map((e=>Object.freeze(e))))}function k(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function x(e,t){if(t.peekKeyword(d)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function N(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(null==r||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function S(e){let t=N(e,u);return k(t,a("constant payable nonpayable".split(" "))),k(t,a("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function R(e,t){return e.popParams().map((e=>q.from(e,t)))}function A(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return(0,r.yT)(e.pop().text);throw new Error("invalid gas")}return null}function O(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const T=new RegExp(/^(.*)\[([0-9]*)\]$/);function _(e){const t=e.match(E);if((0,s.en)(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);(0,s.en)(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);(0,s.en)(0!==n&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const C={},D=Symbol.for("_ethers_internal"),U="_ParamTypeInternal",L="_ErrorInternal",$="_EventInternal",B="_ConstructorInternal",F="_FallbackInternal",M="_FunctionInternal",j="_StructInternal";class q{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,r,o,a,c,l){if((0,s.NK)(e,C,"ParamType"),Object.defineProperty(this,D,{value:U}),a&&(a=Object.freeze(a.slice())),"array"===r){if(null==c||null==l)throw new Error("")}else if(null!=c||null!=l)throw new Error("");if("tuple"===r){if(null==a)throw new Error("")}else if(null!=a)throw new Error("");(0,i.h)(this,{name:t,type:n,baseType:r,indexed:o,components:a,arrayLength:c,arrayChildren:l})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"===typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,r)=>n.components[r].walk(e,t)))}return t(this.type,e)}#r(e,t,n,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=t.slice();return i.forEach(((t,r)=>{s.#r(e,t,n,(e=>{i[r]=e}))})),void r(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!==typeof t)throw new Error("invalid tuple value");i=s.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,r)=>{s[r].#r(e,t,n,(e=>{i[r]=e}))})),void r(i)}const s=n(this.type,t);s.then?e.push(async function(){r(await s)}()):r(s)}async walkAsync(e,t){const n=[],r=[e];return this.#r(n,e,t,(e=>{r[0]=e})),n.length&&await Promise.all(n),r[0]}static from(e,t){if(q.isParamType(e))return e;if("string"===typeof e)try{return q.from(I(e),t)}catch(c){(0,s.en)(!1,"invalid param type","obj",e)}else if(e instanceof P){let n="",r="",s=null;N(e,a(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(r="tuple",s=e.popParams().map((e=>q.from(e))),n=`tuple(${s.map((e=>e.format())).join(",")})`):(n=_(e.popType("TYPE")),r=n);let i=null,o=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new q(C,"",n,r,null,s,o,i),o=t.value,n+=t.text,r="array",s=null}let c=null;if(N(e,f).has("indexed")){if(!t)throw new Error("");c=!0}const l=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new q(C,l,n,r,c,s,o,i)}const n=e.name;(0,s.en)(!n||"string"===typeof n&&n.match(v),"invalid name","obj.name",n);let r=e.indexed;null!=r&&((0,s.en)(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,o=i.match(T);if(o){const t=parseInt(o[2]||"-1"),s=q.from({type:o[1],components:e.components});return new q(C,n||"",i,"array",r,null,t,s)}if("tuple"===i||i.startsWith("tuple(")||i.startsWith("(")){const t=null!=e.components?e.components.map((e=>q.from(e))):null;return new q(C,n||"",i,"tuple",r,t,null,null)}return i=_(e.type),new q(C,n||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[D]===U}}class K{type;inputs;constructor(e,t,n){(0,s.NK)(e,C,"Fragment"),n=Object.freeze(n.slice()),(0,i.h)(this,{type:t,inputs:n})}static from(e){if("string"===typeof e){try{K.from(JSON.parse(e))}catch(t){}return K.from(I(e))}if(e instanceof P){switch(e.peekKeyword(d)){case"constructor":return W.from(e);case"error":return G.from(e);case"event":return H.from(e);case"fallback":case"receive":return J.from(e);case"function":return Z.from(e);case"struct":return Y.from(e)}}else if("object"===typeof e){switch(e.type){case"constructor":return W.from(e);case"error":return G.from(e);case"event":return H.from(e);case"fallback":case"receive":return J.from(e);case"function":return Z.from(e);case"struct":return Y.from(e)}(0,s.hu)(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}(0,s.en)(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return W.isFragment(e)}static isError(e){return G.isFragment(e)}static isEvent(e){return H.isFragment(e)}static isFunction(e){return Z.isFragment(e)}static isStruct(e){return Y.isFragment(e)}}class V extends K{name;constructor(e,t,n,r){super(e,t,r),(0,s.en)("string"===typeof n&&n.match(v),"invalid identifier","name",n),r=Object.freeze(r.slice()),(0,i.h)(this,{name:n})}}function z(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class G extends V{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,D,{value:L})}get selector(){return(0,o.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+z(e,this.inputs)),t.join(" ")}static from(e){if(G.isFragment(e))return e;if("string"===typeof e)return G.from(I(e));if(e instanceof P){const t=x("error",e),n=R(e);return O(e),new G(C,t,n)}return new G(C,e.name,e.inputs?e.inputs.map(q.from):[])}static isFragment(e){return e&&e[D]===L}}class H extends V{anonymous;constructor(e,t,n,r){super(e,"event",t,n),Object.defineProperty(this,D,{value:$}),(0,i.h)(this,{anonymous:r})}get topicHash(){return(0,o.id)(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+z(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>q.from(e)));return new H(C,e,t,!1).topicHash}static from(e){if(H.isFragment(e))return e;if("string"===typeof e)try{return H.from(I(e))}catch(t){(0,s.en)(!1,"invalid event fragment","obj",e)}else if(e instanceof P){const t=x("event",e),n=R(e,!0),r=!!N(e,a(["anonymous"])).has("anonymous");return O(e),new H(C,t,n,r)}return new H(C,e.name,e.inputs?e.inputs.map((e=>q.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[D]===$}}class W extends K{payable;gas;constructor(e,t,n,r,s){super(e,t,n),Object.defineProperty(this,D,{value:B}),(0,i.h)(this,{payable:r,gas:s})}format(e){if((0,s.hu)(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${z(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(W.isFragment(e))return e;if("string"===typeof e)try{return W.from(I(e))}catch(t){(0,s.en)(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof P){N(e,a(["constructor"]));const t=R(e),n=!!N(e,c).has("payable"),r=A(e);return O(e),new W(C,"constructor",t,n,r)}return new W(C,"constructor",e.inputs?e.inputs.map(q.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[D]===B}}class J extends K{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,D,{value:F}),(0,i.h)(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(J.isFragment(e))return e;if("string"===typeof e)try{return J.from(I(e))}catch(t){(0,s.en)(!1,"invalid fallback fragment","obj",e)}else if(e instanceof P){const t=e.toString(),n=e.peekKeyword(a(["fallback","receive"]));(0,s.en)(n,"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(a(["fallback","receive"]))){const t=R(e);return(0,s.en)(0===t.length,"receive cannot have arguments","obj.inputs",t),N(e,a(["payable"])),O(e),new J(C,[],!0)}let r=R(e);r.length?(0,s.en)(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map((e=>e.format("minimal"))).join(", ")):r=[q.from("bytes")];const i=S(e);if((0,s.en)("nonpayable"===i||"payable"===i,"fallback cannot be constants","obj.stateMutability",i),N(e,a(["returns"])).has("returns")){const t=R(e);(0,s.en)(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return O(e),new J(C,r,"payable"===i)}if("receive"===e.type)return new J(C,[],!0);if("fallback"===e.type){const t=[q.from("bytes")],n="payable"===e.stateMutability;return new J(C,t,n)}(0,s.en)(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[D]===F}}class Z extends V{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,r,s,o){super(e,"function",t,r),Object.defineProperty(this,D,{value:M}),s=Object.freeze(s.slice());const a="view"===n||"pure"===n,c="payable"===n;(0,i.h)(this,{constant:a,gas:o,outputs:s,payable:c,stateMutability:n})}get selector(){return(0,o.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+z(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(z(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>q.from(e)));return new Z(C,e,"view",t,[],null).selector}static from(e){if(Z.isFragment(e))return e;if("string"===typeof e)try{return Z.from(I(e))}catch(n){(0,s.en)(!1,"invalid function fragment","obj",e)}else if(e instanceof P){const t=x("function",e),n=R(e),r=S(e);let s=[];N(e,a(["returns"])).has("returns")&&(s=R(e));const i=A(e);return O(e),new Z(C,t,r,n,s,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"===typeof e.constant?(t="view",e.constant||(t="payable","boolean"!==typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!==typeof e.payable||e.payable||(t="nonpayable")),new Z(C,e.name,t,e.inputs?e.inputs.map(q.from):[],e.outputs?e.outputs.map(q.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[D]===M}}class Y extends V{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,D,{value:j})}format(){throw new Error("@TODO")}static from(e){if("string"===typeof e)try{return Y.from(I(e))}catch(t){(0,s.en)(!1,"invalid struct fragment","obj",e)}else if(e instanceof P){const t=x("struct",e),n=R(e);return O(e),new Y(C,t,n)}return new Y(C,e.name,e.inputs?e.inputs.map(q.from):[])}static isFragment(e){return e&&e[D]===j}}},89893:function(e,t,n){"use strict";n.d(t,{K:function(){return p},v:function(){return f}});var r=n(39960),s=n(11069),i=n(50033);const o=BigInt(0),a=BigInt(36);function c(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let r=0;r<40;r++)n[r]=t[r].charCodeAt(0);const i=(0,s.Pw)((0,r.w)(n));for(let r=0;r<40;r+=2)i[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(15&i[r>>1])>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const l={};for(let g=0;g<10;g++)l[String(g)]=String(g);for(let g=0;g<26;g++)l[String.fromCharCode(65+g)]=String(10+g);const u=15;function h(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>l[e])).join("");for(;t.length>=u;){let e=t.substring(0,u);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const d=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function p(e){if((0,i.en)("string"===typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=c(e);return(0,i.en)(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){(0,i.en)(e.substring(2,4)===h(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=o;for(let n=0;n<e.length;n++)t=t*a+d[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return c("0x"+t)}(0,i.en)(!1,"invalid address","address",e)}function f(e){let t=BigInt(p(e)).toString(36).toUpperCase();for(;t.length<30;)t="0"+t;return"XE"+h("XE00"+t)+t}},27687:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r="0x0000000000000000000000000000000000000000000000000000000000000000"},39394:function(e,t,n){"use strict";n.d(t,{js:function(){return w},zH:function(){return b},Sf:function(){return v},O6:function(){return E}});var r=n(90505),s=n(78890),i=n(99443),o=n(88646),a=n(96586),c=n(7309);const[l,u]=(()=>a.ZP.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),h=new Uint32Array(80),d=new Uint32Array(80);class p extends o.N{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,n,r,s,i,o,a,c,l,u,h,d,p,f,g]}set(e,t,n,r,s,i,o,a,c,l,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let a=0;a<16;a++,t+=4)h[a]=e.getUint32(t),d[a]=e.getUint32(t+=4);for(let l=16;l<80;l++){const e=0|h[l-15],t=0|d[l-15],n=a.ZP.rotrSH(e,t,1)^a.ZP.rotrSH(e,t,8)^a.ZP.shrSH(e,t,7),r=a.ZP.rotrSL(e,t,1)^a.ZP.rotrSL(e,t,8)^a.ZP.shrSL(e,t,7),s=0|h[l-2],i=0|d[l-2],o=a.ZP.rotrSH(s,i,19)^a.ZP.rotrBH(s,i,61)^a.ZP.shrSH(s,i,6),c=a.ZP.rotrSL(s,i,19)^a.ZP.rotrBL(s,i,61)^a.ZP.shrSL(s,i,6),u=a.ZP.add4L(r,c,d[l-7],d[l-16]),p=a.ZP.add4H(u,n,o,h[l-7],h[l-16]);h[l]=0|p,d[l]=0|u}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:c,Dh:p,Dl:f,Eh:g,El:m,Fh:y,Fl:w,Gh:b,Gl:v,Hh:E,Hl:P}=this;for(let I=0;I<80;I++){const e=a.ZP.rotrSH(g,m,14)^a.ZP.rotrSH(g,m,18)^a.ZP.rotrBH(g,m,41),t=a.ZP.rotrSL(g,m,14)^a.ZP.rotrSL(g,m,18)^a.ZP.rotrBL(g,m,41),k=g&y^~g&b,x=m&w^~m&v,N=a.ZP.add5L(P,t,x,u[I],d[I]),S=a.ZP.add5H(N,E,e,k,l[I],h[I]),R=0|N,A=a.ZP.rotrSH(n,r,28)^a.ZP.rotrBH(n,r,34)^a.ZP.rotrBH(n,r,39),O=a.ZP.rotrSL(n,r,28)^a.ZP.rotrBL(n,r,34)^a.ZP.rotrBL(n,r,39),T=n&s^n&o^s&o,_=r&i^r&c^i&c;E=0|b,P=0|v,b=0|y,v=0|w,y=0|g,w=0|m,({h:g,l:m}=a.ZP.add(0|p,0|f,0|S,0|R)),p=0|o,f=0|c,o=0|s,c=0|i,s=0|n,i=0|r;const C=a.ZP.add3L(R,O,_);n=a.ZP.add3H(C,S,A,T),r=0|C}({h:n,l:r}=a.ZP.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=a.ZP.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:c}=a.ZP.add(0|this.Ch,0|this.Cl,0|o,0|c)),({h:p,l:f}=a.ZP.add(0|this.Dh,0|this.Dl,0|p,0|f)),({h:g,l:m}=a.ZP.add(0|this.Eh,0|this.El,0|g,0|m)),({h:y,l:w}=a.ZP.add(0|this.Fh,0|this.Fl,0|y,0|w)),({h:b,l:v}=a.ZP.add(0|this.Gh,0|this.Gl,0|b,0|v)),({h:E,l:P}=a.ZP.add(0|this.Hh,0|this.Hl,0|E,0|P)),this.set(n,r,s,i,o,c,p,f,g,m,y,w,b,v,E,P)}roundClean(){h.fill(0),d.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const f=(0,c.hE)((()=>new p));var g=n(50033);const m=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("unable to locate global object")}(),y=m.crypto||m.msCrypto;function w(e){switch(e){case"sha256":return i.J.create();case"sha512":return f.create()}(0,g.en)(!1,"invalid hashing algorithm name","algorithm",e)}function b(e,t){const n={sha256:i.J,sha512:f}[e];return(0,g.en)(null!=n,"invalid hmac algorithm","algorithm",e),r.b.create(n,t)}function v(e,t,n,r,o){const a={sha256:i.J,sha512:f}[o];return(0,g.en)(null!=a,"invalid pbkdf2 algorithm","algorithm",o),(0,s.n)(a,e,t,{c:n,dkLen:r})}function E(e){(0,g.hu)(null!=y,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),(0,g.en)(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);const t=new Uint8Array(e);return y.getRandomValues(t),t}},39960:function(e,t,n){"use strict";n.d(t,{w:function(){return c}});var r=n(65305),s=n(11069);let i=!1;const o=function(e){return(0,r.fr)(e)};let a=o;function c(e){const t=(0,s.Pw)(e,"data");return(0,s.Dv)(a(t))}c._=o,c.lock=function(){i=!0},c.register=function(e){if(i)throw new TypeError("keccak256 is locked");a=e},Object.freeze(c)},23128:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});var r=n(39394),s=n(11069);let i=!1;const o=function(e,t,n,s,i){return(0,r.Sf)(e,t,n,s,i)};let a=o;function c(e,t,n,r,i){const o=(0,s.Pw)(e,"password"),c=(0,s.Pw)(t,"salt");return(0,s.Dv)(a(o,c,n,r,i))}c._=o,c.lock=function(){i=!0},c.register=function(e){if(i)throw new Error("pbkdf2 is locked");a=e},Object.freeze(c)},54331:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var r=n(39394);let s=!1;const i=function(e){return new Uint8Array((0,r.O6)(e))};let o=i;function a(e){return o(e)}a._=i,a.lock=function(){s=!0},a.register=function(e){if(s)throw new Error("randomBytes is locked");o=e},Object.freeze(a)},22857:function(e,t,n){"use strict";n.d(t,{f:function(){return h},g:function(){return d}});var r=n(23677),s=n(11069);let i=!1,o=!1;const a=async function(e,t,n,s,i,o,a){return await(0,r.E)(e,t,{N:n,r:s,p:i,dkLen:o,onProgress:a})},c=function(e,t,n,s,i,o){return(0,r.f)(e,t,{N:n,r:s,p:i,dkLen:o})};let l=a,u=c;async function h(e,t,n,r,i,o,a){const c=(0,s.Pw)(e,"passwd"),u=(0,s.Pw)(t,"salt");return(0,s.Dv)(await l(c,u,n,r,i,o,a))}function d(e,t,n,r,i,o){const a=(0,s.Pw)(e,"passwd"),c=(0,s.Pw)(t,"salt");return(0,s.Dv)(u(a,c,n,r,i,o))}h._=a,h.lock=function(){o=!0},h.register=function(e){if(o)throw new Error("scrypt is locked");l=e},Object.freeze(h),d._=c,d.lock=function(){i=!0},d.register=function(e){if(i)throw new Error("scryptSync is locked");u=e},Object.freeze(d)},20367:function(e,t,n){"use strict";n.d(t,{P:function(){return g}});var r=n(27687),s=n(11069),i=n(87197),o=n(50033);const a=BigInt(0),c=BigInt(1),l=BigInt(2),u=BigInt(27),h=BigInt(28),d=BigInt(35),p={};function f(e){return(0,s.U3)((0,i.ot)(e),32)}class g{#s;#i;#o;#a;get r(){return this.#s}set r(e){(0,o.en)(32===(0,s.M5)(e),"invalid r","value",e),this.#s=(0,s.Dv)(e)}get s(){return this.#i}set s(e){(0,o.en)(32===(0,s.M5)(e),"invalid s","value",e);const t=(0,s.Dv)(e);(0,o.en)(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#i=t}get v(){return this.#o}set v(e){const t=(0,i.Dx)(e,"value");(0,o.en)(27===t||28===t,"invalid v","v",e),this.#o=t}get networkV(){return this.#a}get legacyChainId(){const e=this.networkV;return null==e?null:g.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=(0,s.Pw)(this.s);return this.yParity&&(e[0]|=128),(0,s.Dv)(e)}get compactSerialized(){return(0,s.zo)([this.r,this.yParityAndS])}get serialized(){return(0,s.zo)([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,r){(0,o.NK)(e,p,"Signature"),this.#s=t,this.#i=n,this.#o=r,this.#a=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new g(p,this.r,this.s,this.v);return this.networkV&&(e.#a=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=(0,i.yT)(e,"v");return t==u||t==h?a:((0,o.en)(t>=d,"invalid EIP-155 v","v",e),(t-d)/l)}static getChainIdV(e,t){return(0,i.yT)(e)*l+BigInt(35+t-27)}static getNormalizedV(e){const t=(0,i.yT)(e);return t===a||t===u?27:t===c||t===h?28:((0,o.en)(t>=d,"invalid v","v",e),t&c?27:28)}static from(e){function t(t,n){(0,o.en)(t,n,"signature",e)}if(null==e)return new g(p,r.M,r.M,27);if("string"===typeof e){const n=(0,s.Pw)(e,"signature");if(64===n.length){const e=(0,s.Dv)(n.slice(0,32)),t=n.slice(32,64),r=128&t[0]?28:27;return t[0]&=127,new g(p,e,(0,s.Dv)(t),r)}if(65===n.length){const e=(0,s.Dv)(n.slice(0,32)),r=n.slice(32,64);t(0===(128&r[0]),"non-canonical s");const i=g.getNormalizedV(n[64]);return new g(p,e,(0,s.Dv)(r),i)}t(!1,"invalid raw signature length")}if(e instanceof g)return e.clone();const n=e.r;t(null!=n,"missing r");const a=f(n),c=function(e,n){if(null!=e)return f(e);if(null!=n){t((0,s.A7)(n,32),"invalid yParityAndS");const e=(0,s.Pw)(n);return e[0]&=127,(0,s.Dv)(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(0==(128&(0,s.Pw)(c)[0]),"non-canonical s");const{networkV:l,v:u}=function(e,n,r){if(null!=e){const t=(0,i.yT)(e);return{networkV:t>=d?t:void 0,v:g.getNormalizedV(t)}}if(null!=n)return t((0,s.A7)(n,32),"invalid yParityAndS"),{v:128&(0,s.Pw)(n)[0]?28:27};if(null!=r){switch((0,i.Dx)(r,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),h=new g(p,a,c,u);return l&&(h.#a=l),t(null==e.yParity||(0,i.Dx)(e.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}}},82306:function(e,t,n){"use strict";n.d(t,{E:function(){return c}});var r=n(43497),s=n(50033),i=n(11069),o=n(87197),a=n(20367);class c{#c;constructor(e){(0,s.en)(32===(0,i.M5)(e),"invalid private key","privateKey","[REDACTED]"),this.#c=(0,i.Dv)(e)}get privateKey(){return this.#c}get publicKey(){return c.computePublicKey(this.#c)}get compressedPublicKey(){return c.computePublicKey(this.#c,!0)}sign(e){(0,s.en)(32===(0,i.M5)(e),"invalid digest length","digest",e);const t=r.kA.sign((0,i.h_)(e),(0,i.h_)(this.#c),{lowS:!0});return a.P.from({r:(0,o.m9)(t.r,32),s:(0,o.m9)(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=c.computePublicKey(e);return(0,i.Dv)(r.kA.getSharedSecret((0,i.h_)(this.#c),(0,i.Pw)(t),!1))}static computePublicKey(e,t){let n=(0,i.Pw)(e,"key");if(32===n.length){const e=r.kA.getPublicKey(n,!!t);return(0,i.Dv)(e)}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}const s=r.kA.ProjectivePoint.fromHex(n);return(0,i.Dv)(s.toRawBytes(t))}static recoverPublicKey(e,t){(0,s.en)(32===(0,i.M5)(e),"invalid digest length","digest",e);const n=a.P.from(t);let o=r.kA.Signature.fromCompact((0,i.h_)((0,i.zo)([n.r,n.s])));o=o.addRecoveryBit(n.yParity);const c=o.recoverPublicKey((0,i.h_)(e));return(0,s.en)(null!=c,"invalid signautre for digest","signature",t),"0x"+c.toHex(!1)}static addPoints(e,t,n){const s=r.kA.ProjectivePoint.fromHex(c.computePublicKey(e).substring(2)),i=r.kA.ProjectivePoint.fromHex(c.computePublicKey(t).substring(2));return"0x"+s.add(i).toHex(!!n)}}},99331:function(e,t,n){"use strict";n.r(t),n.d(t,{AbiCoder:function(){return te},AbstractProvider:function(){return vs},AbstractSigner:function(){return Os},AlchemyProvider:function(){return Zs},AnkrProvider:function(){return Ws},BaseContract:function(){return yt},BaseWallet:function(){return ho},Block:function(){return $e},BrowserProvider:function(){return _i},ChainstackProvider:function(){return Qs},CloudflareProvider:function(){return Xs},ConstructorFragment:function(){return J.Xg},Contract:function(){return wt},ContractEventPayload:function(){return Je},ContractFactory:function(){return bt},ContractTransactionReceipt:function(){return Ge},ContractTransactionResponse:function(){return He},ContractUnknownEventPayload:function(){return We},EnsPlugin:function(){return or},EnsResolver:function(){return Hr},ErrorDescription:function(){return oe},ErrorFragment:function(){return J.IC},EtherSymbol:function(){return Se},EtherscanPlugin:function(){return ti},EtherscanProvider:function(){return si},EventFragment:function(){return J.QV},EventLog:function(){return Ve},EventPayload:function(){return Ke},FallbackFragment:function(){return J.Eh},FallbackProvider:function(){return Ri},FeeData:function(){return Ue},FeeDataNetworkPlugin:function(){return ar},FetchCancelSignal:function(){return Yn},FetchRequest:function(){return Xn},FetchResponse:function(){return er},FetchUrlFeeDataNetworkPlugin:function(){return cr},FixedNumber:function(){return zi},Fragment:function(){return J.HY},FunctionFragment:function(){return J.YW},GasCostPlugin:function(){return ir},HDNodeVoidWallet:function(){return ko},HDNodeWallet:function(){return Io},Indexed:function(){return ae},InfuraProvider:function(){return fi},InfuraWebSocketProvider:function(){return pi},Interface:function(){return ue},IpcSocketProvider:function(){return Ui},JsonRpcApiProvider:function(){return qs},JsonRpcProvider:function(){return Vs},JsonRpcSigner:function(){return js},LangEn:function(){return io},Log:function(){return Be},LogDescription:function(){return se},MaxInt256:function(){return Ne},MaxUint256:function(){return ke},MessagePrefix:function(){return Re},MinInt256:function(){return xe},Mnemonic:function(){return uo},MulticoinProviderPlugin:function(){return Vr},N:function(){return Pe},NamedFragment:function(){return J.Js},Network:function(){return ur},NetworkPlugin:function(){return sr},NonceManager:function(){return Ti},ParamType:function(){return J._R},PocketProvider:function(){return Di},QuickNodeProvider:function(){return mi},Result:function(){return v},Signature:function(){return rn.P},SigningKey:function(){return sn.E},SocketBlockSubscriber:function(){return ai},SocketEventSubscriber:function(){return li},SocketPendingSubscriber:function(){return ci},SocketProvider:function(){return ui},SocketSubscriber:function(){return oi},StructFragment:function(){return J.xs},Transaction:function(){return Ur},TransactionDescription:function(){return ie},TransactionReceipt:function(){return Fe},TransactionResponse:function(){return Me},Typed:function(){return T},TypedDataEncoder:function(){return Bn},UndecodedEventLog:function(){return ze},UnmanagedSubscriber:function(){return gs},Utf8ErrorFuncs:function(){return s.te},VoidSigner:function(){return Ts},Wallet:function(){return _o},WebSocketProvider:function(){return hi},WeiPerEther:function(){return Ie},Wordlist:function(){return no},WordlistOwl:function(){return ro},WordlistOwlA:function(){return Uo},ZeroAddress:function(){return Ee},ZeroHash:function(){return Ae.M},accessListify:function(){return Te},assert:function(){return c.hu},assertArgument:function(){return c.en},assertArgumentCount:function(){return c.fG},assertNormalize:function(){return c.fA},assertPrivate:function(){return c.NK},checkResultErrors:function(){return E},computeAddress:function(){return fn.d},computeHmac:function(){return kt},concat:function(){return i.zo},copyRequest:function(){return Le},dataLength:function(){return i.M5},dataSlice:function(){return i.QB},decodeBase58:function(){return qr},decodeBase64:function(){return Mn},decodeBytes32String:function(){return a},decodeRlp:function(){return wr},decryptCrowdsaleJson:function(){return Oo},decryptKeystoreJson:function(){return po.Y0},decryptKeystoreJsonSync:function(){return po.zy},defaultPath:function(){return fo},defineProperties:function(){return u.h},dnsEncode:function(){return pn},encodeBase58:function(){return jr},encodeBase64:function(){return jn},encodeBytes32String:function(){return o},encodeRlp:function(){return fe},encryptKeystoreJson:function(){return po.BZ},encryptKeystoreJsonSync:function(){return po.B7},ensNormalize:function(){return un},formatEther:function(){return Ji},formatUnits:function(){return Hi},fromTwos:function(){return l._Y},getAccountPath:function(){return xo},getAddress:function(){return N.K},getBigInt:function(){return l.yT},getBytes:function(){return i.Pw},getBytesCopy:function(){return i.h_},getCreate2Address:function(){return me},getCreateAddress:function(){return ge},getDefaultProvider:function(){return Oi},getIcapAddress:function(){return N.v},getIndexedAccountPath:function(){return No},getNumber:function(){return l.Dx},getUint:function(){return l.Qf},hashMessage:function(){return gn},hexlify:function(){return i.Dv},id:function(){return re.id},isAddress:function(){return we},isAddressable:function(){return ye},isBytesLike:function(){return i.Zq},isCallException:function(){return c.Hl},isCrowdsaleJson:function(){return Ao},isError:function(){return c.VZ},isHexString:function(){return i.A7},isKeystoreJson:function(){return po.D_},isValidName:function(){return hn},keccak256:function(){return ne.w},lock:function(){return nn},makeError:function(){return c.wf},mask:function(){return l.sS},namehash:function(){return dn},parseEther:function(){return Zi},parseUnits:function(){return Wi},pbkdf2:function(){return zt.n},randomBytes:function(){return Gt.O},recoverAddress:function(){return fn.R},resolveAddress:function(){return ve},resolveProperties:function(){return u.m},ripemd160:function(){return Vt},scrypt:function(){return Ht.f},scryptSync:function(){return Ht.g},sha256:function(){return en},sha512:function(){return tn},showThrottleMessage:function(){return rr},solidityPacked:function(){return En},solidityPackedKeccak256:function(){return Pn},solidityPackedSha256:function(){return In},stripZerosLeft:function(){return i.Ou},toBeArray:function(){return l.ot},toBeHex:function(){return l.m9},toBigInt:function(){return l.Gh},toNumber:function(){return l.He},toQuantity:function(){return l.B4},toTwos:function(){return l.$j},toUtf8Bytes:function(){return s.Y0},toUtf8CodePoints:function(){return s.XL},toUtf8String:function(){return s.ZN},uuidV4:function(){return Yi.E},verifyMessage:function(){return mn},verifyTypedData:function(){return Fn},version:function(){return r.i},wordlists:function(){return Lo},zeroPadBytes:function(){return i.SK},zeroPadValue:function(){return i.U3}});var r=n(39978),s=n(86261),i=n(11069);function o(e){const t=(0,s.Y0)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,i.SK)(t,32)}function a(e){const t=(0,i.Pw)(e,"bytes");if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");let n=31;for(;0===t[n-1];)n--;return(0,s.ZN)(t.slice(0,n))}var c=n(50033),l=n(87197),u=n(38784);const h=32,d=new Uint8Array(h),p=["then"],f={},g=new WeakMap;function m(e){return g.get(e)}function y(e,t){g.set(e,t)}function w(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}function b(e,t,n){return e.indexOf(null)>=0?t.map(((e,t)=>e instanceof v?b(m(e),e,n):e)):e.reduce(((e,r,s)=>{let i=t.getValue(r);return r in e||(n&&i instanceof v&&(i=b(m(i),i,n)),e[r]=i),e}),{})}class v extends Array{#l;constructor(...e){const t=e[0];let n=e[1],r=(e[2]||[]).slice(),s=!0;t!==f&&(n=e,r=[],s=!1),super(n.length),n.forEach(((e,t)=>{this[t]=e}));const i=r.reduce(((e,t)=>("string"===typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(y(this,Object.freeze(n.map(((e,t)=>{const n=r[t];return null!=n&&1===i.get(n)?n:null})))),this.#l=[],null==this.#l&&this.#l,!s)return;Object.freeze(this);const o=new Proxy(this,{get:(e,t,n)=>{if("string"===typeof t){if(t.match(/^[0-9]+$/)){const n=(0,l.Dx)(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const r=e[n];return r instanceof Error&&w(`index ${n}`,r),r}if(p.indexOf(t)>=0)return Reflect.get(e,t,n);const r=e[t];if(r instanceof Function)return function(...t){return r.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}});return y(o,m(this)),o}toArray(e){const t=[];return this.forEach(((n,r)=>{n instanceof Error&&w(`index ${r}`,n),e&&n instanceof v&&(n=n.toArray(e)),t.push(n)})),t}toObject(e){const t=m(this);return t.reduce(((n,r,s)=>((0,c.hu)(null!=r,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),b(t,this,e))),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=m(this),r=[],s=[];for(let i=e;i<t;i++)r.push(this[i]),s.push(n[i]);return new v(f,r,s)}filter(e,t){const n=m(this),r=[],s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&w(`index ${i}`,o),e.call(t,o,i,this)&&(r.push(o),s.push(n[i]))}return new v(f,r,s)}map(e,t){const n=[];for(let r=0;r<this.length;r++){const s=this[r];s instanceof Error&&w(`index ${r}`,s),n.push(e.call(t,s,r,this))}return n}getValue(e){const t=m(this).indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&w(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new v(f,e,t)}}function E(e){const t=[],n=function(e,r){if(Array.isArray(r))for(let i in r){const o=e.slice();o.push(i);try{n(o,r[i])}catch(s){t.push({path:o,error:s})}}};return n([],e),t}function P(e){let t=(0,l.ot)(e);return(0,c.hu)(t.length<=h,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:h,offset:t.length}),t.length!==h&&(t=(0,i.h_)((0,i.zo)([d.slice(t.length%h),t]))),t}class I{name;type;localName;dynamic;constructor(e,t,n,r){(0,u.h)(this,{name:e,type:t,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){(0,c.en)(!1,e,this.localName,t)}}class k{#u;#h;constructor(){this.#u=[],this.#h=0}get data(){return(0,i.zo)(this.#u)}get length(){return this.#h}#d(e){return this.#u.push(e),this.#h+=e.length,e.length}appendWriter(e){return this.#d((0,i.h_)(e.data))}writeBytes(e){let t=(0,i.h_)(e);const n=t.length%h;return n&&(t=(0,i.h_)((0,i.zo)([t,d.slice(n)]))),this.#d(t)}writeValue(e){return this.#d(P(e))}writeUpdatableValue(){const e=this.#u.length;return this.#u.push(d),this.#h+=h,t=>{this.#u[e]=P(t)}}}class x{allowLoose;#u;#e;#p;#f;#g;constructor(e,t,n){(0,u.h)(this,{allowLoose:!!t}),this.#u=(0,i.h_)(e),this.#p=0,this.#f=null,this.#g=null!=n?n:1024,this.#e=0}get data(){return(0,i.Dv)(this.#u)}get dataLength(){return this.#u.length}get consumed(){return this.#e}get bytes(){return new Uint8Array(this.#u)}#m(e){if(this.#f)return this.#f.#m(e);this.#p+=e,(0,c.hu)(this.#g<1||this.#p<=this.#g*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#g} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:(0,i.h_)(this.#u),offset:this.#e,length:e,info:{bytesRead:this.#p,dataLength:this.dataLength}})}#y(e,t,n){let r=Math.ceil(t/h)*h;return this.#e+r>this.#u.length&&(this.allowLoose&&n&&this.#e+t<=this.#u.length?r=t:(0,c.hu)(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:(0,i.h_)(this.#u),length:this.#u.length,offset:this.#e+r})),this.#u.slice(this.#e,this.#e+r)}subReader(e){const t=new x(this.#u.slice(this.#e+e),this.allowLoose,this.#g);return t.#f=this,t}readBytes(e,t){let n=this.#y(0,e,!!t);return this.#m(e),this.#e+=n.length,n.slice(0,e)}readValue(){return(0,l.Gh)(this.readBytes(h))}readIndex(){return(0,l.He)(this.readBytes(h))}}var N=n(89893);const S={};function R(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new T(S,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function A(e,t){return new T(S,`bytes${t||""}`,e,{size:t})}const O=Symbol.for("_ethers_typed");class T{type;value;#w;_typedSymbol;constructor(e,t,n,r){null==r&&(r=null),(0,c.NK)(S,e,"Typed"),(0,u.h)(this,{_typedSymbol:O,type:t,value:n}),this.#w=r,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#w}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#w?-1:!1===this.#w?this.value.length:null}static from(e,t){return new T(S,e,t)}static uint8(e){return R(e,8)}static uint16(e){return R(e,16)}static uint24(e){return R(e,24)}static uint32(e){return R(e,32)}static uint40(e){return R(e,40)}static uint48(e){return R(e,48)}static uint56(e){return R(e,56)}static uint64(e){return R(e,64)}static uint72(e){return R(e,72)}static uint80(e){return R(e,80)}static uint88(e){return R(e,88)}static uint96(e){return R(e,96)}static uint104(e){return R(e,104)}static uint112(e){return R(e,112)}static uint120(e){return R(e,120)}static uint128(e){return R(e,128)}static uint136(e){return R(e,136)}static uint144(e){return R(e,144)}static uint152(e){return R(e,152)}static uint160(e){return R(e,160)}static uint168(e){return R(e,168)}static uint176(e){return R(e,176)}static uint184(e){return R(e,184)}static uint192(e){return R(e,192)}static uint200(e){return R(e,200)}static uint208(e){return R(e,208)}static uint216(e){return R(e,216)}static uint224(e){return R(e,224)}static uint232(e){return R(e,232)}static uint240(e){return R(e,240)}static uint248(e){return R(e,248)}static uint256(e){return R(e,256)}static uint(e){return R(e,256)}static int8(e){return R(e,-8)}static int16(e){return R(e,-16)}static int24(e){return R(e,-24)}static int32(e){return R(e,-32)}static int40(e){return R(e,-40)}static int48(e){return R(e,-48)}static int56(e){return R(e,-56)}static int64(e){return R(e,-64)}static int72(e){return R(e,-72)}static int80(e){return R(e,-80)}static int88(e){return R(e,-88)}static int96(e){return R(e,-96)}static int104(e){return R(e,-104)}static int112(e){return R(e,-112)}static int120(e){return R(e,-120)}static int128(e){return R(e,-128)}static int136(e){return R(e,-136)}static int144(e){return R(e,-144)}static int152(e){return R(e,-152)}static int160(e){return R(e,-160)}static int168(e){return R(e,-168)}static int176(e){return R(e,-176)}static int184(e){return R(e,-184)}static int192(e){return R(e,-192)}static int200(e){return R(e,-200)}static int208(e){return R(e,-208)}static int216(e){return R(e,-216)}static int224(e){return R(e,-224)}static int232(e){return R(e,-232)}static int240(e){return R(e,-240)}static int248(e){return R(e,-248)}static int256(e){return R(e,-256)}static int(e){return R(e,-256)}static bytes1(e){return A(e,1)}static bytes2(e){return A(e,2)}static bytes3(e){return A(e,3)}static bytes4(e){return A(e,4)}static bytes5(e){return A(e,5)}static bytes6(e){return A(e,6)}static bytes7(e){return A(e,7)}static bytes8(e){return A(e,8)}static bytes9(e){return A(e,9)}static bytes10(e){return A(e,10)}static bytes11(e){return A(e,11)}static bytes12(e){return A(e,12)}static bytes13(e){return A(e,13)}static bytes14(e){return A(e,14)}static bytes15(e){return A(e,15)}static bytes16(e){return A(e,16)}static bytes17(e){return A(e,17)}static bytes18(e){return A(e,18)}static bytes19(e){return A(e,19)}static bytes20(e){return A(e,20)}static bytes21(e){return A(e,21)}static bytes22(e){return A(e,22)}static bytes23(e){return A(e,23)}static bytes24(e){return A(e,24)}static bytes25(e){return A(e,25)}static bytes26(e){return A(e,26)}static bytes27(e){return A(e,27)}static bytes28(e){return A(e,28)}static bytes29(e){return A(e,29)}static bytes30(e){return A(e,30)}static bytes31(e){return A(e,31)}static bytes32(e){return A(e,32)}static address(e){return new T(S,"address",e)}static bool(e){return new T(S,"bool",!!e)}static bytes(e){return new T(S,"bytes",e)}static string(e){return new T(S,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new T(S,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"===typeof e&&"_typedSymbol"in e&&e._typedSymbol===O}static dereference(e,t){if(T.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class _ extends I{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=T.dereference(t,"string");try{n=(0,N.K)(n)}catch(r){return this._throwError(r.message,t)}return e.writeValue(n)}decode(e){return(0,N.K)((0,l.m9)(e.readValue(),20))}}class C extends I{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function D(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&"object"===typeof n){let e={};r=t.map((t=>{const r=t.localName;return(0,c.hu)(r,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),(0,c.hu)(!e[r],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[r]=!0,n[r]}))}else(0,c.en)(!1,"invalid tuple value","tuple",n);(0,c.en)(t.length===r.length,"types/value length mismatch","tuple",n);let s=new k,i=new k,o=[];t.forEach(((e,t)=>{let n=r[t];if(e.dynamic){let t=i.length;e.encode(i,n);let r=s.writeUpdatableValue();o.push((e=>{r(e+t)}))}else e.encode(s,n)})),o.forEach((e=>{e(s.length)}));let a=e.appendWriter(s);return a+=e.appendWriter(i),a}function U(e,t){let n=[],r=[],s=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readIndex(),r=s.subReader(n);try{i=t.decode(r)}catch(o){if((0,c.VZ)(o,"BUFFER_OVERRUN"))throw o;i=o,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(o){if((0,c.VZ)(o,"BUFFER_OVERRUN"))throw o;i=o,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(void 0==i)throw new Error("investigate");n.push(i),r.push(t.localName||null)})),v.fromItems(n,r)}class L extends I{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),(0,u.h)(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=T.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;-1===r&&(r=n.length,e.writeValue(n.length)),(0,c.fG)(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let i=0;i<n.length;i++)s.push(this.coder);return D(e,s,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),(0,c.hu)(t*h<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*h,length:e.dataLength}));let n=[];for(let r=0;r<t;r++)n.push(new C(this.coder));return U(e,n)}}class $ extends I{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=T.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class B extends I{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=(0,i.h_)(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class F extends B{constructor(e){super("bytes",e)}decode(e){return(0,i.Dv)(super.decode(e))}}class M extends I{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),(0,u.h)(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=(0,i.h_)(T.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return(0,i.Dv)(e.readBytes(this.size))}}const j=new Uint8Array([]);class q extends I{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(j)}decode(e){return e.readBytes(0),null}}const K=BigInt(0),V=BigInt(1),z=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class G extends I{size;signed;constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),(0,u.h)(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=(0,l.yT)(T.dereference(t,this.type)),r=(0,l.sS)(z,256);if(this.signed){let e=(0,l.sS)(r,8*this.size-1);(n>e||n<-(e+V))&&this._throwError("value out-of-bounds",t),n=(0,l.$j)(n,256)}else(n<K||n>(0,l.sS)(r,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=(0,l.sS)(e.readValue(),8*this.size);return this.signed&&(t=(0,l._Y)(t,8*this.size)),t}}class H extends B{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,(0,s.Y0)(T.dereference(t,"string")))}decode(e){return(0,s.ZN)(super.decode(e))}}class W extends I{coders;constructor(e,t){let n=!1;const r=[];e.forEach((e=>{e.dynamic&&(n=!0),r.push(e.type)}));super("tuple","tuple("+r.join(",")+")",t,n),(0,u.h)(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,r)=>{let s=n.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[r]))})),Object.freeze(e)}encode(e,t){const n=T.dereference(t,"tuple");return D(e,this.coders,n)}decode(e){return U(e,this.coders)}}var J=n(85070);const Z=new Map;Z.set(0,"GENERIC_PANIC"),Z.set(1,"ASSERT_FALSE"),Z.set(17,"OVERFLOW"),Z.set(18,"DIVIDE_BY_ZERO"),Z.set(33,"ENUM_RANGE_ERROR"),Z.set(34,"BAD_STORAGE_DATA"),Z.set(49,"STACK_UNDERFLOW"),Z.set(50,"ARRAY_RANGE_ERROR"),Z.set(65,"OUT_OF_MEMORY"),Z.set(81,"UNINITIALIZED_FUNCTION_CALL");const Y=new RegExp(/^bytes([0-9]*)$/),Q=new RegExp(/^(u?int)([0-9]*)$/);let X=null,ee=1024;class te{#b(e){if(e.isArray())return new L(this.#b(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new W(e.components.map((e=>this.#b(e))),e.name);switch(e.baseType){case"address":return new _(e.name);case"bool":return new $(e.name);case"string":return new H(e.name);case"bytes":return new F(e.name);case"":return new q(e.name)}let t=e.type.match(Q);if(t){let n=parseInt(t[2]||"256");return(0,c.en)(0!==n&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new G(n/8,"int"===t[1],e.name)}if(t=e.type.match(Y),t){let n=parseInt(t[1]);return(0,c.en)(0!==n&&n<=32,"invalid bytes length","param",e),new M(n,e.name)}(0,c.en)(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#b(J._R.from(e))));return new W(t,"_").defaultValue()}encode(e,t){(0,c.fG)(t.length,e.length,"types/values length mismatch");const n=e.map((e=>this.#b(J._R.from(e)))),r=new W(n,"_"),s=new k;return r.encode(s,t),s.data}decode(e,t,n){const r=e.map((e=>this.#b(J._R.from(e))));return new W(r,"_").decode(new x(t,n,ee))}static _setDefaultMaxInflation(e){(0,c.en)("number"===typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),ee=e}static defaultAbiCoder(){return null==X&&(X=new te),X}static getBuiltinCallException(e,t,n){return function(e,t,n,r){let s="missing revert data",o=null,a=null;if(n){s="execution reverted";const e=(0,i.Pw)(n);if(n=(0,i.Dv)(n),0===e.length)s+=" (no data present; likely require(false) occurred",o="require(false)";else if(e.length%32!==4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===(0,i.Dv)(e.slice(0,4)))try{o=r.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[o]},s+=`: ${JSON.stringify(o)}`}catch(u){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===(0,i.Dv)(e.slice(0,4)))try{const t=Number(r.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},o=`Panic due to ${Z.get(t)||"UNKNOWN"}(${t})`,s+=`: ${o}`}catch(u){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const l={to:t.to?(0,N.K)(t.to):null,data:t.data||"0x"};return t.from&&(l.from=(0,N.K)(t.from)),(0,c.wf)(s,"CALL_EXCEPTION",{action:e,data:n,reason:o,transaction:l,invocation:null,revert:a})}(e,t,n,te.defaultAbiCoder())}}var ne=n(39960),re=n(70153);class se{fragment;name;signature;topic;args;constructor(e,t,n){const r=e.name,s=e.format();(0,u.h)(this,{fragment:e,name:r,signature:s,topic:t,args:n})}}class ie{fragment;name;args;signature;selector;value;constructor(e,t,n,r){const s=e.name,i=e.format();(0,u.h)(this,{fragment:e,name:s,args:n,signature:i,selector:t,value:r})}}class oe{fragment;name;args;signature;selector;constructor(e,t,n){const r=e.name,s=e.format();(0,u.h)(this,{fragment:e,name:r,args:n,signature:s,selector:t})}}class ae{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){(0,u.h)(this,{hash:e,_isIndexed:!0})}}const ce={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},le={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&ce[e.toString()]&&(t=ce[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class ue{fragments;deploy;fallback;receive;#v;#E;#P;#I;constructor(e){let t=[];t="string"===typeof e?JSON.parse(e):e,this.#P=new Map,this.#v=new Map,this.#E=new Map;const n=[];for(const o of t)try{n.push(J.HY.from(o))}catch(i){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,i.message)}(0,u.h)(this,{fragments:Object.freeze(n)});let r=null,s=!1;this.#I=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void(0,u.h)(this,{deploy:e});case"fallback":return void(0===e.inputs.length?s=!0:((0,c.en)(!r||e.payable!==r.payable,"conflicting fallback fragments",`fragments[${t}]`,e),r=e,s=r.payable));case"function":n=this.#P;break;case"event":n=this.#E;break;case"error":n=this.#v;break;default:return}const i=e.format();n.has(i)||n.set(i,e)})),this.deploy||(0,u.h)(this,{deploy:J.Xg.from("constructor()")}),(0,u.h)(this,{fallback:r,receive:s})}format(e){const t=e?"minimal":"full",n=this.fragments.map((e=>e.format(t)));return n}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return te.defaultAbiCoder()}#k(e,t,n){if((0,i.A7)(e)){const t=e.toLowerCase();for(const e of this.#P.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of this.#P)t.split("(")[0]===e&&r.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,s=!0;T.isTyped(e)&&"overrides"===e.type&&(s=!1,n--);for(let t=r.length-1;t>=0;t--){const e=r[t].inputs.length;e===n||s&&e===n-1||r.splice(t,1)}for(let i=r.length-1;i>=0;i--){const e=r[i].inputs;for(let n=0;n<t.length;n++)if(T.isTyped(t[n])){if(n>=e.length){if("overrides"===t[n].type)continue;r.splice(i,1);break}if(t[n].type!==e[n].baseType){r.splice(i,1);break}}}}if(1===r.length&&t&&t.length!==r[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!==typeof e)&&r.splice(0,1)}if(0===r.length)return null;if(r.length>1&&n){const t=r.map((e=>JSON.stringify(e.format()))).join(", ");(0,c.en)(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return r[0]}const r=this.#P.get(J.YW.from(e).format());return r||null}getFunctionName(e){const t=this.#k(e,null,!1);return(0,c.en)(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#k(e,null,!1)}getFunction(e,t){return this.#k(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#P.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#P.get(r),n)}}#x(e,t,n){if((0,i.A7)(e)){const t=e.toLowerCase();for(const e of this.#E.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of this.#E)t.split("(")[0]===e&&r.push(n);if(t){for(let e=r.length-1;e>=0;e--)r[e].inputs.length<t.length&&r.splice(e,1);for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let s=0;s<t.length;s++)if(T.isTyped(t[s])&&t[s].type!==n[s].baseType){r.splice(e,1);break}}}if(0===r.length)return null;if(r.length>1&&n){const t=r.map((e=>JSON.stringify(e.format()))).join(", ");(0,c.en)(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return r[0]}const r=this.#E.get(J.QV.from(e).format());return r||null}getEventName(e){const t=this.#x(e,null,!1);return(0,c.en)(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#x(e,null,!1)}getEvent(e,t){return this.#x(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#E.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#E.get(r),n)}}getError(e,t){if((0,i.A7)(e)){const t=e.toLowerCase();if(le[t])return J.IC.from(le[t].signature);for(const e of this.#v.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,r]of this.#v)n.split("(")[0]===e&&t.push(r);if(0===t.length)return"Error"===e?J.IC.from("error Error(string)"):"Panic"===e?J.IC.from("error Panic(uint256)"):null;if(t.length>1){const n=t.map((e=>JSON.stringify(e.format()))).join(", ");(0,c.en)(!1,`ambiguous error description (i.e. ${n})`,"name",e)}return t[0]}if("Error(string)"===(e=J.IC.from(e).format()))return J.IC.from("error Error(string)");if("Panic(uint256)"===e)return J.IC.from("error Panic(uint256)");const n=this.#v.get(e);return n||null}forEachError(e){const t=Array.from(this.#v.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#v.get(r),n)}}_decodeParams(e,t){return this.#I.decode(e,t)}_encodeParams(e,t){return this.#I.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"===typeof e){const t=this.getError(e);(0,c.en)(t,"unknown error","fragment",e),e=t}return(0,c.en)((0,i.QB)(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,i.QB)(t,4))}encodeErrorResult(e,t){if("string"===typeof e){const t=this.getError(e);(0,c.en)(t,"unknown error","fragment",e),e=t}return(0,i.zo)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"===typeof e){const t=this.getFunction(e);(0,c.en)(t,"unknown function","fragment",e),e=t}return(0,c.en)((0,i.QB)(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,i.QB)(t,4))}encodeFunctionData(e,t){if("string"===typeof e){const t=this.getFunction(e);(0,c.en)(t,"unknown function","fragment",e),e=t}return(0,i.zo)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"===typeof e){const t=this.getFunction(e);(0,c.en)(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const r=(0,i.h_)(t);if(r.length%32===0)try{return this.#I.decode(e.outputs,r)}catch(s){n="could not decode result data"}(0,c.hu)(!1,n,"BAD_DATA",{value:(0,i.Dv)(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=(0,i.Pw)(e,"data"),r=te.getBuiltinCallException("call",t,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const e=(0,i.Dv)(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#I.decode(t.inputs,n.slice(4));r.revert={name:t.name,signature:t.format(),args:e},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch(o){r.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(t);return s&&(r.invocation={method:s.name,signature:s.signature,args:s.args}),r}encodeFunctionResult(e,t){if("string"===typeof e){const t=this.getFunction(e);(0,c.en)(t,"unknown function","fragment",e),e=t}return(0,i.Dv)(this.#I.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"===typeof e){const t=this.getEvent(e);(0,c.en)(t,"unknown event","eventFragment",e),e=t}(0,c.hu)(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const r=(e,t)=>"string"===e.type?(0,re.id)(t):"bytes"===e.type?(0,ne.w)((0,i.Dv)(t)):("bool"===e.type&&"boolean"===typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=(0,l.m9)(t):e.type.match(/^bytes/)?t=(0,i.SK)(t,32):"address"===e.type&&this.#I.encode(["address"],[t]),(0,i.U3)((0,i.Dv)(t),32));for(t.forEach(((t,s)=>{const i=e.inputs[s];i.indexed?null==t?n.push(null):"array"===i.baseType||"tuple"===i.baseType?(0,c.en)(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?n.push(t.map((e=>r(i,e)))):n.push(r(i,t)):(0,c.en)(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"===typeof e){const t=this.getEvent(e);(0,c.en)(t,"unknown event","eventFragment",e),e=t}const n=[],r=[],s=[];return e.anonymous||n.push(e.topicHash),(0,c.en)(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const o=t[i];if(e.indexed)if("string"===e.type)n.push((0,re.id)(o));else if("bytes"===e.type)n.push((0,ne.w)(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#I.encode([e.type],[o]))}else r.push(e),s.push(o)})),{data:this.#I.encode(r,s),topics:n}}decodeEventLog(e,t,n){if("string"===typeof e){const t=this.getEvent(e);(0,c.en)(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;(0,c.en)((0,i.A7)(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],s=[],o=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(J._R.from({type:"bytes32",name:e.name})),o.push(!0)):(r.push(e),o.push(!1)):(s.push(e),o.push(!1))}));const a=null!=n?this.#I.decode(r,(0,i.zo)(n)):null,l=this.#I.decode(s,t,!0),u=[],h=[];let d=0,p=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==a)n=new ae(null);else if(o[t])n=new ae(a[p++]);else try{n=a[p++]}catch(r){n=r}else try{n=l[d++]}catch(r){n=r}u.push(n),h.push(e.name||null)})),v.fromItems(u,h)}parseTransaction(e){const t=(0,i.Pw)(e.data,"tx.data"),n=(0,l.yT)(null!=e.value?e.value:0,"tx.value"),r=this.getFunction((0,i.Dv)(t.slice(0,4)));if(!r)return null;const s=this.#I.decode(r.inputs,t.slice(4));return new ie(r,r.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new se(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=(0,i.Dv)(e),n=this.getError((0,i.QB)(t,0,4));if(!n)return null;const r=this.#I.decode(n.inputs,(0,i.QB)(t,4));return new oe(n,n.selector,r)}static from(e){return e instanceof ue?e:"string"===typeof e?new ue(JSON.parse(e)):"function"===typeof e.formatJson?new ue(e.formatJson()):"function"===typeof e.format?new ue(e.format("json")):new ue(e)}}function he(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function de(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(de(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=he(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call((0,i.Pw)(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=he(t.length);return n.unshift(183+n.length),n.concat(t)}const pe="0123456789abcdef";function fe(e){let t="0x";for(const n of de(e))t+=pe[n>>4],t+=pe[15&n];return t}function ge(e){const t=(0,N.K)(e.from);let n=(0,l.yT)(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,(0,N.K)((0,i.QB)((0,ne.w)(fe([t,n])),12))}function me(e,t,n){const r=(0,N.K)(e),s=(0,i.Pw)(t,"salt"),o=(0,i.Pw)(n,"initCodeHash");return(0,c.en)(32===s.length,"salt must be 32 bytes","salt",t),(0,c.en)(32===o.length,"initCodeHash must be 32 bytes","initCodeHash",n),(0,N.K)((0,i.QB)((0,ne.w)((0,i.zo)(["0xff",r,s,o])),12))}function ye(e){return e&&"function"===typeof e.getAddress}function we(e){try{return(0,N.K)(e),!0}catch(t){}return!1}async function be(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||((0,c.hu)("string"!==typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),(0,c.en)(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),(0,N.K)(n)}function ve(e,t){return"string"===typeof e?e.match(/^0x[0-9a-f]{40}$/i)?(0,N.K)(e):((0,c.hu)(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),be(e,t.resolveName(e))):ye(e)?be(e,e.getAddress()):e&&"function"===typeof e.then?be(e,e):void(0,c.en)(!1,"unsupported addressable value","target",e)}const Ee="0x0000000000000000000000000000000000000000",Pe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ie=BigInt("1000000000000000000"),ke=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),xe=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),Ne=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Se="\u039e",Re="\x19Ethereum Signed Message:\n";var Ae=n(27687);function Oe(e,t){return{address:(0,N.K)(e),storageKeys:t.map(((e,t)=>((0,c.en)((0,i.A7)(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function Te(e){if(Array.isArray(e))return e.map(((t,n)=>Array.isArray(t)?((0,c.en)(2===t.length,"invalid slot set",`value[${n}]`,t),Oe(t[0],t[1])):((0,c.en)(null!=t&&"object"===typeof t,"invalid address-slot set","value",e),Oe(t.address,t.storageKeys))));(0,c.en)(null!=e&&"object"===typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return Oe(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}const _e=BigInt(0);function Ce(e){return null==e?null:e}function De(e){return null==e?null:e.toString()}class Ue{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){(0,u.h)(this,{gasPrice:Ce(e),maxFeePerGas:Ce(t),maxPriorityFeePerGas:Ce(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:De(e),maxFeePerGas:De(t),maxPriorityFeePerGas:De(n)}}}function Le(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=(0,i.Dv)(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)s in e&&null!=e[s]&&(t[s]=(0,l.yT)(e[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)s in e&&null!=e[s]&&(t[s]=(0,l.Dx)(e[s],`request.${s}`));return e.accessList&&(t.accessList=Te(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map((e=>(0,i.Zq)(e)?(0,i.Dv)(e):Object.assign({},e)))),t}class $e{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#N;constructor(e,t){this.#N=e.transactions.map((e=>"string"!==typeof e?new Me(e,t):e)),(0,u.h)(this,{provider:t,hash:Ce(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ce(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ce(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#N.map((e=>"string"===typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#N.slice();return 0===e.length?[]:((0,c.hu)("object"===typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:r,gasUsed:s,hash:i,miner:o,prevRandao:a,nonce:c,number:l,parentHash:u,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:p,timestamp:f,transactions:g}=this;return{_type:"Block",baseFeePerGas:De(e),difficulty:De(t),extraData:n,gasLimit:De(r),gasUsed:De(s),blobGasUsed:De(this.blobGasUsed),excessBlobGas:De(this.excessBlobGas),hash:i,miner:o,prevRandao:a,nonce:c,number:l,parentHash:u,timestamp:f,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:p,transactions:g}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#N.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"===typeof e)t=this.#N[e];else{const n=e.toLowerCase();for(const e of this.#N){if("string"===typeof e){if(e!==n)continue;t=e;break}if(e.hash!==n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"===typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"===typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;(0,c.en)(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class Be{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const n=Object.freeze(e.topics.slice());(0,u.h)(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:r,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:r,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return(0,c.hu)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return(0,c.hu)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return(0,c.hu)(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class Fe{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#S;constructor(e,t){this.#S=Object.freeze(e.logs.map((e=>new Be(e,t))));let n=_e;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),(0,u.h)(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#S}toJSON(){const{to:e,from:t,contractAddress:n,hash:r,index:s,blockHash:i,blockNumber:o,logsBloom:a,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:o,contractAddress:n,cumulativeGasUsed:De(this.cumulativeGasUsed),from:t,gasPrice:De(this.gasPrice),blobGasUsed:De(this.blobGasUsed),blobGasPrice:De(this.blobGasPrice),gasUsed:De(this.gasUsed),hash:r,index:s,logs:c,logsBloom:a,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return qe(this)}reorderedEvent(e){return(0,c.hu)(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),je(this,e)}}class Me{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#R;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.#R=-1}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:r,type:s,to:i,from:o,nonce:a,data:c,signature:l,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:De(this.chainId),data:c,from:o,gasLimit:De(this.gasLimit),gasPrice:De(this.gasPrice),hash:r,maxFeePerGas:De(this.maxFeePerGas),maxPriorityFeePerGas:De(this.maxPriorityFeePerGas),maxFeePerBlobGas:De(this.maxFeePerBlobGas),nonce:a,signature:l,to:i,index:n,type:s,value:De(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await(0,u.m)({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,r=null==t?0:t;let s=this.#R,i=-1,o=-1===s;const a=async()=>{if(o)return null;const{blockNumber:e,nonce:t}=await(0,u.m)({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(s=e);if(o)return null;const r=await this.getTransaction();if(!r||null==r.blockNumber)for(-1===i&&(i=s-3,i<this.#R&&(i=this.#R));i<=e;){if(o)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let r=0;r<t.length;r++){const i=await t.getTransaction(r);if(i.from===this.from&&i.nonce===this.nonce){if(o)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let r="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?r="repriced":"0x"===i.data&&i.from===i.to&&i.value===_e&&(r="cancelled"),(0,c.hu)(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===r||"cancelled"===r,reason:r,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:t})}}i++}},l=e=>{if(null==e||0!==e.status)return e;(0,c.hu)(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},h=await this.provider.getTransactionReceipt(this.hash);if(0===n)return l(h);if(h){if(await h.confirmations()>=n)return l(h)}else if(await a(),0===n)return null;const d=new Promise(((e,t)=>{const i=[],u=()=>{i.forEach((e=>e()))};if(i.push((()=>{o=!0})),r>0){const e=setTimeout((()=>{u(),t((0,c.wf)("wait for transaction timeout","TIMEOUT"))}),r);i.push((()=>{clearTimeout(e)}))}const h=async r=>{if(await r.confirmations()>=n){u();try{e(l(r))}catch(s){t(s)}}};if(i.push((()=>{this.provider.off(this.hash,h)})),this.provider.on(this.hash,h),s>=0){const e=async()=>{try{await a()}catch(n){if((0,c.VZ)(n,"TRANSACTION_REPLACED"))return u(),void t(n)}o||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await d}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return(0,c.hu)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),qe(this)}reorderedEvent(e){return(0,c.hu)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),(0,c.hu)(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),je(this,e)}replaceableTransaction(e){(0,c.en)(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Me(this,this.provider);return t.#R=e,t}}function je(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function qe(e){return{orphan:"drop-transaction",tx:e}}class Ke{filter;emitter;#A;constructor(e,t,n){this.#A=t,(0,u.h)(this,{emitter:e,filter:n})}async removeListener(){null!=this.#A&&await this.emitter.off(this.filter,this.#A)}}class Ve extends Be{interface;fragment;args;constructor(e,t,n){super(e,e.provider);const r=t.decodeEventLog(n,e.data,e.topics);(0,u.h)(this,{args:r,fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class ze extends Be{error;constructor(e,t){super(e,e.provider),(0,u.h)(this,{error:t})}}class Ge extends Fe{#O;constructor(e,t,n){super(n,t),this.#O=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#O.getEvent(e.topics[0]):null;if(t)try{return new Ve(e,this.#O,t)}catch(n){return new ze(e,n)}return e}))}}class He extends Me{#O;constructor(e,t,n){super(n,t),this.#O=e}async wait(e,t){const n=await super.wait(e,t);return null==n?null:new Ge(this.#O,this.provider,n)}}class We extends Ke{log;constructor(e,t,n,r){super(e,t,n),(0,u.h)(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Je extends We{constructor(e,t,n,r,s){super(e,t,n,new Ve(s,e.interface,r));const i=e.interface.decodeEventLog(r,this.log.data,this.log.topics);(0,u.h)(this,{args:i,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ze=BigInt(0);function Ye(e){return e&&"function"===typeof e.call}function Qe(e){return e&&"function"===typeof e.estimateGas}function Xe(e){return e&&"function"===typeof e.resolveName}function et(e){return e&&"function"===typeof e.sendTransaction}function tt(e){if(null!=e){if(Xe(e))return e;if(e.provider)return e.provider}}class nt{#T;fragment;constructor(e,t,n){if((0,u.h)(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const r=rt(e.runner,"resolveName"),s=Xe(r)?r:null;this.#T=async function(){const r=await Promise.all(t.inputs.map(((e,t)=>null==n[t]?null:e.walkAsync(n[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>ve(e,s)))):ve(t,s):t)))));return e.interface.encodeFilterTopics(t,r)}()}getTopicFilter(){return this.#T}}function rt(e,t){return null==e?null:"function"===typeof e[t]?e:e.provider&&"function"===typeof e.provider[t]?e.provider:null}function st(e){return null==e?null:e.provider||null}async function it(e,t){const n=T.dereference(e,"overrides");(0,c.en)("object"===typeof n,"invalid overrides parameter","overrides",e);const r=Le(n);return(0,c.en)(null==r.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),(0,c.en)(null==r.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function ot(e,t,n){const r=rt(e,"resolveName"),s=Xe(r)?r:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(n[t],((e,t)=>(t=T.dereference(t,e),"address"===e?ve(t,s):t))))))}function at(e){const t=async function(t){const n=await it(t,["data"]);n.to=await e.getAddress(),n.from&&(n.from=await ve(n.from,tt(e.runner)));const r=e.interface,s=(0,l.yT)(n.value||Ze,"overrides.value")===Ze,i="0x"===(n.data||"0x");!r.fallback||r.fallback.payable||!r.receive||i||s||(0,c.en)(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),(0,c.en)(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data);const o=r.receive||r.fallback&&r.fallback.payable;return(0,c.en)(o||s,"cannot send value to non-payable fallback","overrides.value",n.value),(0,c.en)(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const r=e.runner;(0,c.hu)(et(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await r.sendTransaction(await t(n)),i=st(e.runner);return new He(e.interface,i,s)},r=async e=>await n(e);return(0,u.h)(r,{_contract:e,estimateGas:async function(n){const r=rt(e.runner,"estimateGas");return(0,c.hu)(Qe(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const r=rt(e.runner,"call");(0,c.hu)(Ye(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await t(n);try{return await r.call(s)}catch(i){if((0,c.Hl)(i)&&i.data)throw e.interface.makeError(i.data,s);throw i}}}),r}const ct=Symbol.for("_ethersInternal_contract"),lt=new WeakMap;function ut(e){return lt.get(e[ct])}async function ht(e,t){let n,r=null;if(Array.isArray(t)){const r=function(t){if((0,i.A7)(t,32))return t;const n=e.interface.getEvent(t);return(0,c.en)(n,"unknown fragment","name",t),n.topicHash};n=t.map((e=>null==e?null:Array.isArray(e)?e.map(r):r(e)))}else"*"===t?n=[null]:"string"===typeof t?(0,i.A7)(t,32)?n=[t]:(r=e.interface.getEvent(t),(0,c.en)(r,"unknown fragment","event",t),n=[r.topicHash]):(s=t)&&"object"===typeof s&&"getTopicFilter"in s&&"function"===typeof s.getTopicFilter&&s.fragment?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):(0,c.en)(!1,"unknown event name","event",t);var s;n=n.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()}));return{fragment:r,tag:n.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:n}}async function dt(e,t){const{subs:n}=ut(e);return n.get((await ht(e,t)).tag)||null}async function pt(e,t,n){const r=st(e.runner);(0,c.hu)(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await ht(e,n),{addr:a,subs:l}=ut(e);let u=l.get(i);if(!u){const t={address:a||e,topics:o},c=t=>{let r=s;if(null==r)try{r=e.interface.getEvent(t.topics[0])}catch(i){}if(r){const i=r,o=s?e.interface.decodeEventLog(s,t.data,t.topics):[];gt(e,n,o,(r=>new Je(e,r,n,i,t)))}else gt(e,n,[],(r=>new We(e,r,n,t)))};let h=[];u={tag:i,listeners:[],start:()=>{h.length||h.push(r.on(t,c))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),r.off(t,c)}},l.set(i,u)}return u}let ft=Promise.resolve();async function gt(e,t,n,r){try{await ft}catch(i){}const s=async function(e,t,n,r){await ft;const s=await dt(e,t);if(!s)return!1;const o=s.listeners.length;return s.listeners=s.listeners.filter((({listener:t,once:s})=>{const o=Array.from(n);r&&o.push(r(s?null:t));try{t.call(e,...o)}catch(i){}return!s})),0===s.listeners.length&&(s.stop(),ut(e).subs.delete(s.tag)),o>0}(e,t,n,r);return ft=s,await s}const mt=["then"];class yt{target;interface;runner;filters;[ct];fallback;constructor(e,t,n,r){(0,c.en)("string"===typeof e||ye(e),"invalid value for Contract target","target",e),null==n&&(n=null);const s=ue.from(t);let o;(0,u.h)(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,ct,{value:{}});let a=null,l=null;if(r){const e=st(n);l=new He(this.interface,e,r)}let h=new Map;if("string"===typeof e)if((0,i.A7)(e))a=e,o=Promise.resolve(e);else{const t=rt(n,"resolveName");if(!Xe(t))throw(0,c.wf)("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=t.resolveName(e).then((t=>{if(null==t)throw(0,c.wf)("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ut(this).addr=t,t}))}else o=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return ut(this).addr=e,e}));var d,p;d=this,p={addrPromise:o,addr:a,deployTx:l,subs:h},lt.set(d[ct],p);const f=new Proxy({},{get:(e,t,n)=>{if("symbol"===typeof t||mt.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(r){if(!(0,c.VZ)(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:(e,t)=>mt.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return(0,u.h)(this,{filters:f}),(0,u.h)(this,{fallback:s.receive||s.fallback?at(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"===typeof t||t in e||mt.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(r){if(!(0,c.VZ)(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:(e,t)=>"symbol"===typeof t||t in e||mt.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new yt(this.target,this.interface,e)}attach(e){return new yt(e,this.interface,this.runner)}async getAddress(){return await ut(this).addrPromise}async getDeployedCode(){const e=st(this.runner);(0,c.hu)(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=st(this.runner);return(0,c.hu)(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,n)=>{const r=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",r)}catch(s){n(s)}};r()}))}deploymentTransaction(){return ut(this).deployTx}getFunction(e){"string"!==typeof e&&(e=e.format());const t=function(e,t){const n=function(...n){const r=e.interface.getFunction(t,n);return(0,c.hu)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),r},r=async function(...t){const r=n(...t);let s={};if(r.inputs.length+1===t.length&&(s=await it(t.pop()),s.from&&(s.from=await ve(s.from,tt(e.runner)))),r.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await ot(e.runner,r.inputs,t);return Object.assign({},s,await(0,u.m)({to:e.getAddress(),data:e.interface.encodeFunctionData(r,i)}))},s=async function(...e){const t=await o(...e);return 1===t.length?t[0]:t},i=async function(...t){const n=e.runner;(0,c.hu)(et(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await n.sendTransaction(await r(...t)),i=st(e.runner);return new He(e.interface,i,s)},o=async function(...t){const s=rt(e.runner,"call");(0,c.hu)(Ye(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await r(...t);let o="0x";try{o=await s.call(i)}catch(l){if((0,c.Hl)(l)&&l.data)throw e.interface.makeError(l.data,i);throw l}const a=n(...t);return e.interface.decodeFunctionResult(a,o)},a=async(...e)=>n(...e).constant?await s(...e):await i(...e);return(0,u.h)(a,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(...t){const n=rt(e.runner,"estimateGas");return(0,c.hu)(Qe(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await r(...t))},populateTransaction:r,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(a,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return(0,c.hu)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),a}(this,e);return t}getEvent(e){return"string"!==typeof e&&(e=e.format()),function(e,t){const n=function(...n){const r=e.interface.getEvent(t,n);return(0,c.hu)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),r},r=function(...t){return new nt(e,n(...t),t)};return(0,u.h)(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return(0,c.hu)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),r}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:r,addrPromise:s}=ut(this),i=r||await s,{fragment:o,topics:a}=await ht(this,e),l={address:i,topics:a,fromBlock:t,toBlock:n},u=st(this.runner);return(0,c.hu)(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map((e=>{let t=o;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(n){}if(t)try{return new Ve(e,this.interface,t)}catch(n){return new ze(e,n)}return new Be(e,u)}))}async on(e,t){const n=await pt(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await pt(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await gt(this,e,t,null)}async listenerCount(e){if(e){const t=await dt(this,e);return t?t.listeners.length:0}const{subs:t}=ut(this);let n=0;for(const{listeners:r}of t.values())n+=r.length;return n}async listeners(e){if(e){const t=await dt(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=ut(this);let n=[];for(const{listeners:r}of t.values())n=n.concat(r.map((({listener:e})=>e)));return n}async off(e,t){const n=await dt(this,e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),ut(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await dt(this,e);if(!t)return this;t.stop(),ut(this).subs.delete(t.tag)}else{const{subs:e}=ut(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends yt{constructor(t,n=null){super(t,e,n)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class wt extends(function(){return yt}()){}class bt{interface;bytecode;runner;constructor(e,t,n){const r=ue.from(e);t instanceof Uint8Array||("object"===typeof t&&(t=t.object),t.startsWith("0x")||(t="0x"+t)),t=(0,i.Dv)((0,i.Pw)(t)),(0,u.h)(this,{bytecode:t,interface:r,runner:n||null})}attach(e){return new yt(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={};const n=this.interface.deploy;if(n.inputs.length+1===e.length&&(t=await it(e.pop())),n.inputs.length!==e.length)throw new Error("incorrect number of arguments to constructor");const r=await ot(this.runner,n.inputs,e),s=(0,i.zo)([this.bytecode,this.interface.encodeDeploy(r)]);return Object.assign({},t,{data:s})}async deploy(...e){const t=await this.getDeployTransaction(...e);(0,c.hu)(this.runner&&"function"===typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await this.runner.sendTransaction(t),r=ge(n);return new yt(r,this.interface,this.runner,n)}connect(e){return new bt(this.interface,this.bytecode,e)}static fromSolidity(e,t){(0,c.en)(null!=e,"bad compiler output","output",e),"string"===typeof e&&(e=JSON.parse(e));const n=e.abi;let r="";return e.bytecode?r=e.bytecode:e.evm&&e.evm.bytecode&&(r=e.evm.bytecode),new this(n,r,t)}}var vt=n(39394);let Et=!1;const Pt=function(e,t,n){return(0,vt.zH)(e,t).update(n).digest()};let It=Pt;function kt(e,t,n){const r=(0,i.Pw)(t,"key"),s=(0,i.Pw)(n,"data");return(0,i.Dv)(It(e,r,s))}kt._=Pt,kt.lock=function(){Et=!0},kt.register=function(e){if(Et)throw new Error("computeHmac is locked");It=e},Object.freeze(kt);var xt=n(88646),Nt=n(7309);const St=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Rt=Uint8Array.from({length:16},((e,t)=>t));let At=[Rt],Ot=[Rt.map((e=>(9*e+5)%16))];for(let $o=0;$o<4;$o++)for(let e of[At,Ot])e.push(e[$o].map((e=>St[e])));const Tt=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),_t=At.map(((e,t)=>e.map((e=>Tt[t][e])))),Ct=Ot.map(((e,t)=>e.map((e=>Tt[t][e])))),Dt=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ut=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Lt=(e,t)=>e<<t|e>>>32-t;function $t(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const Bt=new Uint32Array(16);class Ft extends xt.N{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let d=0;d<16;d++,t+=4)Bt[d]=e.getUint32(t,!0);let n=0|this.h0,r=n,s=0|this.h1,i=s,o=0|this.h2,a=o,c=0|this.h3,l=c,u=0|this.h4,h=u;for(let d=0;d<5;d++){const e=4-d,t=Dt[d],p=Ut[d],f=At[d],g=Ot[d],m=_t[d],y=Ct[d];for(let r=0;r<16;r++){const e=Lt(n+$t(d,s,o,c)+Bt[f[r]]+t,m[r])+u|0;n=u,u=c,c=0|Lt(o,10),o=s,s=e}for(let n=0;n<16;n++){const t=Lt(r+$t(e,i,a,l)+Bt[g[n]]+p,y[n])+h|0;r=h,h=l,l=0|Lt(a,10),a=i,i=t}}this.set(this.h1+o+l|0,this.h2+c+h|0,this.h3+u+r|0,this.h4+n+i|0,this.h0+s+a|0)}roundClean(){Bt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Mt=(0,Nt.hE)((()=>new Ft));let jt=!1;const qt=function(e){return Mt(e)};let Kt=qt;function Vt(e){const t=(0,i.Pw)(e,"data");return(0,i.Dv)(Kt(t))}Vt._=qt,Vt.lock=function(){jt=!0},Vt.register=function(e){if(jt)throw new TypeError("ripemd160 is locked");Kt=e},Object.freeze(Vt);var zt=n(23128),Gt=n(54331),Ht=n(22857);const Wt=function(e){return(0,vt.js)("sha256").update(e).digest()},Jt=function(e){return(0,vt.js)("sha512").update(e).digest()};let Zt=Wt,Yt=Jt,Qt=!1,Xt=!1;function en(e){const t=(0,i.Pw)(e,"data");return(0,i.Dv)(Zt(t))}function tn(e){const t=(0,i.Pw)(e,"data");return(0,i.Dv)(Yt(t))}function nn(){kt.lock(),ne.w.lock(),zt.n.lock(),Gt.O.lock(),Vt.lock(),Ht.f.lock(),Ht.g.lock(),en.lock(),tn.lock(),Gt.O.lock()}en._=Wt,en.lock=function(){Qt=!0},en.register=function(e){if(Qt)throw new Error("sha256 is locked");Zt=e},Object.freeze(en),tn._=Jt,tn.lock=function(){Xt=!0},tn.register=function(e){if(Xt)throw new Error("sha512 is locked");Yt=e},Object.freeze(en);var rn=n(20367),sn=n(82306),on=n(62712);const an=new Uint8Array(32);function cn(e){return(0,c.en)(0!==e.length,"invalid ENS name; empty component","comp",e),e}function ln(e){const t=(0,s.Y0)(un(e)),n=[];if(0===e.length)return n;let r=0;for(let s=0;s<t.length;s++){46===t[s]&&(n.push(cn(t.slice(r,s))),r=s+1)}return(0,c.en)(r<t.length,"invalid ENS name; empty component","name",e),n.push(cn(t.slice(r))),n}function un(e){try{if(0===e.length)throw new Error("empty label");return(0,on.Q6)(e)}catch(t){(0,c.en)(!1,`invalid ENS name (${t.message})`,"name",e)}}function hn(e){try{return 0!==ln(e).length}catch(t){}return!1}function dn(e){(0,c.en)("string"===typeof e,"invalid ENS name; not a string","name",e),(0,c.en)(e.length,"invalid ENS name (empty label)","name",e);let t=an;const n=ln(e);for(;n.length;)t=(0,ne.w)((0,i.zo)([t,(0,ne.w)(n.pop())]));return(0,i.Dv)(t)}function pn(e,t){const n=null!=t?t:63;return(0,c.en)(n<=255,"DNS encoded label cannot exceed 255","length",n),(0,i.Dv)((0,i.zo)(ln(e).map((t=>{(0,c.en)(t.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r}))))+"00"}an.fill(0);var fn=n(55246);function gn(e){return"string"===typeof e&&(e=(0,s.Y0)(e)),(0,ne.w)((0,i.zo)([(0,s.Y0)(Re),(0,s.Y0)(String(e.length)),e]))}function mn(e,t){const n=gn(e);return(0,fn.R)(n,t)}const yn=new RegExp("^bytes([0-9]+)$"),wn=new RegExp("^(u?int)([0-9]*)$"),bn=new RegExp("^(.*)\\[([0-9]*)\\]$");function vn(e,t,n){switch(e){case"address":return n?(0,i.Pw)((0,i.U3)(t,32)):(0,i.Pw)((0,N.K)(t));case"string":return(0,s.Y0)(t);case"bytes":return(0,i.Pw)(t);case"bool":return t=t?"0x01":"0x00",n?(0,i.Pw)((0,i.U3)(t,32)):(0,i.Pw)(t)}let r=e.match(wn);if(r){let s="int"===r[1],o=parseInt(r[2]||"256");return(0,c.en)((!r[2]||r[2]===String(o))&&o%8===0&&0!==o&&o<=256,"invalid number type","type",e),n&&(o=256),s&&(t=(0,l.$j)(t,o)),(0,i.Pw)((0,i.U3)((0,l.ot)(t),o/8))}if(r=e.match(yn),r){const s=parseInt(r[1]);return(0,c.en)(String(s)===r[1]&&0!==s&&s<=32,"invalid bytes type","type",e),(0,c.en)((0,i.M5)(t)===s,`invalid value for ${e}`,"value",t),n?(0,i.Pw)((0,i.SK)(t,32)):t}if(r=e.match(bn),r&&Array.isArray(t)){const n=r[1],s=parseInt(r[2]||String(t.length));(0,c.en)(s===t.length,`invalid array length for ${e}`,"value",t);const o=[];return t.forEach((function(e){o.push(vn(n,e,!0))})),(0,i.Pw)((0,i.zo)(o))}(0,c.en)(!1,"invalid type","type",e)}function En(e,t){(0,c.en)(e.length===t.length,"wrong number of values; expected ${ types.length }","values",t);const n=[];return e.forEach((function(e,r){n.push(vn(e,t[r]))})),(0,i.Dv)((0,i.zo)(n))}function Pn(e,t){return(0,ne.w)(En(e,t))}function In(e,t){return en(En(e,t))}const kn=new Uint8Array(32);kn.fill(0);const xn=BigInt(-1),Nn=BigInt(0),Sn=BigInt(1),Rn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const An=(0,l.m9)(Sn,32),On=(0,l.m9)(Nn,32),Tn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},_n=["name","version","chainId","verifyingContract","salt"];function Cn(e){return function(t){return(0,c.en)("string"===typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Dn={name:Cn("name"),version:Cn("version"),chainId:function(e){const t=(0,l.yT)(e,"domain.chainId");return(0,c.en)(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):(0,l.B4)(t)},verifyingContract:function(e){try{return(0,N.K)(e).toLowerCase()}catch(t){}(0,c.en)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=(0,i.Pw)(e,"domain.salt");return(0,c.en)(32===t.length,'invalid domain value "salt"',"domain.salt",e),(0,i.Dv)(t)}};function Un(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=""===t[1],r=parseInt(t[2]);(0,c.en)(r%8===0&&0!==r&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const s=(0,l.sS)(Rn,n?r-1:r),i=n?(s+Sn)*xn:Nn;return function(t){const r=(0,l.yT)(t,"value");return(0,c.en)(r>=i&&r<=s,`value out-of-bounds for ${e}`,"value",r),(0,l.m9)(n?(0,l.$j)(r,256):r,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return(0,c.en)(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){const r=(0,i.Pw)(t);return(0,c.en)(r.length===n,`invalid length for ${e}`,"value",t),function(e){const t=(0,i.Pw)(e),n=t.length%32;return n?(0,i.zo)([t,kn.slice(n)]):(0,i.Dv)(t)}(t)}}}switch(e){case"address":return function(e){return(0,i.U3)((0,N.K)(e),32)};case"bool":return function(e){return e?An:On};case"bytes":return function(e){return(0,ne.w)(e)};case"string":return function(e){return(0,re.id)(e)}}return null}function Ln(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}function $n(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class Bn{primaryType;#_;get types(){return JSON.parse(this.#_)}#C;#D;constructor(e){this.#C=new Map,this.#D=new Map;const t=new Map,n=new Map,r=new Map,s={};Object.keys(e).forEach((i=>{s[i]=e[i].map((({name:t,type:n})=>{let{base:r,index:s}=$n(n);return"int"!==r||e.int||(r="int256"),"uint"!==r||e.uint||(r="uint256"),{name:t,type:r+(s||"")}})),t.set(i,new Set),n.set(i,[]),r.set(i,new Set)})),this.#_=JSON.stringify(s);for(const o in s){const r=new Set;for(const i of s[o]){(0,c.en)(!r.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(o)}`,"types",e),r.add(i.name);const s=$n(i.type).base;(0,c.en)(s!==o,`circular type reference to ${JSON.stringify(s)}`,"types",e);Un(s)||((0,c.en)(n.has(s),`unknown type ${JSON.stringify(s)}`,"types",e),n.get(s).push(o),t.get(o).add(s))}}const i=Array.from(n.keys()).filter((e=>0===n.get(e).length));(0,c.en)(0!==i.length,"missing primary type","types",e),(0,c.en)(1===i.length,`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),(0,u.h)(this,{primaryType:i[0]}),function s(i,o){(0,c.en)(!o.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),o.add(i);for(const e of t.get(i))if(n.has(e)){s(e,o);for(const t of o)r.get(t).add(e)}o.delete(i)}(this.primaryType,new Set);for(const[o,a]of r){const e=Array.from(a);e.sort(),this.#C.set(o,Ln(o,s[o])+e.map((e=>Ln(e,s[e]))).join(""))}}getEncoder(e){let t=this.#D.get(e);return t||(t=this.#U(e),this.#D.set(e,t)),t}#U(e){{const t=Un(e);if(t)return t}const t=$n(e).array;if(t){const e=t.prefix,n=this.getEncoder(e);return r=>{(0,c.en)(-1===t.count||t.count===r.length,`array length mismatch; expected length ${t.count}`,"value",r);let s=r.map(n);return this.#C.has(e)&&(s=s.map(ne.w)),(0,ne.w)((0,i.zo)(s))}}const n=this.types[e];if(n){const t=(0,re.id)(this.#C.get(e));return e=>{const r=n.map((({name:t,type:n})=>{const r=this.getEncoder(n)(e[t]);return this.#C.has(n)?(0,ne.w)(r):r}));return r.unshift(t),(0,i.zo)(r)}}(0,c.en)(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#C.get(e);return(0,c.en)(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return(0,ne.w)(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Un(e))return n(e,t);const r=$n(e).array;if(r)return(0,c.en)(-1===r.count||r.count===t.length,`array length mismatch; expected length ${r.count}`,"value",t),t.map((e=>this._visit(r.prefix,e,n)));const s=this.types[e];if(s)return s.reduce(((e,{name:r,type:s})=>(e[r]=this._visit(s,t[r],n),e)),{});(0,c.en)(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Bn(e)}static getPrimaryType(e){return Bn.from(e).primaryType}static hashStruct(e,t,n){return Bn.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const r=Tn[n];(0,c.en)(r,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:r})}return t.sort(((e,t)=>_n.indexOf(e.name)-_n.indexOf(t.name))),Bn.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return(0,i.zo)(["0x1901",Bn.hashDomain(e),Bn.from(t).hash(n)])}static hash(e,t,n){return(0,ne.w)(Bn.encode(e,t,n))}static async resolveNames(e,t,n,r){e=Object.assign({},e);for(const i in e)null==e[i]&&delete e[i];const s={};e.verifyingContract&&!(0,i.A7)(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Bn.from(t);o.visit(n,((e,t)=>("address"!==e||(0,i.A7)(t,20)||(s[t]="0x"),t)));for(const i in s)s[i]=await r(i);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),{domain:e,value:n=o.visit(n,((e,t)=>"address"===e&&s[t]?s[t]:t))}}static getPayload(e,t,n){Bn.hashDomain(e);const r={},s=[];_n.forEach((t=>{const n=e[t];null!=n&&(r[t]=Dn[t](n),s.push({name:t,type:Tn[t]}))}));const o=Bn.from(t);t=o.types;const a=Object.assign({},t);return(0,c.en)(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=s,o.encode(n),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return(0,i.Dv)((0,i.Pw)(t));if(e.match(/^u?int/))return(0,l.yT)(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return(0,c.en)("string"===typeof t,"invalid string","value",t),t}(0,c.en)(!1,"unsupported type","type",e)}))}}}function Fn(e,t,n,r){return(0,fn.R)(Bn.hash(e,t,n),r)}function Mn(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return(0,i.Pw)(t)}function jn(e){const t=(0,i.Pw)(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function qn(e){return async function(e,t){(0,c.hu)(null==t||!t.cancelled,"request cancelled before sending","CANCELLED");const n=e.url.split(":")[0].toLowerCase();(0,c.hu)("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),(0,c.hu)("https"===n||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let r=null;const s=new AbortController,i=setTimeout((()=>{r=(0,c.wf)("request timeout","TIMEOUT"),s.abort()}),e.timeout);t&&t.addListener((()=>{r=(0,c.wf)("request cancelled","CANCELLED"),s.abort()}));const o={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:s.signal};let a;try{a=await fetch(e.url,o)}catch(d){if(clearTimeout(i),r)throw r;throw d}clearTimeout(i);const l={};a.headers.forEach(((e,t)=>{l[t.toLowerCase()]=e}));const u=await a.arrayBuffer(),h=null==u?null:new Uint8Array(u);return{statusCode:a.status,statusMessage:a.statusText,headers:l,body:h}}}qn();let Kn=qn();const Vn=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),zn=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Gn=!1;async function Hn(e,t){try{const t=e.match(Vn);if(!t)throw new Error("invalid data");return new er(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?Mn(t[3]):(n=t[3],(0,s.Y0)(n.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16)))))))}catch(r){return new er(599,"BAD REQUEST (invalid data: URI)",{},null,new Xn(e))}var n}function Wn(e){return async function(t,n){try{const n=t.match(zn);if(!n)throw new Error("invalid link");return new Xn(`${e}${n[2]}`)}catch(r){return new er(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Xn(t))}}}const Jn={data:Hn,ipfs:Wn("https://gateway.ipfs.io/ipfs/")},Zn=new WeakMap;class Yn{#L;#$;constructor(e){this.#L=[],this.#$=!1,Zn.set(e,(()=>{if(!this.#$){this.#$=!0;for(const e of this.#L)setTimeout((()=>{e()}),0);this.#L=[]}}))}addListener(e){(0,c.hu)(!this.#$,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#L.push(e)}get cancelled(){return this.#$}checkSignal(){(0,c.hu)(!this.cancelled,"cancelled","CANCELLED",{})}}function Qn(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class Xn{#B;#F;#M;#j;#q;#K;#V;#z;#G;#H;#W;#J;#Z;#Y;#Q;get url(){return this.#K}set url(e){this.#K=String(e)}get body(){return null==this.#V?null:new Uint8Array(this.#V)}set body(e){if(null==e)this.#V=void 0,this.#z=void 0;else if("string"===typeof e)this.#V=(0,s.Y0)(e),this.#z="text/plain";else if(e instanceof Uint8Array)this.#V=e,this.#z="application/octet-stream";else{if("object"!==typeof e)throw new Error("invalid body");this.#V=(0,s.Y0)(JSON.stringify(e)),this.#z="application/json"}}hasBody(){return null!=this.#V}get method(){return this.#j?this.#j:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#j=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#M);return this.#G&&(e.authorization=`Basic ${jn((0,s.Y0)(this.#G))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#z&&(e["content-type"]=this.#z),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#M[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#M={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#G||null}setCredentials(e,t){(0,c.en)(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#G=`${e}:${t}`}get allowGzip(){return this.#F}set allowGzip(e){this.#F=!!e}get allowInsecureAuthentication(){return!!this.#B}set allowInsecureAuthentication(e){this.#B=!!e}get timeout(){return this.#q}set timeout(e){(0,c.en)(e>=0,"timeout must be non-zero","timeout",e),this.#q=e}get preflightFunc(){return this.#H||null}set preflightFunc(e){this.#H=e}get processFunc(){return this.#W||null}set processFunc(e){this.#W=e}get retryFunc(){return this.#J||null}set retryFunc(e){this.#J=e}get getUrlFunc(){return this.#Q||Kn}set getUrlFunc(e){this.#Q=e}constructor(e){this.#K=String(e),this.#B=!1,this.#F=!0,this.#M={},this.#j="",this.#q=3e5,this.#Y={slotInterval:250,maxAttempts:12},this.#Q=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#V?(0,i.Dv)(this.#V):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#Y.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#Y.maxAttempts=e.maxAttempts)}async#X(e,t,n,r,s){if(e>=this.#Y.maxAttempts)return s.makeServerError("exceeded maximum retry limit");(0,c.hu)(tr()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(n);let i=this.clone();const o=(i.url.split(":")[0]||"").toLowerCase();if(o in Jn){const e=await Jn[o](i.url,Qn(r.#Z));if(e instanceof er){let t=e;if(this.processFunc){Qn(r.#Z);try{t=await this.processFunc(i,t)}catch(u){null!=u.throttle&&"number"===typeof u.stall||t.makeServerError("error in post-processing function",u).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await this.getUrlFunc(i,Qn(r.#Z));let l=new er(a.statusCode,a.statusMessage,a.headers,a.body,r);if(301===l.statusCode||302===l.statusCode){try{const n=l.headers.location||"";return i.redirect(n).#X(e+1,t,0,r,l)}catch(u){}return l}if(429===l.statusCode&&(null==this.retryFunc||await this.retryFunc(i,l,e))){const n=l.headers["retry-after"];let s=this.#Y.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"===typeof n&&n.match(/^[1-9][0-9]*$/)&&(s=parseInt(n)),i.clone().#X(e+1,t,s,r,l)}if(this.processFunc){Qn(r.#Z);try{l=await this.processFunc(i,l)}catch(u){null!=u.throttle&&"number"===typeof u.stall||l.makeServerError("error in post-processing function",u).assertOk();let n=this.#Y.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(n=u.stall),i.clone().#X(e+1,t,n,r,l)}}return l}send(){return(0,c.hu)(null==this.#Z,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#Z=new Yn(this),this.#X(0,tr()+this.timeout,0,this,new er(0,"",{},null,this))}cancel(){(0,c.hu)(null!=this.#Z,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Zn.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();(0,c.hu)("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new Xn(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#M=Object.assign({},this.#M),this.#V&&(r.#V=new Uint8Array(this.#V)),r.#z=this.#z,r}clone(){const e=new Xn(this.url);return e.#j=this.#j,this.#V&&(e.#V=this.#V),e.#z=this.#z,e.#M=Object.assign({},this.#M),e.#G=this.#G,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#H=this.#H,e.#W=this.#W,e.#J=this.#J,e.#Y=Object.assign({},this.#Y),e.#Q=this.#Q,e}static lockConfig(){Gn=!0}static getGateway(e){return Jn[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Gn)throw new Error("gateways locked");Jn[e]=t}static registerGetUrl(e){if(Gn)throw new Error("gateways locked");Kn=e}static createGetUrlFunc(e){return qn()}static createDataGateway(){return Hn}static createIpfsGatewayFunc(e){return Wn(e)}}class er{#ee;#te;#M;#V;#ne;#re;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#V?(0,i.Dv)(this.#V):"null"}>`}get statusCode(){return this.#ee}get statusMessage(){return this.#te}get headers(){return Object.assign({},this.#M)}get body(){return null==this.#V?null:new Uint8Array(this.#V)}get bodyText(){try{return null==this.#V?"":(0,s.ZN)(this.#V)}catch(e){(0,c.hu)(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){(0,c.hu)(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,r,s){this.#ee=e,this.#te=t,this.#M=Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=String(n[t]),e)),{}),this.#V=null==r?null:new Uint8Array(r),this.#ne=s||null,this.#re={message:""}}makeServerError(e,t){let n;n=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const r=new er(599,n,this.headers,this.body,this.#ne||void 0);return r.#re={message:e,error:t},r}throwThrottleError(e,t){null==t?t=-1:(0,c.en)(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw(0,u.h)(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#V}get request(){return this.#ne}ok(){return""===this.#re.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#re;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let r=null;try{this.#V&&(r=(0,s.ZN)(this.#V))}catch(i){}(0,c.hu)(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function tr(){return(new Date).getTime()}const nr=new Set;function rr(e){nr.has(e)||(nr.add(e),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${e} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}class sr{name;constructor(e){(0,u.h)(this,{name:e})}clone(){return new sr(this.name)}}class ir extends sr{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function r(e,r){let s=(t||{})[e];null==s&&(s=r),(0,c.en)("number"===typeof s,`invalud value for ${e}`,"costs",t),n[e]=s}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),(0,u.h)(this,n)}clone(){return new ir(this.effectiveBlock,this)}}class or extends sr{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),(0,u.h)(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new or(this.address,this.targetNetwork)}}class ar extends sr{#se;get feeDataFunc(){return this.#se}constructor(e){super("org.ethers.plugins.network.FeeData"),this.#se=e}async getFeeData(e){return await this.#se(e)}clone(){return new ar(this.#se)}}class cr extends sr{#K;#ie;get url(){return this.#K}get processFunc(){return this.#ie}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#K=e,this.#ie=t}clone(){return this}}const lr=new Map;class ur{#oe;#ae;#ce;constructor(e,t){this.#oe=e,this.#ae=(0,l.yT)(t),this.#ce=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#oe}set name(e){this.#oe=e}get chainId(){return this.#ae}set chainId(e){this.#ae=(0,l.yT)(e,"chainId")}matches(e){if(null==e)return!1;if("string"===typeof e){try{return this.chainId===(0,l.yT)(e)}catch(t){}return this.name===e}if("number"===typeof e||"bigint"===typeof e){try{return this.chainId===(0,l.yT)(e)}catch(t){}return!1}if("object"===typeof e){if(null!=e.chainId){try{return this.chainId===(0,l.yT)(e.chainId)}catch(t){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#ce.values())}attachPlugin(e){if(this.#ce.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#ce.set(e.name,e.clone()),this}getPlugin(e){return this.#ce.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new ur(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new ir;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)"00"===e.data.substring(r,r+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const r=Te(e.accessList);for(const e in r)n+=t.txAccessListAddress+t.txAccessListStorageKey*r[e].storageKeys.length}return n}static from(e){if(function(){if(pr)return;function e(e,t,n){const r=function(){const r=new ur(e,t);return null!=n.ensNetwork&&r.attachPlugin(new or(null,n.ensNetwork)),r.attachPlugin(new ir),(n.plugins||[]).forEach((e=>{r.attachPlugin(e)})),r};ur.register(e,r),ur.register(t,r),n.altNames&&n.altNames.forEach((e=>{ur.register(e,r)}))}pr=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[dr("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[dr("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return ur.from("mainnet");if("number"===typeof e&&(e=BigInt(e)),"string"===typeof e||"bigint"===typeof e){const t=lr.get(e);if(t)return t();if("bigint"===typeof e)return new ur("unknown",e);(0,c.en)(!1,"unknown network","network",e)}if("function"===typeof e.clone){return e.clone()}if("object"===typeof e){(0,c.en)("string"===typeof e.name&&"number"===typeof e.chainId,"invalid network object name or chainId","network",e);const t=new ur(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new or(e.ensAddress,e.ensNetwork)),t}(0,c.en)(!1,"invalid network","network",e)}static register(e,t){"number"===typeof e&&(e=BigInt(e));const n=lr.get(e);n&&(0,c.en)(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),lr.set(e,t)}}function hr(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const r=n.split(".");if(1===r.length&&r.push(""),2!==r.length)throw new Error(`invalid gwei value: ${e}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let e=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||e++,r[1]=e.toString()}return BigInt(r[0]+r[1])}function dr(e){return new cr(e,(async(e,t,n)=>{let r;n.setHeader("User-Agent","ethers");try{const[t,s]=await Promise.all([n.send(),e()]);r=t;const i=r.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:hr(i.maxFee,9),maxPriorityFeePerGas:hr(i.maxPriorityFee,9)}}catch(s){(0,c.hu)(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:r,error:s})}}))}let pr=!1;function fr(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function gr(e,t,n){let r=0;for(let s=0;s<n;s++)r=256*r+e[t+s];return r}function mr(e,t,n,r){const s=[];for(;n<t+1+r;){const i=yr(e,n);s.push(i.result),n+=i.consumed,(0,c.hu)(n<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:s}}function yr(e,t){(0,c.hu)(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{(0,c.hu)(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const s=gr(e,t+1,r);return n(t+1+r+s),mr(e,t,t+1+r,r+s)}if(e[t]>=192){const r=e[t]-192;return n(t+1+r),mr(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;n(t+1+r);const s=gr(e,t+1,r);n(t+1+r+s);return{consumed:1+r+s,result:(0,i.Dv)(e.slice(t+1+r,t+1+r+s))}}if(e[t]>=128){const r=e[t]-128;n(t+1+r);return{consumed:1+r,result:(0,i.Dv)(e.slice(t+1,t+1+r))}}return{consumed:1,result:fr(e[t])}}function wr(e){const t=(0,i.Pw)(e,"data"),n=yr(t,0);return(0,c.en)(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}const br=BigInt(0),vr=BigInt(2),Er=BigInt(27),Pr=BigInt(28),Ir=BigInt(35),kr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),xr=131072;function Nr(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=en(t).substring(4),"0x"+n}function Sr(e){return"0x"===e?null:(0,N.K)(e)}function Rr(e,t){try{return Te(e)}catch(n){(0,c.en)(!1,n.message,t,e)}}function Ar(e,t){return"0x"===e?0:(0,l.Dx)(e,t)}function Or(e,t){if("0x"===e)return br;const n=(0,l.yT)(e,t);return(0,c.en)(n<=kr,"value exceeds uint size",t,n),n}function Tr(e,t){const n=(0,l.yT)(e,"value"),r=(0,l.ot)(n);return(0,c.en)(r.length<=32,"value too large",`tx.${t}`,n),r}function _r(e){return Te(e).map((e=>[e.address,e.storageKeys]))}function Cr(e,t){(0,c.en)(Array.isArray(e),`invalid ${t}`,"value",e);for(let n=0;n<e.length;n++)(0,c.en)((0,i.A7)(e[n],32),"invalid ${ param } hash",`value[${n}]`,e[n]);return e}function Dr(e,t){let n;try{if(n=Ar(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(a){(0,c.en)(!1,"invalid yParity","yParity",t[0])}const r=(0,i.U3)(t[1],32),s=(0,i.U3)(t[2],32),o=rn.P.from({r:r,s:s,yParity:n});e.signature=o}class Ur{#le;#ue;#u;#he;#de;#pe;#fe;#ge;#me;#ae;#ye;#we;#be;#ve;#Ee;#Pe;get type(){return this.#le}set type(e){switch(e){case null:this.#le=null;break;case 0:case"legacy":this.#le=0;break;case 1:case"berlin":case"eip-2930":this.#le=1;break;case 2:case"london":case"eip-1559":this.#le=2;break;case 3:case"cancun":case"eip-4844":this.#le=3;break;default:(0,c.en)(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=this.#ue;return null==e&&3===this.type?Ee:e}set to(e){this.#ue=null==e?null:(0,N.K)(e)}get nonce(){return this.#he}set nonce(e){this.#he=(0,l.Dx)(e,"value")}get gasLimit(){return this.#de}set gasLimit(e){this.#de=(0,l.yT)(e)}get gasPrice(){const e=this.#pe;return null!=e||0!==this.type&&1!==this.type?e:br}set gasPrice(e){this.#pe=null==e?null:(0,l.yT)(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#fe;return null==e?2===this.type||3===this.type?br:null:e}set maxPriorityFeePerGas(e){this.#fe=null==e?null:(0,l.yT)(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ge;return null==e?2===this.type||3===this.type?br:null:e}set maxFeePerGas(e){this.#ge=null==e?null:(0,l.yT)(e,"maxFeePerGas")}get data(){return this.#u}set data(e){this.#u=(0,i.Dv)(e)}get value(){return this.#me}set value(e){this.#me=(0,l.yT)(e,"value")}get chainId(){return this.#ae}set chainId(e){this.#ae=(0,l.yT)(e)}get signature(){return this.#ye||null}set signature(e){this.#ye=null==e?null:rn.P.from(e)}get accessList(){const e=this.#we||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#we=null==e?null:Te(e)}get maxFeePerBlobGas(){const e=this.#be;return null==e&&3===this.type?br:e}set maxFeePerBlobGas(e){this.#be=null==e?null:(0,l.yT)(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#ve;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){(0,c.en)(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)(0,c.en)((0,i.A7)(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#ve=e}get blobs(){return null==this.#Pe?null:this.#Pe.map((e=>Object.assign({},e)))}set blobs(e){if(null==e)return void(this.#Pe=null);const t=[],n=[];for(let r=0;r<e.length;r++){const s=e[r];if((0,i.Zq)(s)){(0,c.hu)(this.#Ee,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=(0,i.Pw)(s);if((0,c.en)(e.length<=xr,"blob is too large",`blobs[${r}]`,s),e.length!==xr){const t=new Uint8Array(xr);t.set(e),e=t}const o=this.#Ee.blobToKzgCommitment(e),a=(0,i.Dv)(this.#Ee.computeBlobKzgProof(e,o));t.push({data:(0,i.Dv)(e),commitment:(0,i.Dv)(o),proof:a}),n.push(Nr(1,o))}else{const e=(0,i.Dv)(s.commitment);t.push({data:(0,i.Dv)(s.data),commitment:e,proof:(0,i.Dv)(s.proof)}),n.push(Nr(1,e))}}this.#Pe=t,this.#ve=n}get kzg(){return this.#Ee}set kzg(e){this.#Ee=e}constructor(){this.#le=null,this.#ue=null,this.#he=0,this.#de=br,this.#pe=null,this.#fe=null,this.#ge=null,this.#u="0x",this.#me=br,this.#ae=br,this.#ye=null,this.#we=null,this.#be=null,this.#ve=null,this.#Pe=null,this.#Ee=null}get hash(){return null==this.signature?null:(0,ne.w)(this.#Ie(!0,!1))}get unsignedHash(){return(0,ne.w)(this.unsignedSerialized)}get from(){return null==this.signature?null:(0,fn.R)(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:sn.E.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#Ie(e,t){(0,c.hu)(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const n=[Tr(e.nonce,"nonce"),Tr(e.gasPrice||0,"gasPrice"),Tr(e.gasLimit,"gasLimit"),e.to||"0x",Tr(e.value,"value"),e.data];let r=br;if(e.chainId!=br)r=(0,l.yT)(e.chainId,"tx.chainId"),(0,c.en)(!t||null==t.networkV||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(r=t)}if(!t)return r!==br&&(n.push((0,l.ot)(r)),n.push("0x"),n.push("0x")),fe(n);let s=BigInt(27+t.yParity);return r!==br?s=rn.P.getChainIdV(r,t.v):BigInt(t.v)!==s&&(0,c.en)(!1,"tx.chainId/sig.v mismatch","sig",t),n.push((0,l.ot)(s)),n.push((0,l.ot)(t.r)),n.push((0,l.ot)(t.s)),fe(n)}(this,n);case 1:return function(e,t){const n=[Tr(e.chainId,"chainId"),Tr(e.nonce,"nonce"),Tr(e.gasPrice||0,"gasPrice"),Tr(e.gasLimit,"gasLimit"),e.to||"0x",Tr(e.value,"value"),e.data,_r(e.accessList||[])];return t&&(n.push(Tr(t.yParity,"recoveryParam")),n.push((0,l.ot)(t.r)),n.push((0,l.ot)(t.s))),(0,i.zo)(["0x01",fe(n)])}(this,n);case 2:return function(e,t){const n=[Tr(e.chainId,"chainId"),Tr(e.nonce,"nonce"),Tr(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Tr(e.maxFeePerGas||0,"maxFeePerGas"),Tr(e.gasLimit,"gasLimit"),e.to||"0x",Tr(e.value,"value"),e.data,_r(e.accessList||[])];return t&&(n.push(Tr(t.yParity,"yParity")),n.push((0,l.ot)(t.r)),n.push((0,l.ot)(t.s))),(0,i.zo)(["0x02",fe(n)])}(this,n);case 3:return function(e,t,n){const r=[Tr(e.chainId,"chainId"),Tr(e.nonce,"nonce"),Tr(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Tr(e.maxFeePerGas||0,"maxFeePerGas"),Tr(e.gasLimit,"gasLimit"),e.to||Ee,Tr(e.value,"value"),e.data,_r(e.accessList||[]),Tr(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Cr(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Tr(t.yParity,"yParity")),r.push((0,l.ot)(t.r)),r.push((0,l.ot)(t.s)),n)?(0,i.zo)(["0x03",fe([r,n.map((e=>e.data)),n.map((e=>e.commitment)),n.map((e=>e.proof))])]):(0,i.zo)(["0x03",fe(r)])}(this,n,t?this.blobs:null)}(0,c.hu)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#Ie(!0,!0)}get unsignedSerialized(){return this.#Ie(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList,r=null!=this.#be||this.#ve;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&(0,c.hu)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,c.hu)(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,c.hu)(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return null!=this.type?s.push(this.type):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(r&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return Ur.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new Ur;if("string"===typeof e){const t=(0,i.Pw)(e);if(t[0]>=127)return Ur.from(function(e){const t=wr(e);(0,c.en)(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:Ar(t[0],"nonce"),gasPrice:Or(t[1],"gasPrice"),gasLimit:Or(t[2],"gasLimit"),to:Sr(t[3]),value:Or(t[4],"value"),data:(0,i.Dv)(t[5]),chainId:br};if(6===t.length)return n;const r=Or(t[6],"v"),s=Or(t[7],"r"),o=Or(t[8],"s");if(s===br&&o===br)n.chainId=r;else{let e=(r-Ir)/vr;e<br&&(e=br),n.chainId=e,(0,c.en)(e!==br||r===Er||r===Pr,"non-canonical legacy v","v",t[6]),n.signature=rn.P.from({r:(0,i.U3)(t[7],32),s:(0,i.U3)(t[8],32),v:r})}return n}(t));switch(t[0]){case 1:return Ur.from(function(e){const t=wr((0,i.Pw)(e).slice(1));(0,c.en)(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",(0,i.Dv)(e));const n={type:1,chainId:Or(t[0],"chainId"),nonce:Ar(t[1],"nonce"),gasPrice:Or(t[2],"gasPrice"),gasLimit:Or(t[3],"gasLimit"),to:Sr(t[4]),value:Or(t[5],"value"),data:(0,i.Dv)(t[6]),accessList:Rr(t[7],"accessList")};return 8===t.length||Dr(n,t.slice(8)),n}(t));case 2:return Ur.from(function(e){const t=wr((0,i.Pw)(e).slice(1));(0,c.en)(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",(0,i.Dv)(e));const n={type:2,chainId:Or(t[0],"chainId"),nonce:Ar(t[1],"nonce"),maxPriorityFeePerGas:Or(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Or(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Or(t[4],"gasLimit"),to:Sr(t[5]),value:Or(t[6],"value"),data:(0,i.Dv)(t[7]),accessList:Rr(t[8],"accessList")};return 9===t.length||Dr(n,t.slice(9)),n}(t));case 3:return Ur.from(function(e){let t=wr((0,i.Pw)(e).slice(1)),n="3",r=null;if(4===t.length&&Array.isArray(t[0])){n="3 (network format)";const e=t[1],s=t[2],i=t[3];(0,c.en)(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),(0,c.en)(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),(0,c.en)(Array.isArray(i),"invalid network format: proofs not an array","fields[3]",i),(0,c.en)(e.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",t),(0,c.en)(e.length===i.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let n=0;n<t[1].length;n++)r.push({data:e[n],commitment:s[n],proof:i[n]});t=t[0]}(0,c.en)(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${n}`,"data",(0,i.Dv)(e));const s={type:3,chainId:Or(t[0],"chainId"),nonce:Ar(t[1],"nonce"),maxPriorityFeePerGas:Or(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Or(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Or(t[4],"gasLimit"),to:Sr(t[5]),value:Or(t[6],"value"),data:(0,i.Dv)(t[7]),accessList:Rr(t[8],"accessList"),maxFeePerBlobGas:Or(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(s.blobs=r),(0,c.en)(null!=s.to,`invalid address for transaction type: ${n}`,"data",e),(0,c.en)(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let o=0;o<s.blobVersionedHashes.length;o++)(0,c.en)((0,i.A7)(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",e);return 11===t.length||Dr(s,t.slice(11)),s}(t))}(0,c.hu)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ur;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=rn.P.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&((0,c.en)(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),(0,c.en)(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&((0,c.en)(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),(0,c.en)(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const Lr="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let $r=null;function Br(e){if(null==$r){$r={};for(let e=0;e<Lr.length;e++)$r[Lr[e]]=BigInt(e)}const t=$r[e];return(0,c.en)(null!=t,"invalid base58 value","letter",e),t}const Fr=BigInt(0),Mr=BigInt(58);function jr(e){const t=(0,i.Pw)(e);let n=(0,l.Gh)(t),r="";for(;n;)r=Lr[Number(n%Mr)]+r,n/=Mr;for(let s=0;s<t.length&&!t[s];s++)r=Lr[0]+r;return r}function qr(e){let t=Fr;for(let n=0;n<e.length;n++)t*=Mr,t+=Br(e[n]);return t}function Kr(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):(0,c.en)(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Vr{name;constructor(e){(0,u.h)(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const zr=new RegExp("^(ipfs)://(.*)$","i"),Gr=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),zr,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Hr{provider;address;name;#ke;#xe;constructor(e,t,n){(0,u.h)(this,{provider:e,address:t,name:n}),this.#ke=null,this.#xe=new wt(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ke&&(this.#ke=(async()=>{try{return await this.#xe.supportsInterface("0x9061b923")}catch(e){if((0,c.VZ)(e,"CALL_EXCEPTION"))return!1;throw this.#ke=null,e}})()),await this.#ke}async#Ne(e,t){t=(t||[]).slice();const n=this.#xe.interface;t.unshift(dn(this.name));let r=null;await this.supportsWildcard()&&(r=n.getFunction(e),(0,c.hu)(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[pn(this.name,255),n.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await this.#xe[e](...t);return r?n.decodeFunctionResult(r,s)[0]:s}catch(s){if(!(0,c.VZ)(s,"CALL_EXCEPTION"))throw s}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#Ne("addr(bytes32)");return null==e||e===Ee?null:e}catch(s){if((0,c.VZ)(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await this.#Ne("addr(bytes32,uint)",[t]);if((0,i.A7)(n,20))return(0,N.K)(n)}let t=null;for(const i of this.provider.plugins)if(i instanceof Vr&&i.supportsCoinType(e)){t=i;break}if(null==t)return null;const n=await this.#Ne("addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const r=await t.decodeAddress(e,n);if(null!=r)return r;(0,c.hu)(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await this.#Ne("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#Ne("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return`${e}://${jr("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;(0,c.hu)(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(null==n)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<Gr.length;r++){const s=n.match(Gr[r]);if(null==s)continue;const o=s[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const t=Kr(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:t}),{linkage:e,url:t}}case"erc721":case"erc1155":{const r="erc721"===o?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:n});const a=await this.getAddress();if(null==a)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(2!==c.length)return e.push({type:`!${o}caip`,value:s[2]||""}),{url:null,linkage:e};const u=c[1],h=new wt(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===o){const t=await h.ownerOf(u);if(a!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===o){const t=await h.balanceOf(a,u);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let d=await h[r](u);if(null==d||"0x"===d)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),"erc1155"===o&&(d=d.replace("{id}",(0,l.m9)(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=Kr(d)),e.push({type:"metadata-url",value:d});let p={};const f=await new Xn(d).send();f.assertOk();try{p=f.bodyJson}catch(t){try{e.push({type:"!metadata",value:f.bodyText})}catch(t){const n=f.body;return n&&e.push({type:"!metadata",value:(0,i.Dv)(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let g=p.image;if("string"!==typeof g)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(g.match(/^(https:\/\/|data:)/i));else{if(null==g.match(zr))return e.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:g}),g=Kr(g)}return e.push({type:"url",value:g}),{linkage:e,url:g}}}}}catch(t){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return(0,c.hu)(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async#Se(e,t){const n=await Hr.getEnsAddress(e);try{const r=new wt(n,["function resolver(bytes32) view returns (address)"],e),s=await r.resolver(dn(t),{enableCcipRead:!0});return s===Ee?null:s}catch(r){throw r}return null}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const r=await Hr.#Se(e,n);if(null!=r){const s=new Hr(e,r,t);return n===t||await s.supportsWildcard()?s:null}n=n.split(".").slice(1).join(".")}}}const Wr=BigInt(0);function Jr(e,t){return function(n){return null==n?t:e(n)}}function Zr(e,t){return n=>{if(t&&null==n)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map((t=>e(t)))}}function Yr(e,t){return n=>{const r={};for(const i in e){let o=i;if(t&&i in t&&!(o in n))for(const e of t[i])if(e in n){o=e;break}try{const t=e[i](n[o]);void 0!==t&&(r[i]=t)}catch(s){const e=s instanceof Error?s.message:"not-an-error";(0,c.hu)(!1,`invalid value for value.${i} (${e})`,"BAD_DATA",{value:n})}}return r}}function Qr(e){return(0,c.en)((0,i.A7)(e,!0),"invalid data","value",e),e}function Xr(e){return(0,c.en)((0,i.A7)(e,32),"invalid hash","value",e),e}const es=Yr({address:N.K,blockHash:Xr,blockNumber:l.Dx,data:Qr,index:l.Dx,removed:Jr((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}(0,c.en)(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:Zr(Xr),transactionHash:Xr,transactionIndex:l.Dx},{index:["logIndex"]});const ts=Yr({hash:Jr(Xr),parentHash:Xr,parentBeaconBlockRoot:Jr(Xr,null),number:l.Dx,timestamp:l.Dx,nonce:Jr(Qr),difficulty:l.yT,gasLimit:l.yT,gasUsed:l.yT,stateRoot:Jr(Xr,null),receiptsRoot:Jr(Xr,null),blobGasUsed:Jr(l.yT,null),excessBlobGas:Jr(l.yT,null),miner:Jr(N.K),prevRandao:Jr(Xr,null),extraData:Qr,baseFeePerGas:Jr(l.yT)},{prevRandao:["mixHash"]});const ns=Yr({transactionIndex:l.Dx,blockNumber:l.Dx,transactionHash:Xr,address:N.K,topics:Zr(Xr),data:Qr,index:l.Dx,blockHash:Xr},{index:["logIndex"]});const rs=Yr({to:Jr(N.K,null),from:Jr(N.K,null),contractAddress:Jr(N.K,null),index:l.Dx,root:Jr(i.Dv),gasUsed:l.yT,blobGasUsed:Jr(l.yT,null),logsBloom:Jr(Qr),blockHash:Xr,hash:Xr,logs:Zr((function(e){return ns(e)})),blockNumber:l.Dx,cumulativeGasUsed:l.yT,effectiveGasPrice:Jr(l.yT),blobGasPrice:Jr(l.yT,null),status:Jr(l.Dx),type:Jr(l.Dx,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function ss(e){e.to&&(0,l.yT)(e.to)===Wr&&(e.to="0x0000000000000000000000000000000000000000");const t=Yr({hash:Xr,index:Jr(l.Dx,void 0),type:e=>"0x"===e||null==e?0:(0,l.Dx)(e),accessList:Jr(Te,null),blobVersionedHashes:Jr(Zr(Xr,!0),null),blockHash:Jr(Xr,null),blockNumber:Jr(l.Dx,null),transactionIndex:Jr(l.Dx,null),from:N.K,gasPrice:Jr(l.yT),maxPriorityFeePerGas:Jr(l.yT),maxFeePerGas:Jr(l.yT),maxFeePerBlobGas:Jr(l.yT,null),gasLimit:l.yT,to:Jr(N.K,null),value:l.yT,nonce:l.Dx,data:Qr,creates:Jr(N.K,null),chainId:Jr(l.yT,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=ge(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=rn.P.from(e.signature):t.signature=rn.P.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&(0,l.yT)(t.blockHash)===Wr&&(t.blockHash=null),t}function is(e){return JSON.parse(JSON.stringify(e))}class os{#Re;#Ae;#Oe;#Te;constructor(e){this.#Re=e,this.#Ae=null,this.#Oe=4e3,this.#Te=-2}get pollingInterval(){return this.#Oe}set pollingInterval(e){this.#Oe=e}async#_e(){try{const e=await this.#Re.getBlockNumber();if(-2===this.#Te)return void(this.#Te=e);if(e!==this.#Te){for(let t=this.#Te+1;t<=e;t++){if(null==this.#Ae)return;await this.#Re.emit("block",t)}this.#Te=e}}catch(e){}null!=this.#Ae&&(this.#Ae=this.#Re._setTimeout(this.#_e.bind(this),this.#Oe))}start(){this.#Ae||(this.#Ae=this.#Re._setTimeout(this.#_e.bind(this),this.#Oe),this.#_e())}stop(){this.#Ae&&(this.#Re._clearTimeout(this.#Ae),this.#Ae=null)}pause(e){this.stop(),e&&(this.#Te=-2)}resume(){this.start()}}class as{#Re;#_e;#Ce;constructor(e){this.#Re=e,this.#Ce=!1,this.#_e=e=>{this._poll(e,this.#Re)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#Ce||(this.#Ce=!0,this.#_e(-2),this.#Re.on("block",this.#_e))}stop(){this.#Ce&&(this.#Ce=!1,this.#Re.off("block",this.#_e))}pause(e){this.stop()}resume(){this.start()}}class cs extends as{#De;#Ue;constructor(e,t){super(e),this.#De=t,this.#Ue=-2}pause(e){e&&(this.#Ue=-2),super.pause(e)}async _poll(e,t){const n=await t.getBlock(this.#De);null!=n&&(-2===this.#Ue?this.#Ue=n.number:n.number>this.#Ue&&(t.emit(this.#De,n.number),this.#Ue=n.number))}}class ls extends as{#T;constructor(e,t){super(e),this.#T=is(t)}async _poll(e,t){throw new Error("@TODO")}}class us extends as{#Le;constructor(e,t){super(e),this.#Le=t}async _poll(e,t){const n=await t.getTransactionReceipt(this.#Le);n&&t.emit(this.#Le,n)}}class hs{#Re;#T;#Ae;#Ce;#Te;constructor(e,t){this.#Re=e,this.#T=is(t),this.#Ae=this.#_e.bind(this),this.#Ce=!1,this.#Te=-2}async#_e(e){if(-2===this.#Te)return;const t=is(this.#T);t.fromBlock=this.#Te+1,t.toBlock=e;const n=await this.#Re.getLogs(t);if(0!==n.length)for(const r of n)this.#Re.emit(this.#T,r),this.#Te=r.blockNumber;else this.#Te<e-60&&(this.#Te=e-60)}start(){this.#Ce||(this.#Ce=!0,-2===this.#Te&&this.#Re.getBlockNumber().then((e=>{this.#Te=e})),this.#Re.on("block",this.#Ae))}stop(){this.#Ce&&(this.#Ce=!1,this.#Re.off("block",this.#Ae))}pause(e){this.stop(),e&&(this.#Te=-2)}resume(){this.start()}}const ds=BigInt(2);function ps(e){return e&&"function"===typeof e.then}function fs(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"===typeof t)return`bigint:${t.toString()}`;if("string"===typeof t)return t.toLowerCase();if("object"===typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,n)=>(e[n]=t[n],e)),{})}return t}))}class gs{name;constructor(e){(0,u.h)(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function ms(e){return(e=Array.from(new Set(e).values())).sort(),e}async function ys(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"===typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if((0,i.A7)(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:fs("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:fs("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map((e=>null==e?null:Array.isArray(e)?ms(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(n.address){const e=[],s=[],o=n=>{(0,i.A7)(n)?e.push(n):s.push((async()=>{e.push(await ve(n,t))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=ms(e.map((e=>e.toLowerCase())))}return{filter:r,tag:fs("event",r),type:"event"}}(0,c.en)(!1,"unknown ProviderEvent","event",e)}function ws(){return(new Date).getTime()}const bs={cacheTimeout:250,pollingInterval:4e3};class vs{#$e;#ce;#Be;#Fe;#Me;#je;#qe;#Ke;#Ve;#ze;#Ge;#w;constructor(e,t){if(this.#w=Object.assign({},bs,t||{}),"any"===e)this.#je=!0,this.#Me=null;else if(e){const t=ur.from(e);this.#je=!1,this.#Me=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#je=!1,this.#Me=null;this.#Ke=-1,this.#qe=new Map,this.#$e=new Map,this.#ce=new Map,this.#Be=null,this.#Fe=!1,this.#Ve=1,this.#ze=new Map,this.#Ge=!1}get pollingInterval(){return this.#w.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#ce.values())}attachPlugin(e){if(this.#ce.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#ce.set(e.name,e.connect(this)),this}getPlugin(e){return this.#ce.get(e)||null}get disableCcipRead(){return this.#Ge}set disableCcipRead(e){this.#Ge=!!e}async#He(e){const t=this.#w.cacheTimeout;if(t<0)return await this._perform(e);const n=fs(e.method,e);let r=this.#qe.get(n);return r||(r=this._perform(e),this.#qe.set(n,r),setTimeout((()=>{this.#qe.get(n)===r&&this.#qe.delete(n)}),t)),await r}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const r=e.to.toLowerCase(),s=t.toLowerCase(),i=[];for(let a=0;a<n.length;a++){const t=n[a],l=t.replace("{sender}",r).replace("{data}",s),u=new Xn(l);-1===t.indexOf("{data}")&&(u.body={data:s,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:n});let h="unknown error";const d=await u.send();try{const e=d.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:e}),e.data;e.message&&(h=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:e})}catch(o){}(0,c.hu)(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:t,errorMessage:h}}),i.push(h)}(0,c.hu)(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:i}})}_wrapBlock(e,t){return new $e(function(e){const t=ts(e);return t.transactions=e.transactions.map((e=>"string"===typeof e?e:ss(e))),t}(e),this)}_wrapLog(e,t){return new Be(function(e){return es(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Fe(function(e){return rs(e)}(e),this)}_wrapTransactionResponse(e,t){return new Me(ss(e),this)}_detectNetwork(){(0,c.hu)(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){(0,c.hu)(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=(0,l.Dx)(await this.#He({method:"getBlockNumber"}),"%response");return this.#Ke>=0&&(this.#Ke=e),e}_getAddress(e){return ve(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return(0,i.A7)(e)?(0,i.A7)(e,32)?e:(0,l.B4)(e):("bigint"===typeof e&&(e=(0,l.Dx)(e,"blockTag")),"number"===typeof e?e>=0?(0,l.B4)(e):this.#Ke>=0?(0,l.B4)(this.#Ke+e):this.getBlockNumber().then((t=>(0,l.B4)(t+e))):void(0,c.en)(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?ms(e.map((e=>e.toLowerCase()))):e.toLowerCase())),n="blockHash"in e?e.blockHash:void 0,r=(e,r,s)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(n&&(null!=r||null!=s))throw new Error("invalid filter");const o={};return i&&(o.address=i),t.length&&(o.topics=t),r&&(o.fromBlock=r),s&&(o.toBlock=s),n&&(o.blockHash=n),o};let s,i,o=[];if(e.address)if(Array.isArray(e.address))for(const a of e.address)o.push(this._getAddress(a));else o.push(this._getAddress(e.address));return"fromBlock"in e&&(s=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),o.filter((e=>"string"!==typeof e)).length||null!=s&&"string"!==typeof s||null!=i&&"string"!==typeof i?Promise.all([Promise.all(o),s,i]).then((e=>r(e[0],e[1],e[2]))):r(o,s,i)}_getTransactionRequest(e){const t=Le(e),n=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const r=ve(t[e],this);ps(r)?n.push(async function(){t[e]=await r}()):t[e]=r})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);ps(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#Me){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#Me===e&&(this.#Me=null),t}})();return this.#Me=e,(await e).clone()}const e=this.#Me,[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#je?(this.emit("network",n,t),this.#Me===e&&(this.#Me=Promise.resolve(n))):(0,c.hu)(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n,priorityFee:r}=await(0,u.m)({_block:this.#We("latest",!1),gasPrice:(async()=>{try{const e=await this.#He({method:"getGasPrice"});return(0,l.yT)(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{const e=await this.#He({method:"getPriorityFee"});return(0,l.yT)(e,"%response")}catch(e){}return null})()});let s=null,i=null;const o=this._wrapBlock(t,e);return o&&o.baseFeePerGas&&(i=null!=r?r:BigInt("1000000000"),s=o.baseFeePerGas*ds+i),new Ue(n,s,i)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new Xn(n.url),r=await n.processFunc(t,this,e);return new Ue(r.gasPrice,r.maxFeePerGas,r.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return ps(t)&&(t=await t),(0,l.yT)(await this.#He({method:"estimateGas",transaction:t}),"%response")}async#Je(e,t,n){(0,c.hu)(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=Le(e);try{return(0,i.Dv)(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(s){if(!this.disableCcipRead&&(0,c.Hl)(s)&&s.data&&n>=0&&"latest"===t&&null!=r.to&&"0x556f1830"===(0,i.QB)(s.data,0,4)){const e=s.data,o=await ve(r.to,this);let a;try{a=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};(0,c.hu)((0,i.M5)(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=(0,i.QB)(e,0,32);(0,c.hu)((0,i.QB)(n,0,12)===(0,i.QB)(Ss,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=(0,i.QB)(n,12);try{const n=[],r=(0,l.Dx)((0,i.QB)(e,32,64)),s=(0,l.Dx)((0,i.QB)(e,r,r+32)),o=(0,i.QB)(e,r+32);for(let e=0;e<s;e++){const t=Es(o,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(s){(0,c.hu)(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Ps(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(s){(0,c.hu)(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}(0,c.hu)((0,i.QB)(e,100,128)===(0,i.QB)(Ss,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=(0,i.QB)(e,96,100);try{const n=Ps(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(s){(0,c.hu)(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}((0,i.QB)(s.data,4))}catch(s){(0,c.hu)(!1,s.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:e}})}(0,c.hu)(a.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:e,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const u=await this.ccipReadFetch(r,a.calldata,a.urls);(0,c.hu)(null!=u,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:s.data,errorArgs:a.errorArgs}});const h={to:o,data:(0,i.zo)([a.selector,Ns([u,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const e=await this.#Je(h,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:e}),e}catch(s){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:s}),s}}throw s}}async#Ze(e){const{value:t}=await(0,u.m)({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:n}=await(0,u.m)({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#Ze(this.#Je(t,n,e.enableCcipRead?0:-1))}async#Ye(e,t,n){let r=this._getAddress(t),s=this._getBlockTag(n);return"string"===typeof r&&"string"===typeof s||([r,s]=await Promise.all([r,s])),await this.#Ze(this.#He(Object.assign(e,{address:r,blockTag:s})))}async getBalance(e,t){return(0,l.yT)(await this.#Ye({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return(0,l.Dx)(await this.#Ye({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return(0,i.Dv)(await this.#Ye({method:"getCode"},e,t))}async getStorage(e,t,n){const r=(0,l.yT)(t,"position");return(0,i.Dv)(await this.#Ye({method:"getStorage",position:r},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:r}=await(0,u.m)({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=Ur.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,r).replaceableTransaction(t)}async#We(e,t){if((0,i.A7)(e,32))return await this.#He({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!==typeof n&&(n=await n),await this.#He({method:"getBlock",blockTag:n,includeTransactions:t})}async getBlock(e,t){const{network:n,params:r}=await(0,u.m)({network:this.getNetwork(),params:this.#We(e,!!t)});return null==r?null:this._wrapBlock(r,n)}async getTransaction(e){const{network:t,params:n}=await(0,u.m)({network:this.getNetwork(),params:this.#He({method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await(0,u.m)({network:this.getNetwork(),params:this.#He({method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await this.#He({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await(0,u.m)({network:this.getNetwork(),result:this.#He({method:"getTransactionResult",hash:e})});return null==t?null:(0,i.Dv)(t)}async getLogs(e){let t=this._getFilter(e);ps(t)&&(t=await t);const{network:n,params:r}=await(0,u.m)({network:this.getNetwork(),params:this.#He({method:"getLogs",filter:t})});return r.map((e=>this._wrapLog(e,n)))}_getProvider(e){(0,c.hu)(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Hr.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=dn((e=(0,N.K)(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await Hr.getEnsAddress(this),r=new wt(n,["function resolver(bytes32) view returns (address)"],this),s=await r.resolver(t);if(null==s||s===Ee)return null;const i=new wt(s,["function name(bytes32) view returns (string)"],this),o=await i.name(t);return await this.resolveName(o)!==e?null:o}catch(n){if((0,c.VZ)(n,"BAD_DATA")&&"0x"===n.value)return null;if((0,c.VZ)(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const r=null!=t?t:1;return 0===r?this.getTransactionReceipt(e):new Promise((async(t,s)=>{let i=null;const o=async n=>{try{const s=await this.getTransactionReceipt(e);if(null!=s&&n-s.blockNumber+1>=r)return t(s),void(i&&(clearTimeout(i),i=null))}catch(s){console.log("EEE",s)}this.once("block",o)};null!=n&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",o),s((0,c.wf)("timeout","TIMEOUT",{reason:"timeout"})))}),n)),o(await this.getBlockNumber())}))}async waitForBlock(e){(0,c.hu)(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#ze.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#ze.delete(e))}_setTimeout(e,t){null==t&&(t=0);const n=this.#Ve++,r=()=>{this.#ze.delete(n),e()};if(this.paused)this.#ze.set(n,{timer:null,func:r,time:t});else{const e=setTimeout(r,t);this.#ze.set(n,{timer:e,func:r,time:ws()})}return n}_forEachSubscriber(e){for(const t of this.#$e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new gs(e.type);case"block":{const e=new os(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new cs(this,e.type);case"event":return new hs(this,e.filter);case"transaction":return new us(this,e.hash);case"orphan":return new ls(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of this.#$e.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=this.#Be&&t.pause(this.#Be);break}}async#Qe(e,t){let n=await ys(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await ys({orphan:"drop-log",log:t[0]},this)),this.#$e.get(n.tag)||null}async#Xe(e){const t=await ys(e,this),n=t.tag;let r=this.#$e.get(n);if(!r){r={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#$e.set(n,r)}return r}async on(e,t){const n=await this.#Xe(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Be&&n.subscriber.pause(this.#Be)),this}async once(e,t){const n=await this.#Xe(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Be&&n.subscriber.pause(this.#Be)),this}async emit(e,...t){const n=await this.#Qe(e,t);if(!n||0===n.listeners.length)return!1;const r=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:r})=>{const s=new Ke(this,r?null:n,e);try{n.call(this,...t,s)}catch(i){}return!r})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#$e.delete(n.tag)),r>0}async listenerCount(e){if(e){const t=await this.#Qe(e);return t?t.listeners.length:0}let t=0;for(const{listeners:n}of this.#$e.values())t+=n.length;return t}async listeners(e){if(e){const t=await this.#Qe(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:n}of this.#$e.values())t=t.concat(n.map((({listener:e})=>e)));return t}async off(e,t){const n=await this.#Qe(e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#$e.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:r}=await this.#Xe(e);n&&r.stop(),this.#$e.delete(t)}else for(const[t,{started:n,subscriber:r}]of this.#$e)n&&r.stop(),this.#$e.delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Fe}destroy(){this.removeAllListeners();for(const e of this.#ze.keys())this._clearTimeout(e);this.#Fe=!0}get paused(){return null!=this.#Be}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#Ke=-1,null!=this.#Be){if(this.#Be==!!e)return;(0,c.hu)(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#Be=!!e;for(const t of this.#ze.values())t.timer&&clearTimeout(t.timer),t.time=ws()-t.time}resume(){if(null!=this.#Be){this._forEachSubscriber((e=>e.resume())),this.#Be=null;for(const e of this.#ze.values()){let t=e.time;t<0&&(t=0),e.time=ws(),setTimeout(e.func,t)}}}}function Es(e,t){try{const n=Ps(e,t);if(n)return(0,s.ZN)(n)}catch(n){}return null}function Ps(e,t){if("0x"===e)return null;try{const n=(0,l.Dx)((0,i.QB)(e,t,t+32)),r=(0,l.Dx)((0,i.QB)(e,n,n+32));return(0,i.QB)(e,n+32,n+32+r)}catch(n){}return null}function Is(e){const t=(0,l.ot)(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function ks(e){if(e.length%32===0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const xs=new Uint8Array([]);function Ns(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(xs),n+=32;for(let r=0;r<e.length;r++){const s=(0,i.Pw)(e[r]);t[r]=Is(n),t.push(Is(s.length)),t.push(ks(s)),n+=32+32*Math.ceil(s.length/32)}return(0,i.zo)(t)}const Ss="0x0000000000000000000000000000000000000000000000000000000000000000";function Rs(e,t){if(e.provider)return e.provider;(0,c.hu)(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function As(e,t){let n=Le(t);if(null!=n.to&&(n.to=ve(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),ve(t,e)]).then((([e,t])=>((0,c.en)(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else n.from=e.getAddress();return await(0,u.m)(n)}class Os{provider;constructor(e){(0,u.h)(this,{provider:e||null})}async getNonce(e){return Rs(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await As(this,e)}async populateTransaction(e){const t=Rs(this,"populateTransaction"),n=await As(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(null!=n.chainId){const t=(0,l.yT)(n.chainId);(0,c.en)(t===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=r.chainId;const s=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!s?0!==n.type&&1!==n.type||!s||(0,c.en)(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):(0,c.en)(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();(0,c.hu)(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?((0,c.hu)(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):(0,c.hu)(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==n.type&&3!==n.type||(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await(0,u.m)(n)}async estimateGas(e){return Rs(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Rs(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Rs(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Rs(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const r=Ur.from(n);return await t.broadcastTransaction(await this.signTransaction(r))}}class Ts extends Os{address;constructor(e,t){super(t),(0,u.h)(this,{address:e})}async getAddress(){return this.address}connect(e){return new Ts(this.address,e)}#et(e,t){(0,c.hu)(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#et("transactions","signTransaction")}async signMessage(e){this.#et("messages","signMessage")}async signTypedData(e,t,n){this.#et("typed-data","signTypedData")}}class _s{#Re;#tt;#Ae;#Ce;#nt;#rt;constructor(e){this.#Re=e,this.#tt=null,this.#Ae=this.#_e.bind(this),this.#Ce=!1,this.#nt=null,this.#rt=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#_e(e){try{null==this.#tt&&(this.#tt=this._subscribe(this.#Re));let e=null;try{e=await this.#tt}catch(t){if(!(0,c.VZ)(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==e)return this.#tt=null,void this.#Re._recoverSubscriber(this,this._recover(this.#Re));const n=await this.#Re.getNetwork();if(this.#nt||(this.#nt=n),this.#nt.chainId!==n.chainId)throw new Error("chaid changed");if(this.#rt)return;const r=await this.#Re.send("eth_getFilterChanges",[e]);await this._emitResults(this.#Re,r)}catch(t){console.log("@TODO",t)}this.#Re.once("block",this.#Ae)}#st(){const e=this.#tt;e&&(this.#tt=null,e.then((e=>{this.#Re.destroyed||this.#Re.send("eth_uninstallFilter",[e])})))}start(){this.#Ce||(this.#Ce=!0,this.#_e(-2))}stop(){this.#Ce&&(this.#Ce=!1,this.#rt=!0,this.#st(),this.#Re.off("block",this.#Ae))}pause(e){e&&this.#st(),this.#Re.off("block",this.#Ae)}resume(){this.start()}}class Cs extends _s{#it;constructor(e,t){var n;super(e),this.#it=(n=t,JSON.parse(JSON.stringify(n)))}_recover(e){return new hs(e,this.#it)}async _subscribe(e){return await e.send("eth_newFilter",[this.#it])}async _emitResults(e,t){for(const n of t)e.emit(this.#it,e._wrapLog(n,e._network))}}class Ds extends _s{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const Us="bigint,boolean,function,number,string,symbol".split(/,/g);function Ls(e){if(null==e||Us.indexOf(typeof e)>=0)return e;if("function"===typeof e.getAddress)return e;if(Array.isArray(e))return e.map(Ls);if("object"===typeof e)return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function $s(e){return new Promise((t=>{setTimeout(t,e)}))}function Bs(e){return e?e.toLowerCase():e}function Fs(e){return e&&"number"===typeof e.pollingInterval}const Ms={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class js extends Os{address;constructor(e,t){super(e),t=(0,N.K)(t),(0,u.h)(this,{address:t})}connect(e){(0,c.hu)(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Ls(e),n=[];if(t.from){const r=t.from;n.push((async()=>{const n=await ve(r,this.provider);(0,c.en)(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await ve(e,this.provider)})())}n.length&&await Promise.all(n);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise(((e,r)=>{const s=[1e3,100];let i=0;const o=async()=>{try{const r=await this.provider.getTransaction(n);if(null!=r)return void e(r.replaceableTransaction(t))}catch(a){if((0,c.VZ)(a,"CANCELLED")||(0,c.VZ)(a,"BAD_DATA")||(0,c.VZ)(a,"NETWORK_ERROR"))return null==a.info&&(a.info={}),a.info.sendTransactionHash=n,void r(a);if((0,c.VZ)(a,"INVALID_ARGUMENT")&&(i++,null==a.info&&(a.info={}),a.info.sendTransactionHash=n,i>10))return void r(a);this.provider.emit("error",(0,c.wf)("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:a}))}this.provider._setTimeout((()=>{o()}),s.pop()||4e3)};o()}))}async signTransaction(e){const t=Ls(e);if(t.from){const n=await ve(t.from,this.provider);(0,c.en)(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"===typeof e?(0,s.Y0)(e):e;return await this.provider.send("personal_sign",[(0,i.Dv)(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const r=Ls(n),s=await Bn.resolveNames(e,t,r,(async e=>{const t=await ve(e);return(0,c.en)(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Bn.getPayload(s.domain,t,s.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"===typeof e?(0,s.Y0)(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),(0,i.Dv)(t)])}}class qs extends vs{#w;#ot;#at;#ct;#lt;#nt;#ut;#ht(){if(this.#ct)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#ct=setTimeout((()=>{this.#ct=null;const e=this.#at;for(this.#at=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#w.batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map((e=>e.payload))).length>this.#w.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:r,payload:s}of t){if(this.destroyed){r((0,c.wf)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}const t=n.filter((e=>e.id===s.id))[0];if(null!=t)"error"in t?r(this.getRpcError(s,t)):e(t.result);else{const e=(0,c.wf)("missing response for request","BAD_DATA",{value:n,info:{payload:s}});this.emit("error",e),r(e)}}}catch(n){this.emit("debug",{action:"receiveRpcError",error:n});for(const{reject:e}of t)e(n)}})()}}),e)}constructor(e,t){super(e,t),this.#ot=1,this.#w=Object.assign({},Ms,t||{}),this.#at=[],this.#ct=null,this.#nt=null,this.#ut=null;{let e=null;const t=new Promise((t=>{e=t}));this.#lt={promise:t,resolve:e}}const n=this._getOption("staticNetwork");"boolean"===typeof n?((0,c.en)(!n||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),n&&null!=e&&(this.#nt=ur.from(e))):n&&((0,c.en)(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),this.#nt=n)}_getOption(e){return this.#w[e]}get _network(){return(0,c.hu)(this.#nt,"network is not available yet","NETWORK_ERROR"),this.#nt}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&(0,l.yT)(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#nt)return this.#nt}return this.#ut?await this.#ut:this.ready?(this.#ut=(async()=>{try{const e=ur.from((0,l.yT)(await this.send("eth_chainId",[])));return this.#ut=null,e}catch(e){throw this.#ut=null,e}})(),await this.#ut):(this.#ut=(async()=>{const e={id:this.#ot++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let t;this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],this.#ut=null}catch(n){throw this.#ut=null,this.emit("debug",{action:"receiveRpcError",error:n}),n}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return ur.from((0,l.yT)(t.result));throw this.getRpcError(e,t)})(),await this.#ut)}_start(){null!=this.#lt&&null!=this.#lt.resolve&&(this.#lt.resolve(),this.#lt=null,(async()=>{for(;null==this.#nt&&!this.destroyed;)try{this.#nt=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",(0,c.wf)("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await $s(1e3)}this.#ht()})())}async _waitUntilReady(){if(null!=this.#lt)return await this.#lt.promise}_getSubscriber(e){return"pending"===e.type?new Ds(this):"event"===e.type?this._getOption("polling")?new hs(this,e.filter):new Cs(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new gs("orphan"):super._getSubscriber(e)}get ready(){return null==this.#lt}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==e[n])return;let r=n;"gasLimit"===n&&(r="gas"),t[r]=(0,l.B4)((0,l.yT)(e[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=e[n]&&(t[n]=(0,i.Dv)(e[n]))})),e.accessList&&(t.accessList=Te(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map((e=>e.toLowerCase()))),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Bs(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Bs(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Bs(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Bs(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Bs):e.filter.address=Bs(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:r}=t;if("eth_estimateGas"===n&&r.message){const t=r.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return(0,c.wf)("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}})}if("eth_call"===n||"eth_estimateGas"===n){const t=zs(r),s=te.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return s.info={error:r,payload:e},s}const s=JSON.stringify(function(e){const t=[];return Gs(e,t),t}(r));if("string"===typeof r.message&&r.message.match(/user denied|ethers-user-denied/i)){const t={eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"};return(0,c.wf)("user rejected action","ACTION_REJECTED",{action:t[n]||"unknown",reason:"rejected",info:{payload:e,error:r}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return(0,c.wf)("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:r}});if(s.match(/nonce/i)&&s.match(/too low/i))return(0,c.wf)("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:r}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return(0,c.wf)("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:r}});if(s.match(/only replay-protected/i))return(0,c.wf)("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:r}}})}let i=!!s.match(/the method .* does not exist/i);return i||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(i=!0),i?(0,c.wf)("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):(0,c.wf)("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){if(this.destroyed)return Promise.reject((0,c.wf)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#ot++,r=new Promise(((r,s)=>{this.#at.push({resolve:r,reject:s,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})}));return this.#ht(),r}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"===typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new js(this,n[e])}const{accounts:n}=await(0,u.m)({network:this.getNetwork(),accounts:t});e=(0,N.K)(e);for(const r of n)if((0,N.K)(r)===e)return new js(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new js(this,e)))}destroy(){this.#ct&&(clearTimeout(this.#ct),this.#ct=null);for(const{payload:e,reject:t}of this.#at)t((0,c.wf)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#at=[],super.destroy()}}class Ks extends qs{#dt;constructor(e,t){super(e,t);let n=this._getOption("pollingInterval");null==n&&(n=Ms.pollingInterval),this.#dt=n}_getSubscriber(e){const t=super._getSubscriber(e);return Fs(t)&&(t.pollingInterval=this.#dt),t}get pollingInterval(){return this.#dt}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#dt=e,this._forEachSubscriber((e=>{Fs(e)&&(e.pollingInterval=this.#dt)}))}}class Vs extends Ks{#pt;constructor(e,t,n){null==e&&(e="http://localhost:8545"),super(t,n),this.#pt="string"===typeof e?new Xn(e):e.clone()}_getConnection(){return this.#pt.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const n=await t.send();n.assertOk();let r=n.bodyJson;return Array.isArray(r)||(r=[r]),r}}function zs(e){if(null==e)return null;if("string"===typeof e.message&&e.message.match(/revert/i)&&(0,i.A7)(e.data))return{message:e.message,data:e.data};if("object"===typeof e){for(const t in e){const n=zs(e[t]);if(n)return n}return null}if("string"===typeof e)try{return zs(JSON.parse(e))}catch(t){}return null}function Gs(e,t){if(null!=e){if("string"===typeof e.message&&t.push(e.message),"object"===typeof e)for(const n in e)Gs(e[n],t);if("string"===typeof e)try{return Gs(JSON.parse(e),t)}catch(n){}}}const Hs="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";class Ws extends Vs{apiKey;constructor(e,t){null==e&&(e="mainnet");const n=ur.from(e);null==t&&(t=Hs);const r={polling:!0,staticNetwork:n};super(Ws.getRequest(n,t),n,r),(0,u.h)(this,{apiKey:t})}_getProvider(e){try{return new Ws(e,this.apiKey)}catch(t){}return super._getProvider(e)}static getRequest(e,t){null==t&&(t=Hs);const n=new Xn(`https://${function(e){switch(e){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}(0,c.en)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return n.allowGzip=!0,t===Hs&&(n.retryFunc=async(e,t,n)=>(rr("AnkrProvider"),!0)),n}getRpcError(e,t){return"eth_sendRawTransaction"===e.method&&t&&t.error&&"INTERNAL_ERROR: could not replace existing tx"===t.error.message&&(t.error.message="replacement transaction underpriced"),super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===Hs}}const Js="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Zs extends Vs{apiKey;constructor(e,t){null==e&&(e="mainnet");const n=ur.from(e);null==t&&(t=Js);super(Zs.getRequest(n,t),n,{staticNetwork:n}),(0,u.h)(this,{apiKey:t})}_getProvider(e){try{return new Zs(e,this.apiKey)}catch(t){}return super._getProvider(e)}async _perform(e){if("getTransactionResult"===e.method){const{trace:n,tx:r}=await(0,u.m)({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(null==n||null==r)return null;let s,i=!1;try{s=n[0].result.output,i="Reverted"===n[0].error}catch(t){}if(s)return(0,c.hu)(!i,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:s,reason:null,transaction:r,invocation:null,revert:null}),s;(0,c.hu)(!1,"could not parse trace result","BAD_DATA",{value:n})}return await super._perform(e)}isCommunityResource(){return this.apiKey===Js}static getRequest(e,t){null==t&&(t=Js);const n=new Xn(`https://${function(e){switch(e){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}(0,c.en)(!1,"unsupported network","network",e)}(e.name)}/v2/${t}`);return n.allowGzip=!0,t===Js&&(n.retryFunc=async(e,t,n)=>(rr("alchemy"),!0)),n}}function Ys(e){switch(e){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}(0,c.en)(!1,"unsupported network","network",e)}class Qs extends Vs{apiKey;constructor(e,t){null==e&&(e="mainnet");const n=ur.from(e);null==t&&(t=Ys(n.name));super(Qs.getRequest(n,t),n,{staticNetwork:n}),(0,u.h)(this,{apiKey:t})}_getProvider(e){try{return new Qs(e,this.apiKey)}catch(t){}return super._getProvider(e)}isCommunityResource(){return this.apiKey===Ys(this._network.name)}static getRequest(e,t){null==t&&(t=Ys(e.name));const n=new Xn(`https://${function(e){switch(e){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}(0,c.en)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return n.allowGzip=!0,t===Ys(e.name)&&(n.retryFunc=async(e,t,n)=>(rr("ChainstackProvider"),!0)),n}}class Xs extends Vs{constructor(e){null==e&&(e="mainnet");const t=ur.from(e);(0,c.en)("mainnet"===t.name,"unsupported network","network",e),super("https://cloudflare-eth.com/",t,{staticNetwork:t})}}const ei="org.ethers.plugins.provider.Etherscan";class ti extends sr{baseUrl;constructor(e){super(ei),(0,u.h)(this,{baseUrl:e})}clone(){return new ti(this.baseUrl)}}const ni=["enableCcipRead"];let ri=1;class si extends vs{network;apiKey;#ft;constructor(e,t){const n=null!=t?t:null;super();const r=ur.from(e);this.#ft=r.getPlugin(ei),(0,u.h)(this,{apiKey:n,network:r}),this.getBaseUrl()}getBaseUrl(){if(this.#ft)return this.#ft.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}(0,c.en)(!1,"unsupported network","network",this.network)}getUrl(e,t){const n=Object.keys(t).reduce(((e,n)=>{const r=t[n];return null!=r&&(e+=`&${n}=${r}`),e}),""),r=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${e}${n}${r}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}async detectNetwork(){return this.network}async fetch(e,t,n){const r=ri++,i=n?this.getPostUrl():this.getUrl(e,t),o=n?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:r,url:i,payload:o});const a=new Xn(i);a.setThrottleParams({slotInterval:1e3}),a.retryFunc=(e,t,n)=>(this.isCommunityResource()&&rr("Etherscan"),Promise.resolve(!0)),a.processFunc=async(t,n)=>{const i=n.hasBody()?JSON.parse((0,s.ZN)(n.body)):{},o=("string"===typeof i.result?i.result:"").toLowerCase().indexOf("rate limit")>=0;return"proxy"===e?i&&0==i.status&&"NOTOK"==i.message&&o&&(this.emit("debug",{action:"receiveError",id:r,reason:"proxy-NOTOK",error:i}),n.throwThrottleError(i.result,2e3)):o&&(this.emit("debug",{action:"receiveError",id:r,reason:"null result",error:i.result}),n.throwThrottleError(i.result,2e3)),n},o&&(a.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),a.body=Object.keys(o).map((e=>`${e}=${o[e]}`)).join("&"));const l=await a.send();try{l.assertOk()}catch(h){this.emit("debug",{action:"receiveError",id:r,error:h,reason:"assertOk"}),(0,c.hu)(!1,"response error","SERVER_ERROR",{request:a,response:l})}l.hasBody()||(this.emit("debug",{action:"receiveError",id:r,error:"missing body",reason:"null body"}),(0,c.hu)(!1,"missing response","SERVER_ERROR",{request:a,response:l}));const u=JSON.parse((0,s.ZN)(l.body));return"proxy"===e?("2.0"!=u.jsonrpc&&(this.emit("debug",{action:"receiveError",id:r,result:u,reason:"invalid JSON-RPC"}),(0,c.hu)(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:a,response:l,info:{result:u}})),u.error&&(this.emit("debug",{action:"receiveError",id:r,result:u,reason:"JSON-RPC error"}),(0,c.hu)(!1,"error response","SERVER_ERROR",{request:a,response:l,info:{result:u}})),this.emit("debug",{action:"receiveRequest",id:r,result:u}),u.result):0!=u.status||"No records found"!==u.message&&"No transactions found"!==u.message?((1!=u.status||"string"===typeof u.message&&!u.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:r,result:u}),(0,c.hu)(!1,"error response","SERVER_ERROR",{request:a,response:l,info:{result:u}})),this.emit("debug",{action:"receiveRequest",id:r,result:u}),u.result):(this.emit("debug",{action:"receiveRequest",id:r,result:u}),u.result)}_getTransactionPostData(e){const t={};for(let n in e){if(ni.indexOf(n)>=0)continue;if(null==e[n])continue;let r=e[n];if(("type"!==n||0!==r)&&("blockTag"!==n||"latest"!==r)){if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[n])r=(0,l.B4)(r);else if("accessList"===n)r="["+Te(r).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]";else if("blobVersionedHashes"===n){if(0===r.length)continue;(0,c.hu)(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:e}})}else r=(0,i.Dv)(r);t[n]=r}}return t}_checkError(e,t,n){let r="";if((0,c.VZ)(t,"SERVER_ERROR")){try{r=t.info.result.error.message}catch(s){}if(!r)try{r=t.info.message}catch(s){}}if("estimateGas"===e.method&&!r.match(/revert/i)&&r.match(/insufficient funds/i)&&(0,c.hu)(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction}),("call"===e.method||"estimateGas"===e.method)&&r.match(/execution reverted/i)){let n="";try{n=t.info.result.error.data}catch(t){}const r=te.getBuiltinCallException(e.method,e.transaction,n);throw r.info={request:e,error:t},r}if(r&&"broadcastTransaction"===e.method){const t=Ur.from(e.signedTransaction);r.match(/replacement/i)&&r.match(/underpriced/i)&&(0,c.hu)(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t}),r.match(/insufficient funds/)&&(0,c.hu)(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&(0,c.hu)(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:t})}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if("mainnet"===this.network.name)return"1000000000";if("optimism"===this.network.name)return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch((t=>this._checkError(e,t,e.signedTransaction)));case"getBlock":if("blockTag"in e)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});(0,c.hu)(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if("latest"!==e.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const n=this._getTransactionPostData(e.transaction);n.module="proxy",n.action="eth_call";try{return await this.fetch("proxy",n,!0)}catch(t){return this._checkError(e,t,e.transaction)}}case"estimateGas":{const n=this._getTransactionPostData(e.transaction);n.module="proxy",n.action="eth_estimateGas";try{return await this.fetch("proxy",n,!0)}catch(t){return this._checkError(e,t,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){return"mainnet"!==this.network.name?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){let t=this._getAddress(e);var n;(n=t)&&"function"===typeof n.then&&(t=await t);try{const e=await this.fetch("contract",{action:"getabi",address:t}),n=JSON.parse(e);return new wt(t,n,this)}catch(r){return null}}isCommunityResource(){return null==this.apiKey}}const ii=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("unable to locate global object")}().WebSocket;class oi{#Re;#T;get filter(){return JSON.parse(this.#T)}#gt;#mt;#yt;constructor(e,t){this.#Re=e,this.#T=JSON.stringify(t),this.#gt=null,this.#mt=null,this.#yt=null}start(){this.#gt=this.#Re.send("eth_subscribe",this.filter).then((e=>(this.#Re._register(e,this),e)))}stop(){this.#gt.then((e=>{this.#Re.destroyed||this.#Re.send("eth_unsubscribe",[e])})),this.#gt=null}pause(e){(0,c.hu)(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#mt=!!e}resume(){this.#mt=null}_handleMessage(e){if(null!=this.#gt&&null===this.#mt){let t=this.#yt;t=null==t?this._emit(this.#Re,e):t.then((async()=>{await this._emit(this.#Re,e)})),this.#yt=t.then((()=>{this.#yt===t&&(this.#yt=null)}))}}async _emit(e,t){throw new Error("sub-classes must implemente this; _emit")}}class ai extends oi{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}class ci extends oi{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}class li extends oi{#wt;get logFilter(){return JSON.parse(this.#wt)}constructor(e,t){super(e,["logs",t]),this.#wt=JSON.stringify(t)}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}}class ui extends qs{#bt;#$e;#vt;constructor(e,t){const n=Object.assign({},null!=t?t:{});(0,c.en)(null==n.batchMaxCount||1===n.batchMaxCount,"sockets-based providers do not support batches","options.batchMaxCount",t),n.batchMaxCount=1,null==n.staticNetwork&&(n.staticNetwork=!0),super(e,n),this.#bt=new Map,this.#$e=new Map,this.#vt=new Map}_getSubscriber(e){switch(e.type){case"close":return new gs("close");case"block":return new ai(this);case"pending":return new ci(this);case"event":return new li(this,e.filter);case"orphan":if("drop-log"===e.filter.orphan)return new gs("drop-log")}return super._getSubscriber(e)}_register(e,t){this.#$e.set(e,t);const n=this.#vt.get(e);if(n){for(const e of n)t._handleMessage(e);this.#vt.delete(e)}}async _send(e){(0,c.en)(!Array.isArray(e),"WebSocket does not support batch send","payload",e);const t=new Promise(((t,n)=>{this.#bt.set(e.id,{payload:e,resolve:t,reject:n})}));return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await t]}async _processMessage(e){const t=JSON.parse(e);if(t&&"object"===typeof t&&"id"in t){const e=this.#bt.get(t.id);if(null==e)return void this.emit("error",(0,c.wf)("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));this.#bt.delete(t.id),e.resolve(t)}else{if(!t||"eth_subscription"!==t.method)return void this.emit("error",(0,c.wf)("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));{const e=t.params.subscription,n=this.#$e.get(e);if(n)n._handleMessage(t.params.result);else{let n=this.#vt.get(e);null==n&&(n=[],this.#vt.set(e,n)),n.push(t.params.result)}}}}async _write(e){throw new Error("sub-classes must override this")}}class hi extends ui{#pt;#Et;get websocket(){if(null==this.#Et)throw new Error("websocket closed");return this.#Et}constructor(e,t,n){super(t,n),"string"===typeof e?(this.#pt=()=>new ii(e),this.#Et=this.#pt()):"function"===typeof e?(this.#pt=e,this.#Et=e()):(this.#pt=null,this.#Et=e),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(e){console.log("failed to start WebsocketProvider",e)}},this.websocket.onmessage=e=>{this._processMessage(e.data)}}async _write(e){this.websocket.send(e)}async destroy(){null!=this.#Et&&(this.#Et.close(),this.#Et=null),super.destroy()}}const di="84842078b09946638c03157f83405213";class pi extends hi{projectId;projectSecret;constructor(e,t){const n=new fi(e,t),r=n._getConnection();(0,c.hu)(!r.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});super(r.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),n._network),(0,u.h)(this,{projectId:n.projectId,projectSecret:n.projectSecret})}isCommunityResource(){return this.projectId===di}}class fi extends Vs{projectId;projectSecret;constructor(e,t,n){null==e&&(e="mainnet");const r=ur.from(e);null==t&&(t=di),null==n&&(n=null);super(fi.getRequest(r,t,n),r,{staticNetwork:r}),(0,u.h)(this,{projectId:t,projectSecret:n})}_getProvider(e){try{return new fi(e,this.projectId,this.projectSecret)}catch(t){}return super._getProvider(e)}isCommunityResource(){return this.projectId===di}static getWebSocketProvider(e,t){return new pi(e,t)}static getRequest(e,t,n){null==t&&(t=di),null==n&&(n=null);const r=new Xn(`https://${function(e){switch(e){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bnbsmartchain-mainnet.infura.io";case"bnbt":return"bnbsmartchain-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}(0,c.en)(!1,"unsupported network","network",e)}(e.name)}/v3/${t}`);return r.allowGzip=!0,n&&r.setCredentials("",n),t===di&&(r.retryFunc=async(e,t,n)=>(rr("InfuraProvider"),!0)),r}}const gi="919b412a057b5e9c9b6dce193c5a60242d6efadb";class mi extends Vs{token;constructor(e,t){null==e&&(e="mainnet");const n=ur.from(e);null==t&&(t=gi);super(mi.getRequest(n,t),n,{staticNetwork:n}),(0,u.h)(this,{token:t})}_getProvider(e){try{return new mi(e,this.token)}catch(t){}return super._getProvider(e)}isCommunityResource(){return this.token===gi}static getRequest(e,t){null==t&&(t=gi);const n=new Xn(`https://${function(e){switch(e){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}(0,c.en)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return n.allowGzip=!0,t===gi&&(n.retryFunc=async(e,t,n)=>(rr("QuickNodeProvider"),!0)),n}}const yi=BigInt("1"),wi=BigInt("2");function bi(){return(new Date).getTime()}function vi(e){return JSON.stringify(e,((e,t)=>"bigint"===typeof t?{type:"bigint",value:t.toString()}:t))}const Ei={stallTimeout:400,priority:1,weight:1},Pi={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};function Ii(e){if(null==e)return"null";if(Array.isArray(e))return"["+e.map(Ii).join(",")+"]";if("object"===typeof e&&"function"===typeof e.toJSON)return Ii(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":case"number":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{"+t.map((t=>`${JSON.stringify(t)}:${Ii(e[t])}`)).join(",")+"}"}}throw console.log("Could not serialize",e),new Error("Hmm...")}function ki(e){if("error"in e){const t=e.error;return{tag:Ii(t),value:t}}const t=e.result;return{tag:Ii(t),value:t}}function xi(e,t){const n=new Map;for(const{value:s,tag:i,weight:o}of t){const e=n.get(i)||{value:s,weight:0};e.weight+=o,n.set(i,e)}let r=null;for(const s of n.values())s.weight>=e&&(!r||s.weight>r.weight)&&(r=s);if(r)return r.value}function Ni(e,t){let n=0;const r=new Map;let s=null;const i=[];for(const{value:a,tag:c,weight:l}of t)if(a instanceof Error){const e=r.get(c)||{value:a,weight:0};e.weight+=l,r.set(c,e),(null==s||e.weight>s.weight)&&(s=e)}else i.push(BigInt(a)),n+=l;if(n<e)return s&&s.weight>=e?s.value:void 0;i.sort(((e,t)=>e<t?-1:t>e?1:0));const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o]+yi)/wi}function Si(e,t){const n=xi(e,t);if(void 0!==n)return n;for(const r of t)if(r.value)return r.value}class Ri extends vs{quorum;eventQuorum;eventWorkers;#Pt;#It;#kt;constructor(e,t,n){super(t,n),this.#Pt=e.map((e=>e instanceof vs?Object.assign({provider:e},Ei,Pi):Object.assign({},Ei,e,Pi))),this.#It=-2,this.#kt=null,n&&null!=n.quorum?this.quorum=n.quorum:this.quorum=Math.ceil(this.#Pt.reduce(((e,t)=>e+=t.weight),0)/2),this.eventQuorum=1,this.eventWorkers=1,(0,c.en)(this.quorum<=this.#Pt.reduce(((e,t)=>e+t.weight),0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#Pt.map((e=>{const t=Object.assign({},e);for(const n in t)"_"===n[0]&&delete t[n];return t}))}async _detectNetwork(){return ur.from((0,l.yT)(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{const n="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(n,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}#xt(e){const t=Array.from(e).map((e=>e.config)),n=this.#Pt.slice();!function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}}(n),n.sort(((e,t)=>e.priority-t.priority));for(const r of n)if(!r._lastFatalError&&-1===t.indexOf(r))return r;return null}#Nt(e,t){const n=this.#xt(e);if(null==n)return null;const r={config:n,result:null,didBump:!1,perform:null,staller:null},s=bi();return r.perform=(async()=>{try{n.requests++;const e=await this._translatePerform(n.provider,t);r.result={result:e}}catch(i){n.errorResponses++,r.result={error:i}}const e=bi()-s;n._totalTime+=e,n.rollingDuration=.95*n.rollingDuration+.05*e,r.perform=null})(),r.staller=(async()=>{var e;await(e=n.stallTimeout,new Promise((t=>{setTimeout(t,e)}))),r.staller=null})(),e.add(r),r}async#St(){let e=this.#kt;if(!e){const t=[];this.#Pt.forEach((e=>{t.push((async()=>{await async function(e,t){for(;(e.blockNumber<0||e.blockNumber<t)&&(e._updateNumber||(e._updateNumber=(async()=>{try{const t=await e.provider.getBlockNumber();t>e.blockNumber&&(e.blockNumber=t)}catch(t){e.blockNumber=-2,e._lastFatalError=t,e._lastFatalErrorTimestamp=bi()}e._updateNumber=null})()),await e._updateNumber,e.outOfSync++,!e._lastFatalError););}(e,0),e._lastFatalError||(e._network=await e.provider.getNetwork())})())})),this.#kt=e=(async()=>{await Promise.all(t);let e=null;for(const t of this.#Pt){if(t._lastFatalError)continue;const n=t._network;null==e?e=n.chainId:n.chainId!==e&&(0,c.hu)(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await e}async#Rt(e,t){const n=[];for(const r of e)if(null!=r.result){const{tag:e,value:t}=ki(r.result);n.push({tag:e,value:t,weight:r.config.weight})}if(!(n.reduce(((e,t)=>e+t.weight),0)<this.quorum)){switch(t.method){case"getBlockNumber":{-2===this.#It&&(this.#It=Math.ceil((0,l.Dx)(Ni(this.quorum,this.#Pt.filter((e=>!e._lastFatalError)).map((e=>({value:e.blockNumber,tag:(0,l.Dx)(e.blockNumber).toString(),weight:e.weight})))))));const e=function(e,t){if(1===e)return(0,l.Dx)(Ni(e,t),"%internal");const n=new Map,r=(e,t)=>{const r=n.get(e)||{result:e,weight:0};r.weight+=t,n.set(e,r)};for(const{weight:o,value:a}of t){const e=(0,l.Dx)(a);r(e-1,o),r(e,o),r(e+1,o)}let s,i=0;for(const{weight:o,result:a}of n.values())o>=e&&(o>i||null!=s&&o===i&&a>s)&&(i=o,s=a);return s}(this.quorum,n);if(void 0===e)return;return e>this.#It&&(this.#It=e),this.#It}case"getGasPrice":case"getPriorityFee":case"estimateGas":return Ni(this.quorum,n);case"getBlock":return"blockTag"in t&&"pending"===t.blockTag?Si(this.quorum,n):xi(this.quorum,n);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return xi(this.quorum,n);case"broadcastTransaction":return Si(this.quorum,n)}(0,c.hu)(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${vi(t.method)})`})}}async#At(e,t){if(0===e.size)throw new Error("no runners?!");const n=[];let r=0;for(const i of e)i.perform&&n.push(i.perform),i.staller?n.push(i.staller):i.didBump||(i.didBump=!0,r++);const s=await this.#Rt(e,t);if(void 0!==s){if(s instanceof Error)throw s;return s}for(let i=0;i<r;i++)this.#Nt(e,t);return(0,c.hu)(n.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map((e=>vi(e.result)))}}),await Promise.race(n),await this.#At(e,t)}async _perform(e){if("broadcastTransaction"===e.method){const t=this.#Pt.map((e=>null)),n=this.#Pt.map((async({provider:n,weight:r},s)=>{try{const i=await n._perform(e);t[s]=Object.assign(ki({result:i}),{weight:r})}catch(i){t[s]=Object.assign(ki({error:i}),{weight:r})}}));for(;;){const e=t.filter((e=>null!=e));for(const{value:t}of e)if(!(t instanceof Error))return t;const r=xi(this.quorum,t.filter((e=>null!=e)));if((0,c.VZ)(r,"INSUFFICIENT_FUNDS"))throw r;const s=n.filter(((e,n)=>null==t[n]));if(0===s.length)break;await Promise.race(s)}const r=Si(this.quorum,t);if((0,c.hu)(void 0!==r,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:t.map(vi)}}),r instanceof Error)throw r;return r}await this.#St();const t=new Set;let n=0;for(;;){const r=this.#Nt(t,e);if(null==r)break;if(n+=r.config.weight,n>=this.quorum)break}const r=await this.#At(t,e);for(const s of t)s.perform&&null==s.result&&s.config.lateResponses++;return r}async destroy(){for(const{provider:e}of this.#Pt)e.destroy();super.destroy()}}const Ai="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function Oi(e,t){null==t&&(t={});const n=e=>"-"!==t[e]&&("string"===typeof t.exclusive?e===t.exclusive:!Array.isArray(t.exclusive)||-1!==t.exclusive.indexOf(e));if("string"===typeof e&&e.match(/^https?:/))return new Vs(e);if("string"===typeof e&&e.match(/^wss?:/)||(r=e)&&"function"===typeof r.send&&"function"===typeof r.close)return new hi(e);var r;let s=null;try{s=ur.from(e)}catch(a){}const i=[];if(n("publicPolygon")&&s&&("matic"===s.name?i.push(new Vs("https://polygon-rpc.com/",s,{staticNetwork:s})):"matic-amoy"===s.name&&i.push(new Vs("https://rpc-amoy.polygon.technology/",s,{staticNetwork:s}))),n("alchemy"))try{i.push(new Zs(e,t.alchemy))}catch(a){}if(n("ankr")&&null!=t.ankr)try{i.push(new Ws(e,t.ankr))}catch(a){}if(n("chainstack"))try{i.push(new Qs(e,t.chainstack))}catch(a){}if(n("cloudflare"))try{i.push(new Xs(e))}catch(a){}if(n("etherscan"))try{i.push(new si(e,t.etherscan))}catch(a){}if(n("infura"))try{let n,r=t.infura;"object"===typeof r&&(n=r.projectSecret,r=r.projectId),i.push(new fi(e,r,n))}catch(a){}if(n("quicknode"))try{let n=t.quicknode;i.push(new mi(e,n))}catch(a){}if((0,c.hu)(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),1===i.length)return i[0];let o=Math.floor(i.length/2);return o>2&&(o=2),s&&-1!==Ai.indexOf(s.name)&&(o=1),t&&t.quorum&&(o=t.quorum),new Ri(i,void 0,{quorum:o})}class Ti extends Os{signer;#Ot;#Tt;constructor(e){super(e.provider),(0,u.h)(this,{signer:e}),this.#Ot=null,this.#Tt=0}async getAddress(){return this.signer.getAddress()}connect(e){return new Ti(this.signer.connect(e))}async getNonce(e){if("pending"===e){null==this.#Ot&&(this.#Ot=super.getNonce("pending"));const e=this.#Tt;return await this.#Ot+e}return super.getNonce(e)}increment(){this.#Tt++}reset(){this.#Tt=0,this.#Ot=null}async sendTransaction(e){const t=this.getNonce("pending");return this.increment(),(e=await this.signer.populateTransaction(e)).nonce=await t,await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,n){return this.signer.signTypedData(e,t,n)}}class _i extends Ks{#ne;constructor(e,t,n){const r=Object.assign({},null!=n?n:{},{batchMaxCount:1});(0,c.en)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),this.#ne=async(t,n)=>{const r={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:r});try{const t=await e.request(r);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(s){const e=new Error(s.message);throw e.code=s.code,e.data=s.data,e.payload=r,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,c.en)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#ne(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"===typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!(await this.hasSigner(e)))try{await this.#ne("eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}}const Ci="62e1ad51b37b8e00394bda3b";class Di extends Vs{applicationId;applicationSecret;constructor(e,t,n){null==e&&(e="mainnet");const r=ur.from(e);null==t&&(t=Ci),null==n&&(n=null);const s={staticNetwork:r};super(Di.getRequest(r,t,n),r,s),(0,u.h)(this,{applicationId:t,applicationSecret:n})}_getProvider(e){try{return new Di(e,this.applicationId,this.applicationSecret)}catch(t){}return super._getProvider(e)}static getRequest(e,t,n){null==t&&(t=Ci);const r=new Xn(`https://${function(e){switch(e){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}(0,c.en)(!1,"unsupported network","network",e)}(e.name)}/v1/lb/${t}`);return r.allowGzip=!0,n&&r.setCredentials("",n),t===Ci&&(r.retryFunc=async(e,t,n)=>(rr("PocketProvider"),!0)),r}isCommunityResource(){return this.applicationId===Ci}}const Ui=void 0,Li=BigInt(-1),$i=BigInt(0),Bi=BigInt(1),Fi=BigInt(5),Mi={};let ji="0000";for(;ji.length<80;)ji+=ji;function qi(e){let t=ji;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function Ki(e,t,n){const r=BigInt(t.width);if(t.signed){const t=Bi<<r-Bi;(0,c.hu)(null==n||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=e>$i?(0,l._Y)((0,l.sS)(e,r),r):-(0,l._Y)((0,l.sS)(-e,r),r)}else{const t=Bi<<r;(0,c.hu)(null==n||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%t+t)%t&t-Bi}return e}function Vi(e){"number"===typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,r=18;if("string"===typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,c.en)(s,"invalid fixed format","format",e),t="u"!==s[1],n=parseInt(s[2]),r=parseInt(s[3])}else if(e){const s=e,i=(e,t,n)=>null==s[e]?n:((0,c.en)(typeof s[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,s[e]),s[e]);t=i("signed","boolean",t),n=i("width","number",n),r=i("decimals","number",r)}(0,c.en)(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),(0,c.en)(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);return{signed:t,width:n,decimals:r,name:(t?"":"u")+"fixed"+String(n)+"x"+String(r)}}class zi{format;#_t;#Ct;#Dt;_value;constructor(e,t,n){(0,c.NK)(e,Mi,"FixedNumber"),this.#Ct=t,this.#_t=n;const r=function(e,t){let n="";e<$i&&(n="-",e*=Li);let r=e.toString();if(0===t)return n+r;for(;r.length<=t;)r=ji+r;const s=r.length-t;for(r=r.substring(0,s)+"."+r.substring(s);"0"===r[0]&&"."!==r[1];)r=r.substring(1);for(;"0"===r[r.length-1]&&"."!==r[r.length-2];)r=r.substring(0,r.length-1);return n+r}(t,n.decimals);(0,u.h)(this,{format:n.name,_value:r}),this.#Dt=qi(n.decimals)}get signed(){return this.#_t.signed}get width(){return this.#_t.width}get decimals(){return this.#_t.decimals}get value(){return this.#Ct}#Ut(e){(0,c.en)(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#Lt(e,t){return e=Ki(e,this.#_t,t),new zi(Mi,e,this.#_t)}#$t(e,t){return this.#Ut(e),this.#Lt(this.#Ct+e.#Ct,t)}addUnsafe(e){return this.#$t(e)}add(e){return this.#$t(e,"add")}#Bt(e,t){return this.#Ut(e),this.#Lt(this.#Ct-e.#Ct,t)}subUnsafe(e){return this.#Bt(e)}sub(e){return this.#Bt(e,"sub")}#Ft(e,t){return this.#Ut(e),this.#Lt(this.#Ct*e.#Ct/this.#Dt,t)}mulUnsafe(e){return this.#Ft(e)}mul(e){return this.#Ft(e,"mul")}mulSignal(e){this.#Ut(e);const t=this.#Ct*e.#Ct;return(0,c.hu)(t%this.#Dt===$i,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#Lt(t/this.#Dt,"mulSignal")}#Mt(e,t){return(0,c.hu)(e.#Ct!==$i,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Ut(e),this.#Lt(this.#Ct*this.#Dt/e.#Ct,t)}divUnsafe(e){return this.#Mt(e)}div(e){return this.#Mt(e,"div")}divSignal(e){(0,c.hu)(e.#Ct!==$i,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Ut(e);const t=this.#Ct*this.#Dt;return(0,c.hu)(t%e.#Ct===$i,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#Lt(t/e.#Ct,"divSignal")}cmp(e){let t=this.value,n=e.value;const r=this.decimals-e.decimals;return r>0?n*=qi(r):r<0&&(t*=qi(-r)),t<n?-1:t>n?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#Ct;return this.#Ct<$i&&(e-=this.#Dt-Bi),e=this.#Ct/this.#Dt*this.#Dt,this.#Lt(e,"floor")}ceiling(){let e=this.#Ct;return this.#Ct>$i&&(e+=this.#Dt-Bi),e=this.#Ct/this.#Dt*this.#Dt,this.#Lt(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=Fi*qi(t-1);let r=this.value+n;const s=qi(t);return r=r/s*s,Ki(r,this.#_t,"round"),new zi(Mi,r,this.#_t)}isZero(){return this.#Ct===$i}isNegative(){return this.#Ct<$i}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return zi.fromString(this.toString(),e)}static fromValue(e,t,n){const r=null==t?0:(0,l.Dx)(t),s=Vi(n);let i=(0,l.yT)(e,"value");const o=r-s.decimals;if(o>0){const t=qi(o);(0,c.hu)(i%t===$i,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else o<0&&(i*=qi(-o));return Ki(i,s,"fromValue"),new zi(Mi,i,s)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,c.en)(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const r=Vi(t);let s=n[2]||"0",i=n[3]||"";for(;i.length<r.decimals;)i+=ji;(0,c.hu)(i.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,r.decimals);const o=BigInt(n[1]+s+i);return Ki(o,r,"fromString"),new zi(Mi,o,r)}static fromBytes(e,t){let n=(0,l.Gh)((0,i.Pw)(e,"value"));const r=Vi(t);return r.signed&&(n=(0,l._Y)(n,r.width)),Ki(n,r,"fromBytes"),new zi(Mi,n,r)}}const Gi=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Hi(e,t){let n=18;if("string"===typeof t){const e=Gi.indexOf(t);(0,c.en)(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=(0,l.Dx)(t,"unit"));return zi.fromValue(e,n,{decimals:n,width:512}).toString()}function Wi(e,t){(0,c.en)("string"===typeof e,"value must be a string","value",e);let n=18;if("string"===typeof t){const e=Gi.indexOf(t);(0,c.en)(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=(0,l.Dx)(t,"unit"));return zi.fromString(e,{decimals:n,width:512}).value}function Ji(e){return Hi(e,18)}function Zi(e){return Wi(e,18)}var Yi=n(3326);const Qi=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Xi=/^[a-z]*$/i;function eo(e,t){let n=97;return e.reduce(((e,r)=>(r===t?n++:r.match(Xi)?e.push(String.fromCharCode(n)+r):(n=97,e.push(r)),e)),[])}function to(e){return(0,c.en)("0"===e[0],"unsupported auwl data","data",e),function(e,t){for(let s=Qi.length-1;s>=0;s--)e=e.split(Qi[s]).join(t.substring(2*s,2*s+2));const n=[],r=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((e,t,r,s)=>{if(r)for(let i=parseInt(r);i>=0;i--)n.push(";");else n.push(t.toLowerCase());return""}));if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return eo(eo(n,";"),":")}(e.substring(1+2*Qi.length),e.substring(1,1+2*Qi.length))}class no{locale;constructor(e){(0,u.h)(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}class ro extends no{#u;#jt;constructor(e,t,n){super(e),this.#u=t,this.#jt=n,this.#qt=null}get _data(){return this.#u}_decodeWords(){return to(this.#u)}#qt;#Kt(){if(null==this.#qt){const e=this._decodeWords();if((0,re.id)(e.join("\n")+"\n")!==this.#jt)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#qt=e}return this.#qt}getWord(e){const t=this.#Kt();return(0,c.en)(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e),t[e]}getWordIndex(e){return this.#Kt().indexOf(e)}}let so=null;class io extends ro{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==so&&(so=new io),so}}function oo(e){return(1<<e)-1<<8-e&255}function ao(e,t){(0,c.fA)("NFKD"),null==t&&(t=io.wordlist());const n=t.split(e);(0,c.en)(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let s=0;for(let i=0;i<n.length;i++){let e=t.getWordIndex(n[i].normalize("NFKD"));(0,c.en)(e>=0,`invalid mnemonic word at index ${i}`,"mnemonic","[ REDACTED ]");for(let t=0;t<11;t++)e&1<<10-t&&(r[s>>3]|=1<<7-s%8),s++}const o=32*n.length/3,a=oo(n.length/3),l=(0,i.Pw)(en(r.slice(0,o/8)))[0]&a;return(0,c.en)(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),(0,i.Dv)(r.slice(0,o/8))}function co(e,t){(0,c.en)(e.length%4===0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==t&&(t=io.wordlist());const n=[0];let r=11;for(let o=0;o<e.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=e[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=e[o]>>8-r,n.push(e[o]&((1<<8-r)-1&255)),r+=3);const s=e.length/4,i=parseInt(en(e).substring(2,4),16)&oo(s);return n[n.length-1]<<=s,n[n.length-1]|=i>>8-s,t.join(n.map((e=>t.getWord(e))))}const lo={};class uo{phrase;password;wordlist;entropy;constructor(e,t,n,r,s){null==r&&(r=""),null==s&&(s=io.wordlist()),(0,c.NK)(e,lo,"Mnemonic"),(0,u.h)(this,{phrase:n,password:r,wordlist:s,entropy:t})}computeSeed(){const e=(0,s.Y0)("mnemonic"+this.password,"NFKD");return(0,zt.n)((0,s.Y0)(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,n){const r=ao(e,n);return e=co((0,i.Pw)(r),n),new uo(lo,r,e,t,n)}static fromEntropy(e,t,n){const r=(0,i.Pw)(e,"entropy"),s=co(r,n);return new uo(lo,(0,i.Dv)(r),s,t,n)}static entropyToPhrase(e,t){return co((0,i.Pw)(e,"entropy"),t)}static phraseToEntropy(e,t){return ao(e,t)}static isValidMnemonic(e,t){try{return ao(e,t),!0}catch(n){}return!1}}class ho extends Os{address;#Vt;constructor(e,t){super(t),(0,c.en)(e&&"function"===typeof e.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#Vt=e;const n=(0,fn.d)(this.signingKey.publicKey);(0,u.h)(this,{address:n})}get signingKey(){return this.#Vt}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new ho(this.#Vt,e)}async signTransaction(e){e=Le(e);const{to:t,from:n}=await(0,u.m)({to:e.to?ve(e.to,this.provider):void 0,from:e.from?ve(e.from,this.provider):void 0});null!=t&&(e.to=t),null!=n&&(e.from=n),null!=e.from&&((0,c.en)((0,N.K)(e.from)===this.address,"transaction from address mismatch","tx.from",e.from),delete e.from);const r=Ur.from(e);return r.signature=this.signingKey.sign(r.unsignedHash),r.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign(gn(e)).serialized}async signTypedData(e,t,n){const r=await Bn.resolveNames(e,t,n,(async e=>{(0,c.hu)(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:e}});const t=await this.provider.resolveName(e);return(0,c.hu)(null!=t,"unconfigured ENS name","UNCONFIGURED_NAME",{value:e}),t}));return this.signingKey.sign(Bn.hash(r.domain,t,r.value)).serialized}}var po=n(92767);const fo="m/44'/60'/0'/0/0",go=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),mo=2147483648,yo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function wo(e,t){let n="";for(;e;)n="0123456789abcdef"[e%16]+n,e=Math.trunc(e/16);for(;n.length<2*t;)n="0"+n;return"0x"+n}function bo(e){const t=(0,i.Pw)(e),n=(0,i.QB)(en(en(t)),0,4);return jr((0,i.zo)([t,n]))}const vo={};function Eo(e,t,n,r){const s=new Uint8Array(37);e&mo?((0,c.hu)(null!=r,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set((0,i.Pw)(r),1)):s.set((0,i.Pw)(n));for(let i=24;i>=0;i-=8)s[33+(i>>3)]=e>>24-i&255;const o=(0,i.Pw)(kt("sha512",t,s));return{IL:o.slice(0,32),IR:o.slice(32)}}function Po(e,t){const n=t.split("/");(0,c.en)(n.length>0,"invalid path","path",t),"m"===n[0]&&((0,c.en)(0===e.depth,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${e.depth}`,"path",t),n.shift());let r=e;for(let s=0;s<n.length;s++){const e=n[s];if(e.match(/^[0-9]+'$/)){const t=parseInt(e.substring(0,e.length-1));(0,c.en)(t<mo,"invalid path index",`path[${s}]`,e),r=r.deriveChild(mo+t)}else if(e.match(/^[0-9]+$/)){const t=parseInt(e);(0,c.en)(t<mo,"invalid path index",`path[${s}]`,e),r=r.deriveChild(t)}else(0,c.en)(!1,"invalid path component",`path[${s}]`,e)}return r}class Io extends ho{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,n,r,s,o,a,l,h){super(t,h),(0,c.NK)(e,vo,"HDNodeWallet"),(0,u.h)(this,{publicKey:t.compressedPublicKey});const d=(0,i.QB)(Vt(en(this.publicKey)),0,4);(0,u.h)(this,{parentFingerprint:n,fingerprint:d,chainCode:r,path:s,index:o,depth:a}),(0,u.h)(this,{mnemonic:l})}connect(e){return new Io(vo,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#zt(){const e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&"en"===t.wordlist.locale&&""===t.password&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}async encrypt(e,t){return await(0,po.BZ)(this.#zt(),e,{progressCallback:t})}encryptSync(e){return(0,po.B7)(this.#zt(),e)}get extendedKey(){return(0,c.hu)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),bo((0,i.zo)(["0x0488ADE4",wo(this.depth,1),this.parentFingerprint,wo(this.index,4),this.chainCode,(0,i.zo)(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new ko(vo,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){const t=(0,l.Dx)(e,"index");(0,c.en)(t<=4294967295,"invalid index","index",t);let n=this.path;n&&(n+="/"+(t&~mo),t&mo&&(n+="'"));const{IR:r,IL:s}=Eo(t,this.chainCode,this.publicKey,this.privateKey),o=new sn.E((0,l.m9)(((0,l.Gh)(s)+BigInt(this.privateKey))%yo,32));return new Io(vo,o,this.fingerprint,(0,i.Dv)(r),n,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return Po(this,e)}static#Gt(e,t){(0,c.en)((0,i.Zq)(e),"invalid seed","seed","[REDACTED]");const n=(0,i.Pw)(e,"seed");(0,c.en)(n.length>=16&&n.length<=64,"invalid seed","seed","[REDACTED]");const r=(0,i.Pw)(kt("sha512",go,n)),s=new sn.E((0,i.Dv)(r.slice(0,32)));return new Io(vo,s,"0x00000000",(0,i.Dv)(r.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){const t=(0,l.ot)(qr(e));(0,c.en)(82===t.length||bo(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");const n=t[4],r=(0,i.Dv)(t.slice(5,9)),s=parseInt((0,i.Dv)(t.slice(9,13)).substring(2),16),o=(0,i.Dv)(t.slice(13,45)),a=t.slice(45,78);switch((0,i.Dv)(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const e=(0,i.Dv)(a);return new ko(vo,(0,fn.d)(e),e,r,o,null,s,n,null)}case"0x0488ade4":case"0x04358394 ":if(0!==a[0])break;return new Io(vo,new sn.E(a.slice(1)),r,o,null,s,n,null,null)}(0,c.en)(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,t,n){null==e&&(e=""),null==t&&(t=fo),null==n&&(n=io.wordlist());const r=uo.fromEntropy((0,Gt.O)(16),e,n);return Io.#Gt(r.computeSeed(),r).derivePath(t)}static fromMnemonic(e,t){return t||(t=fo),Io.#Gt(e.computeSeed(),e).derivePath(t)}static fromPhrase(e,t,n,r){null==t&&(t=""),null==n&&(n=fo),null==r&&(r=io.wordlist());const s=uo.fromPhrase(e,t,r);return Io.#Gt(s.computeSeed(),s).derivePath(n)}static fromSeed(e){return Io.#Gt(e,null)}}class ko extends Ts{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,n,r,s,o,a,l,h){super(t,h),(0,c.NK)(e,vo,"HDNodeVoidWallet"),(0,u.h)(this,{publicKey:n});const d=(0,i.QB)(Vt(en(n)),0,4);(0,u.h)(this,{publicKey:n,fingerprint:d,parentFingerprint:r,chainCode:s,path:o,index:a,depth:l})}connect(e){return new ko(vo,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){return(0,c.hu)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),bo((0,i.zo)(["0x0488B21E",wo(this.depth,1),this.parentFingerprint,wo(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(e){const t=(0,l.Dx)(e,"index");(0,c.en)(t<=4294967295,"invalid index","index",t);let n=this.path;n&&(n+="/"+(t&~mo),t&mo&&(n+="'"));const{IR:r,IL:s}=Eo(t,this.chainCode,this.publicKey,null),o=sn.E.addPoints(s,this.publicKey,!0),a=(0,fn.d)(o);return new ko(vo,a,o,this.fingerprint,(0,i.Dv)(r),n,t,this.depth+1,this.provider)}derivePath(e){return Po(this,e)}}function xo(e){const t=(0,l.Dx)(e,"index");return(0,c.en)(t>=0&&t<mo,"invalid account index","index",t),`m/44'/60'/${t}'/0/0`}function No(e){const t=(0,l.Dx)(e,"index");return(0,c.en)(t>=0&&t<mo,"invalid account index","index",t),`m/44'/60'/0'/0/${t}`}var So=n(86194),Ro=n(69931);function Ao(e){try{if(JSON.parse(e).encseed)return!0}catch(t){}return!1}function Oo(e,t){const n=JSON.parse(e),r=(0,Ro.Ij)(t),s=(0,N.K)((0,Ro.ZA)(n,"ethaddr:string!")),o=(0,Ro.p3)((0,Ro.ZA)(n,"encseed:string!"));(0,c.en)(o&&o.length%16===0,"invalid encseed","json",e);const a=(0,i.Pw)((0,zt.n)(r,r,2e3,32,"sha256")).slice(0,16),l=o.slice(0,16),u=o.slice(16),h=new So.nq(a,l),d=(0,So.lI)((0,i.Pw)(h.decrypt(u)));let p="";for(let i=0;i<d.length;i++)p+=String.fromCharCode(d[i]);return{address:s,privateKey:(0,re.id)(p)}}function To(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}class _o extends ho{constructor(e,t){"string"!==typeof e||e.startsWith("0x")||(e="0x"+e),super("string"===typeof e?new sn.E(e):e,t)}connect(e){return new _o(this.signingKey,e)}async encrypt(e,t){const n={address:this.address,privateKey:this.privateKey};return await(0,po.BZ)(n,e,{progressCallback:t})}encryptSync(e){const t={address:this.address,privateKey:this.privateKey};return(0,po.B7)(t,e)}static#Ht(e){if((0,c.en)(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&"en"===e.mnemonic.locale){const t=uo.fromEntropy(e.mnemonic.entropy),n=Io.fromMnemonic(t,e.mnemonic.path);if(n.address===e.address&&n.privateKey===e.privateKey)return n;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new _o(e.privateKey);return(0,c.en)(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t}static async fromEncryptedJson(e,t,n){let r=null;return(0,po.D_)(e)?r=await(0,po.Y0)(e,t,n):Ao(e)&&(n&&(n(0),await To(0)),r=Oo(e,t),n&&(n(1),await To(0))),_o.#Ht(r)}static fromEncryptedJsonSync(e,t){let n=null;return(0,po.D_)(e)?n=(0,po.zy)(e,t):Ao(e)?n=Oo(e,t):(0,c.en)(!1,"invalid JSON wallet","json","[ REDACTED ]"),_o.#Ht(n)}static createRandom(e){const t=Io.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){const n=Io.fromPhrase(e);return t?n.connect(t):n}}const Co=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function Do(e,t){let n=to(e).join(",");return t.split(/,/g).forEach((e=>{const r=e.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);(0,c.en)(null!==r,"internal error parsing accents","accents",t);let s=0;const i=function(e,t){const n=(1<<e)-1,r=[];let s=0,i=0,o=0;for(let a=0;a<t.length;a++)for(s=s<<6|Co.indexOf(t[a]),i+=6;i>=e;){const t=s>>i-e;s&=(1<<i-e)-1,i-=e,0===t?o+=n:(r.push(t+o),o=0)}return r}(parseInt(r[3]),r[4]),o=parseInt(r[2]),a=new RegExp(`([${r[1]}])`,"g");n=n.replace(a,((e,t)=>(0===--i[s]&&(t=String.fromCharCode(t.charCodeAt(0),o),s++),t)))})),n.split(",")}class Uo extends ro{#Wt;constructor(e,t,n,r){super(e,t,r),this.#Wt=n}get _accent(){return this.#Wt}_decodeWords(){return Do(this._data,this._accent)}}const Lo={en:io.wordlist()}},70153:function(e,t,n){"use strict";n.d(t,{id:function(){return i}});var r=n(39960),s=n(86261);function i(e){return(0,r.w)((0,s.Y0)(e))}},55246:function(e,t,n){"use strict";n.d(t,{R:function(){return a},d:function(){return o}});var r=n(89893),s=n(82306),i=n(39960);function o(e){let t;return t="string"===typeof e?s.E.computePublicKey(e,!1):e.publicKey,(0,r.K)((0,i.w)("0x"+t.substring(4)).substring(26))}function a(e,t){return o(s.E.recoverPublicKey(e,t))}},11069:function(e,t,n){"use strict";n.d(t,{A7:function(){return a},Dv:function(){return u},M5:function(){return d},Ou:function(){return f},Pw:function(){return i},QB:function(){return p},SK:function(){return y},U3:function(){return m},Zq:function(){return c},h_:function(){return o},zo:function(){return h}});var r=n(50033);function s(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"===typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let r=0;r<t.length;r++)t[r]=parseInt(e.substring(n,n+2),16),n+=2;return t}(0,r.en)(!1,"invalid BytesLike value",t||"value",e)}function i(e,t){return s(e,t,!1)}function o(e,t){return s(e,t,!0)}function a(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!==typeof t||e.length===2+2*t)&&(!0!==t||e.length%2===0))}function c(e){return a(e,!0)||e instanceof Uint8Array}const l="0123456789abcdef";function u(e){const t=i(e);let n="0x";for(let r=0;r<t.length;r++){const e=t[r];n+=l[(240&e)>>4]+l[15&e]}return n}function h(e){return"0x"+e.map((e=>u(e).substring(2))).join("")}function d(e){return a(e,!0)?(e.length-2)/2:i(e).length}function p(e,t,n){const s=i(e);return null!=n&&n>s.length&&(0,r.hu)(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),u(s.slice(null==t?0:t,null==n?s.length:n))}function f(e){let t=u(e).substring(2);for(;t.startsWith("00");)t=t.substring(2);return"0x"+t}function g(e,t,n){const s=i(e);(0,r.hu)(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const o=new Uint8Array(t);return o.fill(0),n?o.set(s,t-s.length):o.set(s,0),u(o)}function m(e,t){return g(e,t,!0)}function y(e,t){return g(e,t,!1)}},50033:function(e,t,n){"use strict";n.d(t,{Hl:function(){return a},NK:function(){return f},VZ:function(){return o},en:function(){return u},fA:function(){return p},fG:function(){return h},hu:function(){return l},wf:function(){return c}});var r=n(39978),s=n(38784);function i(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(i).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[15&e[r]];return n}if("object"===typeof e&&"function"===typeof e.toJSON)return i(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${i(t)}: ${i(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function o(e,t){return e&&e.code===t}function a(e){return o(e,"CALL_EXCEPTION")}function c(e,t,n){let o,a=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${i(n)}`);for(const e in n){if("shortMessage"===e)continue;const t=n[e];s.push(e+"="+i(t))}}s.push(`code=${t}`),s.push(`version=${r.i}`),s.length&&(e+=" ("+s.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":o=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":o=new RangeError(e);break;default:o=new Error(e)}return(0,s.h)(o,{code:t}),n&&Object.assign(o,n),null==o.shortMessage&&(0,s.h)(o,{shortMessage:a}),o}function l(e,t,n,r){if(!e)throw c(t,n,r)}function u(e,t,n,r){l(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function h(e,t,n){null==n&&(n=""),n&&(n=": "+n),l(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),l(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const d=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(n){}return e}),[]);function p(e){l(d.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}function f(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),l(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}},87197:function(e,t,n){"use strict";n.d(t,{$j:function(){return l},B4:function(){return b},Dx:function(){return g},Gh:function(){return f},He:function(){return m},Qf:function(){return d},_Y:function(){return c},m9:function(){return y},ot:function(){return w},sS:function(){return u},yT:function(){return h}});var r=n(11069),s=n(50033);const i=BigInt(0),o=BigInt(1),a=9007199254740991;function c(e,t){const n=d(e,"value"),r=BigInt(g(t,"width"));if((0,s.hu)(n>>r===i,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-o){return-((~n&(o<<r)-o)+o)}return n}function l(e,t){let n=h(e,"value");const r=BigInt(g(t,"width")),a=o<<r-o;if(n<i){n=-n,(0,s.hu)(n<=a,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(o<<r)-o)+o}return(0,s.hu)(n<a,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function u(e,t){const n=d(e,"value"),r=BigInt(g(t,"bits"));return n&(o<<r)-o}function h(e,t){switch(typeof e){case"bigint":return e;case"number":return(0,s.en)(Number.isInteger(e),"underflow",t||"value",e),(0,s.en)(e>=-a&&e<=a,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){(0,s.en)(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}(0,s.en)(!1,"invalid BigNumberish value",t||"value",e)}function d(e,t){const n=h(e,t);return(0,s.hu)(n>=i,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const p="0123456789abcdef";function f(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=p[n>>4],t+=p[15&n];return BigInt(t)}return h(e)}function g(e,t){switch(typeof e){case"bigint":return(0,s.en)(e>=-a&&e<=a,"overflow",t||"value",e),Number(e);case"number":return(0,s.en)(Number.isInteger(e),"underflow",t||"value",e),(0,s.en)(e>=-a&&e<=a,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return g(BigInt(e),t)}catch(n){(0,s.en)(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}(0,s.en)(!1,"invalid numeric value",t||"value",e)}function m(e){return g(f(e))}function y(e,t){let n=d(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const r=g(t,"width");for((0,s.hu)(2*r>=n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*r;)n="0"+n}return"0x"+n}function w(e){const t=d(e,"value");if(t===i)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const e=2*s;r[s]=parseInt(n.substring(e,e+2),16)}return r}function b(e){let t=(0,r.Dv)((0,r.Zq)(e)?e:w(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}},38784:function(e,t,n){"use strict";function r(e,t,n){const r=t.split("|").map((e=>e.trim()));for(let i=0;i<r.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=e,s}async function s(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,n,r)=>(e[t[r]]=n,e)),{})}function i(e,t,n){for(let s in t){let i=t[s];const o=n?n[s]:null;o&&r(i,o,s),Object.defineProperty(e,s,{enumerable:!0,value:i,writable:!1})}}n.d(t,{h:function(){return i},m:function(){return s}})},86261:function(e,t,n){"use strict";n.d(t,{XL:function(){return u},Y0:function(){return c},ZN:function(){return l},te:function(){return o}});var r=n(11069),s=n(50033);function i(e,t,n,r,s){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let r=t+1;r<n.length&&n[r]>>6===2;r++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const o=Object.freeze({error:function(e,t,n,r,i){(0,s.en)(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:i,replace:function(e,t,n,r,o){return"OVERLONG"===e?((0,s.en)("number"===typeof o,"invalid bad code point for replacement","badCodepoint",o),r.push(o),0):(r.push(65533),i(e,t,n))}});function a(e,t){null==t&&(t=o.error);const n=(0,r.Pw)(e,"bytes"),s=[];let i=0;for(;i<n.length;){const e=n[i++];if(e>>7===0){s.push(e);continue}let r=null,o=null;if(192===(224&e))r=1,o=127;else if(224===(240&e))r=2,o=2047;else{if(240!==(248&e)){i+=t(128===(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",i-1,n,s);continue}r=3,o=65535}if(i-1+r>=n.length){i+=t("OVERRUN",i-1,n,s);continue}let a=e&(1<<8-r-1)-1;for(let c=0;c<r;c++){let e=n[i];if(128!=(192&e)){i+=t("MISSING_CONTINUE",i,n,s),a=null;break}a=a<<6|63&e,i++}null!==a&&(a>1114111?i+=t("OUT_OF_RANGE",i-1-r,n,s,a):a>=55296&&a<=57343?i+=t("UTF16_SURROGATE",i-1-r,n,s,a):a<=o?i+=t("OVERLONG",i-1-r,n,s,a):s.push(a))}return s}function c(e,t){(0,s.en)("string"===typeof e,"invalid string value","str",e),null!=t&&((0,s.fA)(t),e=e.normalize(t));let n=[];for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);if(t<128)n.push(t);else if(t<2048)n.push(t>>6|192),n.push(63&t|128);else if(55296==(64512&t)){r++;const i=e.charCodeAt(r);(0,s.en)(r<e.length&&56320===(64512&i),"invalid surrogate pair","str",e);const o=65536+((1023&t)<<10)+(1023&i);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)}else n.push(t>>12|224),n.push(t>>6&63|128),n.push(63&t|128)}return new Uint8Array(n)}function l(e,t){return a(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}function u(e,t){return a(c(e,t))}},3326:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var r=n(11069);function s(e){const t=(0,r.Pw)(e,"randomBytes");t[6]=15&t[6]|64,t[8]=63&t[8]|128;const n=(0,r.Dv)(t);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}},92767:function(e,t,n){"use strict";n.d(t,{B7:function(){return k},BZ:function(){return x},D_:function(){return m},Y0:function(){return E},zy:function(){return b}});var r=n(86194),s=n(89893),i=n(39960),o=n(23128),a=n(22857),c=n(54331),l=n(55246),u=n(11069),h=n(50033),d=n(3326),p=n(69931),f=n(39978);const g="m/44'/60'/0'/0/0";function m(e){try{const t=JSON.parse(e);if(3===(null!=t.version?parseInt(t.version):0))return!0}catch(t){}return!1}function y(e,t){const n=(0,u.Pw)(t),o=(0,p.ZA)(e,"crypto.ciphertext:data!"),a=(0,u.Dv)((0,i.w)((0,u.zo)([n.slice(16,32),o]))).substring(2);(0,h.en)(a===(0,p.ZA)(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const c=function(e,t,n){if("aes-128-ctr"===(0,p.ZA)(e,"crypto.cipher:string")){const s=(0,p.ZA)(e,"crypto.cipherparams.iv:data!"),i=new r.MH(t,s);return(0,u.Dv)(i.decrypt(n))}(0,h.hu)(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(e,n.slice(0,16),o),d=(0,l.d)(c);if(e.address){let t=e.address.toLowerCase();t.startsWith("0x")||(t="0x"+t),(0,h.en)((0,s.K)(t)===d,"keystore address/privateKey mismatch","address",e.address)}const f={address:d,privateKey:c};if("0.1"===(0,p.ZA)(e,"x-ethers.version:string")){const t=n.slice(32,64),s=(0,p.ZA)(e,"x-ethers.mnemonicCiphertext:data!"),i=(0,p.ZA)(e,"x-ethers.mnemonicCounter:data!"),o=new r.MH(t,i);f.mnemonic={path:(0,p.ZA)(e,"x-ethers.path:string")||g,locale:(0,p.ZA)(e,"x-ethers.locale:string")||"en",entropy:(0,u.Dv)((0,u.Pw)(o.decrypt(s)))}}return f}function w(e){const t=(0,p.ZA)(e,"crypto.kdf:string");if(t&&"string"===typeof t){if("scrypt"===t.toLowerCase()){const n=(0,p.ZA)(e,"crypto.kdfparams.salt:data!"),r=(0,p.ZA)(e,"crypto.kdfparams.n:int!"),s=(0,p.ZA)(e,"crypto.kdfparams.r:int!"),i=(0,p.ZA)(e,"crypto.kdfparams.p:int!");(0,h.en)(r>0&&0===(r&r-1),"invalid kdf.N","kdf.N",r),(0,h.en)(s>0&&i>0,"invalid kdf","kdf",t);const o=(0,p.ZA)(e,"crypto.kdfparams.dklen:int!");return(0,h.en)(32===o,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:s,p:i,dkLen:64}}if("pbkdf2"===t.toLowerCase()){const t=(0,p.ZA)(e,"crypto.kdfparams.salt:data!"),n=(0,p.ZA)(e,"crypto.kdfparams.prf:string!"),r=n.split("-").pop();(0,h.en)("sha256"===r||"sha512"===r,"invalid kdf.pdf","kdf.pdf",n);const s=(0,p.ZA)(e,"crypto.kdfparams.c:int!"),i=(0,p.ZA)(e,"crypto.kdfparams.dklen:int!");return(0,h.en)(32===i,"invalid kdf.dklen","kdf.dklen",i),{name:"pbkdf2",salt:t,count:s,dkLen:i,algorithm:r}}}(0,h.en)(!1,"unsupported key-derivation function","kdf",t)}function b(e,t){const n=JSON.parse(e),r=(0,p.Ij)(t),s=w(n);if("pbkdf2"===s.name){const{salt:e,count:t,dkLen:i,algorithm:a}=s;return y(n,(0,o.n)(r,e,t,i,a))}(0,h.hu)("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:i,N:c,r:l,p:u,dkLen:d}=s;return y(n,(0,a.g)(r,i,c,l,u,d))}function v(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}async function E(e,t,n){const r=JSON.parse(e),s=(0,p.Ij)(t),i=w(r);if("pbkdf2"===i.name){n&&(n(0),await v(0));const{salt:e,count:t,dkLen:a,algorithm:c}=i,l=(0,o.n)(s,e,t,a,c);return n&&(n(1),await v(0)),y(r,l)}(0,h.hu)("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:c,N:l,r:u,p:d,dkLen:f}=i;return y(r,await(0,a.f)(s,c,l,u,d,f,n))}function P(e){const t=null!=e.salt?(0,u.Pw)(e.salt,"options.salt"):(0,c.O)(32);let n=1<<17,r=8,s=1;return e.scrypt&&(e.scrypt.N&&(n=e.scrypt.N),e.scrypt.r&&(r=e.scrypt.r),e.scrypt.p&&(s=e.scrypt.p)),(0,h.en)("number"===typeof n&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),(0,h.en)("number"===typeof r&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),(0,h.en)("number"===typeof s&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:t,N:n,r:r,p:s}}function I(e,t,n,s){const o=(0,u.Pw)(n.privateKey,"privateKey"),a=null!=s.iv?(0,u.Pw)(s.iv,"options.iv"):(0,c.O)(16);(0,h.en)(16===a.length,"invalid options.iv length","options.iv",s.iv);const l=null!=s.uuid?(0,u.Pw)(s.uuid,"options.uuid"):(0,c.O)(16);(0,h.en)(16===l.length,"invalid options.uuid length","options.uuid",s.iv);const m=e.slice(0,16),y=e.slice(16,32),w=new r.MH(m,a),b=(0,u.Pw)(w.encrypt(o)),v=(0,i.w)((0,u.zo)([y,b])),E={address:n.address.substring(2).toLowerCase(),id:(0,d.E)(l),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,u.Dv)(a).substring(2)},ciphertext:(0,u.Dv)(b).substring(2),kdf:"scrypt",kdfparams:{salt:(0,u.Dv)(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:v.substring(2)}};if(n.mnemonic){const t=null!=s.client?s.client:`ethers/${f.i}`,i=n.mnemonic.path||g,o=n.mnemonic.locale||"en",a=e.slice(32,64),l=(0,u.Pw)(n.mnemonic.entropy,"account.mnemonic.entropy"),h=(0,c.O)(16),d=new r.MH(a,h),m=(0,u.Pw)(d.encrypt(l)),y=new Date,w="UTC--"+(y.getUTCFullYear()+"-"+(0,p.VP)(y.getUTCMonth()+1,2)+"-"+(0,p.VP)(y.getUTCDate(),2)+"T"+(0,p.VP)(y.getUTCHours(),2)+"-"+(0,p.VP)(y.getUTCMinutes(),2)+"-"+(0,p.VP)(y.getUTCSeconds(),2)+".0Z")+"--"+E.address;E["x-ethers"]={client:t,gethFilename:w,path:i,locale:o,mnemonicCounter:(0,u.Dv)(h).substring(2),mnemonicCiphertext:(0,u.Dv)(m).substring(2),version:"0.1"}}return JSON.stringify(E)}function k(e,t,n){null==n&&(n={});const r=(0,p.Ij)(t),s=P(n),i=(0,a.g)(r,s.salt,s.N,s.r,s.p,64);return I((0,u.Pw)(i),s,e,n)}async function x(e,t,n){null==n&&(n={});const r=(0,p.Ij)(t),s=P(n),i=await(0,a.f)(r,s.salt,s.N,s.r,s.p,64,n.progressCallback);return I((0,u.Pw)(i),s,e,n)}},69931:function(e,t,n){"use strict";n.d(t,{Ij:function(){return c},VP:function(){return a},ZA:function(){return l},p3:function(){return o}});var r=n(11069),s=n(86261),i=n(50033);function o(e){return"string"!==typeof e||e.startsWith("0x")||(e="0x"+e),(0,r.h_)(e)}function a(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function c(e){return"string"===typeof e?(0,s.Y0)(e,"NFKC"):(0,r.h_)(e)}function l(e,t){const n=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);(0,i.en)(null!=n,"invalid path","path",t);const r=n[1],s=n[3],a="!"===n[4];let c=e;for(const i of r.toLowerCase().split(".")){if(Array.isArray(c)){if(!i.match(/^[0-9]+$/))break;c=c[parseInt(i)]}else if("object"===typeof c){let e=null;for(const t in c)if(t.toLowerCase()===i){e=c[t];break}c=e}else c=null;if(null==c)break}if((0,i.en)(!a||null!=c,"missing required value","path",r),s&&null!=c){if("int"===s){if("string"===typeof c&&c.match(/^-?[0-9]+$/))return parseInt(c);if(Number.isSafeInteger(c))return c}if("number"===s&&"string"===typeof c&&c.match(/^-?[0-9.]*$/))return parseFloat(c);if("data"===s&&"string"===typeof c)return o(c);if("array"===s&&Array.isArray(c))return c;if(s===typeof c)return c;(0,i.en)(!1,`wrong type found for ${s} `,"path",r)}return c}},68896:function(e,t,n){"use strict";n.d(t,{$N:function(){return B},Kf:function(){return l},OH:function(){return q},QQ:function(){return P},UM:function(){return $},WO:function(){return s},ep:function(){return m},g4:function(){return w},j7:function(){return c},kA:function(){return f},ru:function(){return E},sc:function(){return L},u7:function(){return F},uS:function(){return M},wd:function(){return U},yZ:function(){return b},yv:function(){return T}});var r=Object.defineProperty;((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})({},{CannotFindTransaction:()=>j,CertificateSignatureMismatch:()=>f,ContractDeploymentFailed:()=>g,InvalidAbiDataToEncodeOrDecode:()=>c,InvalidAbiItem:()=>l,InvalidAbiSignatureFormat:()=>u,InvalidAddress:()=>h,InvalidBloom:()=>d,InvalidBloomParams:()=>p,InvalidCommandLineArguments:()=>_,InvalidConfigurationFile:()=>D,InvalidConfigurationFilePath:()=>C,InvalidDataType:()=>m,InvalidHDKey:()=>b,InvalidHDKeyMnemonic:()=>w,InvalidHTTPRequest:()=>v,InvalidKeystore:()=>E,InvalidKeystoreParams:()=>P,InvalidOperation:()=>q,InvalidRLP:()=>T,InvalidSecp256k1MessageHash:()=>L,InvalidSecp256k1PrivateKey:()=>U,InvalidSecp256k1Signature:()=>$,InvalidTransactionField:()=>F,JSONRPCInternalError:()=>A,JSONRPCInvalidParams:()=>R,JSONRPCInvalidRequest:()=>N,JSONRPCMethodNotFound:()=>S,JSONRPCParseError:()=>x,JSONRPCProviderError:()=>k,JSONRPCServerError:()=>O,NotDelegatedTransaction:()=>M,PollExecution:()=>I,UnavailableTransactionField:()=>B,UnsupportedOperation:()=>y,VechainSDKError:()=>a,assertInnerError:()=>i,createErrorMessage:()=>o,stringifyData:()=>s});var s=e=>JSON.stringify(e,(()=>{const e=new WeakSet;return(t,n)=>{if("object"===typeof n&&null!==n&&""!==t){if(e.has(n))return;e.add(n)}return n}})(),2);function i(e){return e instanceof Error?e:new Error(`Inner error is not an instance of Error. Object:\n\t${s(e)}`)}function o(e,t,n,r){return`Method '${e}' failed.\n-Reason: '${t}'\n-Parameters: \n\t${s(n)}${void 0!==r?.message?`\n-Internal error: \n\t${r.message}`:""}`}var a=class extends Error{constructor(e,t,n,r){super(o(e,t,n,void 0===r?void 0:i(r))),this.methodName=e,this.errorMessage=t,this.data=n,this.innerError=r}},c=class extends a{},l=class extends a{},u=class extends a{},h=class extends a{},d=class extends a{},p=class extends a{},f=class extends a{},g=class extends a{},m=class extends a{},y=class extends a{},w=class extends a{},b=class extends a{},v=class extends a{},E=class extends a{},P=class extends a{},I=class extends a{},k=class extends a{constructor(e,t,n,r,s){super(e,n,{code:t,message:n,data:r},s),this.methodName=e,this.innerError=s}},x=class extends k{},N=class extends k{},S=class extends k{},R=class extends k{},A=class extends k{},O=class extends k{},T=class extends a{},_=class extends a{},C=class extends a{},D=class extends a{},U=class extends a{},L=class extends a{},$=class extends a{},B=class extends a{},F=class extends a{},M=class extends a{},j=class extends a{},q=class extends a{}},50319:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var r=Object.defineProperty;((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})({},{VeChainSDKLogger:()=>a});var s={log:e=>{const t=e.messages.map((e=>`- ${e}`)).join("\n");console.log(`\n****************** EVENT: ${e.title} ******************\n`+t+"\n")}},i={log:e=>{console.error(`\n****************** ERROR ON: ${e.methodName} ******************\n- Error message: '${e.errorMessage}'\n- Error data:\n`,e.data,"\n- Internal error:\n",e.innerError,"\n")}},o={log:e=>{const t=e.messages.map((e=>`- ${e}`)).join("\n");console.warn(`\n****************** WARNING: ${e.title} ******************\n`+t+"\n")}},a=e=>"error"===e?i:"warning"===e?o:s},11799:function(e,t,n){"use strict";function r(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function s(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?r(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function i(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=s(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return r(n)}n.d(t,{zo:function(){return i},mL:function(){return h},BB:function(){return d}});var o=n(91835);function a(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const c=a("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),l=a("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=s((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}));var u={utf8:c,"utf-8":c,hex:o.gh.base16,latin1:l,ascii:l,binary:l,...o.gh};function h(e,t="utf8"){const n=u[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):r(globalThis.Buffer.from(e,"utf-8"))}function d(e,t="utf8"){const n=u[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},17832:function(e,t,n){"use strict";n.d(t,{sj:function(){return p},CO:function(){return g},Ld:function(){return f}});Symbol();const r=Symbol();const s=Object.getPrototypeOf,i=new WeakMap,o=e=>e&&(i.has(e)?i.get(e):s(e)===Object.prototype||s(e)===Array.prototype),a=(e,t=!0)=>{i.set(e,t)},c=e=>"object"===typeof e&&null!==e,l=new WeakMap,u=new WeakSet,h=(e=Object.is,t=((e,t)=>new Proxy(e,t)),n=(e=>c(e)&&!u.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),s=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),i=new WeakMap,h=((e,t,n=s)=>{const r=i.get(e);if((null==r?void 0:r[0])===t)return r[1];const o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return a(o,!0),i.set(e,[t,o]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(o,t))return;const r=Reflect.get(e,t),s={value:r,enumerable:!0,configurable:!0};if(u.has(r))a(r,!1);else if(r instanceof Promise)delete s.value,s.get=()=>n(r);else if(l.has(r)){const[e,t]=l.get(r);s.value=h(e,t(),n)}Object.defineProperty(o,t,s)})),Object.preventExtensions(o)}),d=new WeakMap,p=[1,1],f=(s=>{if(!c(s))throw new Error("object required");const i=d.get(s);if(i)return i;let a=p[0];const g=new Set,m=(e,t=++p[0])=>{a!==t&&(a=t,g.forEach((n=>n(e,t))))};let y=p[1];const w=e=>(t,n)=>{const r=[...t];r[1]=[e,...r[1]],m(r,n)},b=new Map,v=e=>{var t;const n=b.get(e);n&&(b.delete(e),null==(t=n[1])||t.call(n))},E=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s)),P={deleteProperty(e,t){const n=Reflect.get(e,t);v(t);const r=Reflect.deleteProperty(e,t);return r&&m(["delete",[t],n]),r},set(t,s,i,a){const h=Reflect.has(t,s),p=Reflect.get(t,s,a);if(h&&(e(p,i)||d.has(i)&&e(p,d.get(i))))return!0;v(s),c(i)&&(i=(e=>o(e)&&e[r]||null)(i)||i);let y=i;if(i instanceof Promise)i.then((e=>{i.status="fulfilled",i.value=e,m(["resolve",[s],e])})).catch((e=>{i.status="rejected",i.reason=e,m(["reject",[s],e])}));else{!l.has(i)&&n(i)&&(y=f(i));const e=!u.has(y)&&l.get(y);e&&((e,t)=>{if(b.has(e))throw new Error("prop listener already exists");if(g.size){const n=t[3](w(e));b.set(e,[t,n])}else b.set(e,[t])})(s,e)}return Reflect.set(t,s,y,a),m(["set",[s],i,p]),!0}},I=t(E,P);d.set(s,I);const k=[E,(e=++p[1])=>(y===e||g.size||(y=e,b.forEach((([t])=>{const n=t[1](e);n>a&&(a=n)}))),a),h,e=>{g.add(e),1===g.size&&b.forEach((([e,t],n)=>{if(t)throw new Error("remove already exists");const r=e[3](w(n));b.set(n,[e,r])}));return()=>{g.delete(e),0===g.size&&b.forEach((([e,t],n)=>{t&&(t(),b.set(n,[e]))}))}}];return l.set(I,k),Reflect.ownKeys(s).forEach((e=>{const t=Object.getOwnPropertyDescriptor(s,e);"value"in t&&(I[e]=s[e],delete t.value,delete t.writable),Object.defineProperty(E,e,t)})),I}))=>[f,l,u,e,t,n,s,i,h,d,p],[d]=h();function p(e={}){return d(e)}function f(e,t,n){const r=l.get(e);let s;r||console.warn("Please use proxy object");const i=[],o=r[3];let a=!1;const c=o((e=>{i.push(e),n?t(i.splice(0)):s||(s=Promise.resolve().then((()=>{s=void 0,a&&t(i.splice(0))})))}));return a=!0,()=>{a=!1,c()}}function g(e,t){const n=l.get(e);n||console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),t)}},73932:function(e,t,n){"use strict";n.d(t,{VW:function(){return s}});var r=n(17832);function s(e,t,n,s){let i=e[t];return(0,r.Ld)(e,(()=>{const r=e[t];Object.is(i,r)||n(i=r)}),s)}Symbol()},50953:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var r=n(70692),s=n(31134),i=n(49834),o=n(20916);function a(e){const t=[];if("string"===typeof e){const n=(0,o.Q4)(e),r=n.length;for(let e=0;e<r;e++)t.push((0,o.C$)(n[e],{modifiers:s.LY}))}else{const n=(0,i.D)(e),r=e.length;for(let i=0;i<r;i++){const r=e[i];if((0,s.N0)(r))continue;const a=(0,o.Q4)(r),c=a.length;for(let e=0;e<c;e++)t.push((0,o.C$)(a[e],{modifiers:s.LY,structs:n}))}}if(0===t.length)throw new r.$r({params:e});return t}}}]);