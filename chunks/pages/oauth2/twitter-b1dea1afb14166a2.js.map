{"version":3,"file":"static/chunks/pages/oauth2/twitter-b1dea1afb14166a2.js","mappings":"uFACKA,OAAOC,SAAWD,OAAOC,UAAY,IAAIC,KAAK,CAC7C,kBACA,WACE,OAAO,EAAQ,MACjB,G,kICDS,SAASC,IACtB,MAAM,MAAEC,IAAUC,EAAAA,EAAAA,cACXC,EAAWC,IAAgBC,EAAAA,EAAAA,WAAS,IAErC,KAAEC,EAAI,OAAEC,GAAWN,EAuBzB,OArBAO,EAAAA,EAAAA,YAAU,KACR,GAAIF,EAAM,CACR,MAAMG,EAAK,IAAIC,iBAAiB,eAChCC,EAAAA,EACGC,KAAK,0BAAyCL,OAAfD,EAAK,YAAiB,OAAPC,IAC9CM,MAAMC,IACL,MAAM,QAAEC,GAAYD,EAAIE,KAExBP,EAAGQ,YAAY,CAAEF,WAAU,IAE5BG,OAAM,KACLT,EAAGQ,YAAY,CAAEF,SAAS,GAAQ,IAEnCI,SAAQ,KACPf,GAAa,GACbP,OAAOuB,OAAO,GAEpB,IACC,CAACd,IAGGH,GACL,SAACkB,MAAAA,C,SAAI,oBAEL,SAACA,MAAAA,CAAIC,UAAU,iBAAiBC,QAAS,IAAM1B,OAAOuB,Q,SAAS,2BAInE,C","sources":["webpack://_N_E/?c81a","webpack://_N_E/./pages/oauth2/twitter.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/oauth2/twitter\",\n      function () {\n        return require(\"private-next-pages/oauth2/twitter.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/oauth2/twitter\"])\n      });\n    }\n  ","import axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\n\nexport default function AuthorizeTwitter() {\n  const { query } = useRouter();\n  const [isLoading, setIsLoading] = useState(true);\n\n  const { code, userId } = query;\n\n  useEffect(() => {\n    if (code) {\n      const bc = new BroadcastChannel(\"glo-channel\");\n      axios\n        .post(`/api/auth/twitter?code=${code}&userId=${userId}`)\n        .then((res) => {\n          const { success } = res.data;\n\n          bc.postMessage({ success });\n        })\n        .catch(() => {\n          bc.postMessage({ success: false });\n        })\n        .finally(() => {\n          setIsLoading(false);\n          window.close();\n        });\n    }\n  }, [code]);\n\n  // Fallback in case window is not closed automagically\n  return isLoading ? (\n    <div>Authorizing...</div>\n  ) : (\n    <div className=\"cursor-pointer\" onClick={() => window.close()}>\n      Click close to continue\n    </div>\n  );\n}\n"],"names":["window","__NEXT_P","push","AuthorizeTwitter","query","useRouter","isLoading","setIsLoading","useState","code","userId","useEffect","bc","BroadcastChannel","axios","post","then","res","success","data","postMessage","catch","finally","close","div","className","onClick"],"sourceRoot":""}