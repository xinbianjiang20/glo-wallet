(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4070],{64871:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.xBullWalletConnect=void 0;const s=n(50780),o=n(16885),a=n(63849),c=n(8921),l=n(14735);t.xBullWalletConnect=class{constructor(e){this.closeCurrentPromises$=new c.Subject,this.closeObservables$=new c.Subject,this.initialResponse$=new c.Subject,this.initialResponseCompleted$=new c.Subject,this.connectResponse$=new c.Subject,this.connectResult$=new c.Subject,this.signResponse$=new c.Subject,this.signResult$=new c.Subject,this.closeCurrentPromisesSubscription=(0,c.timer)(1e3,1e3).pipe((0,c.takeUntil)(this.closeObservables$)).subscribe((()=>{var e;(null===(e=this.target)||void 0===e?void 0:e.closed)&&this.closeCurrentPromises$.next()})),this.onInititalResponseSubscription=this.initialResponse$.pipe((0,c.takeUntil)(this.closeObservables$)).subscribe((e=>{const t=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:e.data.publicKey});JSON.parse(t).providedSession===this.session()&&(this.targetPublicKey=e.data.publicKey,this.initialResponseCompleted$.next())})),this.onConnectResponseSubscription=this.connectResponse$.pipe((0,c.takeUntil)(this.closeObservables$)).subscribe((e=>{if(!this.targetPublicKey)return void this.connectResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!e.data.success)return void this.connectResult$.next({success:!1,message:"Request rejected from the wallet"});const t=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:this.targetPublicKey}),n=JSON.parse(t);this.connectResult$.next({success:!0,publicKey:n.publicKey})})),this.onSignResponseSubscription=this.signResponse$.pipe((0,c.takeUntil)(this.closeObservables$)).subscribe((e=>{if(!this.targetPublicKey)return void this.signResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!e.data.success)return void this.signResult$.next({success:!1,message:"Request rejected from the wallet"});const t=this.decryptFromReceiver({oneTimeCode:e.data.oneTimeCode,payload:e.data.message,senderPublicKey:this.targetPublicKey}),n=JSON.parse(t);this.signResult$.next({success:!0,xdr:n.xdr})})),this.preferredTarget=(null===e||void 0===e?void 0:e.preferredTarget)||"extension",this.walletUrl=(null===e||void 0===e?void 0:e.url)||"https://wallet.xbull.app/connect";const t=s.box.keyPair(),n=(0,o.encodeBase64)((0,s.randomBytes)(24));this.encryptForReceiver=e=>{const n=(0,s.randomBytes)(24),r=(0,s.box)((0,o.decodeUTF8)(e.data),n,e.receiverPublicKey,t.secretKey);return{message:(0,o.encodeBase64)(r),oneTimeCode:(0,o.encodeBase64)(n)}},this.decryptFromReceiver=e=>{const n=s.box.open((0,o.decodeBase64)(e.payload),(0,o.decodeBase64)(e.oneTimeCode),(0,o.decodeBase64)(e.senderPublicKey),t.secretKey);if(!n)throw new Error("Decrypted message is null");return(0,o.encodeUTF8)(n)},this.publicKey=()=>t.publicKey,this.session=()=>n.slice();const r=e=>{switch(e.data.type){case a.EventType.XBULL_INITIAL_RESPONSE:this.initialResponse$.next(e);break;case a.EventType.XBULL_CONNECT_RESPONSE:this.connectResponse$.next(e);break;case a.EventType.XBULL_SIGN_RESPONSE:this.signResponse$.next(e)}};window.addEventListener("message",r),this.closeObservables$.asObservable().pipe((0,c.take)(1)).subscribe((()=>{window.removeEventListener("message",r)}))}openWallet(){return this.target&&!this.target.closed&&(this.target.close(),this.target=null,this.closeCurrentPromises$.next()),this.target=window.open(`${this.walletUrl}?public=${encodeURIComponent((0,o.encodeBase64)(this.publicKey()))}&session=${encodeURIComponent(this.session())}`,"xBull_Wallet_app","width=380,height=640,left=100,top=100"),(0,c.firstValueFrom)(this.initialResponseCompleted$.pipe((0,c.takeUntil)(this.closeCurrentPromises$)).pipe((0,c.takeUntil)(this.closeObservables$)))}closeWallet(){var e;this.target&&(null===(e=this.target)||void 0===e||e.close(),this.target=null)}connect(e={canRequestPublicKey:!0,canRequestSign:!0}){var t,n;return r(this,void 0,void 0,(function*(){const r=(null===(n=null===(t=null===window||void 0===window?void 0:window.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.cordova_iab)?new l.xBullSDK:window.xBullSDK;if(r&&"extension"===this.preferredTarget)return yield r.connect(e),r.getPublicKey();{if(yield this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");const{message:t,oneTimeCode:n}=this.encryptForReceiver({data:JSON.stringify(e),receiverPublicKey:(0,o.decodeBase64)(this.targetPublicKey)}),r={type:a.EventType.XBULL_CONNECT,message:t,oneTimeCode:n};this.target.postMessage(r,"*");const i=this.connectResult$.asObservable().pipe((0,c.switchMap)((e=>e.success?(this.closeWallet(),(0,c.of)(e.publicKey)):(this.closeWallet(),(0,c.throwError)((()=>new Error(e.message))))))).pipe((0,c.take)(1)).pipe((0,c.takeUntil)(this.closeCurrentPromises$)).pipe((0,c.takeUntil)(this.closeObservables$));return(0,c.firstValueFrom)(i)}}))}sign(e){var t,n;return r(this,void 0,void 0,(function*(){const r=(null===(n=null===(t=null===window||void 0===window?void 0:window.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.cordova_iab)?new l.xBullSDK:window.xBullSDK;if(r&&"extension"===this.preferredTarget){const{xdr:t}=e,n=i(e,["xdr"]);return r.signXDR(t,n)}{if(yield this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");if("string"!==typeof e.xdr)throw new Error("XDR provided needs to be a string value");const{message:t,oneTimeCode:n}=this.encryptForReceiver({data:JSON.stringify(e),receiverPublicKey:(0,o.decodeBase64)(this.targetPublicKey)}),r={type:a.EventType.XBULL_SIGN,message:t,oneTimeCode:n};this.target.postMessage(r,"*");const i=this.signResult$.asObservable().pipe((0,c.switchMap)((e=>e.success?(this.closeWallet(),(0,c.of)(e.xdr)):(this.closeWallet(),(0,c.throwError)((()=>new Error(e.message))))))).pipe((0,c.take)(1)).pipe((0,c.takeUntil)(this.closeCurrentPromises$)).pipe((0,c.takeUntil)(this.closeObservables$));return(0,c.firstValueFrom)(i)}}))}closeConnections(){this.closeObservables$.next(),this.closeCurrentPromises$.next(),this.closeObservables$.complete(),this.closeCurrentPromises$.complete()}}},63849:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventType=void 0,function(e){e.XBULL_INITIAL_RESPONSE="XBULL_INITIAL_RESPONSE",e.XBULL_CONNECT="XBULL_CONNECT",e.XBULL_CONNECT_RESPONSE="XBULL_CONNECT_RESPONSE",e.XBULL_SIGN="XBULL_SIGN",e.XBULL_SIGN_RESPONSE="XBULL_SIGN_RESPONSE"}(t.EventType||(t.EventType={}))},14735:function(e,t){"use strict";var n,r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.xBullSDK=t.IRuntimeErrorResponseType=t.EventTypes=void 0,function(e){e.XBULL_CONNECT="XBULL_CONNECT",e.XBULL_GET_PUBLIC_KEY="XBULL_GET_PUBLIC_KEY",e.XBULL_SIGN_XDR="XBULL_SIGN_XDR"}(n=t.EventTypes||(t.EventTypes={})),function(e){e.CONNECTION_REJECTED="CONNECTION_REJECTED"}(t.IRuntimeErrorResponseType||(t.IRuntimeErrorResponseType={}));t.xBullSDK=class{constructor(){this.isConnected=!1}sendEventToContentScript(e,t){return new Promise((n=>{const r=((new Date).getTime()+Math.random()).toString(16),i=e=>{if(e.source!==window||!e.data||e.origin!==window.origin)return;e.data.eventId===r&&(n(e),window.removeEventListener("message",i,!1))};window.addEventListener("message",i,!1),window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:e,eventId:r,detail:t}))}))}connect(e){return r(this,void 0,void 0,(function*(){if(!e||!e.canRequestPublicKey&&!e.canRequestSign)throw new Error("Value sent is not valid");const t={origin:window.origin,host:window.location.host,permissions:e},r=yield this.sendEventToContentScript(n.XBULL_CONNECT,t),{detail:i}=r.data;if(!i||i.error)throw new Error((null===i||void 0===i?void 0:i.errorMessage)||"Unexpected error");return this.isConnected=!0,i.payload}))}getPublicKey(){return r(this,void 0,void 0,(function*(){const e={origin:window.origin,host:window.location.host},t=yield this.sendEventToContentScript(n.XBULL_GET_PUBLIC_KEY,e),{detail:r}=t.data;if(!r||r.error)throw new Error((null===r||void 0===r?void 0:r.errorMessage)||"Unexpected error");return r.payload}))}signXDR(e,t){return r(this,void 0,void 0,(function*(){const r={origin:window.origin,host:window.location.host,network:null===t||void 0===t?void 0:t.network,publicKey:null===t||void 0===t?void 0:t.publicKey,xdr:e},i=yield this.sendEventToContentScript(n.XBULL_SIGN_XDR,r),{detail:s}=i.data;if(!s||s.error)throw new Error((null===s||void 0===s?void 0:s.errorMessage)||"Unexpected error");return s.payload}))}}},19978:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEARTBEAT_EVENTS=t.HEARTBEAT_INTERVAL=void 0;const r=n(66736);t.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,t.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},59602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(70655).__exportStar(n(19978),t)},53192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeat=void 0;const r=n(70655),i=n(17187),s=n(66736),o=n(58090),a=n(59602);class c extends o.IHeartBeat{constructor(e){super(e),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(null===e||void 0===e?void 0:e.interval)||a.HEARTBEAT_INTERVAL}static init(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=new c(e);return yield t.init(),t}))}init(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return r.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),s.toMiliseconds(this.interval))}))}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}t.HeartBeat=c},53531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70655);r.__exportStar(n(53192),t),r.__exportStar(n(58090),t),r.__exportStar(n(59602),t)},34019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHeartBeat=void 0;const r=n(30997);class i extends r.IEvents{constructor(e){super()}}t.IHeartBeat=i},58090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(70655).__exportStar(n(34019),t)},77349:function(e){e.exports=(()=>{"use strict";var e,t,n,r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};r.r(i),r.d(i,{default:()=>d,getPublicKey:()=>a,isBrowser:()=>u,isConnected:()=>l,signTransaction:()=>c}),function(e){e.LOAD_STATE="LOAD_STATE",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.GRANT_ACCESS="GRANT_ACCESS",e.REJECT_ACCESS="REJECT_ACCESS"}(e||(e={})),function(e){e.REQUEST_ACCESS="REQUEST_ACCESS",e.SIGN_TRANSACTION="SUBMIT_TRANSACTION",e.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS"}(t||(t={})),function(e){e.pending="pending",e.signed="signed",e.rejected="rejected"}(n||(n={}));const s="LOBSTR_CONNECTION_KEY",o=e=>{const n=Date.now()+Math.random();return window.postMessage({source:"LOBSTR_EXTERNAL_MSG_REQUEST",messageId:n,...e},window.location.origin),new Promise((r=>{let i=0;e.type===t.REQUEST_CONNECTION_STATUS&&(i=setTimeout((()=>{r({isConnected:!1}),window.removeEventListener("message",s)}),2e3));const s=e=>{var t,o;e.source===window&&"LOBSTR_EXTERNAL_MSG_RESPONSE"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.source)&&(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.messagedId)===n&&(r(e.data),window.removeEventListener("message",s),clearTimeout(i))};window.addEventListener("message",s,!1)}))},a=async()=>{if(!u)return"";const{publicKey:e,connectionKey:n}=await(async()=>{let e={publicKey:"",error:"",connectionKey:""};try{e=await o({type:t.REQUEST_ACCESS})}catch(e){console.error(e)}const{publicKey:n,connectionKey:r,error:i}=e;if(i)throw i;return{publicKey:n,connectionKey:r}})();return(e=>{var t;null===(t=null===window||void 0===window?void 0:window.sessionStorage)||void 0===t||t.setItem(s,e)})(n),e},c=async e=>{if(!u)return"";const n=(null===(r=null===window||void 0===window?void 0:window.sessionStorage)||void 0===r?void 0:r.getItem(s))||"";var r;return await(async(e,n)=>{let r={signedTransaction:"",error:""};try{r=await o({transactionXdr:e,connectionKey:n,type:t.SIGN_TRANSACTION})}catch(e){throw console.error(e),e}const{signedTransaction:i,error:s}=r;if(s)throw s;return i})(e,n)},l=async()=>!!u&&(window.lobstrSignerExtension?window.lobstrSignerExtension:await(async()=>{let e={isConnected:!1};try{e=await o({type:t.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return e.isConnected})()),u="undefined"!=typeof window,d={getPublicKey:a,signTransaction:c,isConnected:l};return i})()},78175:function(e){e.exports=(()=>{"use strict";var e,t,n={d:(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};n.r(r),n.d(r,{default:()=>y,getNetwork:()=>u,getNetworkDetails:()=>d,getPublicKey:()=>s,getUserInfo:()=>f,isAllowed:()=>h,isBrowser:()=>g,isConnected:()=>l,requestAccess:()=>m,setAllowed:()=>p,signAuthEntry:()=>c,signBlob:()=>a,signTransaction:()=>o}),function(e){e.CREATE_ACCOUNT="CREATE_ACCOUNT",e.FUND_ACCOUNT="FUND_ACCOUNT",e.ADD_ACCOUNT="ADD_ACCOUNT",e.IMPORT_ACCOUNT="IMPORT_ACCOUNT",e.IMPORT_HARDWARE_WALLET="IMPORT_HARDWARE_WALLET",e.LOAD_ACCOUNT="LOAD_ACCOUNT",e.MAKE_ACCOUNT_ACTIVE="MAKE_ACCOUNT_ACTIVE",e.UPDATE_ACCOUNT_NAME="UPDATE_ACCOUNT_NAME",e.GET_MNEMONIC_PHRASE="GET_MNEMONIC_PHRASE",e.CONFIRM_MNEMONIC_PHRASE="CONFIRM_MNEMONIC_PHRASE",e.CONFIRM_MIGRATED_MNEMONIC_PHRASE="CONFIRM_MIGRATED_MNEMONIC_PHRASE",e.RECOVER_ACCOUNT="RECOVER_ACCOUNT",e.CONFIRM_PASSWORD="CONFIRM_PASSWORD",e.REJECT_ACCESS="REJECT_ACCESS",e.GRANT_ACCESS="GRANT_ACCESS",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.SIGN_BLOB="SIGN_BLOB",e.SIGN_AUTH_ENTRY="SIGN_AUTH_ENTRY",e.HANDLE_SIGNED_HW_TRANSACTION="HANDLE_SIGNED_HW_TRANSACTION",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.SIGN_FREIGHTER_TRANSACTION="SIGN_FREIGHTER_TRANSACTION",e.SIGN_FREIGHTER_SOROBAN_TRANSACTION="SIGN_FREIGHTER_SOROBAN_TRANSACTION",e.ADD_RECENT_ADDRESS="ADD_RECENT_ADDRESS",e.LOAD_RECENT_ADDRESSES="LOAD_RECENT_ADDRESSES",e.SIGN_OUT="SIGN_OUT",e.SHOW_BACKUP_PHRASE="SHOW_BACKUP_PHRASE",e.SAVE_ALLOWLIST="SAVE_ALLOWLIST",e.SAVE_SETTINGS="SAVE_SETTINGS",e.LOAD_SETTINGS="LOAD_SETTINGS",e.GET_CACHED_ASSET_ICON="GET_CACHED_ASSET_ICON",e.CACHE_ASSET_ICON="CACHE_ASSET_ICON",e.GET_CACHED_ASSET_DOMAIN="GET_CACHED_ASSET_DOMAIN",e.CACHE_ASSET_DOMAIN="CACHE_ASSET_DOMAIN",e.GET_BLOCKED_ACCOUNTS="GET_BLOCKED_ACCOUNTS",e.GET_BLOCKED_DOMAINS="GET_BLOCKED_DOMAINS",e.ADD_CUSTOM_NETWORK="ADD_CUSTOM_NETWORK",e.CHANGE_NETWORK="CHANGE_NETWORK",e.REMOVE_CUSTOM_NETWORK="REMOVE_CUSTOM_NETWORK",e.EDIT_CUSTOM_NETWORK="EDIT_CUSTOM_NETWORK",e.RESET_EXP_DATA="RESET_EXP_DATA",e.ADD_TOKEN_ID="ADD_TOKEN_ID",e.GET_TOKEN_IDS="GET_TOKEN_IDS",e.REMOVE_TOKEN_ID="REMOVE_TOKEN_ID",e.GET_MIGRATABLE_ACCOUNTS="GET_MIGRATABLE_ACCOUNTS",e.GET_MIGRATED_MNEMONIC_PHRASE="GET_MIGRATED_MNEMONIC_PHRASE",e.MIGRATE_ACCOUNTS="MIGRATE_ACCOUNTS"}(e||(e={})),function(e){e.REQUEST_ACCESS="REQUEST_ACCESS",e.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",e.SUBMIT_TRANSACTION="SUBMIT_TRANSACTION",e.SUBMIT_BLOB="SUBMIT_BLOB",e.SUBMIT_AUTH_ENTRY="SUBMIT_AUTH_ENTRY",e.REQUEST_NETWORK="REQUEST_NETWORK",e.REQUEST_NETWORK_DETAILS="REQUEST_NETWORK_DETAILS",e.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS",e.REQUEST_ALLOWED_STATUS="REQUEST_ALLOWED_STATUS",e.SET_ALLOWED_STATUS="SET_ALLOWED_STATUS",e.REQUEST_USER_INFO="REQUEST_USER_INFO"}(t||(t={}));const i=e=>{const n=Date.now()+Math.random();return window.postMessage({source:"FREIGHTER_EXTERNAL_MSG_REQUEST",messageId:n,...e},window.location.origin),new Promise((r=>{let i=0;e.type!==t.REQUEST_CONNECTION_STATUS&&e.type!==t.REQUEST_PUBLIC_KEY||(i=setTimeout((()=>{r({isConnected:!1,publicKey:""}),window.removeEventListener("message",s)}),2e3));const s=e=>{var t,o;e.source===window&&"FREIGHTER_EXTERNAL_MSG_RESPONSE"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.source)&&(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.messagedId)===n&&(r(e.data),window.removeEventListener("message",s),clearTimeout(i))};window.addEventListener("message",s,!1)}))},s=()=>g?(async()=>{let e={publicKey:"",error:""};try{e=await i({type:t.REQUEST_PUBLIC_KEY})}catch(e){console.error(e)}const{publicKey:n,error:r}=e;if(r)throw r;return n})():Promise.resolve(""),o=(e,n)=>g?(async(e,n,r)=>{let s="",o="",a="";"object"==typeof n?(s=n.network||"",o=n.accountToSign||"",a=n.networkPassphrase||""):(s=n||"",o="");let c={signedTransaction:"",error:""};try{c=await i({transactionXdr:e,network:s,networkPassphrase:a,accountToSign:o,type:t.SUBMIT_TRANSACTION})}catch(e){throw console.error(e),e}const{signedTransaction:l,error:u}=c;if(u)throw u;return l})(e,n):Promise.resolve(""),a=(e,n)=>g?(async(e,n)=>{let r={signedBlob:"",error:""};const s=(n||{}).accountToSign||"";try{r=await i({blob:e,accountToSign:s,type:t.SUBMIT_BLOB})}catch(e){throw console.error(e),e}const{signedBlob:o,error:a}=r;if(a)throw a;return o})(e,n):Promise.resolve(""),c=(e,n)=>g?(async(e,n)=>{let r={signedAuthEntry:"",error:""};const s=(n||{}).accountToSign||"";try{r=await i({entryXdr:e,accountToSign:s,type:t.SUBMIT_AUTH_ENTRY})}catch(e){console.error(e)}const{signedAuthEntry:o,error:a}=r;if(a)throw a;return o})(e,n):Promise.resolve(""),l=()=>g?window.freighter?Promise.resolve(window.freighter):(async()=>{let e={isConnected:!1};try{e=await i({type:t.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return e.isConnected})():Promise.resolve(!1),u=()=>g?(async()=>{let e={network:"",error:""};try{e=await i({type:t.REQUEST_NETWORK})}catch(e){console.error(e)}const{network:n,error:r}=e;if(r)throw r;return n})():Promise.resolve(""),d=()=>g?(async()=>{let e={networkDetails:{network:"",networkName:"",networkUrl:"",networkPassphrase:"",sorobanRpcUrl:void 0},error:""};try{e=await i({type:t.REQUEST_NETWORK_DETAILS})}catch(e){console.error(e)}const{networkDetails:n,error:r}=e,{network:s,networkUrl:o,networkPassphrase:a,sorobanRpcUrl:c}=n;if(r)throw r;return{network:s,networkUrl:o,networkPassphrase:a,sorobanRpcUrl:c}})():Promise.resolve({network:"",networkUrl:"",networkPassphrase:"",sorobanRpcUrl:""}),h=()=>g?(async()=>{let e={isAllowed:!1};try{e=await i({type:t.REQUEST_ALLOWED_STATUS})}catch(e){console.error(e)}return e.isAllowed})():Promise.resolve(!1),p=()=>g?(async()=>{let e={isAllowed:!1,error:""};try{e=await i({type:t.SET_ALLOWED_STATUS})}catch(e){console.error(e)}const{isAllowed:n,error:r}=e;if(r)throw r;return n})():Promise.resolve(!1),f=()=>g?(async()=>{let e={userInfo:{publicKey:""},error:""};try{e=await i({type:t.REQUEST_USER_INFO})}catch(e){console.error(e)}const{userInfo:n,error:r}=e;if(r)throw r;return n})():Promise.resolve({publicKey:""}),m=()=>g?(async()=>{let e={publicKey:"",error:""};try{e=await i({type:t.REQUEST_ACCESS})}catch(e){console.error(e)}const{publicKey:n,error:r}=e;if(r)throw r;return n})():Promise.resolve(""),g="undefined"!=typeof window,y={getPublicKey:s,signTransaction:o,signBlob:a,signAuthEntry:c,isConnected:l,getNetwork:u,getNetworkDetails:d,isAllowed:h,setAllowed:p,getUserInfo:f,requestAccess:m};return r})()},4640:function(e,t,n){"use strict";n.d(t,{B:function(){return ds}});var r=n(37918),i=n.n(r),s=n(1581);var o=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const a=new s.Yd("properties/5.8.0");function c(e,t,n){Object.defineProperty(e,t,{enumerable:!0,value:n,writable:!1})}function l(e,t){for(let n=0;n<32;n++){if(e[t])return e[t];if(!e.prototype||"object"!==typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function u(e){return o(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const n=e[t];return Promise.resolve(n).then((e=>({key:t,value:e})))}));return(yield Promise.all(t)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})}))}function d(e){const t={};for(const n in e)t[n]=e[n];return t}const h={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function p(e){if(void 0===e||null===e||h[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;const n=Object.keys(e);for(let r=0;r<n.length;r++){let i=null;try{i=e[n[r]]}catch(t){continue}if(!p(i))return!1}return!0}return a.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function f(e){if(p(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>m(e))));if("object"===typeof e){const t={};for(const n in e){const r=e[n];void 0!==r&&c(t,n,m(r))}return t}return a.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function m(e){return f(e)}class g{constructor(e){for(const t in e)this[t]=m(e[t])}}const y="providers/5.8.0";var v=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const b=new s.Yd("abstract-signer/5.8.0"),w=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],E=[s.Yd.errors.INSUFFICIENT_FUNDS,s.Yd.errors.NONCE_EXPIRED,s.Yd.errors.REPLACEMENT_UNDERPRICED];class A{constructor(){b.checkAbstract(new.target,A),c(this,"_isSigner",!0)}getBalance(e){return v(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return v(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return v(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield u(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return v(this,void 0,void 0,(function*(){this._checkProvider("call");const n=yield u(this.checkTransaction(e));return yield this.provider.call(n,t)}))}sendTransaction(e){return v(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),n=yield this.signTransaction(t);return yield this.provider.sendTransaction(n)}))}getChainId(){return v(this,void 0,void 0,(function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return v(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return v(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(e){return v(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)}))}checkTransaction(e){for(const n in e)-1===w.indexOf(n)&&b.throwArgumentError("invalid transaction key: "+n,"transaction",e);const t=d(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&b.throwArgumentError("from address mismatch","transaction",e),t[0]))),t}populateTransaction(e){return v(this,void 0,void 0,(function*(){const t=yield u(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then((e=>v(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&b.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})))),t.to.catch((e=>{})));const n=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!n?0!==t.type&&1!==t.type||!n||b.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):b.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(n&&b.throwError("network does not support EIP-1559",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):b.throwError("failed to get consistent fee data",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch((e=>{if(E.indexOf(e.code)>=0)throw e;return b.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",s.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>(0!==t[1]&&t[0]!==t[1]&&b.throwArgumentError("chainId address mismatch","transaction",e),t[0]))),yield u(t)}))}_checkProvider(e){this.provider||b.throwError("missing provider",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class T extends A{constructor(e,t){super(),c(this,"address",e),c(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then((()=>{b.throwError(e,s.Yd.errors.UNSUPPORTED_OPERATION,{operation:t})}))}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new T(this.address,e)}}var S=n(13550),x=n.n(S),I=n(16441);var P=x().BN;const _=new s.Yd("bignumber/5.8.0"),R={},C=9007199254740991;let N=!1;class O{constructor(e,t){e!==R&&_.throwError("cannot call constructor directly; use BigNumber.from",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return M(D(this).fromTwos(e))}toTwos(e){return M(D(this).toTwos(e))}abs(){return"-"===this._hex[0]?O.from(this._hex.substring(1)):this}add(e){return M(D(this).add(D(e)))}sub(e){return M(D(this).sub(D(e)))}div(e){return O.from(e).isZero()&&L("division-by-zero","div"),M(D(this).div(D(e)))}mul(e){return M(D(this).mul(D(e)))}mod(e){const t=D(e);return t.isNeg()&&L("division-by-zero","mod"),M(D(this).umod(t))}pow(e){const t=D(e);return t.isNeg()&&L("negative-power","pow"),M(D(this).pow(t))}and(e){const t=D(e);return(this.isNegative()||t.isNeg())&&L("unbound-bitwise-result","and"),M(D(this).and(t))}or(e){const t=D(e);return(this.isNegative()||t.isNeg())&&L("unbound-bitwise-result","or"),M(D(this).or(t))}xor(e){const t=D(e);return(this.isNegative()||t.isNeg())&&L("unbound-bitwise-result","xor"),M(D(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&L("negative-width","mask"),M(D(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&L("negative-width","shl"),M(D(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&L("negative-width","shr"),M(D(this).shrn(e))}eq(e){return D(this).eq(D(e))}lt(e){return D(this).lt(D(e))}lte(e){return D(this).lte(D(e))}gt(e){return D(this).gt(D(e))}gte(e){return D(this).gte(D(e))}isNegative(){return"-"===this._hex[0]}isZero(){return D(this).isZero()}toNumber(){try{return D(this).toNumber()}catch(e){L("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return _.throwError("this platform does not support BigInt",s.Yd.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?N||(N=!0,_.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?_.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",s.Yd.errors.UNEXPECTED_ARGUMENT,{}):_.throwError("BigNumber.toString does not accept parameters",s.Yd.errors.UNEXPECTED_ARGUMENT,{})),D(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof O)return e;if("string"===typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new O(R,k(e)):e.match(/^-?[0-9]+$/)?new O(R,k(new P(e))):_.throwArgumentError("invalid BigNumber string","value",e);if("number"===typeof e)return e%1&&L("underflow","BigNumber.from",e),(e>=C||e<=-C)&&L("overflow","BigNumber.from",e),O.from(String(e));const t=e;if("bigint"===typeof t)return O.from(t.toString());if((0,I.isBytes)(t))return O.from((0,I.hexlify)(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"===typeof e)return O.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"===typeof e&&((0,I.isHexString)(e)||"-"===e[0]&&(0,I.isHexString)(e.substring(1))))return O.from(e)}return _.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function k(e){if("string"!==typeof e)return k(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&_.throwArgumentError("invalid hex","value",e),"0x00"===(e=k(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function M(e){return O.from(k(e))}function D(e){const t=O.from(e).toHexString();return"-"===t[0]?new P("-"+t.substring(3),16):new P(t.substring(2),16)}function L(e,t,n){const r={fault:e,operation:t};return null!=n&&(r.value=n),_.throwError(e,s.Yd.errors.NUMERIC_FAULT,r)}var U=n(21206),B=n.n(U);function F(e){return"0x"+B().keccak_256((0,I.arrayify)(e))}const q=new s.Yd("rlp/5.8.0");function j(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function V(e,t,n){let r=0;for(let i=0;i<n;i++)r=256*r+e[t+i];return r}function z(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(z(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=j(t.length);return n.unshift(247+n.length),n.concat(t)}(0,I.isBytesLike)(e)||q.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call((0,I.arrayify)(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=j(t.length);return n.unshift(183+n.length),n.concat(t)}function H(e){return(0,I.hexlify)(z(e))}function K(e,t,n,r){const i=[];for(;n<t+1+r;){const o=G(e,n);i.push(o.result),(n+=o.consumed)>t+1+r&&q.throwError("child data too short",s.Yd.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function G(e,t){if(0===e.length&&q.throwError("data too short",s.Yd.errors.BUFFER_OVERRUN,{}),e[t]>=248){const n=e[t]-247;t+1+n>e.length&&q.throwError("data short segment too short",s.Yd.errors.BUFFER_OVERRUN,{});const r=V(e,t+1,n);return t+1+n+r>e.length&&q.throwError("data long segment too short",s.Yd.errors.BUFFER_OVERRUN,{}),K(e,t,t+1+n,n+r)}if(e[t]>=192){const n=e[t]-192;return t+1+n>e.length&&q.throwError("data array too short",s.Yd.errors.BUFFER_OVERRUN,{}),K(e,t,t+1,n)}if(e[t]>=184){const n=e[t]-183;t+1+n>e.length&&q.throwError("data array too short",s.Yd.errors.BUFFER_OVERRUN,{});const r=V(e,t+1,n);t+1+n+r>e.length&&q.throwError("data array too short",s.Yd.errors.BUFFER_OVERRUN,{});return{consumed:1+n+r,result:(0,I.hexlify)(e.slice(t+1+n,t+1+n+r))}}if(e[t]>=128){const n=e[t]-128;t+1+n>e.length&&q.throwError("data too short",s.Yd.errors.BUFFER_OVERRUN,{});return{consumed:1+n,result:(0,I.hexlify)(e.slice(t+1,t+1+n))}}return{consumed:1,result:(0,I.hexlify)(e[t])}}function W(e){const t=(0,I.arrayify)(e),n=G(t,0);return n.consumed!==t.length&&q.throwArgumentError("invalid rlp data","data",e),n.result}const Y=new s.Yd("address/5.8.0");function $(e){(0,I.isHexString)(e,20)||Y.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=t[i].charCodeAt(0);const r=(0,I.arrayify)(F(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(15&r[i>>1])>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const J={};for(let hs=0;hs<10;hs++)J[String(hs)]=String(hs);for(let hs=0;hs<26;hs++)J[String.fromCharCode(65+hs)]=String(10+hs);const Q=Math.floor((X=9007199254740991,Math.log10?Math.log10(X):Math.log(X)/Math.LN10));var X;function Z(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>J[e])).join("");for(;t.length>=Q;){let e=t.substring(0,Q);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}function ee(e){let t=null;if("string"!==typeof e&&Y.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=$(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Y.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Z(e)&&Y.throwArgumentError("bad icap checksum","address",e),n=e.substring(4),t=new P(n,36).toString(16);t.length<40;)t="0"+t;t=$("0x"+t)}else Y.throwArgumentError("invalid address","address",e);var n;return t}function te(e){try{return ee(e),!0}catch(t){}return!1}function ne(e){let t=null;try{t=ee(e.from)}catch(r){Y.throwArgumentError("missing from address","transaction",e)}const n=(0,I.stripZeros)((0,I.arrayify)(O.from(e.nonce).toHexString()));return ee((0,I.hexDataSlice)(F(H([t,n])),12))}const re="hash/5.8.0",ie=new s.Yd("strings/5.8.0");var se,oe;function ae(e,t,n,r,i){if(e===oe.BAD_PREFIX||e===oe.UNEXPECTED_CONTINUE){let e=0;for(let r=t+1;r<n.length&&n[r]>>6===2;r++)e++;return e}return e===oe.OVERRUN?n.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(se||(se={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(oe||(oe={}));const ce=Object.freeze({error:function(e,t,n,r,i){return ie.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:ae,replace:function(e,t,n,r,i){return e===oe.OVERLONG?(r.push(i),0):(r.push(65533),ae(e,t,n))}});function le(e,t){null==t&&(t=ce.error),e=(0,I.arrayify)(e);const n=[];let r=0;for(;r<e.length;){const i=e[r++];if(i>>7===0){n.push(i);continue}let s=null,o=null;if(192===(224&i))s=1,o=127;else if(224===(240&i))s=2,o=2047;else{if(240!==(248&i)){r+=t(128===(192&i)?oe.UNEXPECTED_CONTINUE:oe.BAD_PREFIX,r-1,e,n);continue}s=3,o=65535}if(r-1+s>=e.length){r+=t(oe.OVERRUN,r-1,e,n);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let i=e[r];if(128!=(192&i)){r+=t(oe.MISSING_CONTINUE,r,e,n),a=null;break}a=a<<6|63&i,r++}null!==a&&(a>1114111?r+=t(oe.OUT_OF_RANGE,r-1-s,e,n,a):a>=55296&&a<=57343?r+=t(oe.UTF16_SURROGATE,r-1-s,e,n,a):a<=o?r+=t(oe.OVERLONG,r-1-s,e,n,a):n.push(a))}return n}function ue(e,t=se.current){t!=se.current&&(ie.checkNormalize(),e=e.normalize(t));let n=[];for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);if(t<128)n.push(t);else if(t<2048)n.push(t>>6|192),n.push(63&t|128);else if(55296==(64512&t)){r++;const i=e.charCodeAt(r);if(r>=e.length||56320!==(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&t)<<10)+(1023&i);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(t>>12|224),n.push(t>>6&63|128),n.push(63&t|128)}return(0,I.arrayify)(n)}function de(e,t){return le(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}function he(e){return F(ue(e))}var pe=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const fe=new s.Yd(re),me=new Uint8Array(32);me.fill(0);const ge=O.from(-1),ye=O.from(0),ve=O.from(1),be=O.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const we=(0,I.hexZeroPad)(ve.toHexString(),32),Ee=(0,I.hexZeroPad)(ye.toHexString(),32),Ae={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Te=["name","version","chainId","verifyingContract","salt"];function Se(e){return function(t){return"string"!==typeof t&&fe.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const xe={name:Se("name"),version:Se("version"),chainId:function(e){try{return O.from(e).toString()}catch(t){}return fe.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return ee(e).toLowerCase()}catch(t){}return fe.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=(0,I.arrayify)(e);if(32!==t.length)throw new Error("bad length");return(0,I.hexlify)(t)}catch(t){}return fe.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Ie(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const n=""===t[1],r=parseInt(t[2]||"256");(r%8!==0||r>256||t[2]&&t[2]!==String(r))&&fe.throwArgumentError("invalid numeric width","type",e);const i=be.mask(n?r-1:r),s=n?i.add(ve).mul(ge):ye;return function(t){const n=O.from(t);return(n.lt(s)||n.gt(i))&&fe.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),(0,I.hexZeroPad)(n.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return(0===n||n>32||t[1]!==String(n))&&fe.throwArgumentError("invalid bytes width","type",e),function(t){return(0,I.arrayify)(t).length!==n&&fe.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=(0,I.arrayify)(e),n=t.length%32;return n?(0,I.hexConcat)([t,me.slice(n)]):(0,I.hexlify)(t)}(t)}}}switch(e){case"address":return function(e){return(0,I.hexZeroPad)(ee(e),32)};case"bool":return function(e){return e?we:Ee};case"bytes":return function(e){return F(e)};case"string":return function(e){return he(e)}}return null}function Pe(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class _e{constructor(e){c(this,"types",Object.freeze(m(e))),c(this,"_encoderCache",{}),c(this,"_types",{});const t={},n={},r={};Object.keys(e).forEach((e=>{t[e]={},n[e]=[],r[e]={}}));for(const s in e){const r={};e[s].forEach((i=>{r[i.name]&&fe.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(s)}`,"types",e),r[i.name]=!0;const o=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===s&&fe.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e);Ie(o)||(n[o]||fe.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",e),n[o].push(s),t[s][o]=!0)}))}const i=Object.keys(n).filter((e=>0===n[e].length));0===i.length?fe.throwArgumentError("missing primary type","types",e):i.length>1&&fe.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),c(this,"primaryType",i[0]),function i(s,o){o[s]&&fe.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),o[s]=!0,Object.keys(t[s]).forEach((e=>{n[e]&&(i(e,o),Object.keys(o).forEach((t=>{r[t][e]=!0})))})),delete o[s]}(this.primaryType,{});for(const s in r){const t=Object.keys(r[s]);t.sort(),this._types[s]=Pe(s,e[s])+t.map((t=>Pe(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=Ie(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],n=this.getEncoder(e),r=parseInt(t[3]);return t=>{r>=0&&t.length!==r&&fe.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(n);return this._types[e]&&(i=i.map(F)),F((0,I.hexConcat)(i))}}const n=this.types[e];if(n){const t=he(this._types[e]);return e=>{const r=n.map((({name:t,type:n})=>{const r=this.getEncoder(n)(e[t]);return this._types[n]?F(r):r}));return r.unshift(t),(0,I.hexConcat)(r)}}return fe.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||fe.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return F(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Ie(e))return n(e,t);const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const e=r[1],i=parseInt(r[3]);return i>=0&&t.length!==i&&fe.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((t=>this._visit(e,t,n)))}const i=this.types[e];return i?i.reduce(((e,{name:r,type:i})=>(e[r]=this._visit(i,t[r],n),e)),{}):fe.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new _e(e)}static getPrimaryType(e){return _e.from(e).primaryType}static hashStruct(e,t,n){return _e.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const r=Ae[n];r||fe.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:r})}return t.sort(((e,t)=>Te.indexOf(e.name)-Te.indexOf(t.name))),_e.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return(0,I.hexConcat)(["0x1901",_e.hashDomain(e),_e.from(t).hash(n)])}static hash(e,t,n){return F(_e.encode(e,t,n))}static resolveNames(e,t,n,r){return pe(this,void 0,void 0,(function*(){e=d(e);const i={};e.verifyingContract&&!(0,I.isHexString)(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const s=_e.from(t);s.visit(n,((e,t)=>("address"!==e||(0,I.isHexString)(t,20)||(i[t]="0x"),t)));for(const e in i)i[e]=yield r(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=s.visit(n,((e,t)=>"address"===e&&i[t]?i[t]:t)),{domain:e,value:n}}))}static getPayload(e,t,n){_e.hashDomain(e);const r={},i=[];Te.forEach((t=>{const n=e[t];null!=n&&(r[t]=xe[t](n),i.push({name:t,type:Ae[t]}))}));const s=_e.from(t),o=d(t);return o.EIP712Domain?fe.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=i,s.encode(n),{types:o,domain:r,primaryType:s.primaryType,message:s.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return(0,I.hexlify)((0,I.arrayify)(t));if(e.match(/^u?int/))return O.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!==typeof t&&fe.throwArgumentError("invalid string","value",t),t}return fe.throwArgumentError("unsupported type","type",e)}))}}}const Re=O.from(-1),Ce=O.from(0),Ne=O.from(1),Oe=O.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ke=n(33715),Me=n.n(ke);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;function De(e,t,n){return n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&n.path)}},e(n,n.exports),n.exports}var Le=Ue;function Ue(e,t){if(!e)throw new Error(t||"Assertion failed")}Ue.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Be=De((function(e,t){var n=t;function r(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!==typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),s=i>>8,o=255&i;s?n.push(s,o):n.push(o)}return n},n.zero2=r,n.toHex=i,n.encode=function(e,t){return"hex"===t?i(e):e}})),Fe=De((function(e,t){var n=t;n.assert=Le,n.toArray=Be.toArray,n.zero2=Be.zero2,n.toHex=Be.toHex,n.encode=Be.encode,n.getNAF=function(e,t,n){var r,i=new Array(Math.max(e.bitLength(),n)+1);for(r=0;r<i.length;r+=1)i[r]=0;var s=1<<t+1,o=e.clone();for(r=0;r<i.length;r++){var a,c=o.andln(s-1);o.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,o.isubn(a)):a=0,i[r]=a,o.iushrn(1)}return i},n.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+i&3,l=t.andln(3)+s&3;3===c&&(c=-1),3===l&&(l=-1),o=0===(1&c)?0:3!==(r=e.andln(7)+i&7)&&5!==r||2!==l?c:-c,n[0].push(o),a=0===(1&l)?0:3!==(r=t.andln(7)+s&7)&&5!==r||2!==c?l:-l,n[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return n},n.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},n.parseBytes=function(e){return"string"===typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new(x())(e,"hex","le")}})),qe=Fe.getNAF,je=Fe.getJSF,Ve=Fe.assert;function ze(e,t){this.type=e,this.p=new(x())(t.p,16),this.red=t.prime?x().red(t.prime):x().mont(this.p),this.zero=new(x())(0).toRed(this.red),this.one=new(x())(1).toRed(this.red),this.two=new(x())(2).toRed(this.red),this.n=t.n&&new(x())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var He=ze;function Ke(e,t){this.curve=e,this.type=t,this.precomputed=null}ze.prototype.point=function(){throw new Error("Not implemented")},ze.prototype.validate=function(){throw new Error("Not implemented")},ze.prototype._fixedNafMul=function(e,t){Ve(e.precomputed);var n=e._getDoubles(),r=qe(t,1,this._bitLength),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;var s,o,a=[];for(s=0;s<r.length;s+=n.step){o=0;for(var c=s+n.step-1;c>=s;c--)o=(o<<1)+r[c];a.push(o)}for(var l=this.jpoint(null,null,null),u=this.jpoint(null,null,null),d=i;d>0;d--){for(s=0;s<a.length;s++)(o=a[s])===d?u=u.mixedAdd(n.points[s]):o===-d&&(u=u.mixedAdd(n.points[s].neg()));l=l.add(u)}return l.toP()},ze.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var i=r.points,s=qe(t,n,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var c=0;a>=0&&0===s[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var l=s[a];Ve(0!==l),o="affine"===e.type?l>0?o.mixedAdd(i[l-1>>1]):o.mixedAdd(i[-l-1>>1].neg()):l>0?o.add(i[l-1>>1]):o.add(i[-l-1>>1].neg())}return"affine"===e.type?o.toP():o},ze.prototype._wnafMulAdd=function(e,t,n,r,i){var s,o,a,c=this._wnafT1,l=this._wnafT2,u=this._wnafT3,d=0;for(s=0;s<r;s++){var h=(a=t[s])._getNAFPoints(e);c[s]=h.wnd,l[s]=h.points}for(s=r-1;s>=1;s-=2){var p=s-1,f=s;if(1===c[p]&&1===c[f]){var m=[t[p],null,null,t[f]];0===t[p].y.cmp(t[f].y)?(m[1]=t[p].add(t[f]),m[2]=t[p].toJ().mixedAdd(t[f].neg())):0===t[p].y.cmp(t[f].y.redNeg())?(m[1]=t[p].toJ().mixedAdd(t[f]),m[2]=t[p].add(t[f].neg())):(m[1]=t[p].toJ().mixedAdd(t[f]),m[2]=t[p].toJ().mixedAdd(t[f].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=je(n[p],n[f]);for(d=Math.max(y[0].length,d),u[p]=new Array(d),u[f]=new Array(d),o=0;o<d;o++){var v=0|y[0][o],b=0|y[1][o];u[p][o]=g[3*(v+1)+(b+1)],u[f][o]=0,l[p]=m}}else u[p]=qe(n[p],c[p],this._bitLength),u[f]=qe(n[f],c[f],this._bitLength),d=Math.max(u[p].length,d),d=Math.max(u[f].length,d)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(s=d;s>=0;s--){for(var A=0;s>=0;){var T=!0;for(o=0;o<r;o++)E[o]=0|u[o][s],0!==E[o]&&(T=!1);if(!T)break;A++,s--}if(s>=0&&A++,w=w.dblp(A),s<0)break;for(o=0;o<r;o++){var S=E[o];0!==S&&(S>0?a=l[o][S-1>>1]:S<0&&(a=l[o][-S-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(s=0;s<r;s++)l[s]=null;return i?w:w.toP()},ze.BasePoint=Ke,Ke.prototype.eq=function(){throw new Error("Not implemented")},Ke.prototype.validate=function(){return this.curve.validate(this)},ze.prototype.decodePoint=function(e,t){e=Fe.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*n)return 6===e[0]?Ve(e[e.length-1]%2===0):7===e[0]&&Ve(e[e.length-1]%2===1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},Ke.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Ke.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},Ke.prototype.encode=function(e,t){return Fe.encode(this._encode(t),e)},Ke.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Ke.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Ke.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)r=r.dbl();n.push(r)}return{step:e,points:n}},Ke.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},Ke.prototype._getBeta=function(){return null},Ke.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var Ge=De((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),We=Fe.assert;function Ye(e){He.call(this,"short",e),this.a=new(x())(e.a,16).toRed(this.red),this.b=new(x())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ge(Ye,He);var $e=Ye;function Je(e,t,n,r){He.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new(x())(t,16),this.y=new(x())(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Qe(e,t,n,r){He.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(x())(0)):(this.x=new(x())(t,16),this.y=new(x())(n,16),this.z=new(x())(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ye.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new(x())(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new(x())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?n=i[0]:(n=i[1],We(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new(x())(e.a,16),b:new(x())(e.b,16)}})):this._getEndoBasis(n)}}},Ye.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:x().mont(e),n=new(x())(2).toRed(t).redInvm(),r=n.redNeg(),i=new(x())(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},Ye.prototype._getEndoBasis=function(e){for(var t,n,r,i,s,o,a,c,l,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,h=this.n.clone(),p=new(x())(1),f=new(x())(0),m=new(x())(0),g=new(x())(1),y=0;0!==d.cmpn(0);){var v=h.div(d);c=h.sub(v.mul(d)),l=m.sub(v.mul(p));var b=g.sub(v.mul(f));if(!r&&c.cmp(u)<0)t=a.neg(),n=p,r=c.neg(),i=l;else if(r&&2===++y)break;a=c,h=d,d=c,m=p,p=l,g=f,f=b}s=c.neg(),o=l;var w=r.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=n),r.negative&&(r=r.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:i},{a:s,b:o}]},Ye.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),o=i.mul(n.a),a=s.mul(r.a),c=i.mul(n.b),l=s.mul(r.b);return{k1:e.sub(o).sub(a),k2:c.add(l).neg()}},Ye.prototype.pointFromX=function(e,t){(e=new(x())(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},Ye.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},Ye.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),r[2*s]=a,r[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var l=this._wnafMulAdd(1,r,i,2*s,n),u=0;u<2*s;u++)r[u]=null,i[u]=null;return l},Ge(Je,He.BasePoint),Ye.prototype.point=function(e,t,n){return new Je(this,e,t,n)},Ye.prototype.pointFromJSON=function(e,t){return Je.fromJSON(this,e,t)},Je.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},Je.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Je.fromJSON=function(e,t,n){"string"===typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var s=t[2];return r.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[r].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[r].concat(s.naf.points.map(i))}},r},Je.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Je.prototype.isInfinity=function(){return this.inf},Je.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},Je.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Je.prototype.getX=function(){return this.x.fromRed()},Je.prototype.getY=function(){return this.y.fromRed()},Je.prototype.mul=function(e){return e=new(x())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Je.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},Je.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},Je.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Je.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},Je.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Ge(Qe,He.BasePoint),Ye.prototype.jpoint=function(e,t,n){return new Qe(this,e,t,n)},Qe.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},Qe.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Qe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),a=r.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),d=r.redMul(l),h=c.redSqr().redIAdd(u).redISub(d).redISub(d),p=c.redMul(d.redISub(h)).redISub(s.redMul(u)),f=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,p,f)},Qe.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=n.redSub(r),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),l=c.redMul(o),u=n.redMul(c),d=a.redSqr().redIAdd(l).redISub(u).redISub(u),h=a.redMul(u.redISub(d)).redISub(i.redMul(l)),p=this.z.redMul(o);return this.curve.jpoint(d,h,p)},Qe.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),l=o.redAdd(o);for(t=0;t<e;t++){var u=s.redSqr(),d=l.redSqr(),h=d.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),f=s.redMul(d),m=p.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),y=p.redMul(g);y=y.redIAdd(y).redISub(h);var v=l.redMul(a);t+1<e&&(c=c.redMul(h)),s=m,a=v,l=y}return this.curve.jpoint(s,l.redMul(i),a)},Qe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Qe.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),c=a.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=a.redMul(o.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},Qe.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),t=a.redMul(o.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=h.redIAdd(h),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=p.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},Qe.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),s=t.redSqr(),o=n.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(o),u=a.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),h=o.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=a.redMul(d).redISub(h),f=n.redAdd(n).redMul(r);return this.curve.jpoint(u,p,f)},Qe.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(a).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(l.redMul(c.redISub(l)).redISub(o.redMul(a)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(a);return this.curve.jpoint(d,h,p)},Qe.prototype.mul=function(e,t){return e=new(x())(e,t),this.curve._wnafMul(this,e)},Qe.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},Qe.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},Qe.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Qe.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Xe=De((function(e,t){var n=t;n.base=He,n.short=$e,n.mont=null,n.edwards=null})),Ze=De((function(e,t){var n,r=t,i=Fe.assert;function s(e){"short"===e.type?this.curve=new Xe.short(e):"edwards"===e.type?this.curve=new Xe.edwards(e):this.curve=new Xe.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new s(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Me().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Me().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Me().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Me().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Me().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Me().sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Me().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=null.crash()}catch(a){n=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Me().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})}));function et(e){if(!(this instanceof et))return new et(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Be.toArray(e.entropy,e.entropyEnc||"hex"),n=Be.toArray(e.nonce,e.nonceEnc||"hex"),r=Be.toArray(e.pers,e.persEnc||"hex");Le(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}var tt=et;et.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},et.prototype._hmac=function(){return new(Me().hmac)(this.hash,this.K)},et.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},et.prototype.reseed=function(e,t,n,r){"string"!==typeof t&&(r=n,n=t,t=null),e=Be.toArray(e,t),n=Be.toArray(n,r),Le(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},et.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(r=n,n=t,t=null),n&&(n=Be.toArray(n,r||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(n),this._reseed++,Be.encode(s,t)};var nt=Fe.assert;function rt(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var it=rt;rt.fromPublic=function(e,t,n){return t instanceof rt?t:new rt(e,{pub:t,pubEnc:n})},rt.fromPrivate=function(e,t,n){return t instanceof rt?t:new rt(e,{priv:t,privEnc:n})},rt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},rt.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},rt.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},rt.prototype._importPrivate=function(e,t){this.priv=new(x())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},rt.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?nt(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||nt(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},rt.prototype.derive=function(e){return e.validate()||nt(e.validate(),"public point not validated"),e.mul(this.priv).getX()},rt.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},rt.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)},rt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var st=Fe.assert;function ot(e,t){if(e instanceof ot)return e;this._importDER(e,t)||(st(e.r&&e.s,"Signature without r or s"),this.r=new(x())(e.r,16),this.s=new(x())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var at=ot;function ct(){this.place=0}function lt(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;if(0===e[t.place])return!1;for(var i=0,s=0,o=t.place;s<r;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function ut(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function dt(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}ot.prototype._importDER=function(e,t){e=Fe.toArray(e,t);var n=new ct;if(48!==e[n.place++])return!1;var r=lt(e,n);if(!1===r)return!1;if(r+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var i=lt(e,n);if(!1===i)return!1;if(0!==(128&e[n.place]))return!1;var s=e.slice(n.place,i+n.place);if(n.place+=i,2!==e[n.place++])return!1;var o=lt(e,n);if(!1===o)return!1;if(e.length!==o+n.place)return!1;if(0!==(128&e[n.place]))return!1;var a=e.slice(n.place,o+n.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(x())(s),this.s=new(x())(a),this.recoveryParam=null,!0},ot.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=ut(t),n=ut(n);!n[0]&&!(128&n[1]);)n=n.slice(1);var r=[2];dt(r,t.length),(r=r.concat(t)).push(2),dt(r,n.length);var i=r.concat(n),s=[48];return dt(s,i.length),s=s.concat(i),Fe.encode(s,e)};var ht=function(){throw new Error("unsupported")},pt=Fe.assert;function ft(e){if(!(this instanceof ft))return new ft(e);"string"===typeof e&&(pt(Object.prototype.hasOwnProperty.call(Ze,e),"Unknown curve "+e),e=Ze[e]),e instanceof Ze.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var mt=ft;ft.prototype.keyPair=function(e){return new it(this,e)},ft.prototype.keyFromPrivate=function(e,t){return it.fromPrivate(this,e,t)},ft.prototype.keyFromPublic=function(e,t){return it.fromPublic(this,e,t)},ft.prototype.genKeyPair=function(e){e||(e={});for(var t=new tt({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||ht(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new(x())(2));;){var i=new(x())(t.generate(n));if(!(i.cmp(r)>0))return i.iaddn(1),this.keyFromPrivate(i)}},ft.prototype._truncateToN=function(e,t,n){var r;if(x().isBN(e)||"number"===typeof e)r=(e=new(x())(e,16)).byteLength();else if("object"===typeof e)r=e.length,e=new(x())(e,16);else{var i=e.toString();r=i.length+1>>>1,e=new(x())(i,16)}"number"!==typeof n&&(n=8*r);var s=n-this.n.bitLength();return s>0&&(e=e.ushrn(s)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},ft.prototype.sign=function(e,t,n,r){if("object"===typeof n&&(r=n,n=null),r||(r={}),"string"!==typeof e&&"number"!==typeof e&&!x().isBN(e)){pt("object"===typeof e&&e&&"number"===typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),pt(e.length>>>0===e.length);for(var i=0;i<e.length;i++)pt((255&e[i])===e[i])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,r.msgBitLength),pt(!e.isNeg(),"Can not sign a negative message");var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s);pt(new(x())(a).eq(e),"Can not sign message");for(var c=new tt({hash:this.hash,entropy:o,nonce:a,pers:r.pers,persEnc:r.persEnc||"utf8"}),l=this.n.sub(new(x())(1)),u=0;;u++){var d=r.k?r.k(u):new(x())(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(l)>=0)){var h=this.g.mul(d);if(!h.isInfinity()){var p=h.getX(),f=p.umod(this.n);if(0!==f.cmpn(0)){var m=d.invm(this.n).mul(f.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var g=(h.getY().isOdd()?1:0)|(0!==p.cmp(f)?2:0);return r.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),g^=1),new at({r:f,s:m,recoveryParam:g})}}}}}},ft.prototype.verify=function(e,t,n,r,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),n=this.keyFromPublic(n,r);var s=(t=new at(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(l,n.getPublic(),u)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(l,n.getPublic(),u)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},ft.prototype.recoverPubKey=function(e,t,n,r){pt((3&n)===n,"The recovery param is more than two bits"),t=new at(t,r);var i=this.n,s=new(x())(e),o=t.r,a=t.s,c=1&n,l=n>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");o=l?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var u=t.r.invm(i),d=i.sub(s).mul(u).umod(i),h=a.mul(u).umod(i);return this.g.mulAdd(d,o,h)},ft.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new at(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(n))return i}throw new Error("Unable to find valid recovery factor")};var gt=De((function(e,t){var n=t;n.version="6.6.1",n.utils=Fe,n.rand=function(){throw new Error("unsupported")},n.curve=Xe,n.curves=Ze,n.ec=mt,n.eddsa=null})).ec;const yt=new s.Yd("signing-key/5.8.0");let vt=null;function bt(){return vt||(vt=new gt("secp256k1")),vt}class wt{constructor(e){c(this,"curve","secp256k1"),c(this,"privateKey",(0,I.hexlify)(e)),32!==(0,I.hexDataLength)(this.privateKey)&&yt.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=bt().keyFromPrivate((0,I.arrayify)(this.privateKey));c(this,"publicKey","0x"+t.getPublic(!1,"hex")),c(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),c(this,"_isSigningKey",!0)}_addPoint(e){const t=bt().keyFromPublic((0,I.arrayify)(this.publicKey)),n=bt().keyFromPublic((0,I.arrayify)(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=bt().keyFromPrivate((0,I.arrayify)(this.privateKey)),n=(0,I.arrayify)(e);32!==n.length&&yt.throwArgumentError("bad digest length","digest",e);const r=t.sign(n,{canonical:!0});return(0,I.splitSignature)({recoveryParam:r.recoveryParam,r:(0,I.hexZeroPad)("0x"+r.r.toString(16),32),s:(0,I.hexZeroPad)("0x"+r.s.toString(16),32)})}computeSharedSecret(e){const t=bt().keyFromPrivate((0,I.arrayify)(this.privateKey)),n=bt().keyFromPublic((0,I.arrayify)(Et(e)));return(0,I.hexZeroPad)("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Et(e,t){const n=(0,I.arrayify)(e);if(32===n.length){const e=new wt(n);return t?"0x"+bt().keyFromPrivate(n).getPublic(!0,"hex"):e.publicKey}return 33===n.length?t?(0,I.hexlify)(n):"0x"+bt().keyFromPublic(n).getPublic(!1,"hex"):65===n.length?t?"0x"+bt().keyFromPublic(n).getPublic(!0,"hex"):(0,I.hexlify)(n):yt.throwArgumentError("invalid public or private key","key","[REDACTED]")}const At=new s.Yd("transactions/5.8.0");var Tt;function St(e){return"0x"===e?null:ee(e)}function xt(e){return"0x"===e?Ce:O.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Tt||(Tt={}));function It(e,t){return function(e){const t=Et(e);return ee((0,I.hexDataSlice)(F((0,I.hexDataSlice)(t,1)),12))}(function(e,t){const n=(0,I.splitSignature)(t),r={r:(0,I.arrayify)(n.r),s:(0,I.arrayify)(n.s)};return"0x"+bt().recoverPubKey((0,I.arrayify)(e),r,n.recoveryParam).encode("hex",!1)}((0,I.arrayify)(e),t))}function Pt(e,t){const n=(0,I.stripZeros)(O.from(e).toHexString());return n.length>32&&At.throwArgumentError("invalid length for "+t,"transaction:"+t,e),n}function _t(e,t){return{address:ee(e),storageKeys:(t||[]).map(((t,n)=>(32!==(0,I.hexDataLength)(t)&&At.throwArgumentError("invalid access list storageKey",`accessList[${e}:${n}]`,t),t.toLowerCase())))}}function Rt(e){if(Array.isArray(e))return e.map(((e,t)=>Array.isArray(e)?(e.length>2&&At.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),_t(e[0],e[1])):_t(e.address,e.storageKeys)));const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return _t(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function Ct(e){return Rt(e).map((e=>[e.address,e.storageKeys]))}function Nt(e,t){if(null!=e.gasPrice){const t=O.from(e.gasPrice),n=O.from(e.maxFeePerGas||0);t.eq(n)||At.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:n})}const n=[Pt(e.chainId||0,"chainId"),Pt(e.nonce||0,"nonce"),Pt(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pt(e.maxFeePerGas||0,"maxFeePerGas"),Pt(e.gasLimit||0,"gasLimit"),null!=e.to?ee(e.to):"0x",Pt(e.value||0,"value"),e.data||"0x",Ct(e.accessList||[])];if(t){const e=(0,I.splitSignature)(t);n.push(Pt(e.recoveryParam,"recoveryParam")),n.push((0,I.stripZeros)(e.r)),n.push((0,I.stripZeros)(e.s))}return(0,I.hexConcat)(["0x02",H(n)])}function Ot(e,t){const n=[Pt(e.chainId||0,"chainId"),Pt(e.nonce||0,"nonce"),Pt(e.gasPrice||0,"gasPrice"),Pt(e.gasLimit||0,"gasLimit"),null!=e.to?ee(e.to):"0x",Pt(e.value||0,"value"),e.data||"0x",Ct(e.accessList||[])];if(t){const e=(0,I.splitSignature)(t);n.push(Pt(e.recoveryParam,"recoveryParam")),n.push((0,I.stripZeros)(e.r)),n.push((0,I.stripZeros)(e.s))}return(0,I.hexConcat)(["0x01",H(n)])}function kt(e,t,n){try{const n=xt(t[0]).toNumber();if(0!==n&&1!==n)throw new Error("bad recid");e.v=n}catch(r){At.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,I.hexZeroPad)(t[1],32),e.s=(0,I.hexZeroPad)(t[2],32);try{const t=F(n(e));e.from=It(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(r){}}function Mt(e){const t=(0,I.arrayify)(e);if(t[0]>127)return function(e){const t=W(e);9!==t.length&&6!==t.length&&At.throwArgumentError("invalid raw transaction","rawTransaction",e);const n={nonce:xt(t[0]).toNumber(),gasPrice:xt(t[1]),gasLimit:xt(t[2]),to:St(t[3]),value:xt(t[4]),data:t[5],chainId:0};if(6===t.length)return n;try{n.v=O.from(t[6]).toNumber()}catch(r){return n}if(n.r=(0,I.hexZeroPad)(t[7],32),n.s=(0,I.hexZeroPad)(t[8],32),O.from(n.r).isZero()&&O.from(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);let i=n.v-27;const s=t.slice(0,6);0!==n.chainId&&(s.push((0,I.hexlify)(n.chainId)),s.push("0x"),s.push("0x"),i-=2*n.chainId+8);const o=F(H(s));try{n.from=It(o,{r:(0,I.hexlify)(n.r),s:(0,I.hexlify)(n.s),recoveryParam:i})}catch(r){}n.hash=F(e)}return n.type=null,n}(t);switch(t[0]){case 1:return function(e){const t=W(e.slice(1));8!==t.length&&11!==t.length&&At.throwArgumentError("invalid component count for transaction type: 1","payload",(0,I.hexlify)(e));const n={type:1,chainId:xt(t[0]).toNumber(),nonce:xt(t[1]).toNumber(),gasPrice:xt(t[2]),gasLimit:xt(t[3]),to:St(t[4]),value:xt(t[5]),data:t[6],accessList:Rt(t[7])};return 8===t.length||(n.hash=F(e),kt(n,t.slice(8),Ot)),n}(t);case 2:return function(e){const t=W(e.slice(1));9!==t.length&&12!==t.length&&At.throwArgumentError("invalid component count for transaction type: 2","payload",(0,I.hexlify)(e));const n=xt(t[2]),r=xt(t[3]),i={type:2,chainId:xt(t[0]).toNumber(),nonce:xt(t[1]).toNumber(),maxPriorityFeePerGas:n,maxFeePerGas:r,gasPrice:null,gasLimit:xt(t[4]),to:St(t[5]),value:xt(t[6]),data:t[7],accessList:Rt(t[8])};return 9===t.length||(i.hash=F(e),kt(i,t.slice(9),Nt)),i}(t)}return At.throwError(`unsupported transaction type: ${t[0]}`,s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}function Dt(e){e=atob(e);const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return(0,I.arrayify)(t)}function Lt(e){e=(0,I.arrayify)(e);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var Ut=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};function Bt(e,t){return Ut(this,void 0,void 0,(function*(){null==t&&(t={});const n={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(n.mode="cors",n.cache="no-cache",n.credentials="same-origin",n.redirect="follow",n.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(n.mode=e.mode),e.cache&&(n.cache=e.cache),e.credentials&&(n.credentials=e.credentials),e.redirect&&(n.redirect=e.redirect),e.referrer&&(n.referrer=e.referrer)}const r=yield fetch(e,n),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach(((e,t)=>{s[t.toLowerCase()]=e})):r.headers.keys().forEach((e=>{s[e.toLowerCase()]=r.headers.get(e)})),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:(0,I.arrayify)(new Uint8Array(i))}}))}var Ft=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const qt=new s.Yd("web/5.8.0");function jt(e){return new Promise((t=>{setTimeout(t,e)}))}function Vt(e,t){if(null==e)return null;if("string"===typeof e)return e;if((0,I.isBytesLike)(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return de(e)}catch(n){}return(0,I.hexlify)(e)}return e}function zt(e,t,n){let r=null;if(null!=t){r=ue(t);const n="string"===typeof e?{url:e}:d(e);if(n.headers){0!==Object.keys(n.headers).filter((e=>"content-type"===e.toLowerCase())).length||(n.headers=d(n.headers),n.headers["content-type"]="application/json")}else n.headers={"content-type":"application/json"};e=n}return function(e,t,n){const r="object"===typeof e&&null!=e.throttleLimit?e.throttleLimit:12;qt.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i="object"===typeof e?e.throttleCallback:null,o="object"===typeof e&&"number"===typeof e.throttleSlotInterval?e.throttleSlotInterval:100;qt.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const a="object"===typeof e&&!!e.errorPassThrough,c={};let l=null;const u={method:"GET"};let h=!1,p=12e4;if("string"===typeof e)l=e;else if("object"===typeof e){if(null!=e&&null!=e.url||qt.throwArgumentError("missing URL","connection.url",e),l=e.url,"number"===typeof e.timeout&&e.timeout>0&&(p=e.timeout),e.headers)for(const t in e.headers)c[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(h=!0);if(u.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==l.substring(0,6)&&!0!==e.allowInsecureAuthentication&&qt.throwError("basic authentication requires a secure https url",s.Yd.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;c.authorization={key:"Authorization",value:"Basic "+Lt(ue(t))}}null!=e.skipFetchSetup&&(u.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(u.fetchOptions=d(e.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),m=l?l.match(f):null;if(m)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":m[1]||"text/plain"},body:m[2]?Dt(m[3]):(g=m[3],ue(g.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))};let t=e.body;return n&&(t=n(e.body,e)),Promise.resolve(t)}catch(w){qt.throwError("processing response error",s.Yd.errors.SERVER_ERROR,{body:Vt(m[1],m[2]),error:w,requestBody:null,requestMethod:"GET",url:l})}var g;t&&(u.method="POST",u.body=t,null==c["content-type"]&&(c["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==c["content-length"]&&(c["content-length"]={key:"Content-Length",value:String(t.length)}));const y={};Object.keys(c).forEach((e=>{const t=c[e];y[t.key]=t.value})),u.headers=y;const v=function(){let e=null;return{promise:new Promise((function(t,n){p&&(e=setTimeout((()=>{null!=e&&(e=null,n(qt.makeError("timeout",s.Yd.errors.TIMEOUT,{requestBody:Vt(u.body,y["content-type"]),requestMethod:u.method,timeout:p,url:l})))}),p))})),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),b=function(){return Ft(this,void 0,void 0,(function*(){for(let e=0;e<r;e++){let t=null;try{if(t=yield Bt(l,u),e<r)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===u.method&&e.match(/^https:/)){l=t.headers.location;continue}}else if(429===t.statusCode){let n=!0;if(i&&(n=yield i(e,l)),n){let n=0;const r=t.headers["retry-after"];n="string"===typeof r&&r.match(/^[1-9][0-9]*$/)?1e3*parseInt(r):o*parseInt(String(Math.random()*Math.pow(2,e))),yield jt(n);continue}}}catch(w){t=w.response,null==t&&(v.cancel(),qt.throwError("missing response",s.Yd.errors.SERVER_ERROR,{requestBody:Vt(u.body,y["content-type"]),requestMethod:u.method,serverError:w,url:l}))}let c=t.body;if(h&&304===t.statusCode?c=null:!a&&(t.statusCode<200||t.statusCode>=300)&&(v.cancel(),qt.throwError("bad response",s.Yd.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:Vt(c,t.headers?t.headers["content-type"]:null),requestBody:Vt(u.body,y["content-type"]),requestMethod:u.method,url:l})),n)try{const e=yield n(c,t);return v.cancel(),e}catch(w){if(w.throttleRetry&&e<r){let t=!0;if(i&&(t=yield i(e,l)),t){const t=o*parseInt(String(Math.random()*Math.pow(2,e)));yield jt(t);continue}}v.cancel(),qt.throwError("processing response error",s.Yd.errors.SERVER_ERROR,{body:Vt(c,t.headers?t.headers["content-type"]:null),error:w,requestBody:Vt(u.body,y["content-type"]),requestMethod:u.method,url:l})}return v.cancel(),c}return qt.throwError("failed response",s.Yd.errors.SERVER_ERROR,{requestBody:Vt(u.body,y["content-type"]),requestMethod:u.method,url:l})}))}();return Promise.race([v.promise,b])}(e,r,((e,t)=>{let r=null;if(null!=e)try{r=JSON.parse(de(e))}catch(i){qt.throwError("invalid JSON",s.Yd.errors.SERVER_ERROR,{body:e,error:i})}return n&&(r=n(r,t)),r}))}function Ht(e,t){return t||(t={}),null==(t=d(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(n,r){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout((()=>{o()&&r(new Error("timeout"))}),t.timeout));const a=t.retryLimit;let c=0;!function i(){return e().then((function(e){if(void 0!==e)o()&&n(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!s){if(c++,c>a)return void(o()&&r(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null}),(function(e){o()&&r(e)}))}()}))}var Kt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Gt=new s.Yd("abstract-provider/5.8.0");class Wt extends g{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class Yt{constructor(){Gt.checkAbstract(new.target,Yt),c(this,"_isProvider",!0)}getFeeData(){return Kt(this,void 0,void 0,(function*(){const{block:e,gasPrice:t}=yield u({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let n=null,r=null,i=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,i=O.from("1500000000"),r=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:n,maxFeePerGas:r,maxPriorityFeePerGas:i,gasPrice:t}}))}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}class $t{constructor(e){c(this,"alphabet",e),c(this,"base",e.length),c(this,"_alphabetMap",{}),c(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=(0,I.arrayify)(e);if(0===t.length)return"";let n=[0];for(let i=0;i<t.length;++i){let e=t[i];for(let t=0;t<n.length;++t)e+=n[t]<<8,n[t]=e%this.base,e=e/this.base|0;for(;e>0;)n.push(e%this.base),e=e/this.base|0}let r="";for(let i=0;0===t[i]&&i<t.length-1;++i)r+=this._leader;for(let i=n.length-1;i>=0;--i)r+=this.alphabet[n[i]];return r}decode(e){if("string"!==typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let r=this._alphabetMap[e[n]];if(void 0===r)throw new Error("Non-base"+this.base+" character");let i=r;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return(0,I.arrayify)(new Uint8Array(t.reverse()))}}new $t("abcdefghijklmnopqrstuvwxyz234567");const Jt=new $t("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Qt(e,t){null==t&&(t=1);const n=[],r=n.forEach,i=function(e,t){r.call(e,(function(e){t>0&&Array.isArray(e)?i(e,t-1):n.push(e)}))};return i(e,t),n}function Xt(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let w=1;w<r;w++)s.push(i+=n());let o=n(),a=t;t+=o;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const d=Math.pow(2,31),h=d>>>1,p=h>>1,f=d-1;let m=0;for(let w=0;w<31;w++)m=m<<1|u();let g=[],y=0,v=d;for(;;){let e=Math.floor(((m-y+1)*i-1)/v),t=0,n=r;for(;n-t>1;){let r=t+n>>>1;e<s[r]?n=r:t=r}if(0==t)break;g.push(t);let o=y+Math.floor(v*s[t]/i),a=y+Math.floor(v*s[t+1]/i)-1;for(;0==((o^a)&h);)m=m<<1&f|u(),o=o<<1&f,a=a<<1&f|1;for(;o&~a&p;)m=m&h|m<<1&f>>>1|u(),o=o<<1^h,a=(a^h)<<1|h|1;y=o,v=1+a-o}let b=r-4;return g.map((t=>{switch(t-b){case 3:return b+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return b+256+(e[a++]<<8|e[a++]);case 1:return b+e[a++];default:return t-1}}))}(e))}function Zt(e){return 1&e?~e>>1:e>>1}function en(e,t){let n=Array(e);for(let r=0,i=-1;r<e;r++)n[r]=i+=1+t();return n}function tn(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=Zt(t());return n}function nn(e,t){let n=en(e(),e),r=e(),i=en(r,e),s=function(e,t){let n=Array(e);for(let r=0;r<e;r++)n[r]=1+t();return n}(r,e);for(let o=0;o<r;o++)for(let e=0;e<s[o];e++)n.push(i[o]+e);return t?n.map((e=>t[e])):n}function rn(e,t,n){let r=Array(e).fill(void 0).map((()=>[]));for(let i=0;i<t;i++)tn(e,n).forEach(((e,t)=>r[t].push(e)));return r}function sn(e,t){let n=1+t(),r=t(),i=function(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(n)}return t}(t);return Qt(rn(i.length,1+e,t).map(((e,t)=>{const s=e[0],o=e.slice(1);return Array(i[t]).fill(void 0).map(((e,t)=>{let i=t*r;return[s+t*n,o.map((e=>e+i))]}))})))}function on(e,t){return rn(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}const an=Xt(Dt("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),cn=new Set(nn(an)),ln=new Set(nn(an)),un=function(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(sn(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(on(n,e))}return function(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];t[r[0]]=r[1]}return t}(Qt(t))}(an),dn=function(e){let t=nn(e).sort(((e,t)=>e-t));return function n(){let r=[];for(;;){let i=nn(e,t);if(0==i.length)break;r.push({set:new Set(i),node:n()})}r.sort(((e,t)=>t.set.size-e.set.size));let i=e(),s=i%3;i=i/3|0;let o=!!(1&i);return i>>=1,{branches:r,valid:s,fe0f:o,save:1==i,check:2==i}}()}(an),hn=45,pn=95;function fn(e){return function(e,t=se.current){return le(ue(e,t))}(e)}function mn(e){return e.filter((e=>65039!=e))}function gn(e){for(let n of e.split(".")){let e=fn(n);try{for(let t=e.lastIndexOf(pn)-1;t>=0;t--)if(e[t]!==pn)throw new Error("underscore only allowed at start");if(e.length>=4&&e.every((e=>e<128))&&e[2]===hn&&e[3]===hn)throw new Error("invalid label extension")}catch(t){throw new Error(`Invalid label "${n}": ${t.message}`)}}return e}function yn(e){return gn(function(e,t){let n=fn(e).reverse(),r=[];for(;n.length;){let e=vn(n);if(e){r.push(...t(e));continue}let i=n.pop();if(cn.has(i)){r.push(i);continue}if(ln.has(i))continue;let s=un[i];if(!s)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);r.push(...s)}return gn((i=String.fromCodePoint(...r),i.normalize("NFC")));var i}(e,mn))}function vn(e,t){var n;let r,i,s=dn,o=[],a=e.length;for(t&&(t.length=0);a;){let c=e[--a];if(s=null===(n=s.branches.find((e=>e.set.has(c))))||void 0===n?void 0:n.node,!s)break;if(s.save)i=c;else if(s.check&&c===i)break;o.push(c),s.fe0f&&(o.push(65039),a>0&&65039==e[a-1]&&a--),s.valid&&(r=o.slice(),2==s.valid&&r.splice(1,1),t&&t.push(...e.slice(a).reverse()),e.length=a)}return r}const bn=new s.Yd(re),wn=new Uint8Array(32);function En(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function An(e){const t=ue(yn(e)),n=[];if(0===e.length)return n;let r=0;for(let i=0;i<t.length;i++){46===t[i]&&(n.push(En(t.slice(r,i))),r=i+1)}if(r>=t.length)throw new Error("invalid ENS name; empty component");return n.push(En(t.slice(r))),n}function Tn(e){"string"!==typeof e&&bn.throwArgumentError("invalid ENS name; not a string","name",e);let t=wn;const n=An(e);for(;n.length;)t=F((0,I.concat)([t,F(n.pop())]));return(0,I.hexlify)(t)}wn.fill(0);const Sn=new s.Yd("networks/5.8.0");function xn(e){const t=function(t,n){null==n&&(n={});const r=[];if(t.InfuraProvider&&"-"!==n.infura)try{r.push(new t.InfuraProvider(e,n.infura))}catch(i){}if(t.EtherscanProvider&&"-"!==n.etherscan)try{r.push(new t.EtherscanProvider(e,n.etherscan))}catch(i){}if(t.AlchemyProvider&&"-"!==n.alchemy)try{r.push(new t.AlchemyProvider(e,n.alchemy))}catch(i){}if(t.PocketProvider&&"-"!==n.pocket){const s=["goerli","ropsten","rinkeby","sepolia"];try{const i=new t.PocketProvider(e,n.pocket);i.network&&-1===s.indexOf(i.network.name)&&r.push(i)}catch(i){}}if(t.CloudflareProvider&&"-"!==n.cloudflare)try{r.push(new t.CloudflareProvider(e))}catch(i){}if(t.AnkrProvider&&"-"!==n.ankr)try{const i=["ropsten"],s=new t.AnkrProvider(e,n.ankr);s.network&&-1===i.indexOf(s.network.name)&&r.push(s)}catch(i){}if(t.QuickNodeProvider&&"-"!==n.quicknode)try{r.push(new t.QuickNodeProvider(e,n.quicknode))}catch(i){}if(0===r.length)return null;if(t.FallbackProvider){let i=1;return null!=n.quorum?i=n.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(r,i)}return r[0]};return t.renetwork=function(e){return xn(e)},t}function In(e,t){const n=function(n,r){return n.JsonRpcProvider?new n.JsonRpcProvider(e,t):null};return n.renetwork=function(t){return In(e,t)},n}const Pn={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:xn("homestead")},_n={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:xn("ropsten")},Rn={chainId:63,name:"classicMordor",_defaultProvider:In("https://www.ethercluster.com/mordor","classicMordor")},Cn={unspecified:{chainId:0,name:"unspecified"},homestead:Pn,mainnet:Pn,morden:{chainId:2,name:"morden"},ropsten:_n,testnet:_n,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:xn("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:xn("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:xn("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:xn("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:xn("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:In("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Rn,classicTestnet:Rn,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:In("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:xn("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:xn("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:xn("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};new s.Yd("sha2/5.8.0");function Nn(e){return"0x"+Me().sha256().update((0,I.arrayify)(e)).digest("hex")}var On=n(92882),kn=n.n(On);const Mn=new s.Yd(y);class Dn{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),r=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:s,type:c,accessList:Dn.allowNull(this.accessList.bind(this),null),blockHash:Dn.allowNull(s,null),blockNumber:Dn.allowNull(a,null),transactionIndex:Dn.allowNull(a,null),confirmations:Dn.allowNull(a,null),from:t,gasPrice:Dn.allowNull(n),maxPriorityFeePerGas:Dn.allowNull(n),maxFeePerGas:Dn.allowNull(n),gasLimit:n,to:Dn.allowNull(t,null),value:n,nonce:a,data:i,r:Dn.allowNull(this.uint256),s:Dn.allowNull(this.uint256),v:Dn.allowNull(a),creates:Dn.allowNull(t,null),raw:Dn.allowNull(i)},e.transactionRequest={from:Dn.allowNull(t),nonce:Dn.allowNull(a),gasLimit:Dn.allowNull(n),gasPrice:Dn.allowNull(n),maxPriorityFeePerGas:Dn.allowNull(n),maxFeePerGas:Dn.allowNull(n),to:Dn.allowNull(t),value:Dn.allowNull(n),data:Dn.allowNull((e=>this.data(e,!0))),type:Dn.allowNull(a),accessList:Dn.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:t,topics:Dn.arrayOf(s),data:i,logIndex:a,blockHash:s},e.receipt={to:Dn.allowNull(this.address,null),from:Dn.allowNull(this.address,null),contractAddress:Dn.allowNull(t,null),transactionIndex:a,root:Dn.allowNull(o),gasUsed:n,logsBloom:Dn.allowNull(i),blockHash:s,transactionHash:s,logs:Dn.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Dn.allowNull(a,null),cumulativeGasUsed:n,effectiveGasPrice:Dn.allowNull(n),status:Dn.allowNull(a),type:c},e.block={hash:Dn.allowNull(s),parentHash:s,number:a,timestamp:a,nonce:Dn.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Dn.allowNull(t),extraData:i,transactions:Dn.allowNull(Dn.arrayOf(s)),baseFeePerGas:Dn.allowNull(n)},e.blockWithTransactions=d(e.block),e.blockWithTransactions.transactions=Dn.allowNull(Dn.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Dn.allowNull(r,void 0),toBlock:Dn.allowNull(r,void 0),blockHash:Dn.allowNull(s,void 0),address:Dn.allowNull(t,void 0),topics:Dn.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Dn.allowNull(a),blockHash:Dn.allowNull(s),transactionIndex:a,removed:Dn.allowNull(this.boolean.bind(this)),address:t,data:Dn.allowFalsish(i,"0x"),topics:Dn.arrayOf(s),transactionHash:s,logIndex:a},e}accessList(e){return Rt(e||[])}number(e){return"0x"===e?0:O.from(e).toNumber()}type(e){return"0x"===e||null==e?0:O.from(e).toNumber()}bigNumber(e){return O.from(e)}boolean(e){if("boolean"===typeof e)return e;if("string"===typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"===typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),(0,I.isHexString)(e))?e.toLowerCase():Mn.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return ee(e)}callAddress(e){if(!(0,I.isHexString)(e,32))return null;const t=ee((0,I.hexDataSlice)(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return ne(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"===typeof e||(0,I.isHexString)(e))return(0,I.hexValue)(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return 32!==(0,I.hexDataLength)(n)?Mn.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(null==e)return null;const t=O.from(e);try{return t.toNumber()}catch(n){}return null}uint256(e){if(!(0,I.isHexString)(e))throw new Error("invalid uint256");return(0,I.hexZeroPad)(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const n=null!=e._difficulty?e._difficulty:e.difficulty,r=Dn.check(t,e);return r._difficulty=null==n?null:O.from(n),r}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Dn.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&O.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=Dn.check(this.formats.transaction,e);if(null!=e.chainId){let n=e.chainId;(0,I.isHexString)(n)&&(n=O.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;null==n&&null==t.v&&(n=e.chainId),(0,I.isHexString)(n)&&(n=O.from(n).toNumber()),"number"!==typeof n&&null!=t.v&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),"number"!==typeof n&&(n=0),t.chainId=n}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return Mt(e)}receiptLog(e){return Dn.check(this.formats.receiptLog,e)}receipt(e){const t=Dn.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=O.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Mn.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Mn.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Mn.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map((e=>this.topics(e))):null!=e?this.hash(e,!0):null}filter(e){return Dn.check(this.formats.filter,e)}filterLog(e){return Dn.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const i in e)try{const r=e[i](t[i]);void 0!==r&&(n[i]=r)}catch(r){throw r.checkKey=i,r.checkValue=t[i],r}return n}static allowNull(e,t){return function(n){return null==n?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach((function(t){n.push(e(t))})),n}}}var Ln=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Un=new s.Yd(y);function Bn(e){return null==e?"null":(32!==(0,I.hexDataLength)(e)&&Un.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function Fn(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[Bn(e)]=!0}));const n=Object.keys(t);return n.sort(),n.join("|")}return Bn(e)})).join("&")}function qn(e){if("string"===typeof e){if(e=e.toLowerCase(),32===(0,I.hexDataLength)(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+Fn(e);if(Wt.isForkEvent(e))throw Un.warn("not implemented"),new Error("not implemented");if(e&&"object"===typeof e)return"filter:"+(e.address||"*")+":"+Fn(e.topics||[])}throw new Error("invalid event - "+e)}function jn(){return(new Date).getTime()}function Vn(e){return new Promise((t=>{setTimeout(t,e)}))}const zn=["block","network","pending","poll"];class Hn{constructor(e,t,n){c(this,"tag",e),c(this,"listener",t),c(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],n=""===(r=e[2])?[]:r.split(/&/g).map((e=>{if(""===e)return[];const t=e.split("|").map((e=>"null"===e?null:e));return 1===t.length?t[0]:t}));var r;const i={};return n.length>0&&(i.topics=n),t&&"*"!==t&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||zn.indexOf(this.tag)>=0}}const Kn={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Gn(e){return(0,I.hexZeroPad)(O.from(e).toHexString(),32)}function Wn(e){return Jt.encode((0,I.concat)([e,(0,I.hexDataSlice)(Nn(Nn(e)),0,4)]))}const Yn=new RegExp("^(ipfs)://(.*)$","i"),$n=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Yn,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Jn(e,t){try{return de(Qn(e,t))}catch(n){}return null}function Qn(e,t){if("0x"===e)return null;const n=O.from((0,I.hexDataSlice)(e,t,t+32)).toNumber(),r=O.from((0,I.hexDataSlice)(e,n,n+32)).toNumber();return(0,I.hexDataSlice)(e,n+32,n+32+r)}function Xn(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Un.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function Zn(e){const t=(0,I.arrayify)(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function er(e){if(e.length%32===0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function tr(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(null),n+=32;for(let r=0;r<e.length;r++){const i=(0,I.arrayify)(e[r]);t[r]=Zn(n),t.push(Zn(i.length)),t.push(er(i)),n+=32+32*Math.ceil(i.length/32)}return(0,I.hexConcat)(t)}class nr{constructor(e,t,n,r){c(this,"provider",e),c(this,"name",n),c(this,"address",e.formatter.address(t)),c(this,"_resolvedAddress",r)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((e=>O.from(e).eq(1))).catch((e=>{if(e.code===s.Yd.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e}))),this._supportsEip2544}_fetch(e,t){return Ln(this,void 0,void 0,(function*(){const n={to:this.address,ccipReadEnabled:!0,data:(0,I.hexConcat)([e,Tn(this.name),t||"0x"])};let r=!1;var i;(yield this.supportsWildcard())&&(r=!0,n.data=(0,I.hexConcat)(["0x9061b923",tr([(i=this.name,(0,I.hexlify)((0,I.concat)(An(i).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"),n.data])]));try{let e=yield this.provider.call(n);return(0,I.arrayify)(e).length%32===4&&Un.throwError("resolver threw error",s.Yd.errors.CALL_EXCEPTION,{transaction:n,data:e}),r&&(e=Qn(e,0)),e}catch(o){if(o.code===s.Yd.errors.CALL_EXCEPTION)return null;throw o}}))}_fetchBytes(e,t){return Ln(this,void 0,void 0,(function*(){const n=yield this._fetch(e,t);return null!=n?Qn(n,0):null}))}_getAddress(e,t){const n=Kn[String(e)];if(null==n&&Un.throwError(`unsupported coin type: ${e}`,s.Yd.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===n.ilk)return this.provider.formatter.address(t);const r=(0,I.arrayify)(t);if(null!=n.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Wn((0,I.concat)([[n.p2pkh],"0x"+e[2]]))}}if(null!=n.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Wn((0,I.concat)([[n.p2sh],"0x"+e[2]]))}}if(null!=n.prefix){const e=r[1];let t=r[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&r.length===2+e&&e>=1&&e<=75){const e=kn().toWords(r.slice(2));return e.unshift(t),kn().encode(n.prefix,e)}}return null}getAddress(e){return Ln(this,void 0,void 0,(function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(r){if(r.code===s.Yd.errors.CALL_EXCEPTION)return null;throw r}const t=yield this._fetchBytes("0xf1cb7e06",Gn(e));if(null==t||"0x"===t)return null;const n=this._getAddress(e,t);return null==n&&Un.throwError("invalid or unsupported coin data",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n}))}getAvatar(){return Ln(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let n=0;n<$n.length;n++){const r=t.match($n[n]);if(null==r)continue;const i=r[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Xn(t)};case"erc721":case"erc1155":{const n="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const s=this._resolvedAddress||(yield this.getAddress()),o=(r[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),c=(0,I.hexZeroPad)(O.from(o[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:(0,I.hexConcat)(["0x6352211e",c])}));if(s!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=O.from(yield this.provider.call({to:a,data:(0,I.hexConcat)(["0x00fdd58e",(0,I.hexZeroPad)(s,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const l={to:this.provider.formatter.address(o[0]),data:(0,I.hexConcat)([n,c])};let u=Jn(yield this.provider.call(l),0);if(null==u)return null;e.push({type:"metadata-url-base",content:u}),"erc1155"===i&&(u=u.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:u})),u.match(/^ipfs:/i)&&(u=Xn(u)),e.push({type:"metadata-url",content:u});const d=yield zt(u);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let h=d.image;if("string"!==typeof h)return null;if(h.match(/^(https:\/\/|data:)/i));else{if(null==h.match(Yn))return null;e.push({type:"url-ipfs",content:h}),h=Xn(h)}return e.push({type:"url",content:h}),{linkage:e,url:h}}}}}catch(t){}return null}))}getContentHash(){return Ln(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+Jt.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const e=parseInt(n[3],16);if(n[4].length===2*e)return"ipns://"+Jt.encode("0x"+n[1])}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return"bzz://"+r[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const e={"=":"","+":"-","/":"_"};return"sia://"+Lt("0x"+i[1]).replace(/[=+\/]/g,(t=>e[t]))}return Un.throwError("invalid or unsupported content hash data",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return Ln(this,void 0,void 0,(function*(){let t=ue(e);t=(0,I.concat)([Gn(64),Gn(t.length),t]),t.length%32!==0&&(t=(0,I.concat)([t,(0,I.hexZeroPad)("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",(0,I.hexlify)(t));return null==n||"0x"===n?null:de(n)}))}}let rr=null,ir=1;class sr extends Yt{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),c(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch((e=>{})),this._ready().catch((e=>{}));else{const t=l(new.target,"getNetwork")(e);t?(c(this,"_network",t),this.emit("network",t,null)):Un.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Ln(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(e){}null==t&&(t=yield this.detectNetwork()),t||Un.throwError("no network detected",s.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:c(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return Ht((()=>this._ready().then((e=>e),(e=>{if(e.code!==s.Yd.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))))}static getFormatter(){return null==rr&&(rr=new Dn),rr}static getNetwork(e){return function(e){if(null==e)return null;if("number"===typeof e){for(const t in Cn){const n=Cn[t];if(n.chainId===e)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"===typeof e){const t=Cn[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=Cn[e.name];if(!t)return"number"!==typeof e.chainId&&Sn.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&Sn.throwArgumentError("network chainId mismatch","network",e);let n=e._defaultProvider||null;var r;return null==n&&t._defaultProvider&&(n=(r=t._defaultProvider)&&"function"===typeof r.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:n}}(null==e?"homestead":e)}ccipReadFetch(e,t,n){return Ln(this,void 0,void 0,(function*(){if(this.disableCcipRead||0===n.length)return null;const r=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let e=0;e<n.length;e++){const t=n[e],a=t.replace("{sender}",r).replace("{data}",i),c=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:r}),l=yield zt({url:a,errorPassThrough:!0},c,((e,t)=>(e.status=t.statusCode,e)));if(l.data)return l.data;const u=l.message||"unknown error";if(l.status>=400&&l.status<500)return Un.throwError(`response not found during CCIP fetch: ${u}`,s.Yd.errors.SERVER_ERROR,{url:t,errorMessage:u});o.push(u)}return Un.throwError(`error encountered during CCIP fetch: ${o.map((e=>JSON.stringify(e))).join(", ")}`,s.Yd.errors.SERVER_ERROR,{urls:n,errorMessages:o})}))}_getInternalBlockNumber(e){return Ln(this,void 0,void 0,(function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const n=yield t;if(jn()-n.respTime<=e)return n.blockNumber;break}catch(r){if(this._internalBlockNumber===t)break}}const t=jn(),n=u({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:r})=>{if(r)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),r;const i=jn();return(e=O.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}}));return this._internalBlockNumber=n,n.catch((e=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)})),(yield n).blockNumber}))}poll(){return Ln(this,void 0,void 0,(function*(){const e=ir++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(r){return void this.emit("error",r)}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Un.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Un.makeError("network block skew detected",s.Yd.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let e=this._emitted.block+1;e<=n;e++)this.emit("block",e);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach((e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&n-t>12&&delete this._emitted[e]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=n-1),this._events.forEach((e=>{switch(e.type){case"tx":{const n=e.hash;let r=this.getTransactionReceipt(n).then((e=>e&&null!=e.blockNumber?(this._emitted["t:"+n]=e.blockNumber,this.emit(n,e),null):null)).catch((e=>{this.emit("error",e)}));t.push(r);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=n-1);const r=e.filter;r.fromBlock=e._lastBlockNumber+1,r.toBlock=n;const i=r.toBlock-this._maxFilterBlockRange;i>r.fromBlock&&(r.fromBlock=i),r.fromBlock<0&&(r.fromBlock=0);const s=this.getLogs(r).then((t=>{e._inflight=!1,0!==t.length&&t.forEach((t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(r,t)}))})).catch((t=>{this.emit("error",t),e._inflight=!1}));t.push(s)}}})),this._lastBlockNumber=n,Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}))}else this.emit("didPoll",e)}))}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Ln(this,void 0,void 0,(function*(){return Un.throwError("provider does not support network detection",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Ln(this,void 0,void 0,(function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Vn(0),this._network;const n=Un.makeError("underlying network changed",s.Yd.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!==typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const e=jn();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=jn(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return Ln(this,void 0,void 0,(function*(){return this._waitForTransaction(e,null==t?1:t,n||0,null)}))}_waitForTransaction(e,t,n,r){return Ln(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise(((i,o)=>{const a=[];let c=!1;const l=function(){return!!c||(c=!0,a.forEach((e=>{e()})),!1)},u=e=>{e.confirmations<t||l()||i(e)};if(this.on(e,u),a.push((()=>{this.removeListener(e,u)})),r){let n=r.startBlock,i=null;const u=a=>Ln(this,void 0,void 0,(function*(){c||(yield Vn(1e3),this.getTransactionCount(r.from).then((d=>Ln(this,void 0,void 0,(function*(){if(!c){if(d<=r.nonce)n=a;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==i&&(i=n-3,i<r.startBlock&&(i=r.startBlock));i<=a;){if(c)return;const n=yield this.getBlockWithTransactions(i);for(let i=0;i<n.transactions.length;i++){const a=n.transactions[i];if(a.hash===e)return;if(a.from===r.from&&a.nonce===r.nonce){if(c)return;const n=yield this.waitForTransaction(a.hash,t);if(l())return;let i="replaced";return a.data===r.data&&a.to===r.to&&a.value.eq(r.value)?i="repriced":"0x"===a.data&&a.from===a.to&&a.value.isZero()&&(i="cancelled"),void o(Un.makeError("transaction was replaced",s.Yd.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(a),hash:e,receipt:n}))}}i++}}c||this.once("block",u)}}))),(e=>{c||this.once("block",u)})))}));if(c)return;this.once("block",u),a.push((()=>{this.removeListener("block",u)}))}if("number"===typeof n&&n>0){const e=setTimeout((()=>{l()||o(Un.makeError("timeout exceeded",s.Yd.errors.TIMEOUT,{timeout:n}))}),n);e.unref&&e.unref(),a.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return Ln(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return O.from(e)}catch(t){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield u({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),r=yield this.perform("getBalance",n);try{return O.from(r)}catch(i){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"getBalance",params:n,result:r,error:i})}}))}getTransactionCount(e,t){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield u({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),r=yield this.perform("getTransactionCount",n);try{return O.from(r).toNumber()}catch(i){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:r,error:i})}}))}getCode(e,t){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield u({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),r=yield this.perform("getCode",n);try{return(0,I.hexlify)(r)}catch(i){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"getCode",params:n,result:r,error:i})}}))}getStorageAt(e,t,n){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield u({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then((e=>(0,I.hexValue)(e)))}),i=yield this.perform("getStorageAt",r);try{return(0,I.hexlify)(i)}catch(o){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"getStorageAt",params:r,result:i,error:o})}}))}_wrapTransaction(e,t,n){if(null!=t&&32!==(0,I.hexDataLength)(t))throw new Error("invalid response - sendTransaction");const r=e;return null!=t&&e.hash!==t&&Un.throwError("Transaction hash mismatch from Provider.sendTransaction.",s.Yd.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),r.wait=(t,r)=>Ln(this,void 0,void 0,(function*(){let i;null==t&&(t=1),null==r&&(r=0),0!==t&&null!=n&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const o=yield this._waitForTransaction(e.hash,t,r,i);return null==o&&0===t?null:(this._emitted["t:"+e.hash]=o.blockNumber,0===o.status&&Un.throwError("transaction failed",s.Yd.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:o}),o)})),r}sendTransaction(e){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>(0,I.hexlify)(e))),n=this.formatter.transaction(e);null==n.confirmations&&(n.confirmations=0);const r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,e,r)}catch(i){throw i.transaction=n,i.transactionHash=n.hash,i}}))}_getTransactionRequest(e){return Ln(this,void 0,void 0,(function*(){const t=yield e,n={};return["from","to"].forEach((e=>{null!=t[e]&&(n[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{null!=t[e]&&(n[e]=Promise.resolve(t[e]).then((e=>e?O.from(e):null)))})),["type"].forEach((e=>{null!=t[e]&&(n[e]=Promise.resolve(t[e]).then((e=>null!=e?e:null)))})),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach((e=>{null!=t[e]&&(n[e]=Promise.resolve(t[e]).then((e=>e?(0,I.hexlify)(e):null)))})),this.formatter.transactionRequest(yield u(n))}))}_getFilter(e){return Ln(this,void 0,void 0,(function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach((n=>{null!=e[n]&&(t[n]=e[n])})),["fromBlock","toBlock"].forEach((n=>{null!=e[n]&&(t[n]=this._getBlockTag(e[n]))})),this.formatter.filter(yield u(t))}))}_call(e,t,n){return Ln(this,void 0,void 0,(function*(){n>=10&&Un.throwError("CCIP read exceeded maximum redirections",s.Yd.errors.SERVER_ERROR,{redirects:n,transaction:e});const r=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&"latest"===t&&null!=r&&"0x556f1830"===i.substring(0,10)&&(0,I.hexDataLength)(i)%32===4)try{const o=(0,I.hexDataSlice)(i,4),a=(0,I.hexDataSlice)(o,0,32);O.from(a).eq(r)||Un.throwError("CCIP Read sender did not match",s.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const c=[],l=O.from((0,I.hexDataSlice)(o,32,64)).toNumber(),u=O.from((0,I.hexDataSlice)(o,l,l+32)).toNumber(),d=(0,I.hexDataSlice)(o,l+32);for(let t=0;t<u;t++){const n=Jn(d,32*t);null==n&&Un.throwError("CCIP Read contained corrupt URL string",s.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),c.push(n)}const h=Qn(o,64);O.from((0,I.hexDataSlice)(o,100,128)).isZero()||Un.throwError("CCIP Read callback selector included junk",s.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const p=(0,I.hexDataSlice)(o,96,100),f=Qn(o,128),m=yield this.ccipReadFetch(e,h,c);null==m&&Un.throwError("CCIP Read disabled or provided no URLs",s.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const g={to:r,data:(0,I.hexConcat)([p,tr([m,f])])};return this._call(g,t,n+1)}catch(o){if(o.code===s.Yd.errors.SERVER_ERROR)throw o}try{return(0,I.hexlify)(i)}catch(o){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:o})}}))}call(e,t){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield u({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)}))}estimateGas(e){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield u({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return O.from(n)}catch(r){return Un.throwError("bad result from backend",s.Yd.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:r})}}))}_getAddress(e){return Ln(this,void 0,void 0,(function*(){"string"!==typeof(e=yield e)&&Un.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&Un.throwError("ENS name not configured",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t}))}_getBlock(e,t){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;let n=-128;const r={includeTransactions:!!t};if((0,I.isHexString)(e,32))r.blockHash=e;else try{r.blockTag=yield this._getBlockTag(e),(0,I.isHexString)(r.blockTag)&&(n=parseInt(r.blockTag.substring(2),16))}catch(i){Un.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Ht((()=>Ln(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",r);if(null==e)return null!=r.blockHash&&null==this._emitted["b:"+r.blockHash]||null!=r.blockTag&&n>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const n=this.formatter.blockWithTransactions(e);return n.transactions=n.transactions.map((e=>this._wrapTransaction(e))),n}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Ht((()=>Ln(this,void 0,void 0,(function*(){const n=yield this.perform("getTransaction",t);if(null==n)return null==this._emitted["t:"+e]?null:void 0;const r=this.formatter.transactionResponse(n);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-r.blockNumber+1;e<=0&&(e=1),r.confirmations=e}return this._wrapTransaction(r)}))),{oncePoll:this})}))}getTransactionReceipt(e){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Ht((()=>Ln(this,void 0,void 0,(function*(){const n=yield this.perform("getTransactionReceipt",t);if(null==n)return null==this._emitted["t:"+e]?null:void 0;if(null==n.blockHash)return;const r=this.formatter.receipt(n);if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-r.blockNumber+1;e<=0&&(e=1),r.confirmations=e}return r}))),{oncePoll:this})}))}getLogs(e){return Ln(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield u({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach((e=>{null==e.removed&&(e.removed=!1)})),Dn.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)}))}getEtherPrice(){return Ln(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(e){return Ln(this,void 0,void 0,(function*(){if("number"===typeof(e=yield e)&&e<0){e%1&&Un.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return Ln(this,void 0,void 0,(function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const n=yield this._getResolver(t,"getResolver");if(null!=n){const r=new nr(this,n,e);return t===e||(yield r.supportsWildcard())?r:null}t=t.split(".").slice(1).join(".")}}))}_getResolver(e,t){return Ln(this,void 0,void 0,(function*(){null==t&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||Un.throwError("network does not support ENS",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const t=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Tn(e).substring(2)});return this.formatter.callAddress(t)}catch(r){}return null}))}resolveName(e){return Ln(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if((0,I.isHexString)(e))throw n}"string"!==typeof e&&Un.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null}))}lookupAddress(e){return Ln(this,void 0,void 0,(function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(null==n)return null;const r=Jn(yield this.call({to:n,data:"0x691f3431"+Tn(t).substring(2)}),0);return(yield this.resolveName(r))!=e?null:r}))}getAvatar(e){return Ln(this,void 0,void 0,(function*(){let t=null;if((0,I.isHexString)(e)){const n=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(n,"getAvatar");if(!i)return null;t=new nr(this,i,n);try{const e=yield t.getAvatar();if(e)return e.url}catch(r){if(r.code!==s.Yd.errors.CALL_EXCEPTION)throw r}try{const e=Jn(yield this.call({to:i,data:"0x691f3431"+Tn(n).substring(2)}),0);t=yield this.getResolver(e)}catch(r){if(r.code!==s.Yd.errors.CALL_EXCEPTION)throw r;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return null==n?null:n.url}))}perform(e,t){return Un.throwError(e+" not implemented",s.Yd.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,n){const r=new Hn(qn(e),t,n);return this._events.push(r),this._startEvent(r),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,r=[],i=qn(e);return this._events=this._events.filter((e=>e.tag!==i||(setTimeout((()=>{e.listener.apply(this,t)}),0),n=!0,!e.once||(r.push(e),!1)))),r.forEach((e=>{this._stopEvent(e)})),n}listenerCount(e){if(!e)return this._events.length;let t=qn(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(null==e)return this._events.map((e=>e.listener));let t=qn(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(null==t)return this.removeAllListeners(e);const n=[];let r=!1,i=qn(e);return this._events=this._events.filter((e=>e.tag!==i||e.listener!=t||(!!r||(r=!0,n.push(e),!1)))),n.forEach((e=>{this._stopEvent(e)})),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const n=qn(e);this._events=this._events.filter((e=>e.tag!==n||(t.push(e),!1)))}return t.forEach((e=>{this._stopEvent(e)})),this}}var or=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const ar=new s.Yd(y),cr=["call","estimateGas"];function lr(e,t){if(null==e)return null;if("string"===typeof e.message&&e.message.match("reverted")){const n=(0,I.isHexString)(e.data)?e.data:null;if(!t||n)return{message:e.message,data:n}}if("object"===typeof e){for(const n in e){const r=lr(e[n],t);if(r)return r}return null}if("string"===typeof e)try{return lr(JSON.parse(e),t)}catch(n){}return null}function ur(e,t,n){const r=n.transaction||n.signedTransaction;if("call"===e){const e=lr(t,!0);if(e)return e.data;ar.throwError("missing revert data in call exception; Transaction reverted without a reason string",s.Yd.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:t})}if("estimateGas"===e){let n=lr(t.body,!1);null==n&&(n=lr(t,!1)),n&&ar.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",s.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{reason:n.message,method:e,transaction:r,error:t})}let i=t.message;throw t.code===s.Yd.errors.SERVER_ERROR&&t.error&&"string"===typeof t.error.message?i=t.error.message:"string"===typeof t.body?i=t.body:"string"===typeof t.responseText&&(i=t.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&ar.throwError("insufficient funds for intrinsic transaction cost",s.Yd.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),i.match(/nonce (is )?too low/i)&&ar.throwError("nonce has already been used",s.Yd.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&ar.throwError("replacement fee too low",s.Yd.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),i.match(/only replay-protected/i)&&ar.throwError("legacy pre-eip-155 transactions not supported",s.Yd.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:r}),cr.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&ar.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",s.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}function dr(e){return new Promise((function(t){setTimeout(t,e)}))}function hr(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function pr(e){return e?e.toLowerCase():e}const fr={};class mr extends A{constructor(e,t,n){if(super(),e!==fr)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");c(this,"provider",t),null==n&&(n=0),"string"===typeof n?(c(this,"_address",this.provider.formatter.address(n)),c(this,"_index",null)):"number"===typeof n?(c(this,"_index",n),c(this,"_address",null)):ar.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return ar.throwError("cannot alter JSON-RPC Signer connection",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new gr(fr,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((e=>(e.length<=this._index&&ar.throwError("unknown account #"+this._index,s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index]))))}sendUncheckedTransaction(e){e=d(e);const t=this.getAddress().then((e=>(e&&(e=e.toLowerCase()),e)));if(null==e.gasLimit){const n=d(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((e=>or(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&ar.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))))),u({tx:u(e),sender:t}).then((({tx:t,sender:n})=>{null!=t.from?t.from.toLowerCase()!==n&&ar.throwArgumentError("from address mismatch","transaction",e):t.from=n;const r=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[r]).then((e=>e),(e=>("string"===typeof e.message&&e.message.match(/user denied/i)&&ar.throwError("user rejected transaction",s.Yd.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),ur("sendTransaction",e,r))))}))}signTransaction(e){return ar.throwError("signing transactions is unsupported",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return or(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Ht((()=>or(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(n);if(null!==e)return this.provider._wrapTransaction(e,n,t)}))),{oncePoll:this.provider})}catch(r){throw r.transactionHash=n,r}}))}signMessage(e){return or(this,void 0,void 0,(function*(){const t="string"===typeof e?ue(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[(0,I.hexlify)(t),n.toLowerCase()])}catch(r){throw"string"===typeof r.message&&r.message.match(/user denied/i)&&ar.throwError("user rejected signing",s.Yd.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),r}}))}_legacySignMessage(e){return or(this,void 0,void 0,(function*(){const t="string"===typeof e?ue(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),(0,I.hexlify)(t)])}catch(r){throw"string"===typeof r.message&&r.message.match(/user denied/i)&&ar.throwError("user rejected signing",s.Yd.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),r}}))}_signTypedData(e,t,n){return or(this,void 0,void 0,(function*(){const r=yield _e.resolveNames(e,t,n,(e=>this.provider.resolveName(e))),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(_e.getPayload(r.domain,t,r.value))])}catch(o){throw"string"===typeof o.message&&o.message.match(/user denied/i)&&ar.throwError("user rejected signing",s.Yd.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:r.domain,types:t,value:r.value}}),o}}))}unlock(e){return or(this,void 0,void 0,(function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])}))}}class gr extends mr{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const yr={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class vr extends sr{constructor(e,t){let n=t;null==n&&(n=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))),super(n),e||(e=l(this.constructor,"defaultUrl")()),c(this,"connection","string"===typeof e?Object.freeze({url:e}):Object.freeze(d(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return or(this,void 0,void 0,(function*(){yield dr(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(t){}}if(null!=e){const n=l(this.constructor,"getNetwork");try{return n(O.from(e).toNumber())}catch(t){return ar.throwError("could not detect network",s.Yd.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return ar.throwError("could not detect network",s.Yd.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new mr(fr,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:m(n),provider:this});const r=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(r&&this._cache[e])return this._cache[e];const i=zt(this.connection,JSON.stringify(n),hr).then((e=>(this.emit("debug",{action:"response",request:n,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",error:e,request:n,provider:this}),e}));return r&&(this._cache[e]=i,setTimeout((()=>{this._cache[e]=null}),0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[pr(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[pr(t.address),t.blockTag]];case"getCode":return["eth_getCode",[pr(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[pr(t.address),(0,I.hexZeroPad)(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[l(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[l(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=pr(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return or(this,void 0,void 0,(function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&O.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const n=yield this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&((t=d(t)).transaction=d(e),delete t.transaction.type)}}const n=this.prepareRequest(e,t);null==n&&ar.throwError(e+" not implemented",s.Yd.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(r){return ur(e,r,t)}}))}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(n){return function r(){e.send("eth_getFilterChanges",[n]).then((function(n){if(e._pendingFilter!=t)return null;let r=Promise.resolve();return n.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",r=r.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),r.then((function(){return dr(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){r()}),0),null;e.send("eth_uninstallFilter",[n])})).catch((e=>{}))}(),n})).catch((e=>{}))}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=d(yr);if(t)for(const o in t)t[o]&&(n[o]=!0);var r,i;i=n,(r=e)&&"object"===typeof r||a.throwArgumentError("invalid object","object",r),Object.keys(r).forEach((e=>{i[e]||a.throwArgumentError("invalid object key - "+e,"transaction:"+e,r)}));const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null==e[t])return;const n=(0,I.hexValue)(O.from(e[t]));"gasLimit"===t&&(t="gas"),s[t]=n})),["from","to","data"].forEach((function(t){null!=e[t]&&(s[t]=(0,I.hexlify)(e[t]))})),e.accessList&&(s.accessList=Rt(e.accessList)),s}}const br=new s.Yd(y);let wr=1;function Er(e,t){const n="Web3LegacyFetcher";return function(e,r){const i={method:e,params:r,id:wr++,jsonrpc:"2.0"};return new Promise(((e,r)=>{this.emit("debug",{action:"request",fetcher:n,request:m(i),provider:this}),t(i,((t,s)=>{if(t)return this.emit("debug",{action:"response",fetcher:n,error:t,request:i,provider:this}),r(t);if(this.emit("debug",{action:"response",fetcher:n,request:i,response:s,provider:this}),s.error){const e=new Error(s.error.message);return e.code=s.error.code,e.data=s.error.data,r(e)}e(s.result)}))}))}}class Ar extends vr{constructor(e,t){null==e&&br.throwArgumentError("missing provider","provider",e);let n=null,r=null,i=null;"function"===typeof e?(n="unknown:",r=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),i=e,e.request?(""===n&&(n="eip-1193:"),r=function(e){return function(t,n){null==n&&(n=[]);const r={method:t,params:n};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:m(r),provider:this}),e.request(r).then((e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:e,provider:this}),e}))}}(e)):e.sendAsync?r=Er(0,e.sendAsync.bind(e)):e.send?r=Er(0,e.send.bind(e)):br.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,t),c(this,"jsonRpcFetchFunc",r),c(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Tr="abi/5.8.0",Sr=new s.Yd(Tr);class xr{constructor(e,t,n,r){this.name=e,this.type=t,this.localName=n,this.dynamic=r}_throwError(e,t){Sr.throwArgumentError(e,this.localName,t)}}class Ir{constructor(e){c(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return(0,I.hexConcat)(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData((0,I.concat)(e._data))}writeBytes(e){let t=(0,I.arrayify)(e);const n=t.length%this.wordSize;return n&&(t=(0,I.concat)([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=(0,I.arrayify)(O.from(e));return t.length>this.wordSize&&Sr.throwError("value out-of-bounds",s.Yd.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=(0,I.concat)([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Pr{constructor(e,t,n,r){c(this,"_data",(0,I.arrayify)(e)),c(this,"wordSize",t||32),c(this,"_coerceFunc",n),c(this,"allowLoose",r),this._offset=0}get data(){return(0,I.hexlify)(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Pr.coerce(e,t)}_peekBytes(e,t,n){let r=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?r=t:Sr.throwError("data out-of-bounds",s.Yd.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}subReader(e){return new Pr(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return O.from(this.readBytes(this.wordSize))}}class _r extends xr{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=ee(t)}catch(n){this._throwError(n.message,t)}return e.writeValue(t)}decode(e){return ee((0,I.hexZeroPad)(e.readValue().toHexString(),20))}}class Rr extends xr{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Cr=new s.Yd(Tr);function Nr(e,t,n){let r=null;if(Array.isArray(n))r=n;else if(n&&"object"===typeof n){let e={};r=t.map((t=>{const r=t.localName;return r||Cr.throwError("cannot encode object for signature with missing names",s.Yd.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]&&Cr.throwError("cannot encode object for signature with duplicate names",s.Yd.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]=!0,n[r]}))}else Cr.throwArgumentError("invalid tuple value","tuple",n);t.length!==r.length&&Cr.throwArgumentError("types/value length mismatch","tuple",n);let i=new Ir(e.wordSize),o=new Ir(e.wordSize),a=[];t.forEach(((e,t)=>{let n=r[t];if(e.dynamic){let t=o.length;e.encode(o,n);let r=i.writeUpdatableValue();a.push((e=>{r(e+t)}))}else e.encode(i,n)})),a.forEach((e=>{e(i.length)}));let c=e.appendWriter(i);return c+=e.appendWriter(o),c}function Or(e,t){let n=[],r=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readValue(),a=r.subReader(n.toNumber());try{i=t.decode(a)}catch(o){if(o.code===s.Yd.errors.BUFFER_OVERRUN)throw o;i=o,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(o){if(o.code===s.Yd.errors.BUFFER_OVERRUN)throw o;i=o,i.baseType=t.name,i.name=t.localName,i.type=t.type}void 0!=i&&n.push(i)}));const i=t.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});t.forEach(((e,t)=>{let r=e.localName;if(!r||1!==i[r])return;if("length"===r&&(r="_length"),null!=n[r])return;const s=n[t];s instanceof Error?Object.defineProperty(n,r,{enumerable:!0,get:()=>{throw s}}):n[r]=s}));for(let s=0;s<n.length;s++){const e=n[s];e instanceof Error&&Object.defineProperty(n,s,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(n)}class kr extends xr{constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;-1===n&&(n=t.length,e.writeValue(t.length)),Cr.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let i=0;i<t.length;i++)r.push(this.coder);return Nr(e,r,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Cr.throwError("insufficient data length",s.Yd.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let r=0;r<t;r++)n.push(new Rr(this.coder));return e.coerce(this.name,Or(e,n))}}class Mr extends xr{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Dr extends xr{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=(0,I.arrayify)(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Lr extends Dr{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,(0,I.hexlify)(super.decode(e)))}}class Ur extends xr{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=(0,I.arrayify)(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,(0,I.hexlify)(e.readBytes(this.size)))}}class Br extends xr{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class Fr extends xr{constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=O.from(t),r=Oe.mask(8*e.wordSize);if(this.signed){let e=r.mask(8*this.size-1);(n.gt(e)||n.lt(e.add(Ne).mul(Re)))&&this._throwError("value out-of-bounds",t)}else(n.lt(Ce)||n.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(8*this.size).mask(8*this.size),this.signed&&(n=n.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class qr extends Dr{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,ue(t))}decode(e){return de(super.decode(e))}}class jr extends xr{constructor(e,t){let n=!1;const r=[];e.forEach((e=>{e.dynamic&&(n=!0),r.push(e.type)}));super("tuple","tuple("+r.join(",")+")",t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,r)=>{let i=n.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[r]))})),Object.freeze(e)}encode(e,t){return Nr(e,this.coders,t)}decode(e){return e.coerce(this.name,Or(e,this.coders))}}const Vr=new s.Yd(Tr),zr={};let Hr={calldata:!0,memory:!0,storage:!0},Kr={calldata:!0,memory:!0};function Gr(e,t){if("bytes"===e||"string"===e){if(Hr[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Kr[t])return!0;return(Hr[t]||"payable"===t)&&Vr.throwArgumentError("invalid modifier","name",t),!1}function Wr(e,t){for(let n in t)c(e,n,t[n])}const Yr=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),$r=new RegExp(/^(.*)\[([0-9]*)\]$/);class Jr{constructor(e,t){e!==zr&&Vr.throwError("use fromString",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Wr(this,t);let n=this.type.match($r);Wr(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Jr.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Yr.sighash),Yr[e]||Vr.throwArgumentError("invalid format type","format",e),e===Yr.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Yr.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===Yr.full?", ":",")+")"):t+=this.type,e!==Yr.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Yr.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"===typeof e?Jr.fromString(e,t):Jr.fromObject(e)}static fromObject(e){return Jr.isParamType(e)?e:new Jr(zr,{name:e.name||null,type:ai(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Jr.fromObject):null})}static fromString(e,t){return n=function(e,t){let n=e;function r(t){Vr.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let n={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(n.indexed=!1),n}e=e.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<e.length;a++){let n=e[a];switch(n){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=ai(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||r(a),o.indexed=!0,o.name=""),Gr(o.type,o.name)&&(o.name=""),o.type=ai(o.type);let e=o;o=o.parent,o||r(a),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||r(a),o.indexed=!0,o.name=""),Gr(o.type,o.name)&&(o.name=""),o.type=ai(o.type);let s=i(o.parent);o.parent.components.push(s),delete o.parent,o=s;break;case" ":o.state.allowType&&""!==o.type&&(o.type=ai(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):Gr(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=n,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=n,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=n,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=n,delete o.state.allowArray):o.state.readArray?o.type+=n:r(a)}}return o.parent&&Vr.throwArgumentError("unexpected eof","param",e),delete s.state,"indexed"===o.name?(t||r(n.length-7),o.indexed&&r(n.length-7),o.indexed=!0,o.name=""):Gr(o.type,o.name)&&(o.name=""),s.type=ai(s.type),s}(e,!!t),Jr.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}static isParamType(e){return!(null==e||!e._isParamType)}}function Qr(e,t){return function(e){e=e.trim();let t=[],n="",r=0;for(let i=0;i<e.length;i++){let s=e[i];","===s&&0===r?(t.push(n),n=""):(n+=s,"("===s?r++:")"===s&&(r--,-1===r&&Vr.throwArgumentError("unbalanced parenthesis","value",e)))}n&&t.push(n);return t}(e).map((e=>Jr.fromString(e,t)))}class Xr{constructor(e,t){e!==zr&&Vr.throwError("use a static from method",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Wr(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Xr.isFragment(e)?e:"string"===typeof e?Xr.fromString(e):Xr.fromObject(e)}static fromObject(e){if(Xr.isFragment(e))return e;switch(e.type){case"function":return ii.fromObject(e);case"event":return Zr.fromObject(e);case"constructor":return ri.fromObject(e);case"error":return oi.fromObject(e);case"fallback":case"receive":return null}return Vr.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Zr.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?ii.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?ri.fromString(e.trim()):"error"===e.split(" ")[0]?oi.fromString(e.substring(5).trim()):Vr.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class Zr extends Xr{format(e){if(e||(e=Yr.sighash),Yr[e]||Vr.throwArgumentError("invalid format type","format",e),e===Yr.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==Yr.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===Yr.full?", ":",")+") ",e!==Yr.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"===typeof e?Zr.fromString(e):Zr.fromObject(e)}static fromObject(e){if(Zr.isEventFragment(e))return e;"event"!==e.type&&Vr.throwArgumentError("invalid event object","value",e);const t={name:li(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Jr.fromObject):[],type:"event"};return new Zr(zr,t)}static fromString(e){let t=e.match(ui);t||Vr.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:Vr.warn("unknown modifier: "+e)}})),Zr.fromObject({name:t[1].trim(),anonymous:n,inputs:Qr(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function ei(e,t){t.gas=null;let n=e.split("@");return 1!==n.length?(n.length>2&&Vr.throwArgumentError("invalid human-readable ABI signature","value",e),n[1].match(/^[0-9]+$/)||Vr.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=O.from(n[1]),n[0]):e}function ti(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function ni(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&Vr.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&Vr.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||Vr.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&Vr.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&Vr.throwArgumentError("unable to determine stateMutability","value",e),t}class ri extends Xr{format(e){if(e||(e=Yr.sighash),Yr[e]||Vr.throwArgumentError("invalid format type","format",e),e===Yr.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===Yr.sighash&&Vr.throwError("cannot format a constructor for sighash",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===Yr.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"===typeof e?ri.fromString(e):ri.fromObject(e)}static fromObject(e){if(ri.isConstructorFragment(e))return e;"constructor"!==e.type&&Vr.throwArgumentError("invalid constructor object","value",e);let t=ni(e);t.constant&&Vr.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Jr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?O.from(e.gas):null};return new ri(zr,n)}static fromString(e){let t={type:"constructor"},n=(e=ei(e,t)).match(ui);return n&&"constructor"===n[1].trim()||Vr.throwArgumentError("invalid constructor string","value",e),t.inputs=Qr(n[2].trim(),!1),ti(n[3].trim(),t),ri.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class ii extends ri{format(e){if(e||(e=Yr.sighash),Yr[e]||Vr.throwArgumentError("invalid format type","format",e),e===Yr.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==Yr.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===Yr.full?", ":",")+") ",e!==Yr.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"===typeof e?ii.fromString(e):ii.fromObject(e)}static fromObject(e){if(ii.isFunctionFragment(e))return e;"function"!==e.type&&Vr.throwArgumentError("invalid function object","value",e);let t=ni(e);const n={type:e.type,name:li(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Jr.fromObject):[],outputs:e.outputs?e.outputs.map(Jr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?O.from(e.gas):null};return new ii(zr,n)}static fromString(e){let t={type:"function"},n=(e=ei(e,t)).split(" returns ");n.length>2&&Vr.throwArgumentError("invalid function string","value",e);let r=n[0].match(ui);if(r||Vr.throwArgumentError("invalid function signature","value",e),t.name=r[1].trim(),t.name&&li(t.name),t.inputs=Qr(r[2],!1),ti(r[3].trim(),t),n.length>1){let r=n[1].match(ui);""==r[1].trim()&&""==r[3].trim()||Vr.throwArgumentError("unexpected tokens","value",e),t.outputs=Qr(r[2],!1)}else t.outputs=[];return ii.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function si(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||Vr.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class oi extends Xr{format(e){if(e||(e=Yr.sighash),Yr[e]||Vr.throwArgumentError("invalid format type","format",e),e===Yr.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==Yr.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===Yr.full?", ":",")+") ",t.trim()}static from(e){return"string"===typeof e?oi.fromString(e):oi.fromObject(e)}static fromObject(e){if(oi.isErrorFragment(e))return e;"error"!==e.type&&Vr.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:li(e.name),inputs:e.inputs?e.inputs.map(Jr.fromObject):[]};return si(new oi(zr,t))}static fromString(e){let t={type:"error"},n=e.match(ui);return n||Vr.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&li(t.name),t.inputs=Qr(n[2],!1),si(oi.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function ai(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const ci=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function li(e){return e&&e.match(ci)||Vr.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const ui=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const di=new s.Yd(Tr),hi=new RegExp(/^bytes([0-9]*)$/),pi=new RegExp(/^(u?int)([0-9]*)$/);const fi=new class{constructor(e){c(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new _r(e.name);case"bool":return new Mr(e.name);case"string":return new qr(e.name);case"bytes":return new Lr(e.name);case"array":return new kr(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new jr((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new Br(e.name)}let t=e.type.match(pi);if(t){let n=parseInt(t[2]||"256");return(0===n||n>256||n%8!==0)&&di.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Fr(n/8,"int"===t[1],e.name)}if(t=e.type.match(hi),t){let n=parseInt(t[1]);return(0===n||n>32)&&di.throwArgumentError("invalid bytes length","param",e),new Ur(n,e.name)}return di.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Pr(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Ir(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(Jr.from(e))));return new jr(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&di.throwError("types/values length mismatch",s.Yd.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map((e=>this._getCoder(Jr.from(e)))),r=new jr(n,"_"),i=this._getWriter();return r.encode(i,t),i.data}decode(e,t,n){const r=e.map((e=>this._getCoder(Jr.from(e))));return new jr(r,"_").decode(this._getReader((0,I.arrayify)(t),n))}},mi=new s.Yd(Tr);class gi extends g{}class yi extends g{}class vi extends g{}class bi extends g{static isIndexed(e){return!(!e||!e._isIndexed)}}const wi={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Ei(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return n.error=t,n}class Ai{constructor(e){let t=[];t="string"===typeof e?JSON.parse(e):e,c(this,"fragments",t.map((e=>Xr.from(e))).filter((e=>null!=e))),c(this,"_abiCoder",l(new.target,"getAbiCoder")()),c(this,"functions",{}),c(this,"errors",{}),c(this,"events",{}),c(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void mi.warn("duplicate definition - constructor"):void c(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let n=e.format();t[n]?mi.warn("duplicate definition - "+n):t[n]=e})),this.deploy||c(this,"deploy",ri.from({payable:!1,type:"constructor"})),c(this,"_isInterface",!0)}format(e){e||(e=Yr.full),e===Yr.sighash&&mi.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===Yr.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return fi}static getAddress(e){return ee(e)}static getSighash(e){return(0,I.hexDataSlice)(he(e.format()),0,4)}static getEventTopic(e){return he(e.format())}getFunction(e){if((0,I.isHexString)(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];mi.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===n.length?mi.throwArgumentError("no matching function","name",t):n.length>1&&mi.throwArgumentError("multiple matching functions","name",t),this.functions[n[0]]}const t=this.functions[ii.fromString(e).format()];return t||mi.throwArgumentError("no matching function","signature",e),t}getEvent(e){if((0,I.isHexString)(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];mi.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===n.length?mi.throwArgumentError("no matching event","name",t):n.length>1&&mi.throwArgumentError("multiple matching events","name",t),this.events[n[0]]}const t=this.events[Zr.fromString(e).format()];return t||mi.throwArgumentError("no matching event","signature",e),t}getError(e){if((0,I.isHexString)(e)){const t=l(this.constructor,"getSighash");for(const n in this.errors){if(e===t(this.errors[n]))return this.errors[n]}mi.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===n.length?mi.throwArgumentError("no matching error","name",t):n.length>1&&mi.throwArgumentError("multiple matching errors","name",t),this.errors[n[0]]}const t=this.errors[ii.fromString(e).format()];return t||mi.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"===typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(n){throw t}}return l(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"===typeof e&&(e=this.getEvent(e)),l(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"===typeof e&&(e=this.getError(e));const n=(0,I.arrayify)(t);return(0,I.hexlify)(n.slice(0,4))!==this.getSighash(e)&&mi.throwArgumentError(`data signature does not match error ${e.name}.`,"data",(0,I.hexlify)(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return"string"===typeof e&&(e=this.getError(e)),(0,I.hexlify)((0,I.concat)([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"===typeof e&&(e=this.getFunction(e));const n=(0,I.arrayify)(t);return(0,I.hexlify)(n.slice(0,4))!==this.getSighash(e)&&mi.throwArgumentError(`data signature does not match function ${e.name}.`,"data",(0,I.hexlify)(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return"string"===typeof e&&(e=this.getFunction(e)),(0,I.hexlify)((0,I.concat)([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"===typeof e&&(e=this.getFunction(e));let n=(0,I.arrayify)(t),r=null,i="",o=null,a=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch(l){}break;case 4:{const e=(0,I.hexlify)(n.slice(0,4)),t=wi[e];if(t)o=this._abiCoder.decode(t.inputs,n.slice(4)),a=t.name,c=t.signature,t.reason&&(r=o[0]),"Error"===a?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:"Panic"===a&&(i=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const t=this.getError(e);o=this._abiCoder.decode(t.inputs,n.slice(4)),a=t.name,c=t.format()}catch(l){}break}}return mi.throwError("call revert exception"+i,s.Yd.errors.CALL_EXCEPTION,{method:e.format(),data:(0,I.hexlify)(t),errorArgs:o,errorName:a,errorSignature:c,reason:r})}encodeFunctionResult(e,t){return"string"===typeof e&&(e=this.getFunction(e)),(0,I.hexlify)(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"===typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&mi.throwError("too many arguments for "+e.format(),s.Yd.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const r=(e,t)=>"string"===e.type?he(t):"bytes"===e.type?F((0,I.hexlify)(t)):("bool"===e.type&&"boolean"===typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=O.from(t).toHexString()),"address"===e.type&&this._abiCoder.encode(["address"],[t]),(0,I.hexZeroPad)((0,I.hexlify)(t),32));for(t.forEach(((t,i)=>{let s=e.inputs[i];s.indexed?null==t?n.push(null):"array"===s.baseType||"tuple"===s.baseType?mi.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?n.push(t.map((e=>r(s,e)))):n.push(r(s,t)):null!=t&&mi.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){"string"===typeof e&&(e=this.getEvent(e));const n=[],r=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&mi.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,s)=>{const o=t[s];if(e.indexed)if("string"===e.type)n.push(he(o));else if("bytes"===e.type)n.push(F(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this._abiCoder.encode([e.type],[o]))}else r.push(e),i.push(o)})),{data:this._abiCoder.encode(r,i),topics:n}}decodeEventLog(e,t,n){if("string"===typeof e&&(e=this.getEvent(e)),null!=n&&!e.anonymous){let t=this.getEventTopic(e);(0,I.isHexString)(n[0],32)&&n[0].toLowerCase()===t||mi.throwError("fragment/topic mismatch",s.Yd.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:n[0]}),n=n.slice(1)}let r=[],i=[],o=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(Jr.fromObject({type:"bytes32",name:e.name})),o.push(!0)):(r.push(e),o.push(!1)):(i.push(e),o.push(!1))}));let a=null!=n?this._abiCoder.decode(r,(0,I.concat)(n)):null,c=this._abiCoder.decode(i,t,!0),l=[],u=0,d=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==a)l[t]=new bi({_isIndexed:!0,hash:null});else if(o[t])l[t]=new bi({_isIndexed:!0,hash:a[d++]});else try{l[t]=a[d++]}catch(n){l[t]=n}else try{l[t]=c[u++]}catch(n){l[t]=n}if(e.name&&null==l[e.name]){const n=l[t];n instanceof Error?Object.defineProperty(l,e.name,{enumerable:!0,get:()=>{throw Ei(`property ${JSON.stringify(e.name)}`,n)}}):l[e.name]=n}}));for(let s=0;s<l.length;s++){const e=l[s];e instanceof Error&&Object.defineProperty(l,s,{enumerable:!0,get:()=>{throw Ei(`index ${s}`,e)}})}return Object.freeze(l)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new yi({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:O.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new gi({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=(0,I.hexlify)(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new vi({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!(!e||!e._isInterface)}}var Ti=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const Si=new s.Yd("contracts/5.8.0");function xi(e,t){return Ti(this,void 0,void 0,(function*(){const n=yield t;"string"!==typeof n&&Si.throwArgumentError("invalid address or ENS name","name",n);try{return ee(n)}catch(i){}e||Si.throwError("a provider or signer is needed to resolve ENS names",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield e.resolveName(n);return null==r&&Si.throwArgumentError("resolver or addr is not configured for ENS name","name",n),r}))}function Ii(e,t,n){return Ti(this,void 0,void 0,(function*(){return Array.isArray(n)?yield Promise.all(n.map(((n,r)=>Ii(e,Array.isArray(t)?t[r]:t[n.name],n)))):"address"===n.type?yield xi(e,t):"tuple"===n.type?yield Ii(e,t,n.components):"array"===n.baseType?Array.isArray(t)?yield Promise.all(t.map((t=>Ii(e,t,n.arrayChildren)))):Promise.reject(Si.makeError("invalid value for array",s.Yd.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t}))}function Pi(e,t,n){return Ti(this,void 0,void 0,(function*(){let r={};n.length===t.inputs.length+1&&"object"===typeof n[n.length-1]&&(r=d(n.pop())),Si.checkArgumentCount(n.length,t.inputs.length,"passed to contract"),e.signer?r.from?r.from=u({override:xi(e.signer,r.from),signer:e.signer.getAddress()}).then((e=>Ti(this,void 0,void 0,(function*(){return ee(e.signer)!==e.override&&Si.throwError("Contract with a Signer cannot override from",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})))):r.from=e.signer.getAddress():r.from&&(r.from=xi(e.provider,r.from));const i=yield u({args:Ii(e.signer||e.provider,n,t.inputs),address:e.resolvedAddress,overrides:u(r)||{}}),o=e.interface.encodeFunctionData(t,i.args),a={data:o,to:i.address},c=i.overrides;if(null!=c.nonce&&(a.nonce=O.from(c.nonce).toNumber()),null!=c.gasLimit&&(a.gasLimit=O.from(c.gasLimit)),null!=c.gasPrice&&(a.gasPrice=O.from(c.gasPrice)),null!=c.maxFeePerGas&&(a.maxFeePerGas=O.from(c.maxFeePerGas)),null!=c.maxPriorityFeePerGas&&(a.maxPriorityFeePerGas=O.from(c.maxPriorityFeePerGas)),null!=c.from&&(a.from=c.from),null!=c.type&&(a.type=c.type),null!=c.accessList&&(a.accessList=Rt(c.accessList)),null==a.gasLimit&&null!=t.gas){let e=21e3;const n=(0,I.arrayify)(o);for(let t=0;t<n.length;t++)e+=4,n[t]&&(e+=64);a.gasLimit=O.from(t.gas).add(e)}if(c.value){const e=O.from(c.value);e.isZero()||t.payable||Si.throwError("non-payable method cannot override value",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),a.value=e}c.customData&&(a.customData=d(c.customData)),c.ccipReadEnabled&&(a.ccipReadEnabled=!!c.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter((e=>null!=r[e]));return l.length&&Si.throwError(`cannot override ${l.map((e=>JSON.stringify(e))).join(",")}`,s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),a}))}function _i(e,t){const n=t.wait.bind(t);t.wait=t=>n(t).then((t=>(t.events=t.logs.map((n=>{let r=m(n),i=null;try{i=e.interface.parseLog(n)}catch(s){}return i&&(r.args=i.args,r.decode=(t,n)=>e.interface.decodeEventLog(i.eventFragment,t,n),r.event=i.name,r.eventSignature=i.signature),r.removeListener=()=>e.provider,r.getBlock=()=>e.provider.getBlock(t.blockHash),r.getTransaction=()=>e.provider.getTransaction(t.transactionHash),r.getTransactionReceipt=()=>Promise.resolve(t),r})),t)))}function Ri(e,t,n){const r=e.signer||e.provider;return function(...i){return Ti(this,void 0,void 0,(function*(){let o;if(i.length===t.inputs.length+1&&"object"===typeof i[i.length-1]){const e=d(i.pop());null!=e.blockTag&&(o=yield e.blockTag),delete e.blockTag,i.push(e)}null!=e.deployTransaction&&(yield e._deployed(o));const a=yield Pi(e,t,i),c=yield r.call(a,o);try{let r=e.interface.decodeFunctionResult(t,c);return n&&1===t.outputs.length&&(r=r[0]),r}catch(l){throw l.code===s.Yd.errors.CALL_EXCEPTION&&(l.address=e.address,l.args=i,l.transaction=a),l}}))}}function Ci(e,t,n){return t.constant?Ri(e,t,n):function(e,t){return function(...n){return Ti(this,void 0,void 0,(function*(){e.signer||Si.throwError("sending a transaction requires a signer",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());const r=yield Pi(e,t,n),i=yield e.signer.sendTransaction(r);return _i(e,i),i}))}}(e,t)}function Ni(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((e=>Array.isArray(e)?e.join("|"):e)).join(":"):""):"*"}class Oi{constructor(e,t){c(this,"tag",e),c(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter((n=>!(!t&&n.listener===e)||(t=!0,!1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter((t=>{const n=e.slice();return setTimeout((()=>{t.listener.apply(this,n)}),0),!t.once})),t}prepareEvent(e){}getEmit(e){return[e]}}class ki extends Oi{constructor(){super("error",null)}}class Mi extends Oi{constructor(e,t,n,r){const i={address:e};let s=t.getEventTopic(n);r?(s!==r[0]&&Si.throwArgumentError("topic mismatch","topics",r),i.topics=r.slice()):i.topics=[s],super(Ni(i),i),c(this,"address",e),c(this,"interface",t),c(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=function(e){const t=[],n=function(e,r){if(Array.isArray(r))for(let s in r){const o=e.slice();o.push(s);try{n(o,r[s])}catch(i){t.push({path:o,error:i})}}};return n([],e),t}(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class Di extends Oi{constructor(e,t){super("*",{address:e}),c(this,"address",e),c(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,n)=>this.interface.decodeEventLog(t.eventFragment,e,n),e.args=t.args}catch(t){}}}class Li{constructor(e,t,n){c(this,"interface",l(new.target,"getInterface")(t)),null==n?(c(this,"provider",null),c(this,"signer",null)):A.isSigner(n)?(c(this,"provider",n.provider||null),c(this,"signer",n)):Yt.isProvider(n)?(c(this,"provider",n),c(this,"signer",null)):Si.throwArgumentError("invalid signer or provider","signerOrProvider",n),c(this,"callStatic",{}),c(this,"estimateGas",{}),c(this,"functions",{}),c(this,"populateTransaction",{}),c(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const n=this.interface.events[t];c(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(n,e)}))),e[n.name]||(e[n.name]=[]),e[n.name].push(t)})),Object.keys(e).forEach((t=>{const n=e[t];1===n.length?c(this.filters,t,this.filters[n[0]]):Si.warn(`Duplicate definition of ${t} (${n.join(", ")})`)}))}if(c(this,"_runningEvents",{}),c(this,"_wrappedEmits",{}),null==e&&Si.throwArgumentError("invalid contract address or ENS name","addressOrName",e),c(this,"address",e),this.provider)c(this,"resolvedAddress",xi(this.provider,e));else try{c(this,"resolvedAddress",Promise.resolve(ee(e)))}catch(o){Si.throwError("provider is required to use ENS name as contract address",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch((e=>{}));const r={},i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e])Si.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{i[e]=!0;{const n=t.name;r[`%${n}`]||(r[`%${n}`]=[]),r[`%${n}`].push(e)}null==this[e]&&c(this,e,Ci(this,t,!0)),null==this.functions[e]&&c(this.functions,e,Ci(this,t,!1)),null==this.callStatic[e]&&c(this.callStatic,e,Ri(this,t,!0)),null==this.populateTransaction[e]&&c(this.populateTransaction,e,function(e,t){return function(...n){return Pi(e,t,n)}}(this,t)),null==this.estimateGas[e]&&c(this.estimateGas,e,function(e,t){const n=e.signer||e.provider;return function(...r){return Ti(this,void 0,void 0,(function*(){n||Si.throwError("estimate require a provider or signer",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Pi(e,t,r);return yield n.estimateGas(i)}))}}(this,t))}})),Object.keys(r).forEach((e=>{const t=r[e];if(t.length>1)return;e=e.substring(1);const n=t[0];try{null==this[e]&&c(this,e,this[n])}catch(i){}null==this.functions[e]&&c(this.functions,e,this.functions[n]),null==this.callStatic[e]&&c(this.callStatic,e,this.callStatic[n]),null==this.populateTransaction[e]&&c(this.populateTransaction,e,this.populateTransaction[n]),null==this.estimateGas[e]&&c(this.estimateGas,e,this.estimateGas[n])}))}static getContractAddress(e){return ne(e)}static getInterface(e){return Ai.isInterface(e)?e:new Ai(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,e).then((e=>("0x"===e&&Si.throwError("contract not deployed",s.Yd.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(e){this.signer||Si.throwError("sending a transactions require a signer",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=d(e||{});return["from","to"].forEach((function(e){null!=t[e]&&Si.throwError("cannot override "+e,s.Yd.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){"string"===typeof e&&(e=new T(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&c(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return bi.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"===typeof e){if("error"===e)return this._normalizeRunningEvent(new ki);if("event"===e)return this._normalizeRunningEvent(new Oi("event",null));if("*"===e)return this._normalizeRunningEvent(new Di(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Mi(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if("string"!==typeof t)throw new Error("invalid topic");const n=this.interface.getEvent(t);return this._normalizeRunningEvent(new Mi(this.address,this.interface,n,e.topics))}catch(t){}const n={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Oi(Ni(n),n))}return this._normalizeRunningEvent(new Di(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const r=m(t);return r.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},r.getBlock=()=>this.provider.getBlock(t.blockHash),r.getTransaction=()=>this.provider.getTransaction(t.transactionHash),r.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(r),r}_addEventListener(e,t,n){if(this.provider||Si.throwError("events require a provider or a signer with a provider",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const n=n=>{let r=this._wrapEvent(e,n,t);if(null==r.decodeError)try{const t=e.getEmit(r);this.emit(e.filter,...t)}catch(i){r.decodeError=i.error}null!=e.filter&&this.emit("event",r),null!=r.decodeError&&this.emit("error",r.decodeError,r)};this._wrappedEmits[e.tag]=n,null!=e.filter&&this.provider.on(e.filter,n)}}queryFilter(e,t,n){const r=this._getRunningEvent(e),i=d(r.filter);return"string"===typeof t&&(0,I.isHexString)(t,32)?(null!=n&&Si.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),i.blockHash=t):(i.fromBlock=null!=t?t:0,i.toBlock=null!=n?n:"latest"),this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(r,e,null)))))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),r=n.run(t)>0;return this._checkRunningEvents(n),r}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const e=[];for(let t in this._runningEvents)this._runningEvents[t].listeners().forEach((t=>{e.push(t)}));return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners(),this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}class Ui extends Li{}const Bi=new s.Yd("random/5.8.0");const Fi=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();let qi=Fi.crypto||Fi.msCrypto;qi&&qi.getRandomValues||(Bi.warn("WARNING: Missing strong random number source"),qi={getRandomValues:function(e){return Bi.throwError("no secure random source avaialble",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var ji=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},Vi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class zi{constructor({isAddress:e,getConnectedAccount:t,getTransactionCount:n,createContract:r,randomHex:i}){this.isAddress=e,this.getConnectedAccount=t,this.getTransactionCount=n,this.createContract=r,this.randomHex=i}}class Hi{static fromWeb3(e){return new zi({isAddress:e.utils.isAddress,getConnectedAccount:()=>ji(this,void 0,void 0,(function*(){return(yield e.eth.getAccounts())[0]})),createContract:(t,n)=>{const r=new e.eth.Contract(t,n);return{callMethod:({method:e})=>r.methods[e.name](...e.args).call(),encodeABI:({method:e})=>r.methods[e.name](...e.args).encodeABI(),estimateGas:({method:e,estimateGasOptions:t})=>r.methods[e.name](...e.args).estimateGas(t),prepareTransaction:({method:e})=>r.methods[e.name](...e.args),sendTransaction:({method:e,transactionOptions:t})=>r.methods[e.name](...e.args).send(t)}},getTransactionCount:e.eth.getTransactionCount,randomHex:e.utils.randomHex})}static fromEthersV5(e){return new zi({isAddress:te,getConnectedAccount:()=>ji(this,void 0,void 0,(function*(){return(yield e.listAccounts())[0]})),createContract:(t,n)=>{const r=new Ui(n,t,e);return{callMethod:({method:t})=>ji(this,void 0,void 0,(function*(){const n=yield e.getNetwork();console.log({method:t,network:n});const i=yield r.functions[t.name](...t.args);return 1===i.length?i[0]:i})),encodeABI:({method:e})=>new Ai(t).encodeFunctionData(e.name,e.args),estimateGas:({method:e,estimateGasOptions:t})=>r.estimateGas[e.name](...e.args,t),prepareTransaction:({method:t})=>ji(this,void 0,void 0,(function*(){const i=yield r.populateTransaction[t.name](...t.args);return{send:t=>ji(this,void 0,void 0,(function*(){const{gas:r}=t,s=Vi(t,["gas"]),o=Object.assign(Object.assign({},s),{gasLimit:r}),a=yield e.getSigner(o.from).sendTransaction(Object.assign(Object.assign(Object.assign({},i),o),{to:n})),c=yield a.wait();return Object.assign(Object.assign({},c),{status:Boolean(c.status),gasUsed:c.gasUsed.toNumber(),cumulativeGasUsed:c.cumulativeGasUsed.toNumber(),effectiveGasPrice:c.effectiveGasPrice.toNumber()})})),encodeABI:()=>{var e;return null!==(e=i.data)&&void 0!==e?e:""},estimateGas:e=>ji(this,void 0,void 0,(function*(){return(yield r.estimateGas[t.name](...t.args,e)).toNumber()}))}})),sendTransaction:({method:r,transactionOptions:i})=>ji(this,void 0,void 0,(function*(){const s=new Ai(t).encodeFunctionData(r.name,r.args),o={to:n,data:s,from:i.from,gasPrice:i.gasPrice,gasLimit:i.gas,value:i.value,nonce:i.nonce},a=yield e.getSigner(o.from).sendTransaction(o),c=yield a.wait();return Object.assign(Object.assign({},c),{status:Boolean(c.status),gasUsed:c.gasUsed.toNumber(),cumulativeGasUsed:c.cumulativeGasUsed.toNumber(),effectiveGasPrice:c.effectiveGasPrice.toNumber()})}))}},getTransactionCount:t=>e.getTransactionCount(t),randomHex:e=>{const t=function(e){(e<=0||e>1024||e%1||e!=e)&&Bi.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return qi.getRandomValues(t),(0,I.arrayify)(t)}(e);return I.hexlify(t)}})}}var Ki=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};function Gi(e,t){return Ki(this,void 0,void 0,(function*(){if("fetch"in globalThis)return yield fetch(e,t);return(yield n.e(3300).then(n.t.bind(n,83300,23))).default(e,t)}))}const Wi="https://api.idriss.xyz/v2/getTwitterID?identifier=";var Yi=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const $i=e=>Yi(void 0,void 0,void 0,(function*(){const t=yield Gi("https://api.idriss.xyz/v2/getTwitterNames?ids="+encodeURIComponent(e));if(200!=t.status)throw new Error("IDriss api responded with code "+t.status+" "+t.statusText+"\r\n"+(yield t.text()));return(yield t.json())[e]}));var Ji=JSON.parse('[{"inputs":[{"internalType":"address","name":"_maticUsdAggregator","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"bytes","name":"innerError","type":"bytes"}],"name":"BatchError","type":"error"},{"inputs":[],"name":"tipping__withdraw__OnlyAdminCanWithdraw","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"recipientAddress","type":"address"},{"indexed":false,"internalType":"string","name":"message","type":"string"},{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"tokenAddress","type":"address"}],"name":"TipMessage","type":"event"},{"inputs":[],"name":"MINIMAL_PAYMENT_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINIMAL_PAYMENT_FEE_DENOMINATOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAYMENT_FEE_PERCENTAGE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAYMENT_FEE_PERCENTAGE_DENOMINATOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAYMENT_FEE_SLIPPAGE_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_adminAddress","type":"address"}],"name":"addAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"admins","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"_calls","type":"bytes[]"}],"name":"batch","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_minimalPaymentFee","type":"uint256"},{"internalType":"uint256","name":"_paymentFeeDenominator","type":"uint256"}],"name":"changeMinimalPaymentFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_paymentFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_paymentFeeDenominator","type":"uint256"}],"name":"changePaymentFeePercentage","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"contractOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_adminAddress","type":"address"}],"name":"deleteAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_value","type":"uint256"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"}],"name":"getPaymentFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"uint256","name":"_assetId","type":"uint256"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"address","name":"_assetContractAddress","type":"address"},{"internalType":"string","name":"_message","type":"string"}],"name":"sendERC1155To","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"string","name":"_message","type":"string"}],"name":"sendERC721To","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"string","name":"_message","type":"string"}],"name":"sendTo","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"address","name":"_tokenContractAddr","type":"address"},{"internalType":"string","name":"_message","type":"string"}],"name":"sendTokenTo","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenContract","type":"address"}],"name":"withdrawToken","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),Qi=JSON.parse('[{"anonymous":false,"inputs":[{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"oldMetaPtr","type":"tuple"},{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"newMetaPtr","type":"tuple"}],"name":"ApplicationMetaPtrUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"index","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"status","type":"uint256"}],"name":"ApplicationStatusesUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"oldTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newTime","type":"uint256"}],"name":"ApplicationsEndTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"oldTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newTime","type":"uint256"}],"name":"ApplicationsStartTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newAmount","type":"uint256"}],"name":"MatchAmountUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"applicationIndex","type":"uint256"},{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"applicationMetaPtr","type":"tuple"}],"name":"NewProjectApplication","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"matchAmountAfterFees","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"protocolFeeAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"roundFeeAmount","type":"uint256"}],"name":"PayFeeAndEscrowFundsToPayoutContract","type":"event"},{"anonymous":false,"inputs":[{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"oldMetaPtr","type":"tuple"},{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"newMetaPtr","type":"tuple"}],"name":"ProjectsMetaPtrUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"oldTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newTime","type":"uint256"}],"name":"RoundEndTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"roundFeeAddress","type":"address"}],"name":"RoundFeeAddressUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint32","name":"roundFeePercentage","type":"uint32"}],"name":"RoundFeePercentageUpdated","type":"event"},{"anonymous":false,"inputs":[{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"oldMetaPtr","type":"tuple"},{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"indexed":false,"internalType":"struct MetaPtr","name":"newMetaPtr","type":"tuple"}],"name":"RoundMetaPtrUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"oldTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newTime","type":"uint256"}],"name":"RoundStartTimeUpdated","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ROUND_OPERATOR_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"VERSION","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"alloSettings","outputs":[{"internalType":"contract AlloSettings","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"applicationMetaPtr","outputs":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"applicationStatusesBitMap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"applications","outputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"uint256","name":"applicationIndex","type":"uint256"},{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"internalType":"struct MetaPtr","name":"metaPtr","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"applicationsEndTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"applicationsIndexesByProjectID","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"applicationsStartTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"internalType":"struct MetaPtr","name":"newApplicationMetaPtr","type":"tuple"}],"name":"applyToRound","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"}],"name":"getApplicationIndexesByProjectID","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"applicationIndex","type":"uint256"}],"name":"getApplicationStatus","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getRoleMember","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleMemberCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes","name":"encodedParameters","type":"bytes"},{"internalType":"address","name":"_alloSettings","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"matchAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"data","type":"bytes[]"}],"name":"multicall","outputs":[{"internalType":"bytes[]","name":"results","type":"bytes[]"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"nextApplicationIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"payoutStrategy","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"payoutStrategyFactory","outputs":[{"internalType":"contract IPayoutStrategyFactory","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"roundEndTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"roundFeeAddress","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"roundFeePercentage","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"roundMetaPtr","outputs":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"roundStartTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"uint256","name":"statusRow","type":"uint256"}],"internalType":"struct IRoundImplementation.ApplicationStatus[]","name":"statuses","type":"tuple[]"}],"name":"setApplicationStatuses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setReadyForPayout","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"token","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"internalType":"struct MetaPtr","name":"newApplicationMetaPtr","type":"tuple"}],"name":"updateApplicationMetaPtr","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newAmount","type":"uint256"}],"name":"updateMatchAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"newFeeAddress","type":"address"}],"name":"updateRoundFeeAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint32","name":"newFeePercentage","type":"uint32"}],"name":"updateRoundFeePercentage","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"uint256","name":"protocol","type":"uint256"},{"internalType":"string","name":"pointer","type":"string"}],"internalType":"struct MetaPtr","name":"newRoundMetaPtr","type":"tuple"}],"name":"updateRoundMetaPtr","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newApplicationsStartTime","type":"uint256"},{"internalType":"uint256","name":"newApplicationsEndTime","type":"uint256"},{"internalType":"uint256","name":"newRoundStartTime","type":"uint256"},{"internalType":"uint256","name":"newRoundEndTime","type":"uint256"}],"name":"updateStartAndEndTimes","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"encodedVotes","type":"bytes[]"}],"name":"vote","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"votingStrategy","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingStrategyFactory","outputs":[{"internalType":"contract IVotingStrategyFactory","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"address payable","name":"recipent","type":"address"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),Xi=JSON.parse('[{"inputs":[{"internalType":"string","name":"hashPub","type":"string"}],"name":"getIDriss","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]'),Zi=JSON.parse('[{"inputs":[{"internalType":"address","name":"_idrissRegistryAddress","type":"address"},{"internalType":"address","name":"_idrissReverseRegistryAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string[]","name":"hashes","type":"string[]"}],"name":"getMultipleIDriss","outputs":[{"components":[{"internalType":"string","name":"_hash","type":"string"},{"internalType":"string","name":"result","type":"string"}],"internalType":"struct IDrissWrapperContract.IDrissResult[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"addresses","type":"address[]"}],"name":"getMultipleReverse","outputs":[{"components":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"string","name":"result","type":"string"}],"internalType":"struct IDrissWrapperContract.IDrissReverseResult[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"registry","outputs":[{"internalType":"contract IIDrissRegistry","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"reverseRegistry","outputs":[{"internalType":"contract IReverseRegistry","name":"","type":"address"}],"stateMutability":"view","type":"function"}]');const es={IDrissTippingAbi:Ji,GitcoinVotingAbi:Qi,IDrissRegistryAbi:Xi,IDrissReverseMappingAbi:JSON.parse('[{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"reverseIDriss","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]'),IDrissSendToAnyoneAbi:JSON.parse('[{"inputs":[{"internalType":"address","name":"_IDrissAddr","type":"address"},{"internalType":"address","name":"_maticUsdAggregator","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"bytes","name":"innerError","type":"bytes"}],"name":"BatchError","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"toHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"beneficiary","type":"address"},{"indexed":true,"internalType":"address","name":"assetContractAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"enum AssetType","name":"assetType","type":"uint8"}],"name":"AssetClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"fromHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"toHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"address","name":"assetContractAddress","type":"address"},{"indexed":false,"internalType":"enum AssetType","name":"assetType","type":"uint8"}],"name":"AssetMoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"toHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"assetContractAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"enum AssetType","name":"assetType","type":"uint8"}],"name":"AssetTransferReverted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"toHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"assetContractAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"enum AssetType","name":"assetType","type":"uint8"},{"indexed":false,"internalType":"string","name":"message","type":"string"}],"name":"AssetTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"IDRISS_ADDR","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINIMAL_PAYMENT_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINIMAL_PAYMENT_FEE_DENOMINATOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAYMENT_FEE_PERCENTAGE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAYMENT_FEE_PERCENTAGE_DENOMINATOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PAYMENT_FEE_SLIPPAGE_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_IDrissHash","type":"bytes32"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"},{"internalType":"address","name":"_assetContractAddress","type":"address"},{"internalType":"uint256","name":"_assetId","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"calls","type":"bytes[]"}],"name":"batch","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_minimalPaymentFee","type":"uint256"},{"internalType":"uint256","name":"_paymentFeeDenominator","type":"uint256"}],"name":"changeMinimalPaymentFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_paymentFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_paymentFeeDenominator","type":"uint256"}],"name":"changePaymentFeePercentage","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_IDrissHash","type":"string"},{"internalType":"string","name":"_claimPassword","type":"string"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"},{"internalType":"address","name":"_assetContractAddress","type":"address"}],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimPaymentFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_value","type":"uint256"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"}],"name":"getPaymentFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_IDrissHash","type":"string"},{"internalType":"string","name":"_claimPassword","type":"string"}],"name":"hashIDrissWithPassword","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_FromIDrissHash","type":"bytes32"},{"internalType":"bytes32","name":"_ToIDrissHash","type":"bytes32"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"},{"internalType":"address","name":"_assetContractAddress","type":"address"}],"name":"moveAssetToOtherHash","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paymentFeesBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_IDrissHash","type":"bytes32"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"},{"internalType":"address","name":"_assetContractAddress","type":"address"}],"name":"revertPayment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_IDrissHash","type":"bytes32"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"enum AssetType","name":"_assetType","type":"uint8"},{"internalType":"address","name":"_assetContractAddress","type":"address"},{"internalType":"uint256","name":"_assetId","type":"uint256"},{"internalType":"string","name":"_message","type":"string"}],"name":"sendToAnyone","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),PriceOracleAbi:JSON.parse('[{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"description","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint80","name":"_roundId","type":"uint80"}],"name":"getRoundData","outputs":[{"internalType":"uint80","name":"roundId","type":"uint80"},{"internalType":"int256","name":"answer","type":"int256"},{"internalType":"uint256","name":"startedAt","type":"uint256"},{"internalType":"uint256","name":"updatedAt","type":"uint256"},{"internalType":"uint80","name":"answeredInRound","type":"uint80"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"latestRoundData","outputs":[{"internalType":"uint80","name":"roundId","type":"uint80"},{"internalType":"int256","name":"answer","type":"int256"},{"internalType":"uint256","name":"startedAt","type":"uint256"},{"internalType":"uint256","name":"updatedAt","type":"uint256"},{"internalType":"uint80","name":"answeredInRound","type":"uint80"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),IERC20Abi:JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]'),IERC721Abi:JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"operator","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),IERC1155Abi:JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]'),IDrissMultipleRegistryAbiJson:Zi},ts={zero:"0x0000000000000000000000000000000000000000",idrissRegistry:"0x2EcCb53ca2d4ef91A79213FDDF3f8c2332c2a814",idrissMultipleRegistry:"0xa179BF6f32483A82d4BD726068EfD93E29f3c930",idrissReverseMapping:"0x561f1b5145897A52A6E94E4dDD4a29Ea5dFF6f64",idrissSendToAnyone:"0xf333EDE8D49dD100F02c946809C9F5D9867D10C0",priceOracle:"0xAB594600376Ec9fD91F8e885dADF0CE036862dE0",idrissTipping:"0xf333EDE8D49dD100F02c946809C9F5D9867D10C0"},ns=e=>/^(\+\(?\d{1,4}\s?)\)?-?\.?\s?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}/.test(e)?"phone":/^[\w.-]+@[\d.A-Za-z-]+\.[A-Za-z]{2,}/.test(e)?"mail":/^@\S+/.test(e)?"twitter":null;var rs=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const is=e=>rs(void 0,void 0,void 0,(function*(){const t=(e=>e.charAt(0).toLowerCase()+e.slice(1))(e).replace(" ",""),n=ns(e);if(null===n)throw new Error("Not a valid input. Input must start with valid phone number, email or @twitter handle.");if("phone"==n)return(e=>"+"+e.replace(/[^\dA-Za-z]/,""))(t);if("twitter"==n){const e=yield(r=t,Yi(void 0,void 0,void 0,(function*(){console.log(Wi+encodeURIComponent(r));const e=yield Gi(Wi+encodeURIComponent(r));if(200!=e.status)throw new Error("IDriss api responded with code "+e.status+" "+e.statusText+"\r\n"+(yield e.text()));return(yield e.json()).twitterID})));if("Not found"==e)throw new Error("Twitter handle not found.");return e}var r;return e})),ss=[{tagName:"Metamask ETH",tagAddress:"5d181abc9dcb7e79ce50e93db97addc1caf9f369257f61585889870555f8c321",coin:"ETH",network:"evm"},{tagName:"Binance ETH",tagAddress:"4b118a4f0f3f149e641c6c43dd70283fcc07eacaa624efc762aa3843d85b2aba",coin:"ETH",network:"evm"},{tagName:"Coinbase ETH",tagAddress:"92c7f97fb58ddbcb06c0d5a7cb720d74bc3c3aa52a0d706e477562cba68eeb73",coin:"ETH",network:"evm"},{tagName:"Exchange ETH",tagAddress:"ec72020f224c088671cfd623235b59c239964a95542713390a2b6ba07dd1151c",coin:"ETH",network:"evm"},{tagName:"Private ETH",tagAddress:"005ba8fbc4c85a25534ac36354d779ef35e0ee31f4f8732b02b61c25ee406edb",coin:"ETH",network:"evm"},{tagName:"Essentials ETH",tagAddress:"3ea9415b82f0ee7db933aab0be377ee1c1a405969d8b8c2454bcce7372a161c2",coin:"ETH",network:"evm"},{tagName:"Rainbow ETH",tagAddress:"992335db5f54ef94a5f23be8b925ed2529b044537c19b59643d39696936b6d6c",coin:"ETH",network:"evm"},{tagName:"Argent ETH",tagAddress:"682614f9b037714bbf001db3a8d6e894fbdcf75cbbb9dea5a42edce33e880072",coin:"ETH",network:"evm"},{tagName:"Tally ETH",tagAddress:"f368de8673a59b860b71f54c7ba8ab17f0b9648ad014797e5f8d8fa9f7f1d11a",coin:"ETH",network:"evm"},{tagName:"Trust ETH",tagAddress:"df3d3f0233e396b2b27c3943269b10ecf2e7c1070a485e1b6b8f2201cb23cb52",coin:"ETH",network:"evm"},{tagName:"Public ETH",tagAddress:"9306eda974cb89b82c0f38ab407f55b6d124159d1fa7779f2e088b2b786573c1",coin:"ETH",network:"evm"},{tagName:"Metamask BNB",tagAddress:"3bee8eefc6afe6b4f7dbcc024eb3ad4ceaa5e458d34b7877319f2fe9f676e983",coin:"BNB",network:"evm"},{tagName:"Essentials BNB",tagAddress:"639c9abb5605a14a557957fa72e146e9abf727be32e5149dca377b647317ebb9",coin:"BNB",network:"evm"},{tagName:"Metamask USDT",tagAddress:"74a3d8986c81769ed3bb99b773d66b60852f7ee3fa0d55a6a144523116c671c1",coin:"USDT",network:"evm"},{tagName:"Binance USDT",tagAddress:"77c27c19cc85e24b1d4650800cc4b1bc607986dd3e78608435cececd31c35015",coin:"USDT",network:"evm"},{tagName:"Coinbase USDT",tagAddress:"f2faabf9d133f31a13873ba8a15e676e063a730898ffadfcb0077f723260f563",coin:"USDT",network:"evm"},{tagName:"Exchange USDT",tagAddress:"683e7b694b374ce0d81ba525361fa0c27fff7237eb12ec41b6e225449d5702b9",coin:"USDT",network:"evm"},{tagName:"Private USDT",tagAddress:"8c9a306a7dc200c52d32e3c1fcbf2f65e8037a68127b81807e8e58428004bc57",coin:"USDT",network:"evm"},{tagName:"Essentials USDT",tagAddress:"74dcb573a5c63382484f597ae8034a6153c011e291c01eb3da40e9d83c436a9a",coin:"USDT",network:"evm"},{tagName:"Metamask USDC",tagAddress:"6f763fea691b1a723ef116e98c02fae07a4397e1a2b4b4c749d06845fa2ff5e4",coin:"USDC",network:"evm"},{tagName:"Binance USDC",tagAddress:"7d2b0e0ee27a341da84ce56e95eb557988f9d4ff95fe452297fc765265bb27a2",coin:"USDC",network:"evm"},{tagName:"Coinbase USDC",tagAddress:"6fe7c1a2fdd154e0b35283598724adee9a5d3b2e6523787d8b6de7cd441f15ca",coin:"USDC",network:"evm"},{tagName:"Exchange USDC",tagAddress:"8c4a231c47a4cfa7530ba4361b6926da4acd87f569167b8ba55b268bf99640d0",coin:"USDC",network:"evm"},{tagName:"Private USDC",tagAddress:"54c9da06ab3d7c6c7f813f36491b22b7f312ae8f3b8d12866d35b5d325895e3e",coin:"USDC",network:"evm"},{tagName:"Essentials USDC",tagAddress:"23a66df178daf25111083ee1610fb253baf3d12bd74c6c2aae96077558e3737a",coin:"USDC",network:"evm"},{tagName:"Essentials ELA SC",tagAddress:"c17c556467fe7c9fe5667dde7ca8cdbca8a24d0473b9e9c1c2c8166c1f355f6c",coin:"ELA",network:"evm"},{tagName:"Essentials MATIC",tagAddress:"336fb6cdd7fec196c6e66966bd1c326072538a94e700b8bc1111d1574b8357ba",coin:"MATIC",network:"evm"},{tagName:"ERC20",tagAddress:"63d95e64e7caff988f97fdf32de5f16624f971149749c90fbc7bbe44244d3ced",coin:"ERC20",network:"evm"},{tagName:"Binance BTC",tagAddress:"450efeca15651e50995ed494ac24a945e61d67f60bed0dbb3b2d8d7df122a8ca",coin:"BTC",network:"btc"},{tagName:"Coinbase BTC",tagAddress:"b3c77df93f865dd21a6196266d5c291adad15c7db9c81ddc78409a22f36ebe84",coin:"BTC",network:"btc"},{tagName:"Exchange BTC",tagAddress:"a3f104cace8d66ed9971b19f749a821ae4397349155ea1a8724451c3e680335b",coin:"BTC",network:"btc"},{tagName:"Private BTC",tagAddress:"a7d3f51b26dad11f5f4842d29f2fc419a48e3471bdec0a2c713c7d18d3143d65",coin:"BTC",network:"btc"},{tagName:"Essentials BTC",tagAddress:"39d18497a64591bb1b061940309c453495398d00f9d9deab8b2c1e0979e4cbe7",coin:"BTC",network:"btc"},{tagName:"Essentials ELA",tagAddress:"35ae820c72397977701524ee610e7ef2ca3d64539ccdc65e5198470d8e49eccb",coin:"ELA",network:"btc"},{tagName:"Solana SOL",tagAddress:"62994eac84217f90c44d7acf962861f044a5f2e653400c154a8bcbf114da16fb",coin:"SOL",network:"sol"},{tagName:"Coinbase SOL",tagAddress:"b5a72b6402de8a0fa649e23c81ae165dcfcce22c960a4a67a218243a73f49b1f",coin:"SOL",network:"sol"},{tagName:"Trust SOL",tagAddress:"70190458e6435ad1e8f575ac60a7d8542ae5a4927aba336789de377a47b839d4",coin:"SOL",network:"sol"},{tagName:"Binance SOL",tagAddress:"19cd4e6feb1efb40eb6506fb448a22cefeb63690ecaa35fee65914607adee606",coin:"SOL",network:"sol"},{tagName:"Phantom SOL",tagAddress:"88f5c6ddb68a1cee77543f2de2788ade913b87bbac1c38d354707bc8ee3a0328",coin:"SOL",network:"sol"}],os=({coin:e,network:t,walletTag:n})=>ss.filter((r=>(!e||r.coin===e)&&((!t||r.network===t)&&(!n||r.tagName===n))));var as;!function(e){e[e.Native=0]="Native",e[e.ERC20=1]="ERC20",e[e.ERC721=2]="ERC721",e[e.ERC1155=3]="ERC1155"}(as||(as={}));var cs=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class ls{constructor(e,t){var n,r,s,o,a;this.contractsAddressess=Object.assign(Object.assign({},ts),{idrissRegistry:null!==(n=t.idrissRegistryContractAddress)&&void 0!==n?n:ts.idrissRegistry,idrissMultipleRegistry:null!==(r=t.idrissMultipleRegistryContractAddress)&&void 0!==r?r:ts.idrissMultipleRegistry,idrissReverseMapping:null!==(s=t.reverseIDrissMappingContractAddress)&&void 0!==s?s:ts.idrissReverseMapping,priceOracle:null!==(o=t.priceOracleContractAddress)&&void 0!==o?o:ts.priceOracle,idrissTipping:null!==(a=t.tippingContractAddress)&&void 0!==a?a:ts.idrissTipping}),this.web3Provider=t.web3Provider,this.registryWeb3Provider=Hi.fromWeb3(new(i())(new(i().providers.HttpProvider)(e))),this.idrissRegistryContract=this.registryWeb3Provider.createContract(es.IDrissRegistryAbi,this.contractsAddressess.idrissRegistry),this.idrissMultipleRegistryContract=this.registryWeb3Provider.createContract(es.IDrissMultipleRegistryAbiJson,this.contractsAddressess.idrissMultipleRegistry),this.idrissSendToAnyoneContract=this.web3Provider.createContract(es.IDrissSendToAnyoneAbi,this.contractsAddressess.idrissSendToAnyone),this.priceOracleContract=this.web3Provider.createContract(es.PriceOracleAbi,this.contractsAddressess.priceOracle),this.tippingContract=this.web3Provider.createContract(es.IDrissTippingAbi,this.contractsAddressess.idrissTipping)}static matchInput(e){return ns(e)}getIDriss(e){return this.idrissRegistryContract.callMethod({method:{name:"getIDriss",args:[e]}})}resolve(e,t={}){return cs(this,void 0,void 0,(function*(){const n=yield is(e),r=os(t).map((({tagAddress:e,tagName:t})=>cs(this,void 0,void 0,(function*(){return{digested:yield this.digestMessage(n+e),tagName:t}})))),i=yield Promise.all(r),s=i.map((e=>e.digested)),o=yield this.idrissMultipleRegistryContract.callMethod({method:{name:"getMultipleIDriss",args:[s]}});return Object.fromEntries(o.map((([e,t])=>{if(!t)return;const n=i.find((t=>t.digested===e));if(!n)throw new Error(`Expected digested message: ${e}`);return[n.tagName,t]})).filter(Boolean))}))}multiResolve(e,t={}){return cs(this,void 0,void 0,(function*(){const n=e.map((e=>cs(this,void 0,void 0,(function*(){try{const n=yield is(e),r=os(t);return Promise.all(r.map((({tagAddress:t,tagName:r})=>cs(this,void 0,void 0,(function*(){return{digested:yield this.digestMessage(n+t),tagName:r,input:e}})))))}catch(n){return console.error(`Error processing ${e}`),[]}})))),r=(yield Promise.all(n)).flat().filter((e=>e)),i=r.map((e=>e.digested)),s=yield this.idrissMultipleRegistryContract.callMethod({method:{name:"getMultipleIDriss",args:[i]}}),o={};return s.forEach((([e,t])=>{if(!t)return;const n=r.find((t=>t.digested===e));if(!n)throw new Error(`Expected digested message: ${e}`);o[n.input]||(o[n.input]={}),o[n.input][n.tagName]=t})),o}))}multitransferToIDriss(e,t={}){return cs(this,void 0,void 0,(function*(){let n;const r=new Map,i=[];for(const t of e){if(this.web3Provider.isAddress(t.beneficiary)){t.hash=t.beneficiary,this.addAssetForAllowanceToMap(r,t.asset),i.push(t);continue}const e=yield this.resolve(t.beneficiary);e&&e[t.walletType.walletTag]&&e[t.walletType.walletTag].length>0&&(t.hash=e[t.walletType.walletTag],this.addAssetForAllowanceToMap(r,t.asset),i.push(t))}const s=yield this.getConnectedAccount();return yield this.approveAssets([...r.values()],s,this.contractsAddressess.idrissTipping,t),i.length>0&&(n=yield this.callWeb3multiTipping(i,t)),n}))}encodeTippingToHex(e){return cs(this,void 0,void 0,(function*(){return(yield this.getTippingMethod(e)).encodeABI()}))}addAssetForAllowanceToMap(e,t){var n;if(t.type!==as.Native){if(!t.assetContractAddress||""===t.assetContractAddress)throw new Error("Asset address cannot be undefined");const r=t.type===as.ERC721?`${t.assetContractAddress}-${t.assetId}`:`${t.assetContractAddress}`,i=null!==(n=e.get(r))&&void 0!==n?n:Object.assign(Object.assign({},t),{amount:0});i.amount=O.from(i.amount).add(t.amount),e.set(r,i)}}transferToIDriss(e,t,n,r,i={}){return cs(this,void 0,void 0,(function*(){if("evm"!==t.network)throw new Error("Only transfers on Polygon are supported at the moment");let s;if(this.web3Provider.isAddress(e))return s=yield this.callWeb3Tipping(e,n,r,i),s;const o=yield this.resolve(e);return o&&o[t.walletTag]&&o[t.walletTag].length>0?yield this.callWeb3Tipping(o[t.walletTag],n,r,i):null}))}vote(e,t,n,r={}){return this.callWeb3Vote(e,t,n,r)}getUserHash(e,t){return cs(this,void 0,void 0,(function*(){const n=(e=>{const t=os(e);if(t.length>1)throw new Error("Expected single wallet tag, found more.");return t[0].tagAddress})(e),r=yield is(t);return this.digestMessage(r+n)}))}getHashForIdentifier(e,t,n){return cs(this,void 0,void 0,(function*(){const r=yield this.getUserHash(t,e);return this.generateHashWithPassword(r,n)}))}generateHashWithPassword(e,t){return cs(this,void 0,void 0,(function*(){return this.idrissSendToAnyoneContract.callMethod({method:{name:"hashIDrissWithPassword",args:[e,t]}})}))}callWeb3Vote(e,t,n,r){var i,s;return cs(this,void 0,void 0,(function*(){const o=t.type===as.Native?O.from(t.amount):O.from("0"),a=yield this.getConnectedAccount();if(yield this.approveAssets([t],a,n,r),!r.gas)try{const s=yield this.getVotingMethod({encodedVote:e,roundContractAddress:n,asset:t});r.gas=yield s.estimateGas({from:null!==(i=r.from)&&void 0!==i?i:a,value:o.toString()})}catch(u){console.log("Could not estimate gas:",u)}const c=Object.assign(Object.assign({},r),{from:null!==(s=r.from)&&void 0!==s?s:a,value:o.toString()}),l=yield this.getVotingMethod({encodedVote:e,roundContractAddress:n,asset:t});return yield l.send(c)}))}callWeb3Tipping(e,t,n,r){var i,s;return cs(this,void 0,void 0,(function*(){const o=yield this.calculateTippingPaymentFee(t.amount,t.type),a=t.type===as.Native?O.from(t.amount):o,c=yield this.getConnectedAccount();if(yield this.approveAssets([t],c,this.contractsAddressess.idrissTipping,r),n=null!==n&&void 0!==n?n:"",!r.gas)try{const s=yield this.getTippingMethod({asset:t,message:n,beneficiary:n,hash:e});r.gas=yield s.estimateGas({from:null!==(i=r.from)&&void 0!==i?i:c,value:a.toString()})}catch(d){console.log("Could not estimate gas:",d)}const l=Object.assign(Object.assign({},r),{from:null!==(s=r.from)&&void 0!==s?s:c,value:a.toString()}),u=yield this.getTippingMethod({asset:t,message:n,beneficiary:n,hash:e});return yield u.send(l)}))}getVotingMethod(e){return cs(this,void 0,void 0,(function*(){if(e.asset.type!==as.Native)throw new Error(`Expected native asset type, received: ${e.asset.type}`);return this.web3Provider.createContract(es.GitcoinVotingAbi,e.roundContractAddress).prepareTransaction({method:{name:"vote",args:[e.encodedVote]}})}))}getTippingMethod(e){var t;return cs(this,void 0,void 0,(function*(){let n;const r=null!==(t=e.message)&&void 0!==t?t:"";switch(e.asset.type){case as.Native:n=yield this.tippingContract.prepareTransaction({method:{name:"sendTo",args:[e.hash,e.asset.amount.toString(),r]}});break;case as.ERC20:n=yield this.tippingContract.prepareTransaction({method:{name:"sendTokenTo",args:[e.hash,e.asset.amount.toString(),e.asset.assetContractAddress,r]}});break;case as.ERC721:n=yield this.tippingContract.prepareTransaction({method:{name:"sendERC721To",args:[e.hash,e.asset.assetId,e.asset.assetContractAddress,r]}});break;case as.ERC1155:n=yield this.tippingContract.prepareTransaction({method:{name:"sendERC1155To",args:[e.hash,e.asset.assetId,e.asset.amount.toString(),e.asset.assetContractAddress,r]}})}return n}))}callWeb3multiTipping(e,t){var n,r;return cs(this,void 0,void 0,(function*(){let i=O.from(0);const s=yield this.getConnectedAccount(),o=[];for(const t of e){const e=yield this.calculateTippingPaymentFee(t.asset.amount,t.asset.type),n=t.asset.type===as.Native?t.asset.amount:e;i=i.add(n),o.push(yield this.encodeTippingToHex(t))}if(!t.gas)try{t.gas=yield this.tippingContract.estimateGas({method:{name:"batch",args:[o]},estimateGasOptions:{from:null!==(n=t.from)&&void 0!==n?n:s,value:i.toString()}})}catch(c){console.log("Could not estimate gas:",c)}const a=yield this.tippingContract.sendTransaction({method:{name:"batch",args:[o]},transactionOptions:Object.assign(Object.assign({},t),{from:null!==(r=t.from)&&void 0!==r?r:s,value:i.toString()})});return delete t.gas,a}))}approveAssets(e,t,n,r){return cs(this,void 0,void 0,(function*(){let i=!1;for(const s of e){switch(s.type){case as.ERC20:i=yield this.authorizeERC20ForContract(t,n,s,r);break;case as.ERC721:i=yield this.authorizeERC721ForContract(t,n,s,r);break;case as.ERC1155:i=yield this.setAuthorizationForERC1155Contract(t,n,s,!0,r)}if(!0!==i&&i&&!i.status)throw new Error(`Setting asset allowance failed for address ${s.assetContractAddress}. Please check your asset balance.`)}return i}))}calculateTippingPaymentFee(e,t){return cs(this,void 0,void 0,(function*(){return t===as.ERC20?"0":this.tippingContract.callMethod({method:{name:"getPaymentFee",args:[e,t]}})}))}authorizeERC20ForContract(e,t,n,r={}){var i,s;return cs(this,void 0,void 0,(function*(){const o=this.web3Provider.createContract(es.IERC20Abi,n.assetContractAddress),a=yield o.callMethod({method:{name:"allowance",args:[e,t]}});if((O.isBigNumber(a)?a:O.from(a)).lte(n.amount)){if(!r.gas)try{r.gas=yield o.estimateGas({method:{name:"approve",args:[t,O.from(n.amount).toString()]},estimateGasOptions:{from:null!==(i=r.from)&&void 0!==i?i:e}}),r.gas=O.isBigNumber(r.gas)?r.gas.toNumber():r.gas}catch(c){console.log("Could not estimate gas:",c)}const a=yield o.sendTransaction({method:{name:"approve",args:[t,O.from(n.amount).toString()]},transactionOptions:Object.assign(Object.assign({},r),{from:null!==(s=r.from)&&void 0!==s?s:e})});return delete r.gas,a}return!0}))}authorizeERC721ForContract(e,t,n,r){var i,s;return cs(this,void 0,void 0,(function*(){const o=this.web3Provider.createContract(es.IERC721Abi,n.assetContractAddress);if(`${yield o.callMethod({method:{name:"getApproved",args:[n.assetId]}})}`.toLowerCase()!==`${t}`.toLowerCase()){if(!r.gas)try{r.gas=yield o.estimateGas({method:{name:"approve",args:[t,n.assetId]},estimateGasOptions:{from:null!==(i=r.from)&&void 0!==i?i:e}})}catch(a){console.log("Could not estimate gas:",a)}const c=yield o.sendTransaction({method:{name:"approve",args:[t,n.assetId]},transactionOptions:Object.assign(Object.assign({},r),{from:null!==(s=r.from)&&void 0!==s?s:e})});return delete r.gas,c}return!0}))}setAuthorizationForERC1155Contract(e,t,n,r,i){var s,o;return cs(this,void 0,void 0,(function*(){const a=this.web3Provider.createContract(es.IERC1155Abi,n.assetContractAddress);if((yield a.callMethod({method:{name:"isApprovedForAll",args:[e,t]}}))!==r){if(!i.gas)try{i.gas=yield a.estimateGas({method:{name:"setApprovalForAll",args:[t,!0]},estimateGasOptions:{from:null!==(s=i.from)&&void 0!==s?s:e}})}catch(c){console.log("Could not estimate gas:",c)}const n=yield a.sendTransaction({method:{name:"setApprovalForAll",args:[t,!0]},transactionOptions:Object.assign(Object.assign({},i),{from:null!==(o=i.from)&&void 0!==o?o:e})});return delete i.gas,n}return!0}))}getDollarPriceInWei(){return cs(this,void 0,void 0,(function*(){const e=yield this.priceOracleContract.callMethod({method:{name:"latestRoundData",args:[]}}),t=yield this.priceOracleContract.callMethod({method:{name:"decimals",args:[]}}),n=O.from(10).pow(18),r=O.from(10).pow(t);return n.mul(r).div(e.answer)}))}reverseResolve(e){return cs(this,void 0,void 0,(function*(){const t=Array.isArray(e)?e:[e],n=Object.fromEntries(t.map((e=>[e,""]))),r=t.filter((e=>this.web3Provider.isAddress(e))),i=yield this.idrissMultipleRegistryContract.callMethod({method:{name:"getMultipleReverse",args:[r]}});if(!Array.isArray(e))return+i[0][1]?("@"+(yield $i(i[0][1]))).toLowerCase():i[0][1];for(const[e,s]of i)n[e]=s?("@"+(yield $i(s))).toLowerCase():"";return n}))}}var us=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class ds extends ls{constructor(e="https://polygon-rpc.com/",t={}){var n;let r;if("ethersv5"===t.providerType){const n=t.web3Provider?new Ar(t.web3Provider):new vr(e);r=Hi.fromEthersV5(n)}else r=Hi.fromWeb3(new(i())(null!==(n=t.web3Provider)&&void 0!==n?n:new(i().providers.HttpProvider)(e)));super(e,Object.assign(Object.assign({},t),{web3Provider:r}))}digestMessage(e){return us(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e),n=yield crypto.subtle.digest("SHA-256",t);return[...new Uint8Array(n)].map((e=>e.toString(16).padStart(2,"0"))).join("")}))}getConnectedAccount(){return us(this,void 0,void 0,(function*(){return this.web3Provider.getConnectedAccount()}))}}},69260:function(e,t,n){!function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var i=r(t),s=r(n);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return e}function c(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,i=f(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function m(e,t){return a(e)||l(e,t)||v(e,t)||u()}function g(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function y(e){var t=g(e,"string");return"symbol"==typeof t?t:t+""}function v(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}var b=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],w=function(e,t){var r=e.animationData,o=e.loop,a=e.autoplay,c=e.initialSegment,l=e.onComplete,u=e.onLoopComplete,d=e.onEnterFrame,f=e.onSegmentStart,g=e.onConfigReady,y=e.onDataReady,v=e.onDataFailed,w=e.onLoadedImages,E=e.onDOMLoaded,A=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var T=p(e,b),S=m(n.useState(!1),2),x=S[0],I=S[1],P=n.useRef(),_=n.useRef(null),R=function(){var e;null===(e=P.current)||void 0===e||e.play()},C=function(){var e;null===(e=P.current)||void 0===e||e.stop()},N=function(){var e;null===(e=P.current)||void 0===e||e.pause()},O=function(e){var t;null===(t=P.current)||void 0===t||t.setSpeed(e)},k=function(e,t){var n;null===(n=P.current)||void 0===n||n.goToAndPlay(e,t)},M=function(e,t){var n;null===(n=P.current)||void 0===n||n.goToAndStop(e,t)},D=function(e){var t;null===(t=P.current)||void 0===t||t.setDirection(e)},L=function(e,t){var n;null===(n=P.current)||void 0===n||n.playSegments(e,t)},U=function(e){var t;null===(t=P.current)||void 0===t||t.setSubframe(e)},B=function(e){var t;return null===(t=P.current)||void 0===t?void 0:t.getDuration(e)},F=function(){var e;null===(e=P.current)||void 0===e||e.destroy(),P.current=void 0},q=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_.current){null===(t=P.current)||void 0===t||t.destroy();var r=h(h(h({},e),n),{},{container:_.current});return P.current=i.default.loadAnimation(r),I(!!P.current),function(){var e;null===(e=P.current)||void 0===e||e.destroy(),P.current=void 0}}};return n.useEffect((function(){var e=q();return function(){return null===e||void 0===e?void 0:e()}}),[r,o]),n.useEffect((function(){P.current&&(P.current.autoplay=!!a)}),[a]),n.useEffect((function(){P.current&&(c?Array.isArray(c)&&c.length&&((P.current.currentRawFrame<c[0]||P.current.currentRawFrame>c[1])&&(P.current.currentRawFrame=c[0]),P.current.setSegment(c[0],c[1])):P.current.resetSegments(!0))}),[c]),n.useEffect((function(){var e=[{name:"complete",handler:l},{name:"loopComplete",handler:u},{name:"enterFrame",handler:d},{name:"segmentStart",handler:f},{name:"config_ready",handler:g},{name:"data_ready",handler:y},{name:"data_failed",handler:v},{name:"loaded_images",handler:w},{name:"DOMLoaded",handler:E},{name:"destroy",handler:A}].filter((function(e){return null!=e.handler}));if(e.length){var t=e.map((function(e){var t;return null===(t=P.current)||void 0===t||t.addEventListener(e.name,e.handler),function(){var t;null===(t=P.current)||void 0===t||t.removeEventListener(e.name,e.handler)}}));return function(){t.forEach((function(e){return e()}))}}}),[l,u,d,f,g,y,v,w,E,A]),{View:s.default.createElement("div",h({style:t,ref:_},T)),play:R,stop:C,pause:N,setSpeed:O,goToAndStop:M,goToAndPlay:k,setDirection:D,playSegments:L,setSubframe:U,getDuration:B,destroy:F,animationContainerRef:_,animationLoaded:x,animationItem:P.current}};function E(e){var t=e.getBoundingClientRect(),n=t.top,r=t.height;return(window.innerHeight-n)/(window.innerHeight+r)}function A(e,t,n){var r=e.getBoundingClientRect(),i=r.top;return{x:(t-r.left)/r.width,y:(n-i)/r.height}}var T=function(e){var t=e.wrapperRef,r=e.animationItem,i=e.mode,s=e.actions;n.useEffect((function(){var e=t.current;if(e&&r&&s.length){r.stop();var n=function(){var t=null,n=function(){var n=E(e),i=s.find((function(e){var t=e.visibility;return t&&n>=t[0]&&n<=t[1]}));if(i){if("seek"===i.type&&i.visibility&&2===i.frames.length){var o=i.frames[0]+Math.ceil((n-i.visibility[0])/(i.visibility[1]-i.visibility[0])*i.frames[1]);r.goToAndStop(o-r.firstFrame-1,!0)}"loop"===i.type&&(null===t||t!==i.frames||r.isPaused)&&(r.playSegments(i.frames,!0),t=i.frames),"play"===i.type&&r.isPaused&&(r.resetSegments(!0),r.play()),"stop"===i.type&&r.goToAndStop(i.frames[0]-r.firstFrame-1,!0)}};return document.addEventListener("scroll",n),function(){document.removeEventListener("scroll",n)}},o=function(){var t=function(t,n){var i=t,o=n;if(-1!==i&&-1!==o){var a=A(e,i,o);i=a.x,o=a.y}var c=s.find((function(e){var t=e.position;return t&&Array.isArray(t.x)&&Array.isArray(t.y)?i>=t.x[0]&&i<=t.x[1]&&o>=t.y[0]&&o<=t.y[1]:!(!t||Number.isNaN(t.x)||Number.isNaN(t.y))&&i===t.x&&o===t.y}));if(c){if("seek"===c.type&&c.position&&Array.isArray(c.position.x)&&Array.isArray(c.position.y)&&2===c.frames.length){var l=(i-c.position.x[0])/(c.position.x[1]-c.position.x[0]),u=(o-c.position.y[0])/(c.position.y[1]-c.position.y[0]);r.playSegments(c.frames,!0),r.goToAndStop(Math.ceil((l+u)/2*(c.frames[1]-c.frames[0])),!0)}"loop"===c.type&&r.playSegments(c.frames,!0),"play"===c.type&&(r.isPaused&&r.resetSegments(!1),r.playSegments(c.frames)),"stop"===c.type&&r.goToAndStop(c.frames[0],!0)}},n=function(e){t(e.clientX,e.clientY)},i=function(){t(-1,-1)};return e.addEventListener("mousemove",n),e.addEventListener("mouseout",i),function(){e.removeEventListener("mousemove",n),e.removeEventListener("mouseout",i)}};switch(i){case"scroll":return n();case"cursor":return o()}}}),[i,r])},S=function(e){var t=e.actions,n=e.mode,r=e.lottieObj,i=r.animationItem,s=r.View,o=r.animationContainerRef;return T({actions:t,animationItem:i,mode:n,wrapperRef:o}),s},x=["style","interactivity"],I=function(e){var t,r,i,s=e.style,o=e.interactivity,a=p(e,x),c=w(a,s),l=c.View,u=c.play,d=c.stop,h=c.pause,f=c.setSpeed,m=c.goToAndStop,g=c.goToAndPlay,y=c.setDirection,v=c.playSegments,b=c.setSubframe,E=c.getDuration,A=c.destroy,T=c.animationContainerRef,I=c.animationLoaded,P=c.animationItem;return n.useEffect((function(){e.lottieRef&&(e.lottieRef.current={play:u,stop:d,pause:h,setSpeed:f,goToAndPlay:g,goToAndStop:m,setDirection:y,playSegments:v,setSubframe:b,getDuration:E,destroy:A,animationContainerRef:T,animationLoaded:I,animationItem:P})}),[null===(t=e.lottieRef)||void 0===t?void 0:t.current]),S({lottieObj:{View:l,play:u,stop:d,pause:h,setSpeed:f,goToAndStop:m,goToAndPlay:g,setDirection:y,playSegments:v,setSubframe:b,getDuration:E,destroy:A,animationContainerRef:T,animationLoaded:I,animationItem:P},actions:null!==(r=null===o||void 0===o?void 0:o.actions)&&void 0!==r?r:[],mode:null!==(i=null===o||void 0===o?void 0:o.mode)&&void 0!==i?i:"scroll"})};Object.defineProperty(e,"LottiePlayer",{enumerable:!0,get:function(){return i.default}}),e.default=I,e.useLottie=w,e.useLottieInteractivity=S,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(11248),n(67294))},35137:function(e,t,n){"use strict";var r,i;n.d(t,{GZ:function(){return K},oZ:function(){return Y},AM:function(){return ne},YT:function(){return J},Dx:function(){return Q},EZ:function(){return s},UD:function(){return _o},J1:function(){return Io},c7:function(){return r},tn:function(){return ee},HM:function(){return re},WM:function(){return te}}),function(e){e.PUBLIC="Public Global Stellar Network ; September 2015",e.TESTNET="Test SDF Network ; September 2015",e.FUTURENET="Test SDF Future Network ; October 2022",e.SANDBOX="Local Sandbox Stellar Network ; September 2022",e.STANDALONE="Standalone Network ; February 2017"}(r||(r={})),function(e){e.HW_WALLET="HW_WALLET",e.HOT_WALLET="HOT_WALLET",e.BRIDGE_WALLET="BRIDGE_WALLET",e.AIR_GAPED_WALLET="AIR_GAPED_WALLET"}(i||(i={}));class s{constructor(e){this.modules=e.modules,this.setWallet(e.selectedWalletId),this.setNetwork(e.network)}async getSupportedWallets(){return Promise.all(this.modules.map((async e=>{const t=new Promise((e=>setTimeout((()=>e(!1)),500)));return{id:e.productId,name:e.productName,type:e.moduleType,icon:e.productIcon,isAvailable:await Promise.race([t,e.isAvailable()]),url:e.productUrl}})))}setNetwork(e){if(!Object.values(r).includes(e))throw new Error(`Wallet network "${e}" is not supported`);this.network=e}setWallet(e){const t=this.modules.find((t=>t.productId===e));if(!t)throw new Error(`Wallet id "${e}" is not supported`);this.selectedWallet=t.productId,this.selectedModule=t}async getPublicKey(e){if(!this.selectedWallet)throw new Error("Please set the wallet type first");return this.selectedModule.getPublicKey(e)}async signTx(e){if(!this.selectedWallet)throw new Error("Please set the wallet type first");return this.selectedModule.signTx(e)}async signBlob(e){if(!this.selectedWallet)throw new Error("Please set the wallet type first");return this.selectedModule.signBlob(e)}async signAuthEntry(e){if(!this.selectedWallet)throw new Error("Please set the wallet type first");return this.selectedModule.signAuthEntry(e)}async sign(e){if(!this.selectedWallet)throw new Error("Please set the wallet type first");let t;if(e.xdr){const{result:n}=await this.selectedModule.signTx({xdr:e.xdr,network:e.network||this.network,publicKeys:e.publicKey?[e.publicKey]:[]});t=n}else if(e.blob){const{result:n}=await this.selectedModule.signBlob({blob:e.blob,publicKey:e.publicKey});t=n}else{if(!e.entryPreimageXDR)throw new Error("Something went wrong, make sure the parameters are correct");{const{result:n}=await this.selectedModule.signBlob({blob:e.entryPreimageXDR,publicKey:e.publicKey});t=n}}return{signedXDR:t}}async openModal(e){if(this.modalElement)throw new Error("Stellar Wallets Modal is already open");this.modalElement=document.createElement("stellar-wallets-modal"),this.modalElement.setAttribute("showModal",""),e.modalDialogStyles&&this.modalElement.setAttribute("modalDialogStyles",JSON.stringify(e.modalDialogStyles));const t=await this.getSupportedWallets();this.modalElement.setAttribute("allowedWallets",JSON.stringify(t)),e.modalTitle&&this.modalElement.setAttribute("modalTitle",e.modalTitle),e.notAvailableText&&this.modalElement.setAttribute("notAvailableText",e.notAvailableText),document.body.appendChild(this.modalElement);const n=t=>{e.onWalletSelected(t.detail),this.modalElement.removeEventListener("wallet-selected",n,!1),document.body.removeChild(this.modalElement),this.modalElement=void 0};this.modalElement.addEventListener("wallet-selected",n,!1);const r=t=>{e.onClosed&&e.onClosed(t.detail),this.modalElement.removeEventListener("wallet-selected",n,!1),this.modalElement.removeEventListener("modal-closed",r,!1),document.body.removeChild(this.modalElement),this.modalElement=void 0};this.modalElement.addEventListener("modal-closed",r,!1)}}var o=n(43265),a=n(33692),c=n(50875);const l="important",u=" !"+l,d=(0,c.XM)(class extends c.Xe{constructor(e){var t;if(super(e),e.type!==c.pX.ATTRIBUTE||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];return null==r?t:t+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.ht){this.ht=new Set;for(const e in t)this.ht.add(e);return this.render(t)}this.ht.forEach((e=>{null==t[e]&&(this.ht.delete(e),e.includes("-")?n.removeProperty(e):n[e]="")}));for(const r in t){const e=t[r];if(null!=e){this.ht.add(r);const t="string"==typeof e&&e.endsWith(u);r.includes("-")||t?n.setProperty(r,t?e.slice(0,-11):e,t?l:""):n[r]=e}}return a.Jb}});var h=n(69065);const p=o.iv`
  .dialog-modal {
    position: fixed;
    z-index: 99;
    font-family: 'Open Sans', arial, sans-serif;
    margin: 0 auto;
    padding: 0;
    width: 100%;
    border-radius: 1rem 1rem 0 0;
    border-width: 0;
    box-shadow: 0 0.125rem 0.75rem rgba(0, 0, 0, 0.25);
    bottom: 0;
    overflow: hidden;
  }

  @media screen and (min-width: 768px) {
    .dialog-modal {
      z-index: 990;
      bottom: auto;
      top: 5rem;
      max-width: 45rem;
      border-radius: 1rem;
    }
  }
`,f=o.iv`
  .dialog-modal-body {
    display: flex;
    flex-direction: column-reverse;
  }

  .dialog-modal-body__help,
  .dialog-modal-body__wallets {
    width: 100%;
    flex-basis: 100%;
  }

  .dialog-modal-body__help {
    padding: 1.5rem;
  }

  .dialog-modal-body__wallets {
    padding: 1.5rem;
  }

  .dialog-text-solid {
    font-size: 1rem;
    line-height: 1.25rem;
  }

  .dialog-text {
    font-size: 0.875rem;
    line-height: 1.125rem;
  }

  @media (prefers-color-scheme: light) {
    .dialog-modal-body__help {
      background-color: #f8f8f8;
      border-top: 1px solid rgba(0, 0, 0, 0.15);
    }

    @media screen and (min-width: 768px) {
      .dialog-modal-body__help {
        border-top: none;
        border-right: 1px solid rgba(0, 0, 0, 0.15);
      }
    }

    .dialog-modal-body__wallets,
    .dialog-modal-body {
      background-color: #fcfcfc;
    }

    .dialog-text-solid {
      color: #000000;
    }

    .dialog-text {
      color: #181818;
    }
  }

  @media (prefers-color-scheme: dark) {
    .dialog-modal-body__help {
      background-color: #1c1c1c;
      border-top: 1px solid rgba(255, 255, 255, 0.15);
    }

    @media screen and (min-width: 768px) {
      .dialog-modal-body__help {
        border-top: none;
        border-right: 1px solid rgba(255, 255, 255, 0.15);
      }
    }

    .dialog-modal-body__wallets,
    .dialog-modal-body {
      background-color: #161616;
    }

    .dialog-text-solid {
      color: #ededed;
    }

    .dialog-text {
      color: #a0a0a0;
    }
  }

  @media screen and (min-width: 768px) {
    .dialog-modal-body {
      flex-direction: row;
    }

    .dialog-modal-body__help,
    .dialog-modal-body__wallets {
      padding: 2rem;
    }
  }
`,m=o.iv`
  .help-container {
    width: 100%;
  }

  .help-header {
    display: none;
    margin: 0 0 2rem 0;
  }

  .help-header__modal-title {
    font-size: 1.25rem;
    padding: 0;
    margin: 0;
  }

  .help__title,
  .help__text {
    text-align: center;
  }

  .help__title {
    font-weight: 400;
    margin-top: 0;
    margin-bottom: 0.5rem;
  }

  .help__text {
    max-width: 21rem;
    margin-left: auto;
    margin-right: auto;
    font-weight: 300;
    margin-top: 0;
  }

  .help__whats_stellar {
    display: none;
  }

  @media screen and (min-width: 768px) {
    .help-header {
      display: block;
    }

    .help__title,
    .help__text {
      text-align: left;
      margin-left: 0;
    }

    .help__whats_a_wallet {
      margin-bottom: 2rem;
    }

    .help__whats_stellar {
      display: block;
    }
  }
`,g=o.iv`
  .wallets-container {
    width: 100%;
    height: 100%;
    min-height: fit-content;
    display: flex;
    flex-direction: column;
  }

  .wallets-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .wallets-header__modal-title {
    font-size: 1.25rem;
    padding: 0;
    margin: 0;
  }

  .wallets-header__button {
    background: none;
    border: none;
    cursor: pointer;
  }

  @media (prefers-color-scheme: light) {
    .wallets-header__button svg {
      fill: #8f8f8f;
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-header__button svg {
      fill: #707070;
    }
  }

  .wallets-body {
    margin: 0;
    width: 100%;
    list-style: none;
    padding: 0 !important;
  }

  .wallets-body__item {
    display: flex;
    align-items: center;
    font-weight: 600;
    margin-bottom: 2rem;
    cursor: pointer;
  }

  .wallets-body__item img {
    margin-right: 1rem;
    width: 2rem;
    border-radius: 100%;
    overflow: hidden;
  }

  .wallets-body__item.not-available {
    cursor: alias;
  }

  .wallets-body__item .not-available {
    margin-left: auto;
    font-size: 10px;
    padding: 0.25rem 0.5rem;
    border-radius: 1rem;
  }

  @media (prefers-color-scheme: light) {
    .wallets-body__item .not-available {
      border: solid #e2e2e2 1px;
      background-color: #f3f3f3;
      color: #6f6f6f;
    }
  }

  @media (prefers-color-scheme: dark) {
    .wallets-body__item .not-available {
      border: solid #343434 1px;
      background-color: #232323;
      color: #a0a0a0;
    }
  }

  @media screen and (min-width: 768px) {
  }
`,y=o.iv`
  .dialog-modal[open] + .backdrop {
    background: rgba(0, 0, 0, 0.5);
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
`,v=o.iv`
  .dialog-modal[open] {
    -webkit-animation: showModal 0.3s ease normal;
  }
  @-webkit-keyframes showModal {
    from {
      transform: translateY(25%);
      opacity: 0;
    }
    to {
      transform: translateY(0%);
      opacity: 1;
    }
  }

  .dialog-modal.closing {
    -webkit-animation: hideModal 0.3s ease normal !important;
  }
  @-webkit-keyframes hideModal {
    from {
      transform: translateY(0%);
      opacity: 1;
    }
    to {
      transform: translateY(25%);
      opacity: 0;
    }
  }

  .backdrop.closing {
    -webkit-animation: hideBackdrop 0.3s ease normal !important;
  }
  @-webkit-keyframes hideBackdrop {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
`;var b=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};let w=class extends o.oi{constructor(){super(...arguments),this.showModal=!1,this.closingModal=!1,this.modalTitle="Connect a Wallet",this.notAvailableText="Not available",this.allowedWallets=[],this.modalDialogStyles={zIndex:990}}connectedCallback(){super.connectedCallback()}async closeModal(){this.closingModal=!0,await new Promise((e=>setTimeout(e,300))),this.showModal=!1,this.dispatchEvent(new CustomEvent("modal-closed",{detail:new Error("Modal closed"),bubbles:!0,composed:!0}))}async pickWalletOption(e){e.isAvailable?(this.closingModal=!0,await new Promise((e=>setTimeout(e,300))),this.dispatchEvent(new CustomEvent("wallet-selected",{detail:e,bubbles:!0,composed:!0}))):window.open(e.url,"_blank")}render(){const e=o.dy`
      <section class="help-container">
        <header class="help-header">
          <h2 class="help-header__modal-title dialog-text-solid">Learn more</h2>
        </header>

        <div class="help__whats_a_wallet">
          <h2 class="dialog-text-solid help__title">What is a wallet?</h2>
          <p class="dialog-text help__text">
            Wallets are used to send, receive, and store the keys you use to sign blockchain transactions.
          </p>
        </div>

        <div class="help__whats_stellar">
          <h2 class="dialog-text-solid help__title">What is Stellar?</h2>
          <p class="dialog-text help__text">
            Stellar is a decentralized, public blockchain that gives developers the tools to create experiences that are
            more like cash than crypto
          </p>
        </div>
      </section>
    `,t=o.dy`
      <section class="wallets-container">
        <header class="wallets-header">
          <h2 class="wallets-header__modal-title dialog-text-solid">${this.modalTitle}</h2>

          <button @click=${()=>this.closeModal()} class="wallets-header__button">
            <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="20px" width="20px" viewBox="0 0 490 490">
              <polygon
                points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 " />
            </svg>
          </button>
        </header>

        <ul class="wallets-body">
          ${this.allowedWallets.map(((e,t)=>o.dy`
                <li
                  @click=${()=>this.pickWalletOption(e)}
                  class=" wallets-body__item ${e.isAvailable?"":"not-available"} ${t===this.allowedWallets.length-1?"mb-0":""}">
                  <img src=${e.icon} alt=${e.name} />
                  <span class="dialog-text-solid">${e.name}</span>
                  ${e.isAvailable?"":o.dy`<small class="not-available">${this.notAvailableText}</small>`}
                </li>
              `))}
        </ul>
      </section>
    `;return o.dy`
      <dialog
        style=${d(this.modalDialogStyles)}
        class="dialog-modal ${this.closingModal?"closing":""}"
        .open=${this.showModal}>
        <section class="dialog-modal-body">
          <div class="dialog-modal-body__help">${e}</div>
          <div class="dialog-modal-body__wallets">${t}</div>
        </section>
      </dialog>

      <div
        style="position: fixed; z-index: 950"
        class="backdrop ${this.closingModal?"closing":""}"
        @click=${()=>this.closeModal()}></div>
    `}};function E(){const e=new Uint32Array(4);if("undefined"!==typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(e);else for(let t=0;t<e.length;t++)e[t]=Math.floor(4294967295*Math.random());return Array.from(e).map((e=>e.toString(36))).join("")}w.styles=[o.iv`
      :host * {
        box-sizing: border-box;
      }

      .mb-0 {
        margin-bottom: 0 !important;
      }
    `,p,f,m,y,v,g],b([(0,h.Cb)({type:Boolean,reflect:!0})],w.prototype,"showModal",void 0),b([(0,h.Cb)({type:Boolean,reflect:!0})],w.prototype,"closingModal",void 0),b([(0,h.Cb)({type:String,reflect:!0})],w.prototype,"modalTitle",void 0),b([(0,h.Cb)({type:String,reflect:!0})],w.prototype,"notAvailableText",void 0),b([(0,h.Cb)({type:Array,reflect:!0,converter:{fromAttribute:e=>JSON.parse(e)}})],w.prototype,"allowedWallets",void 0),b([(0,h.Cb)({converter:{fromAttribute:e=>e&&{...JSON.parse(e),zIndex:990}}})],w.prototype,"modalDialogStyles",void 0),w=b([(0,h.Mo)("stellar-wallets-modal")],w);var A={public_key:{title:"View public key",description:"Requests account public key. It's a simple way of authentication for Stellar-based applications. The response ensures that a user owns the corresponding secret key.",implicitFlow:!1,params:{token:{description:"Verification token generated by the application (should be unique or random).",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST a signed token and public key.",type:"string",required:!1},require_existing:{description:"Allow existing Albedo accounts only.",type:"boolean",required:!1}},returns:{pubkey:{description:"User-selected public key.",type:"string"},signed_message:{description:"HEX-encoded authentication message derived from the public key and verification token.",type:"string"},signature:{description:"HEX-encoded ED25519 signature of the authentication message that can be further used to verify user's keypair ownership.",type:"string"}}},sign_message:{title:"Sign text message",description:"Requests arbitrary message signing. Can be used to implement identity/ownership verification.",implicitFlow:!0,params:{message:{description:"Text message to sign.",type:"string",required:!0},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST a signed message.",type:"string",required:!1}},returns:{pubkey:{description:"User-selected public key.",type:"string"},original_message:{description:"Text message to sign from request.",type:"string"},signed_message:{description:"HEX-encoded message derived from the public key and original message.",type:"string"},message_signature:{description:"HEX-encoded ED25519 signature of the signed message.",type:"string"}}},tx:{title:"Sign transaction",description:"Requests a signature for the transaction. Returns the signed transaction envelope that can be submitted to the network or used for multi-sig coordination.",implicitFlow:!0,params:{xdr:{description:"XDR-encoded transaction envelope to sign.",type:"string",required:!0},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon.",type:"string",required:!1},description:{description:"Optional human-friendly short transaction description provided by developers.",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{xdr:{description:"XDR-encoded transaction envelope from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},pay:{title:"Make payment",description:"Requests a payment from a user. Works with any Stellar asset, supports transaction memo.",implicitFlow:!0,params:{amount:{description:"Requested payment amount.",type:"string",required:!0},destination:{description:"Payment destination address.",type:"string",required:!0},asset_code:{description:"Asset code (skip for XLM).",type:"string",required:!1},asset_issuer:{description:"Asset issuer (skip for XLM).",type:"string",required:!1},memo:{description:"Transaction memo (required for exchanges and some anchors).",type:"string",required:!1},memo_type:{description:"Transaction memo type.",type:"string",required:!1},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon. ",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{amount:{description:"Payment amount from request.",type:"string"},destination:{description:"Payment destination address from request.",type:"string"},asset_code:{description:"Asset code from request.",type:"string"},asset_issuer:{description:"Asset issuer from request.",type:"string"},memo:{description:"Transaction memo from request.",type:"string"},memo_type:{description:"Transaction memo type from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},trust:{title:"Establish trustline",description:"Requests permission to create a trustline to a given Stellar asset. Gradually simplifies the process of creating trustlines for anchors, ICOs, and airdrops.",implicitFlow:!0,params:{asset_code:{description:"Trustline asset code.",type:"string",required:!0},asset_issuer:{description:"Trustline asset issuer address.",type:"string",required:!0},limit:{description:"Trust limit.",type:"string",required:!1},memo:{description:"Transaction memo (required for exchanges and some anchors).",type:"string",required:!1},memo_type:{description:"Transaction memo type.",type:"string",required:!1},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon. ",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{asset_code:{description:"Trustline asset code from request.",type:"string"},asset_issuer:{description:"Trustline asset issuer address from request.",type:"string"},limit:{description:"Trust limit from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},exchange:{title:"Swap tokens",description:"Requests permission to buy tokens on Stellar DEX at market price.",implicitFlow:!1,params:{amount:{description:"The amount of asset to buy.",type:"string",required:!0},max_price:{description:"Maximum price the user willing to pay.",type:"string",required:!0},sell_asset_code:{description:"Asset code of the asset to sell.",type:"string",required:!1},sell_asset_issuer:{description:"Issuer account of the asset to sell.",type:"string",required:!1},buy_asset_code:{description:"Asset code of the asset to buy.",type:"string",required:!1},buy_asset_issuer:{description:"Issuer account of the asset to buy.",type:"string",required:!1},memo:{description:"Transaction memo (required for exchanges and some anchors).",type:"string",required:!1},memo_type:{description:"Transaction memo type.",type:"string",required:!1},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1},callback:{description:"Optional URL callback where Albedo will POST the signed transaction XDR instead of submitting it to Horizon.",type:"string",required:!1},submit:{description:"If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.",type:"boolean",required:!1}},returns:{amount:{description:"The amount of asset to buy from request.",type:"string"},max_price:{description:"Maximum price the user willing to pay from request.",type:"string"},sell_asset_code:{description:"Asset code of the asset to sell from request.",type:"string"},sell_asset_issuer:{description:"Issuer account of the asset to sell from request.",type:"string"},buy_asset_code:{description:"Asset code of the asset to buy from request.",type:"string"},buy_asset_issuer:{description:"Issuer account of the asset to buy from request.",type:"string"},tx_hash:{description:"HEX-encoded transaction hash.",type:"string"},signed_envelope_xdr:{description:"XDR-encoded transaction envelope with new signatures.",type:"string"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"},result:{description:"Optional response from Horizon if the transaction has been submitted automatically.",type:"object"}}},implicit_flow:{title:"Implicit permissions",description:'Requests temporary access token for one or more intents that can be used to execute actions without explicit confirmation from the user. In order to be executed implicitly, an implicit flow permissions for a given intent should be granted and "pubkey" parameter set.',implicitFlow:!1,params:{intents:{description:"Requested implicit flow intents.",type:"string|string[]",required:!0},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1}},returns:{granted:{description:"Whether a user granted permissions or not.",type:"boolean"},intents:{description:"Requested implicit flow intents.",type:"string[]"},grants:{description:"Implicit flow intents that have been granted.",type:"string[]"},session:{description:"Unique implicit session id.",type:"string"},valid_until:{description:"Session expiration timestamp.",type:"number"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"}}},manage_account:{title:"Open account settings",description:"Opens account settings window for a given account.",implicitFlow:!1,params:{pubkey:{description:"Specific public key requested by the application.",type:"string",required:!0},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1}},returns:{pubkey:{description:"Public key from intent request.",type:"string"}}},batch:{title:"Intents batch",description:"Requests execution of several tx intents bundled together. This intent is atomic \u2013 a user confirms or rejects all bundled requests at once, with the same account and the same Stellar network.",implicitFlow:!0,params:{intents:{description:"Requested tx intents that should be executed together.",type:"object[]",required:!0},pubkey:{description:"Specific public key requested by the application.",type:"string",required:!1},network:{description:"Stellar network identifier or private network passphrase.",type:"string",required:!1}},returns:{intents:{description:"Requested tx intents.",type:"object[]"},results:{description:"Array of results for each requested intent.",type:"object[]"},pubkey:{description:"User-selected public key.",type:"string"},network:{description:"Stellar network identifier.",type:"string"}}}};var T={unhandledError:{message:"Unhandled error occurred. If this error persists, please contact Albedo support.",code:-1},externalError:{message:"External error occurred.",code:-2},invalidIntentRequest:{message:"Intent request is invalid.",code:-3},actionRejectedByUser:{message:"Action request was rejected by the user.",code:-4},horizonError:{message:"Transaction failed when submitted to Stellar network.",code:-5},callbackError:{message:"Callback redirect failed.",code:-6}};function S(e,t=!1){this.windowHandler=e,this.ephemeral=!!t,this.isLoaded=!1,this.pendingRequests={},this.preprocessRequestParams=null,this.onLoaded=new Promise(((e,t)=>this.onLoadedCallback=e)).then((()=>this)),this.messageHandler=this.messageHandler.bind(this),window.addEventListener("message",this.messageHandler,!1)}function x(e,t,n){n.error?t(n):e(n)}S.prototype={isLoaded:!1,protocolVersion:3,markLoaded(){const{onLoadedCallback:e}=this;e&&(this.onLoadedCallback=null,this.isLoaded=!0,e())},messageHandler({data:e}){if(e.albedo)return this.matchProtocolVersion(e.albedo.protocol),this.markLoaded();if(e.albedoIntentResult){const{__reqid:t,...n}=e.albedoIntentResult,r=this.pendingRequests[t];r&&(delete this.pendingRequests[t],r(n),this.ephemeral&&(window.removeEventListener("message",this.messageHandler,!1),this.windowHandler.close()))}},transportCloseHandler(){for(let e in this.pendingRequests)if(this.pendingRequests.hasOwnProperty(e)){const t=this.pendingRequests[e];delete this.pendingRequests[e],t(T.actionRejectedByUser)}},postMessage(e){const t=E();return new Promise(((n,r)=>{this.onLoaded.then((()=>{this.pendingRequests[t]=x.bind(this,n,r),e=Object.assign({__reqid:t,__albedo_intent_version:this.protocolVersion},e),this.preprocessRequestParams&&(e=this.preprocessRequestParams(e)),this.windowHandler.postMessage(e,"*")}))}))},matchProtocolVersion(e){const t=e-this.protocolVersion;if(0===t)return;const n=`@albedo-link/intent module protocol version (${this.protocolVersion}) is incompatible with current Albedo protocol version ${e}.`;if(t>0)console.warn(n+" Please update @albedo-link/intent module to avoid possible connection problems.");else if(t<0)throw this.windowHandler.close(),new Error(n)}};var I=S;let P=null;function _(e){if(!P){const t=document.createElement("iframe");t.style.border="none",Object.assign(t,{width:"0",height:"0",frameBorder:"0",referrerPolicy:"origin",src:`${e}`}),document.body.appendChild(t),P=new I(t.contentWindow)}return P.onLoaded}function R({session:e,pubkey:t,grants:n,valid_until:r}){this.key=e,this.pubkey=t,this.grants=n.slice(),this.validUntil=r,Object.freeze(this),Object.freeze(this.grants)}R.prototype={key:"",pubkey:"",grants:[],validUntil:0,get isExpired(){return this.validUntil-2e3<(new Date).getTime()},toJSON(){return{session:this.key,pubkey:this.pubkey,grants:this.grants.slice(),valid_until:this.validUntil}}};var C=R;const N="albedo_session_",O={};function k(){return window.sessionStorage}const M=!0;function D(e){let t;if(M){const n=k().getItem(N+e);n&&(t=new C(JSON.parse(n)))}else t=O[e];return t?t.isExpired?(U(e),null):t:null}function L(e,t){const n=D(t);return n&&n.grants.includes(e)?n:null}function U(e){M?k().removeItem(N+e):delete O[e]}function B(e){return Object.assign(new Error,T.invalidIntentRequest,{ext:e})}function F(e,t){try{const{intent:n}=e;if(!n)throw B('Parameter "intent" is required.');const r=A[n];if(!r)throw B(`Unknown intent: "${n}".`);const i=function(e,t){if("object"!==typeof t)throw B("Intent parameters expected.");const{intent:n,pubkey:r}=t,i={intent:n};if(r&&!/^G[0-9A-Z]{55}$/.test(r))throw B('Invalid "pubkey" parameter. Stellar account public key expected.');for(const s in e.params){const r=e.params[s],o=t[s];if(o)i[s]=o;else if(r.required)throw B(`Parameter "${s}" is required for intent "${n}".`)}return i}(r,e);return function(e,t){if(e.pubkey){const n=L(e.intent,e.pubkey);if(n)return e.session=n.key,_(t)}return setTimeout((()=>{"implicit_flow"===e.intent&&_(t)}),200),function(e){const t=`${e}/confirm`,n=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY,i=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-240+n,s=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-300+r,o=window.open(t,"auth.albedo.link",`height=600,width=480,top=${s},left=${i},menubar=0,toolbar=0,location=0,status=0,personalbar=0,scrollbars=0,dependent=1`);return new I(o,!0).onLoaded}(t)}(i,t).then((e=>function(e,t){return t.postMessage(e).then((e=>("implicit_flow"===e.intent&&e.granted&&function(e){const t=new C(e);M?k().setItem(N+t.pubkey,JSON.stringify(t)):O[t.pubkey]=t}(e),e)))}(i,e)))}catch(n){const{code:e=-1,message:t,ext:r}=n,i={message:t,code:e};return r&&(i.ext=r),Promise.reject(i)}}if("object"===typeof window&&"function"!==typeof window.fetch)throw new Error("Browser FetchAPI is not available. For legacy browsers support use polyfills such as whatwg-fetch.");function q(){}function j(e){switch(typeof e){case"string":return e;case"undefined":return""}return JSON.stringify(e)}q.prototype={frontendUrl:"https://albedo.link",intentInterface:A,intentErrors:T,request(e,t){return F(Object.assign(t||{},{intent:e}),this.frontendUrl)},implicitFlow(e){return this.request("implicit_flow",e)},publicKey(e){return(e=Object.assign({},e)).token||(e.token=E()),this.request("public_key",e)},tx(e){return this.request("tx",e)},batch(e){return this.request("batch",e)},pay(e){return this.request("pay",e)},trust(e){return this.request("trust",e)},exchange(e){return this.request("exchange",e)},signMessage(e){return e=Object.assign({},e,{message:j(e.message)}),this.request("sign_message",e)},manageAccount(e){return this.request("manage_account",e)},generateRandomToken:()=>E(),isImplicitSessionAllowed:(e,t)=>!!L(e,t),listImplicitSessions:()=>function(){const e=k();return Object.keys(e).filter((e=>0===e.indexOf(N))).map((e=>D(e.substr(N.length)))).filter((e=>!!e))}(),forgetImplicitSession(e){U(e)}};const V=new q;var z;V.default=V,z=V,"undefined"!==typeof document&&document.addEventListener&&document.addEventListener("click",(function(e){if("A"!==e.target.tagName||0!==(e.target.href||"").indexOf("web+stellar:"))return;e.preventDefault(),e.stopImmediatePropagation();const{pathname:t,search:n}=new URL(e.target.href);if(!["tx","pay"].includes(t))return void alert(`Invalid operation requested: ${t}. It's likely an external application error. Please contact support team of ${window.location.origin}.`);const r=function(e=null){null===e&&(e=window.location.search),"?"===e[0]&&(e=e.substr(1));const t={};for(let n of e.split("&")){const[e,r]=n.split("=").map((e=>decodeURIComponent(e)));t[e]=r}return t}(n);z.request(t,r)}),!1);var H=V;class K{constructor(){this.moduleType=i.HOT_WALLET,this.productId="albedo",this.productName="Albedo",this.productUrl="https://albedo.link/",this.productIcon="https://stellar.creit.tech/wallet-icons/albedo.svg"}async isAvailable(){return!0}async getPublicKey(){return H.publicKey({}).then((({pubkey:e})=>e))}async signTx(e){if(e.network!==r.PUBLIC&&e.network!==r.TESTNET)throw new Error(`Albedo doesn't support the network: ${e.network}`);let t=e.xdr;for(const n of e.publicKeys)t=await H.tx({xdr:t,pubkey:n,network:e.network===r.PUBLIC?G.PUBLIC:G.TESTNET}).then((({signed_envelope_xdr:e})=>e));return{result:t}}async signBlob(e){throw new Error("Albedo does not support signing random blobs")}async signAuthEntry(e){throw new Error("Albedo does not support signing authorization entries")}}var G;!function(e){e.PUBLIC="public",e.TESTNET="testnet"}(G||(G={}));var W=n(78175);class Y{constructor(){this.moduleType=i.HOT_WALLET,this.productId="freighter",this.productName="Freighter",this.productUrl="https://freighter.app",this.productIcon="https://stellar.creit.tech/wallet-icons/freighter.svg"}async isAvailable(){return(0,W.isConnected)()}async getPublicKey(){if(!(await(0,W.isConnected)()))throw new Error("Freighter is not connected");return(0,W.requestAccess)()}async signTx(e){if(!(await(0,W.isConnected)()))throw new Error("Freighter is not connected");let t=e.xdr;for(const n of e.publicKeys)t=await(0,W.signTransaction)(t,{accountToSign:n,networkPassphrase:e.network});return{result:t}}async signBlob(e){if(!(await(0,W.isConnected)()))throw new Error("Freighter is not connected");return{result:await(0,W.signBlob)(e.blob,{accountToSign:e.publicKey})}}async signAuthEntry(e){if(!(await(0,W.isConnected)()))throw new Error("Freighter is not connected");return{result:await(0,W.signAuthEntry)(e.entryPreimageXDR,{accountToSign:e.publicKey})}}}var $=n(77349);class J{constructor(){this.moduleType=i.HOT_WALLET,this.productId="lobstr",this.productName="LOBSTR",this.productUrl="https://lobstr.co",this.productIcon="https://stellar.creit.tech/wallet-icons/lobstr.svg"}async isAvailable(){return(0,$.isConnected)()}async getPublicKey(){if(!(await(0,$.isConnected)()))throw new Error("Lobstr is not connected");return(0,$.getPublicKey)()}async signTx(e){if(!(await(0,$.isConnected)()))throw new Error("Lobstr is not connected");return e.publicKeys.length>0&&console.warn("Lobstr doesn't allow specifying what public key should sign the transaction, we skip the value"),e.network&&console.warn("Lobstr doesn't allow specifying the network that should be used, we skip the value"),{result:await(0,$.signTransaction)(e.xdr)}}async signBlob(e){throw new Error("Lobstr does not support signing random blobs")}async signAuthEntry(e){throw new Error("Lobstr does not support signing authorization entries")}}class Q{constructor(){this.moduleType=i.HOT_WALLET,this.productId="rabet",this.productName="Rabet",this.productUrl="https://rabet.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/rabet.svg"}async isAvailable(){return!!window.rabet}async getPublicKey(){if(!window.rabet)throw new Error("Rabet is not installed");const{publicKey:e}=await window.rabet.connect();return e}async signTx(e){if(!window.rabet)throw new Error("Rabet is not installed");if(e.network!==r.PUBLIC&&e.network!==r.TESTNET)throw new Error(`Rabet doesn't support the network: ${e.network}`);e.publicKeys.length>0&&console.warn("Rabet doesn't allow specifying the public keys to use");return{result:(await window.rabet.sign(e.xdr,e.network===r.PUBLIC?X.PUBLIC:X.TESTNET)).xdr}}async signBlob(e){throw new Error("Rabet does not support signing random blobs")}async signAuthEntry(e){throw new Error("Rabet does not support signing authorization entries")}}var X;!function(e){e.PUBLIC="mainnet",e.TESTNET="testnet"}(X||(X={}));var Z=n(64871);const ee="xbull";class te{constructor(){this.moduleType=i.HOT_WALLET,this.productId=ee,this.productName="xBull",this.productUrl="https://xbull.app",this.productIcon="https://stellar.creit.tech/wallet-icons/xbull.svg"}async isAvailable(){return!0}async getPublicKey(){const e=new Z.xBullWalletConnect,t=await e.connect();return e.closeConnections(),t}async signTx(e){const t=new Z.xBullWalletConnect;let n=e.xdr;for(const r of e.publicKeys)n=await t.sign({xdr:n,publicKey:r,network:e.network});return t.closeConnections(),{result:n}}async signBlob(e){throw new Error("xBull does not support signing random blobs")}async signAuthEntry(e){throw new Error("xBull does not support signing authorization entries")}}class ne{constructor(){this.moduleType=i.HOT_WALLET,this.productId="hana",this.productName="Hana Wallet",this.productUrl="https://hanawallet.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/hana.svg"}async isAvailable(){var e;return!!(null===(e=window.hanaWallet)||void 0===e?void 0:e.stellar)}async getPublicKey(){var e;if(!(null===(e=window.hanaWallet)||void 0===e?void 0:e.stellar))throw new Error("Hana Wallet is not installed");return window.hanaWallet.stellar.getPublicKey()}async signTx(e){var t;if(!(null===(t=window.hanaWallet)||void 0===t?void 0:t.stellar))throw new Error("Hana Wallet is not installed");let n=e.xdr;for(const r of e.publicKeys)n=await window.hanaWallet.stellar.signTransaction({xdr:n,accountToSign:r,networkPassphrase:e.network});return{result:n}}async signBlob(e){var t;if(!(null===(t=window.hanaWallet)||void 0===t?void 0:t.stellar))throw new Error("Hana Wallet is not installed");return{result:await window.hanaWallet.stellar.signBlob({blob:e.blob,accountToSign:e.publicKey})}}async signAuthEntry(e){var t;if(!(null===(t=window.hanaWallet)||void 0===t?void 0:t.stellar))throw new Error("Hana Wallet is not installed");return{result:await window.hanaWallet.stellar.signAuthEntry({xdr:e.entryPreimageXDR,accountToSign:e.publicKey})}}}function re(){return[new K,new Y,new Q,new te,new J,new ne]}var ie=n(14301);class se{constructor(e){this.openModal=ie.jb.open,this.closeModal=ie.jb.close,this.subscribeModal=ie.jb.subscribe,this.setTheme=ie.ThemeCtrl.setThemeConfig,ie.ThemeCtrl.setThemeConfig(e),ie.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.all([n.e(766),n.e(2856)]).then(n.bind(n,32856));const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),ie.OptionsCtrl.setIsUiLoaded(!0)}}}var oe=n(17187),ae=n.n(oe),ce=n(82673),le=n(48764).Buffer;function ue(e,...t){try{return(n=e(...t))&&"function"===typeof n.then?n:Promise.resolve(n)}catch(r){return Promise.reject(r)}var n}function de(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"===typeof e.toJSON)return de(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const he="base64:";function pe(e){return"string"===typeof e?e:he+function(e){if(globalThis.Buffer)return le.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function fe(e){return"string"!==typeof e?e:e.startsWith(he)?function(e){if(globalThis.Buffer)return le.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(he.length)):e}function me(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function ge(...e){return me(e.join(":"))}function ye(e){return(e=me(e))?e+":":""}const ve=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function be(e={}){const t={mounts:{"":e.driver||ve()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=e=>{for(const n of t.mountpoints)if(e.startsWith(n))return{base:n,relativeKey:e.slice(n.length),driver:t.mounts[n]};return{base:"",relativeKey:e,driver:t.mounts[""]}},r=(e,n)=>t.mountpoints.filter((t=>t.startsWith(e)||n&&e.startsWith(t))).map((n=>({relativeBase:e.length>n.length?e.slice(n.length):void 0,mountpoint:n,driver:t.mounts[n]}))),i=(e,n)=>{if(t.watching){n=me(n);for(const r of t.watchListeners)r(e,n)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,r)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const o of e){const e="string"===typeof o,r=me(e?o:o.key),i=e?void 0:o.value,a=e||!o.options?t:{...t,...o.options},c=n(r);s(c).items.push({key:r,value:i,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>r(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=me(e);const{relativeKey:r,driver:i}=n(e);return ue(i.hasItem,r,t)},getItem(e,t={}){e=me(e);const{relativeKey:r,driver:i}=n(e);return ue(i.getItem,r,t).then((e=>(0,ce.ZP)(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?ue(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:ge(e.base,t.key),value:(0,ce.ZP)(t.value)}))))):Promise.all(e.items.map((t=>ue(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:(0,ce.ZP)(e)})))))))),getItemRaw(e,t={}){e=me(e);const{relativeKey:r,driver:i}=n(e);return i.getItemRaw?ue(i.getItemRaw,r,t):ue(i.getItem,r,t).then((e=>fe(e)))},async setItem(e,t,r={}){if(void 0===t)return a.removeItem(e);e=me(e);const{relativeKey:s,driver:o}=n(e);o.setItem&&(await ue(o.setItem,s,de(t),r),o.watch||i("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return ue(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:de(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>ue(e.driver.setItem,t.relativeKey,de(t.value),t.options))))}))},async setItemRaw(e,t,r={}){if(void 0===t)return a.removeItem(e,r);e=me(e);const{relativeKey:s,driver:o}=n(e);if(o.setItemRaw)await ue(o.setItemRaw,s,t,r);else{if(!o.setItem)return;await ue(o.setItem,s,pe(t),r)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"===typeof t&&(t={removeMeta:t}),e=me(e);const{relativeKey:r,driver:s}=n(e);s.removeItem&&(await ue(s.removeItem,r,t),(t.removeMeta||t.removeMata)&&await ue(s.removeItem,r+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"===typeof t&&(t={nativeOnly:t}),e=me(e);const{relativeKey:r,driver:i}=n(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await ue(i.getMeta,r,t)),!t.nativeOnly){const e=await ue(i.getItem,r+"$",t).then((e=>(0,ce.ZP)(e)));e&&"object"===typeof e&&("string"===typeof e.atime&&(e.atime=new Date(e.atime)),"string"===typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,n={}){return this.setItem(e+"$",t,n)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=ye(e);const n=r(e,!0);let i=[];const s=[];let o=!0;for(const r of n){r.driver.flags?.maxDepth||(o=!1);const e=await ue(r.driver.getKeys,r.relativeBase,t);for(const t of e){const e=r.mountpoint+me(t);i.some((t=>e.startsWith(t)))||s.push(e)}i=[r.mountpoint,...i.filter((e=>!e.startsWith(r.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return s.filter((n=>(!a||function(e,t){if(void 0===t)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}(n,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(n,e)))},async clear(e,t={}){e=ye(e),await Promise.all(r(e,!1).map((async e=>{if(e.driver.clear)return ue(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const n=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(n.map((n=>e.driver.removeItem(n,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>Ee(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await we(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,n){if((e=ye(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=n,t.watching&&Promise.resolve(we(n,i,e)).then((n=>{t.unwatch[e]=n})).catch(console.error),a},async unmount(e,n=!0){(e=ye(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),n&&await Ee(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=me(e)+":";const t=n(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=me(e);return r(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,n={})=>a.setItem(e,t,n),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function we(e,t,n){return e.watch?e.watch(((e,r)=>t(e,n+r))):()=>{}}async function Ee(e){"function"===typeof e.dispose&&await ue(e.dispose)}var Ae=n(24678),Te=n(85094);var Se=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=e=>t+e;let r;return e.dbName&&e.storeName&&(r=(0,Ae.MT)(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof(await(0,Ae.U2)(n(e),r))>"u"),getItem:async e=>await(0,Ae.U2)(n(e),r)??null,setItem:(e,t)=>(0,Ae.t8)(n(e),t,r),removeItem:e=>(0,Ae.IV)(n(e),r),getKeys:()=>(0,Ae.XP)(r),clear:()=>(0,Ae.ZH)(r)}};class xe{constructor(){this.indexedDb=be({driver:Se({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,Te.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{},Pe={exports:{}};function _e(e){var t;return[e[0],(0,Te.D)(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof Ie<"u"&&Ie.localStorage?Pe.exports=Ie.localStorage:typeof window<"u"&&window.localStorage?Pe.exports=window.localStorage:Pe.exports=new t}();class Re{constructor(){this.localStorage=Pe.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(_e)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return(0,Te.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,Te.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}const Ce=async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))};class Ne{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Re;this.storage=e;try{(async(e,t,n)=>{const r="wc_storage_version",i=await t.getItem(r);if(i&&i>=1)return void n(t);const s=await e.getKeys();if(!s.length)return void n(t);const o=[];for(;s.length;){const n=s.shift();if(!n)continue;const r=n.toLowerCase();if(r.includes("wc@")||r.includes("walletconnect")||r.includes("wc_")||r.includes("wallet_connect")){const r=await e.getItem(n);await t.setItem(n,r),o.push(n)}}await t.setItem(r,1),n(t),Ce(e,o)})(e,new xe,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var Oe=n(53531),ke=n(12044),Me=n(38200);class De extends Me.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Le extends Me.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class Ue{constructor(e,t){this.logger=e,this.core=t}}class Be extends Me.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Fe extends Me.q{constructor(e){super()}}class qe{constructor(e,t,n,r){this.core=e,this.logger=t,this.name=n}}class je extends Me.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Ve extends Me.q{constructor(e,t){super(),this.core=e,this.logger=t}}class ze{constructor(e,t){this.projectId=e,this.logger=t}}class He{constructor(e,t){this.projectId=e,this.logger=t}}ae();class Ke{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}oe.EventEmitter;class Ge{constructor(e){this.client=e}}var We=n(49392),Ye=n(15501),$e=n(512),Je=n(31416),Qe=n(73294),Xe=n(57664),Ze=n(11799),et=n(43631),tt=n(66736),nt=n(62873),rt=n(65755),it=n(17563),st=n(37968),ot=n(34155);function at(e,t){return e.includes(":")?[e]:t.chains||[]}const ct="base10",lt="base16",ut="base64pad",dt="utf8",ht=0,pt=1,ft=0,mt=1,gt=12,yt=32;function vt(){const e=(0,Je.randomBytes)(yt);return(0,Ze.BB)(e,lt)}function bt(e){const t=(0,Qe.vp)((0,Ze.mL)(e,dt));return(0,Ze.BB)(t,lt)}function wt(e){return Number((0,Ze.BB)(e,ct))}function Et(e){const t=function(e){return(0,Ze.mL)(`${e}`,ct)}(typeof e.type<"u"?e.type:ht);if(wt(t)===pt&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,Ze.mL)(e.senderPublicKey,lt):void 0,r=typeof e.iv<"u"?(0,Ze.mL)(e.iv,lt):(0,Je.randomBytes)(gt);return function(e){if(wt(e.type)===pt){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,Ze.BB)((0,Ze.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),ut)}return(0,Ze.BB)((0,Ze.zo)([e.type,e.iv,e.sealed]),ut)}({type:t,sealed:new Ye.OK((0,Ze.mL)(e.symKey,lt)).seal(r,(0,Ze.mL)(e.message,dt)),iv:r,senderPublicKey:n})}function At(e){const t=(0,Ze.mL)(e,ut),n=t.slice(ft,mt),r=mt;if(wt(n)===pt){const e=r+yt,i=e+gt,s=t.slice(r,e),o=t.slice(e,i);return{type:n,sealed:t.slice(i),iv:o,senderPublicKey:s}}const i=r+gt,s=t.slice(r,i);return{type:n,sealed:t.slice(i),iv:s}}function Tt(e){const t=e?.type||ht;if(t===pt){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function St(e){return e.type===pt&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var xt=Object.defineProperty,It=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,Rt=(e,t,n)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ct=(e,t)=>{for(var n in t||(t={}))Pt.call(t,n)&&Rt(e,n,t[n]);if(It)for(var n of It(t))_t.call(t,n)&&Rt(e,n,t[n]);return e};const Nt="ReactNative",Ot={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},kt="js";function Mt(){return typeof ot<"u"&&typeof ot.versions<"u"&&typeof ot.versions.node<"u"}function Dt(){return!(0,nt.getDocument)()&&!!(0,nt.getNavigator)()&&navigator.product===Nt}function Lt(){return!Mt()&&!!(0,nt.getNavigator)()&&!!(0,nt.getDocument)()}function Ut(){return Dt()?Ot.reactNative:Mt()?Ot.node:Lt()?Ot.browser:Ot.unknown}function Bt(e,t,r){const i=function(){if(Ut()===Ot.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=(0,et.qY)();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;const t=Ut();return t===Ot.browser?[t,(null==(e=(0,nt.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[kt,r].join("-"),i,s].join("/")}function Ft({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a}){const c=n.split("?"),l={auth:i,ua:Bt(e,t,r),projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},u=function(e,t){let n=it.parse(e);return n=Ct(Ct({},n),t),it.stringify(n)}(c[1]||"",l);return c[0]+"?"+u}function qt(e,t){return e.filter((e=>t.includes(e))).length===e.length}function jt(e){return Object.fromEntries(e.entries())}function Vt(e){return new Map(Object.entries(e))}function zt(e=tt.FIVE_MINUTES,t){const n=(0,tt.toMiliseconds)(e||tt.FIVE_MINUTES);let r,i,s;return{resolve:e=>{s&&r&&(clearTimeout(s),r(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,o)=>{s=setTimeout((()=>{o(new Error(t))}),n),r=e,i=o}))}}function Ht(e,t,n){return new Promise((async(r,i)=>{const s=setTimeout((()=>i(new Error(n))),t);try{r(await e)}catch(l){i(l)}clearTimeout(s)}))}function Kt(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Gt(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)r.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);r.id=Number(n)}return r}function Wt(e,t){return(0,tt.fromMiliseconds)((t||Date.now())+(0,tt.toMiliseconds)(e))}function Yt(e){return Date.now()>=(0,tt.toMiliseconds)(e)}function $t(e,t){return`${e}${t?`:${t}`:""}`}function Jt(e){return e?.relay||{protocol:"irn"}}function Qt(e){const t=st.iO[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Xt=Object.defineProperty,Zt=Object.defineProperties,en=Object.getOwnPropertyDescriptors,tn=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,sn=(e,t,n)=>t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function on(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(r)){const i=t.replace(r,""),s=e[t];n[i]=s}})),n}function an(e){const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),s=typeof n<"u"?e.substring(n):"",o=it.parse(s);return{protocol:r,topic:cn(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:on(o),expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function cn(e){return e.startsWith("//")?e.substring(2):e}function ln(e){return`${e.protocol}:${e.topic}@${e.version}?`+it.stringify(((e,t)=>Zt(e,en(t)))(((e,t)=>{for(var n in t||(t={}))nn.call(t,n)&&sn(e,n,t[n]);if(tn)for(var n of tn(t))rn.call(t,n)&&sn(e,n,t[n]);return e})({symKey:e.symKey},function(e,t="-"){const n={};return Object.keys(e).forEach((r=>{const i="relay"+t+r;e[r]&&(n[i]=e[r])})),n}(e.relay)),{expiryTimestamp:e.expiryTimestamp}))}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function un(e){const t=[];return e.forEach((e=>{const[n,r]=e.split(":");t.push(`${n}:${r}`)})),t}const dn={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},hn={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pn(e,t){const{message:n,code:r}=hn[e];return{message:t?`${n} ${t}`:n,code:r}}function fn(e,t){const{message:n,code:r}=dn[e];return{message:t?`${n} ${t}`:n,code:r}}function mn(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function gn(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function yn(e){return typeof e>"u"}function vn(e,t){return!(!t||!yn(e))||"string"==typeof e&&!!e.trim().length}function bn(e,t){return!(!t||!yn(e))||"number"==typeof e&&!isNaN(e)}function wn(e){return!(!vn(e,!1)||!e.includes(":"))&&2===e.split(":").length}function En(e){let t=!0;return mn(e)?e.length&&(t=e.every((e=>vn(e,!1)))):t=!1,t}function An(e,t,n){let r=null;return Object.entries(e).forEach((([e,i])=>{if(r)return;const s=function(e,t,n){let r=null;return mn(t)&&t.length?t.forEach((e=>{r||wn(e)||(r=fn("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):wn(e)||(r=fn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}(e,at(e,i),`${t} ${n}`);s&&(r=s)})),r}function Tn(e,t){let n=null;return mn(e)?e.forEach((e=>{n||function(e){if(vn(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&wn(e)}}return!1}(e)||(n=fn("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=fn("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Sn(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const r=function(e,t){let n=null;return En(e?.methods)?En(e?.events)||(n=fn("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=fn("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);r&&(n=r)})),n}function xn(e,t){let n=null;if(e&&gn(e)){const r=Sn(e,t);r&&(n=r);const i=function(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const r=Tn(e?.accounts,`${t} namespace`);r&&(n=r)})),n}(e,t);i&&(n=i)}else n=pn("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function In(e){return vn(e.protocol,!0)}function Pn(e){return typeof e<"u"&&null!==typeof e}function _n(e,t){return!(!wn(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...un(e.accounts))})),t}(e).includes(t))}function Rn(e,t,n){return!!vn(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{un(e.accounts).includes(t)&&n.push(...e.methods)})),n}(e,t).includes(n)}function Cn(e,t,n){return!!vn(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{un(e.accounts).includes(t)&&n.push(...e.events)})),n}(e,t).includes(n)}function Nn(e,t,n){let r=null;const i=function(e){const t={};return Object.keys(e).forEach((n=>{var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach((r=>{t[r]={methods:e[n].methods,events:e[n].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const r=un(e[n].accounts);r?.forEach((r=>{t[r]={accounts:e[n].accounts.filter((e=>e.includes(`${r}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}(t),o=Object.keys(i),a=Object.keys(s),c=On(Object.keys(e)),l=On(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(r=pn("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),qt(o,a)||(r=pn("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||r)return;const i=un(t[e].accounts);i.includes(e)||(r=pn("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{r||(qt(i[e].methods,s[e].methods)?qt(i[e].events,s[e].events)||(r=pn("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):r=pn("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),r}function On(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function kn(){const e=Ut();return new Promise((t=>{switch(e){case Ot.browser:t(Lt()&&navigator?.onLine);break;case Ot.reactNative:t(async function(){if(Dt()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case Ot.node:default:t(!0)}}))}function Mn(e){switch(Ut()){case Ot.browser:!function(e){!Dt()&&Lt()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Ot.reactNative:!function(e){Dt()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case Ot.node:}}const Dn={};class Ln{static get(e){return Dn[e]}static set(e,t){Dn[e]=t}static delete(e){delete Dn[e]}}var Un=n(56186);class Bn extends Un.IJsonRpcProvider{constructor(e){super(e),this.events=new oe.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,Un.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,Un.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise((async(n,r)=>{if(!this.connection.connected)try{await this.open()}catch(i){r(i)}this.events.on(`${e.id}`,(e=>{(0,Un.isJsonRpcError)(e)?r(e.error):n(e.result)}));try{await this.connection.send(e,t)}catch(i){r(i)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,Un.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"===typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const Fn=e=>e.split("?")[0],qn=typeof WebSocket<"u"?WebSocket:typeof n.g<"u"&&typeof n.g.WebSocket<"u"?n.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:n(57026);class jn{constructor(e){if(this.url=e,this.events=new oe.EventEmitter,this.registering=!1,!(0,Un.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,Te.u)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!(0,Un.isWsUrl)(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,r)=>{const i=new URLSearchParams(e).get("origin"),s=(0,Un.isReactNative)()?{headers:{origin:i}}:{rejectUnauthorized:!(0,Un.isLocalhostUrl)(e)},o=new qn(e,[],s);typeof WebSocket<"u"||typeof n.g<"u"&&typeof n.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?o.onerror=e=>{const t=e;r(this.emitError(t.error))}:o.on("error",(e=>{r(this.emitError(e))})),o.onopen=()=>{this.onOpen(o),t(o)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,Te.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),r=n.message||n.toString(),i=(0,Un.formatJsonRpcError)(e,r);this.events.emit("payload",i)}parseError(e,t=this.url){return(0,Un.parseConnectionError)(e,Fn(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Fn(this.url)}`));return this.events.emit("register_error",t),t}}var Vn=n(72307),zn=n.n(Vn),Hn=n(63144),Kn=n.n(Hn),Gn=n(34155);var Wn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==n[o])throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,i=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=a*o[h]>>>0,o[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(r+(s-p)),m=r;p!==s;)f[m++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,s=t.length;i!==s&&0===t[i];)i++,n++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var d=t[i],h=0,p=o-1;(0!==d||h<r)&&-1!==p;p--,h++)d+=256*l[p]>>>0,l[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,i++}for(var f=o-r;f!==o&&0===l[f];)f++;for(var m=c.repeat(n);f<o;++f)m+=e.charAt(l[f]);return m},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}},Yn=Wn;const $n=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Jn{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Qn{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Zn(this,e)}}class Xn{constructor(e){this.decoders=e}or(e){return Zn(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Zn=(e,t)=>new Xn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class er{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Jn(e,t,n),this.decoder=new Qn(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const tr=({name:e,prefix:t,encode:n,decode:r})=>new er(e,t,n,r),nr=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Yn(n,t);return tr({prefix:e,name:t,encode:r,decode:e=>$n(i(e))})},rr=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>tr({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const t=i[e[u]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,r,n,e)}),ir=tr({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var sr=Object.freeze({__proto__:null,identity:ir});const or=rr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ar=Object.freeze({__proto__:null,base2:or});const cr=rr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var lr=Object.freeze({__proto__:null,base8:cr});const ur=nr({prefix:"9",name:"base10",alphabet:"0123456789"});var dr=Object.freeze({__proto__:null,base10:ur});const hr=rr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pr=rr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fr=Object.freeze({__proto__:null,base16:hr,base16upper:pr});const mr=rr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),gr=rr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),yr=rr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vr=rr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),br=rr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wr=rr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Er=rr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ar=rr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tr=rr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Sr=Object.freeze({__proto__:null,base32:mr,base32upper:gr,base32pad:yr,base32padupper:vr,base32hex:br,base32hexupper:wr,base32hexpad:Er,base32hexpadupper:Ar,base32z:Tr});const xr=nr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ir=nr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Pr=Object.freeze({__proto__:null,base36:xr,base36upper:Ir});const _r=nr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Rr=nr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Cr=Object.freeze({__proto__:null,base58btc:_r,base58flickr:Rr});const Nr=rr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Or=rr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kr=rr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mr=rr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dr=Object.freeze({__proto__:null,base64:Nr,base64pad:Or,base64url:kr,base64urlpad:Mr});const Lr=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ur=Lr.reduce(((e,t,n)=>(e[n]=t,e)),[]),Br=Lr.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const Fr=tr({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Ur[t]),"")},decode:function(e){const t=[];for(const n of e){const e=Br[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var qr=Object.freeze({__proto__:null,base256emoji:Fr}),jr=function e(t,n,r){n=n||[];for(var i=r=r||0;t>=Hr;)n[r++]=255&t|Vr,t/=128;for(;t&zr;)n[r++]=255&t|Vr,t>>>=7;return n[r]=0|t,e.bytes=r-i+1,n},Vr=128,zr=-128,Hr=Math.pow(2,31);var Kr=function e(t,n){var r,i=0,s=(n=n||0,0),o=n,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],i+=s<28?(r&Wr)<<s:(r&Wr)*Math.pow(2,s),s+=7}while(r>=Gr);return e.bytes=o-n,i},Gr=128,Wr=127;var Yr=Math.pow(2,7),$r=Math.pow(2,14),Jr=Math.pow(2,21),Qr=Math.pow(2,28),Xr=Math.pow(2,35),Zr=Math.pow(2,42),ei=Math.pow(2,49),ti=Math.pow(2,56),ni=Math.pow(2,63),ri={encode:jr,decode:Kr,encodingLength:function(e){return e<Yr?1:e<$r?2:e<Jr?3:e<Qr?4:e<Xr?5:e<Zr?6:e<ei?7:e<ti?8:e<ni?9:10}},ii=ri;const si=(e,t,n=0)=>(ii.encode(e,t,n),t),oi=e=>ii.encodingLength(e),ai=(e,t)=>{const n=t.byteLength,r=oi(e),i=r+oi(n),s=new Uint8Array(i+n);return si(e,s,0),si(n,s,r),s.set(t,i),new ci(e,n,t,s)};class ci{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const li=({name:e,code:t,encode:n})=>new ui(e,t,n);class ui{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ai(this.code,t):t.then((e=>ai(this.code,e)))}throw Error("Unknown type, must be binary type")}}const di=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),hi=li({name:"sha2-256",code:18,encode:di("SHA-256")}),pi=li({name:"sha2-512",code:19,encode:di("SHA-512")});Object.freeze({__proto__:null,sha256:hi,sha512:pi});const fi=$n,mi={code:0,name:"identity",encode:fi,digest:e=>ai(0,fi(e))};Object.freeze({__proto__:null,identity:mi});new TextEncoder,new TextDecoder;const gi={...sr,...ar,...lr,...dr,...fr,...Sr,...Pr,...Cr,...Dr,...qr};function yi(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function vi(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const bi=vi("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),wi=vi("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?yi(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Ei={utf8:bi,"utf-8":bi,hex:gi.base16,latin1:wi,ascii:wi,binary:wi,...gi};const Ai="core",Ti=`wc@2:${Ai}:`,Si="error",xi={database:":memory:"},Ii="client_ed25519_seed",Pi=tt.ONE_DAY,_i=tt.SIX_HOURS,Ri="wss://relay.walletconnect.com",Ci="wss://relay.walletconnect.org",Ni="relayer_message",Oi="relayer_message_ack",ki="relayer_connect",Mi="relayer_disconnect",Di="relayer_error",Li="relayer_connection_stalled",Ui="relayer_publish",Bi="payload",Fi="connect",qi="disconnect",ji="error",Vi=tt.ONE_SECOND,zi="subscription_created",Hi="subscription_deleted",Ki="subscription_sync",Gi="subscription_resubscribed",Wi=1e3*tt.FIVE_SECONDS,Yi={wc_pairingDelete:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:0},res:{ttl:tt.ONE_DAY,prompt:!1,tag:0}}},$i="pairing_create",Ji="pairing_expire",Qi="pairing_delete",Xi="pairing_ping",Zi="history_created",es="history_updated",ts="history_deleted",ns="history_sync",rs="expirer_created",is="expirer_deleted",ss="expirer_expired",os="expirer_sync",as="verify-api",cs="https://verify.walletconnect.com",ls="https://verify.walletconnect.org",us=[cs,ls];class ds{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=pn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,ke.Ep)(t,this.name)}get context(){return(0,ke.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,jt(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Vt(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class hs{constructor(e,t,n){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>{this.isInitialized();const e=await this.getClientSeed(),t=We.Au(e);return We.bG(t.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const e=function(){const e=Xe.Au();return{privateKey:(0,Ze.BB)(e.secretKey,lt),publicKey:(0,Ze.BB)(e.publicKey,lt)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();const t=await this.getClientSeed(),n=We.Au(t),r=vt(),i=Pi;return await We.vf(r,e,i,n)},this.generateSharedKey=(e,t,n)=>{this.isInitialized();const r=function(e,t){const n=Xe.gi((0,Ze.mL)(e,lt),(0,Ze.mL)(t,lt),!0),r=new $e.t(Qe.mE,n).expand(yt);return(0,Ze.BB)(r,lt)}(this.getPrivateKey(e),t);return this.setSymKey(r,n)},this.setSymKey=async(e,t)=>{this.isInitialized();const n=t||function(e){const t=(0,Qe.vp)((0,Ze.mL)(e,lt));return(0,Ze.BB)(t,lt)}(e);return await this.keychain.set(n,e),n},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,n)=>{this.isInitialized();const r=Tt(n),i=(0,Te.u)(t);if(St(r)){const t=r.senderPublicKey,n=r.receiverPublicKey;e=await this.generateSharedKey(t,n)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=r;return Et({type:o,symKey:s,message:i,senderPublicKey:a})},this.decode=async(e,t,n)=>{this.isInitialized();const r=function(e,t){const n=At(e);return Tt({type:wt(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,Ze.BB)(n.senderPublicKey,lt):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,n);if(St(r)){const t=r.receiverPublicKey,n=r.senderPublicKey;e=await this.generateSharedKey(t,n)}try{const n=function(e){const t=new Ye.OK((0,Ze.mL)(e.symKey,lt)),{sealed:n,iv:r}=At(e.encoded),i=t.open(r,n);if(null===i)throw new Error("Failed to decrypt");return(0,Ze.BB)(i,dt)}({symKey:this.getSymKey(e),encoded:t});return(0,Te.D)(n)}catch(Ne){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(Ne)}},this.getPayloadType=e=>wt(At(e).type),this.getPayloadSenderPublicKey=e=>{const t=At(e);return t.senderPublicKey?(0,Ze.BB)(t.senderPublicKey,lt):void 0},this.core=e,this.logger=(0,ke.Ep)(t,this.name),this.keychain=n||new ds(this.core,this.logger)}get context(){return(0,ke.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ii)}catch{e=vt(),await this.keychain.set(Ii,e)}return function(e,t="utf8"){const n=Ei[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):yi(globalThis.Buffer.from(e,"utf-8"))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ps extends Ue{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(l){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(l)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();const n=bt(t);let r=this.messages.get(e);return typeof r>"u"&&(r={}),typeof r[n]<"u"||(r[n]=t,this.messages.set(e,r),await this.persist()),n},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>{this.isInitialized();return typeof this.get(e)[bt(t)]<"u"},this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,ke.Ep)(e,this.name),this.core=t}get context(){return(0,ke.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,jt(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Vt(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class fs extends Be{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new oe.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,tt.toMiliseconds)(2*tt.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(e,t,n)=>{var r;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:n}});try{const i=n?.ttl||_i,s=Jt(n),o=n?.prompt||!1,a=n?.tag||0,c=n?.id||(0,Un.getBigIntRpcId)().toString(),l={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c}},u=setTimeout((()=>this.queue.set(c,l)),this.publishTimeout);try{await await Ht(this.rpcPublish(e,t,i,s,o,a,c),this.publishTimeout,`Failed to publish payload, please try again. id:${c} tag:${a}`),this.removeRequestFromQueue(c),this.relayer.events.emit(Ui,l)}catch(Be){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(r=n?.internal)&&r.throwOnFailedPublish)throw this.removeRequestFromQueue(c),Be;return}finally{clearTimeout(u)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:n}})}catch(Ue){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(Ue),Ue}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,ke.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,ke.Fd)(this.logger)}rpcPublish(e,t,n,r,i,s,o){var a,c,l,u;const d={method:Qt(r.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:i,tag:s},id:o};return yn(null==(a=d.params)?void 0:a.prompt)&&(null==(c=d.params)||delete c.prompt),yn(null==(l=d.params)?void 0:l.tag)&&(null==(u=d.params)||delete u.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:d}),this.relayer.request(d)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:n,opts:r}=e;await this.publish(t,n,r)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Oe.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Li);this.checkQueue()})),this.relayer.on(Oi,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}class ms{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const r=n.filter((e=>e!==t));r.length?this.map.set(e,r):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var gs=Object.defineProperty,ys=Object.defineProperties,vs=Object.getOwnPropertyDescriptors,bs=Object.getOwnPropertySymbols,ws=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable,As=(e,t,n)=>t in e?gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ts=(e,t)=>{for(var n in t||(t={}))ws.call(t,n)&&As(e,n,t[n]);if(bs)for(var n of bs(t))Es.call(t,n)&&As(e,n,t[n]);return e},Ss=(e,t)=>ys(e,vs(t));class xs extends je{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new ms,this.events=new oe.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ti,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const n=Jt(t),r={topic:e,relay:n};this.pending.set(e,r);const i=await this.rpcSubscribe(e,n);return this.onSubscribe(i,r),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}}),i}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;const t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise(((n,r)=>{const i=new tt.Watch;i.start(t);const s=setInterval((()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(s),i.stop(t),n(!0)),i.elapsed(t)>=Wi&&(clearInterval(s),i.stop(t),r(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1))},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,ke.Ep)(t,this.name),this.clientId=""}get context(){return(0,ke.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map((async n=>await this.unsubscribeById(e,n,t))))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const r=Jt(n);await this.rpcUnsubscribe(e,t,r);const i=fn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(r){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(r),r}}async rpcSubscribe(e,t){const n={method:Qt(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Ht(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Li)}return bt(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:Qt(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{return await await Ht(this.relayer.request(t),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Li)}}rpcUnsubscribe(e,t,n){const r={method:Qt(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(e,t){this.setSubscription(e,Ss(Ts({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Ts({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Ts({},t)),this.topicMap.set(t.topic,e),this.events.emit(zi,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=pn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Hi,Ss(Ts({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ki)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(e)}}this.events.emit(Gi)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=pn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);mn(t)&&this.onBatchSubscribe(t.map(((t,n)=>Ss(Ts({},e[n]),{id:t}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Oe.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(ki,(async()=>{await this.onConnect()})),this.relayer.on(Mi,(()=>{this.onDisconnect()})),this.events.on(zi,(async e=>{const t=zi;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(Hi,(async e=>{const t=Hi;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var Is=Object.defineProperty,Ps=Object.getOwnPropertySymbols,_s=Object.prototype.hasOwnProperty,Rs=Object.prototype.propertyIsEnumerable,Cs=(e,t,n)=>t in e?Is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Ns extends Fe{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new oe.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async e=>{this.logger.debug("Publishing Request Payload");const t=e.id;try{await this.toEstablishConnection();const n=this.provider.request(e);return this.requestsInFlight.set(t,{promise:n,request:e}),await n}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}finally{this.requestsInFlight.delete(t)}},this.onPayloadHandler=e=>{this.onProviderPayload(e)},this.onConnectHandler=()=>{this.events.emit(ki)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(Di,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Bi,this.onPayloadHandler),this.provider.on(Fi,this.onConnectHandler),this.provider.on(qi,this.onDisconnectHandler),this.provider.on(ji,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,ke.Ep)(e.logger,this.name):(0,ke.gw)((0,ke.jI)({level:e.logger||"error"})),this.messages=new ps(this.logger,e.core),this.subscriber=new xs(this,this.logger),this.publisher=new fs(this,this.logger),this.relayUrl=e?.relayUrl||Ri,this.projectId=e.projectId,this.bundleId=function(){var e;try{return Dt()&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Application)<"u"?null==(e=n.g.Application)?void 0:e.applicationId:void 0}catch{return}}(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Ci}...`),await this.restartTransport(Ci)}this.initialized=!0,setTimeout((async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),1e4)}get context(){return(0,ke.Fd)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var n;this.isInitialized();let r,i=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"";if(i)return i;const s=t=>{t.topic===e&&(this.subscriber.off(zi,s),r())};return await Promise.all([new Promise((e=>{r=e,this.subscriber.on(zi,s)})),new Promise((async n=>{i=await this.subscriber.subscribe(e,t),n()}))]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach((async e=>{await e.promise}))),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Ht(this.provider.disconnect(),1e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise((e=>{if(!this.initialized)return e();this.subscriber.once(Gi,(()=>{e()}))})),new Promise((async(e,t)=>{try{await Ht(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(n){return void t(n)}e()}))])}catch(t){this.logger.error(t);const e=t;if(!this.isConnectionStalled(e.message))throw t;this.provider.events.emit(qi)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!(await kn()))throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Bn(new jn(Ft({sdkVersion:"2.11.2",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:n}=e;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;if(!n||0===n.length)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!(await this.subscriber.isSubscribed(t)))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const r=this.messages.has(t,n);return r&&this.logger.debug(`Ignoring duplicate message: ${n}`),r}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,Un.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:n,message:r,publishedAt:i}=t.data,s={topic:n,message:r,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(((e,t)=>{for(var n in t||(t={}))_s.call(t,n)&&Cs(e,n,t[n]);if(Ps)for(var n of Ps(t))Rs.call(t,n)&&Cs(e,n,t[n]);return e})({type:"event",event:t.id},s)),this.events.emit(t.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}else(0,Un.isJsonRpcResponse)(e)&&this.events.emit(Oi,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ni,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=(0,Un.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Bi,this.onPayloadHandler),this.provider.off(Fi,this.onConnectHandler),this.provider.off(qi,this.onDisconnectHandler),this.provider.off(ji,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Li,(()=>{this.restartTransport().catch((e=>this.logger.error(e)))}));let e=await kn();Mn((async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch((e=>this.logger.error(e))):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch((e=>this.logger.error(e)))))}))}onProviderDisconnect(){this.events.emit(Mi),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((async()=>{await this.restartTransport().catch((e=>this.logger.error(e)))}),(0,tt.toMiliseconds)(Vi)))}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var Os=Object.defineProperty,ks=Object.getOwnPropertySymbols,Ms=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable,Ls=(e,t,n)=>t in e?Os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Us=(e,t)=>{for(var n in t||(t={}))Ms.call(t,n)&&Ls(e,n,t[n]);if(ks)for(var n of ks(t))Ds.call(t,n)&&Ls(e,n,t[n]);return e};class Bs extends qe{constructor(e,t,n,r=Ti,i=void 0){super(e,t,n,r),this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!yn(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((n=>zn()(t[n],e[n]))))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const n=Us(Us({},this.getData(e)),t);this.map.set(e,n),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),await this.persist())},this.logger=(0,ke.Ep)(t,this.name),this.storagePrefix=r,this.getKey=i}get context(){return(0,ke.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:t}=pn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=pn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Fs{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(ae()),this.initialized=!1,this.storagePrefix=Ti,this.ignoredPayloadTypes=[pt],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async()=>{this.isInitialized();const e=vt(),t=await this.core.crypto.setSymKey(e),n=Wt(tt.FIVE_MINUTES),r={protocol:"irn"},i={topic:t,expiry:n,relay:r,active:!1},s=ln({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:e,relay:r,expiryTimestamp:n});return await this.pairings.set(t,i),await this.core.relayer.subscribe(t),this.core.expirer.set(t,n),{topic:t,uri:s}},this.pair=async e=>{this.isInitialized(),this.isValidPair(e);const{topic:t,symKey:n,relay:r,expiryTimestamp:i}=an(e.uri);let s;if(this.pairings.keys.includes(t)&&(s=this.pairings.get(t),s.active))throw new Error(`Pairing already exists: ${t}. Please try again with a new connection URI.`);const o=i||Wt(tt.FIVE_MINUTES),a={topic:t,relay:r,expiry:o,active:!1};return await this.pairings.set(t,a),this.core.expirer.set(t,o),e.activatePairing&&await this.activate({topic:t}),this.events.emit($i,a),this.core.crypto.keychain.has(t)||(await this.core.crypto.setSymKey(n,t),await this.core.relayer.subscribe(t,{relay:r})),a},this.activate=async({topic:e})=>{this.isInitialized();const t=Wt(tt.THIRTY_DAYS);await this.pairings.update(e,{active:!0,expiry:t}),this.core.expirer.set(e,t)},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:n,resolve:r,reject:i}=zt();this.events.once($t("pairing_ping",e),(({error:e})=>{e?i(e):r()})),await n()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",fn("USER_DISCONNECTED")),await this.deletePairing(t))},this.sendRequest=async(e,t,n)=>{const r=(0,Un.formatJsonRpcRequest)(t,n),i=await this.core.crypto.encode(e,r),s=Yi[t].req;return this.core.history.set(e,r),this.core.relayer.publish(e,i,s),r.id},this.sendResult=async(e,t,n)=>{const r=(0,Un.formatJsonRpcResult)(e,n),i=await this.core.crypto.encode(t,r),s=await this.core.history.get(t,e),o=Yi[s.request.method].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(r)},this.sendError=async(e,t,n)=>{const r=(0,Un.formatJsonRpcError)(e,n),i=await this.core.crypto.encode(t,r),s=await this.core.history.get(t,e),o=Yi[s.request.method]?Yi[s.request.method].res:Yi.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(r)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,fn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{const e=this.pairings.getAll().filter((e=>Yt(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))},this.onRelayEventRequest=e=>{const{topic:t,payload:n}=e;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(t,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,n);default:return this.onUnknownRpcMethodRequest(t,n)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:n}=e,r=(await this.core.history.get(t,n.id)).request.method;return"wc_pairingPing"===r?this.onPairingPingResponse(t,n):this.onUnknownRpcMethodResponse(r)},this.onPairingPingRequest=async(e,t)=>{const{id:n}=t;try{this.isValidPing({topic:e}),await this.sendResult(n,e,!0),this.events.emit(Xi,{id:n,topic:e})}catch(d){await this.sendError(n,e,d),this.logger.error(d)}},this.onPairingPingResponse=(e,t)=>{const{id:n}=t;setTimeout((()=>{(0,Un.isJsonRpcResult)(t)?this.events.emit($t("pairing_ping",n),{}):(0,Un.isJsonRpcError)(t)&&this.events.emit($t("pairing_ping",n),{error:t.error})}),500)},this.onPairingDeleteRequest=async(e,t)=>{const{id:n}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(Qi,{id:n,topic:e})}catch(d){await this.sendError(n,e,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(e,t)=>{const{id:n,method:r}=t;try{if(this.registeredMethods.includes(r))return;const t=fn("WC_METHOD_UNSUPPORTED",r);await this.sendError(n,e,t),this.logger.error(t)}catch(Ue){await this.sendError(n,e,Ue),this.logger.error(Ue)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(fn("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=e=>{var t;if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`pair() params: ${e}`);throw new Error(t)}if(!function(e){if(vn(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}(e.uri)){const{message:t}=pn("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw new Error(t)}const n=an(e.uri);if(null==(t=n?.relay)||!t.protocol){const{message:e}=pn("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(e)}if(null==n||!n.symKey){const{message:e}=pn("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,tt.toMiliseconds)(n?.expiryTimestamp)<Date.now()){const{message:e}=pn("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}},this.isValidPing=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!vn(e,!1)){const{message:t}=pn("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=pn("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Yt(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=pn("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}},this.core=e,this.logger=(0,ke.Ep)(t,this.name),this.pairings=new Bs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,ke.Fd)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ni,(async e=>{const{topic:t,message:n}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const r=await this.core.crypto.decode(t,n);try{(0,Un.isJsonRpcRequest)(r)?(this.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r})):(0,Un.isJsonRpcResponse)(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.core.history.delete(t,r.id))}catch(i){this.logger.error(i)}}))}registerExpirerEvents(){this.core.expirer.on(ss,(async e=>{const{topic:t}=Gt(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Ji,{topic:t}))}))}}class qs extends Le{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new oe.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:n}),this.records.has(t.id))return;const r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:n,expiry:Wt(tt.THIRTY_DAYS)};this.records.set(r.id,r),this.events.emit(Zi,r)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,Un.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.events.emit(es,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((n=>{if(n.topic===e){if(typeof t<"u"&&n.id!==t)return;this.records.delete(n.id),this.events.emit(ts,n)}}))},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,ke.Ep)(t,this.name)}get context(){return(0,ke.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:(0,Un.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=pn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ns)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=pn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Zi,(e=>{const t=Zi;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(es,(e=>{const t=es;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(ts,(e=>{const t=ts;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.core.heartbeat.on(Oe.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((e=>{(0,tt.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))}))}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class js extends Ve{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new oe.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ti,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}},this.set=(e,t)=>{this.isInitialized();const n=this.formatTarget(e),r={target:n,expiry:t};this.expirations.set(n,r),this.checkExpiry(n,r),this.events.emit(rs,{target:n,expiration:r})},this.get=e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),n=this.getExpiration(t);this.expirations.delete(t),this.events.emit(is,{target:t,expiration:n})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,ke.Ep)(t,this.name)}get context(){return(0,ke.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return Kt("topic",e)}(e);if("number"==typeof e)return function(e){return Kt("id",e)}(e);const{message:t}=pn("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(os)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=pn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=pn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:n}=t;(0,tt.toMiliseconds)(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(ss,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(Oe.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(rs,(e=>{const t=rs;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(ss,(e=>{const t=ss;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(is,(e=>{const t=is;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Vs extends ze{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=as,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async e=>{if(this.verifyDisabled||Dt()||!Lt())return;const t=this.getVerifyUrl(e?.verifyUrl);this.verifyUrl!==t&&this.removeIframe(),this.verifyUrl=t;try{await this.createIframe()}catch(n){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(n)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ls;try{await this.createIframe()}catch(n){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(n),this.verifyDisabled=!0}}},this.register=async e=>{this.initialized?this.sendPost(e.attestationId):(this.addToQueue(e.attestationId),await this.init())},this.resolve=async e=>{if(this.isDevEnv)return"";const t=this.getVerifyUrl(e?.verifyUrl);let n;try{n=await this.fetchAttestation(e.attestationId,t)}catch(d){this.logger.info(`failed to resolve attestation: ${e.attestationId} from url: ${t}`),this.logger.info(d),n=await this.fetchAttestation(e.attestationId,ls)}return n},this.fetchAttestation=async(e,t)=>{this.logger.info(`resolving attestation: ${e} from url: ${t}`);const n=this.startAbortTimer(2*tt.ONE_SECOND),r=await fetch(`${t}/attestation/${e}`,{signal:this.abortController.signal});return clearTimeout(n),200===r.status?await r.json():void 0},this.addToQueue=e=>{this.queue.push(e)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach((e=>this.sendPost(e))),this.queue=[])},this.sendPost=e=>{var t;try{if(!this.iframe)return;null==(t=this.iframe.contentWindow)||t.postMessage(e,"*"),this.logger.info(`postMessage sent: ${e} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let e;const t=n=>{"verify_ready"===n.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",t),e())};await Promise.race([new Promise((n=>{if(document.getElementById(as))return n();window.addEventListener("message",t);const r=document.createElement("iframe");r.id=as,r.src=`${this.verifyUrl}/${this.projectId}`,r.style.display="none",document.body.append(r),this.iframe=r,e=n})),new Promise(((e,n)=>setTimeout((()=>{window.removeEventListener("message",t),n("verify iframe load timeout")}),(0,tt.toMiliseconds)(tt.FIVE_SECONDS))))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=e=>{let t=e||cs;return us.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${cs}`),t=cs),t},this.logger=(0,ke.Ep)(t,this.name),this.verifyUrl=cs,this.abortController=new AbortController,this.isDevEnv=Mt()&&Gn.env.IS_VITEST}get context(){return(0,ke.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,tt.toMiliseconds)(e))}}class zs extends He{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{const{clientId:t,token:n,notificationType:r,enableEncrypted:i=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await Kn()(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:r,token:n,always_raw:i})})},this.logger=(0,ke.Ep)(t,this.context)}}var Hs=Object.defineProperty,Ks=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,Ws=Object.prototype.propertyIsEnumerable,Ys=(e,t,n)=>t in e?Hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$s=(e,t)=>{for(var n in t||(t={}))Gs.call(t,n)&&Ys(e,n,t[n]);if(Ks)for(var n of Ks(t))Ws.call(t,n)&&Ys(e,n,t[n]);return e};class Js extends De{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=Ai,this.events=new oe.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Ri,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,ke.gw)((0,ke.jI)({level:e?.logger||Si}));this.logger=(0,ke.Ep)(t,this.name),this.heartbeat=new Oe.HeartBeat,this.crypto=new hs(this,this.logger,e?.keychain),this.history=new qs(this,this.logger),this.expirer=new js(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Ne($s($s({},xi),e?.storageOptions)),this.relayer=new Ns({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Fs(this,this.logger),this.verify=new Vs(this.projectId||"",this.logger),this.echoClient=new zs(this.projectId||"",this.logger)}static async init(e){const t=new Js(e);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",n),t}get context(){return(0,ke.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Qs=Js,Xs="client",Zs=`wc@2:${Xs}:`,eo=Xs,to="error",no="WALLETCONNECT_DEEPLINK_CHOICE",ro=tt.SEVEN_DAYS,io={wc_sessionPropose:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:tt.THIRTY_SECONDS,prompt:!1,tag:1115}}},so={min:tt.FIVE_MINUTES,max:tt.SEVEN_DAYS},oo="IDLE",ao="ACTIVE",co=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var lo=Object.defineProperty,uo=Object.defineProperties,ho=Object.getOwnPropertyDescriptors,po=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,mo=Object.prototype.propertyIsEnumerable,go=(e,t,n)=>t in e?lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yo=(e,t)=>{for(var n in t||(t={}))fo.call(t,n)&&go(e,n,t[n]);if(po)for(var n of po(t))mo.call(t,n)&&go(e,n,t[n]);return e},vo=(e,t)=>uo(e,ho(t));class bo extends Ge{constructor(e){super(e),this.name="engine",this.events=new(ae()),this.initialized=!1,this.ignoredPayloadTypes=[pt],this.requestQueue={state:oo,queue:[]},this.sessionRequestQueue={state:oo,queue:[]},this.requestQueueDelay=tt.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(io)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,tt.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();const t=vo(yo({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:n,requiredNamespaces:r,optionalNamespaces:i,sessionProperties:s,relays:o}=t;let a,c=n,l=!1;if(c&&(l=this.client.core.pairing.pairings.get(c).active),!c||!l){const{topic:e,uri:t}=await this.client.core.pairing.create();c=e,a=t}const u=await this.client.core.crypto.generateKeyPair(),d=io.wc_sessionPropose.req.ttl||tt.FIVE_MINUTES,h=Wt(d),p=yo({requiredNamespaces:r,optionalNamespaces:i,relays:o??[{protocol:"irn"}],proposer:{publicKey:u,metadata:this.client.metadata},expiryTimestamp:h},s&&{sessionProperties:s}),{reject:f,resolve:m,done:g}=zt(d,"Proposal expired");if(this.events.once($t("session_connect"),(async({error:e,session:t})=>{if(e)f(e);else if(t){t.self.publicKey=u;const e=vo(yo({},t),{requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:t.peer.metadata}),m(e)}})),!c){const{message:e}=pn("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(e)}const y=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0});return await this.setProposal(y,yo({id:y},p)),{uri:a,approval:g}},this.pair=async e=>(await this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{await this.isInitialized(),await this.isValidApprove(e);const{id:t,relayProtocol:n,namespaces:r,sessionProperties:i}=e,s=this.client.proposal.get(t);let{pairingTopic:o,proposer:a,requiredNamespaces:c,optionalNamespaces:l}=s;o=o||"";const u=await this.client.core.crypto.generateKeyPair(),d=a.publicKey,h=await this.client.core.crypto.generateSharedKey(u,d);o&&t&&(await this.client.core.pairing.updateMetadata({topic:o,metadata:a.metadata}),await this.sendResult({id:t,topic:o,result:{relay:{protocol:n??"irn"},responderPublicKey:u}}),await this.client.proposal.delete(t,fn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}));const p=yo({relay:{protocol:n??"irn"},namespaces:r,pairingTopic:o,controller:{publicKey:u,metadata:this.client.metadata},expiry:Wt(ro)},i&&{sessionProperties:i});await this.client.core.relayer.subscribe(h);const f=vo(yo({},p),{topic:h,requiredNamespaces:c,optionalNamespaces:l,pairingTopic:o,acknowledged:!1,self:p.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:u});await this.client.session.set(h,f);try{await this.sendRequest({topic:h,method:"wc_sessionSettle",params:p,throwOnFailedPublish:!0})}catch(m){throw this.client.logger.error(m),this.client.session.delete(h,fn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(h),m}return await this.setExpiry(h,Wt(ro)),{topic:h,acknowledged:()=>new Promise((e=>setTimeout((()=>e(this.client.session.get(h))),500)))}},this.reject=async e=>{await this.isInitialized(),await this.isValidReject(e);const{id:t,reason:n}=e,{pairingTopic:r}=this.client.proposal.get(t);r&&(await this.sendError(t,r,n),await this.client.proposal.delete(t,fn("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized(),await this.isValidUpdate(e);const{topic:t,namespaces:n}=e,r=await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:n}}),{done:i,resolve:s,reject:o}=zt();return this.events.once($t("session_update",r),(({error:e})=>{e?o(e):s()})),await this.client.session.update(t,{namespaces:n}),{acknowledged:i}},this.extend=async e=>{await this.isInitialized(),await this.isValidExtend(e);const{topic:t}=e,n=await this.sendRequest({topic:t,method:"wc_sessionExtend",params:{}}),{done:r,resolve:i,reject:s}=zt();return this.events.once($t("session_extend",n),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,Wt(ro)),{acknowledged:r}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:r,request:i,topic:s,expiry:o=io.wc_sessionRequest.req.ttl}=t,a=(0,Un.payloadId)(),{done:c,resolve:l,reject:u}=zt(o,"Request expired. Please try again.");return this.events.once($t("session_request",a),(({error:e,result:t})=>{e?u(e):l(t)})),await Promise.all([new Promise((async e=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:vo(yo({},i),{expiryTimestamp:Wt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0}).catch((e=>u(e))),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:a}),e()})),new Promise((async t=>{const r=await async function(e,t){try{return await e.getItem(t)||(Lt()?localStorage.getItem(t):void 0)}catch(i){console.error(i)}}(this.client.core.storage,no);(async function({id:t,topic:r,wcDeepLink:i}){try{if(!i)return;const e="string"==typeof i?JSON.parse(i):i;let s=e?.href;if("string"!=typeof s)return;s.endsWith("/")&&(s=s.slice(0,-1));const o=`${s}/wc?requestId=${t}&sessionTopic=${r}`,a=Ut();a===Ot.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===Ot.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(o)}catch(e){console.error(e)}})({id:a,topic:s,wcDeepLink:r}),t()})),c()]).then((e=>e[2]))},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:n}=e,{id:r}=n;(0,Un.isJsonRpcResult)(n)?await this.sendResult({id:r,topic:t,result:n.result,throwOnFailedPublish:!0}):(0,Un.isJsonRpcError)(n)&&await this.sendError(r,t,n.error),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized(),await this.isValidPing(e);const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=await this.sendRequest({topic:t,method:"wc_sessionPing",params:{}}),{done:n,resolve:r,reject:i}=zt();this.events.once($t("session_ping",e),(({error:e})=>{e?i(e):r()})),await n()}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);const{topic:t,event:n,chainId:r}=e;await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:n,chainId:r}})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:fn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=pn("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let s=!0;return!!qt(i,r)&&(r.forEach((t=>{const{accounts:r,methods:i,events:o}=e.namespaces[t],a=un(r),c=n[t];(!qt(at(t,c),a)||!qt(c.methods,i)||!qt(c.events,o))&&(s=!1)})),s)}(t,e)))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter((n=>{var r,i;return(null==(r=n.peerMetadata)?void 0:r.url)&&(null==(i=n.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&n.topic&&n.topic!==t.topic}));if(0===n.length)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async e=>{const{topic:t,expirerHasDeleted:n=!1,emitEvent:r=!0,id:i=0}=e,{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),await this.client.session.delete(t,fn("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t),this.client.core.storage.removeItem(no).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===t&&this.deletePendingSessionRequest(e.id,fn("USER_DISCONNECTED"))})),r&&this.client.events.emit("session_delete",{id:i,topic:t})},this.deleteProposal=async(e,t)=>{await Promise.all([this.client.proposal.delete(e,fn("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,t,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),n?Promise.resolve():this.client.core.expirer.del(e)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),n&&(this.sessionRequestQueue.state=oo,this.client.events.emit("session_request_expire",{id:e}))},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:t}),this.client.core.expirer.set(e,t)},this.setProposal=async(e,t)=>{await this.client.proposal.set(e,t),this.client.core.expirer.set(e,Wt(io.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async e=>{const{id:t,topic:n,params:r,verifyContext:i}=e,s=r.request.expiryTimestamp||Wt(io.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(t,{id:t,topic:n,params:r,verifyContext:i}),s&&this.client.core.expirer.set(t,s)},this.sendRequest=async e=>{const{topic:t,method:n,params:r,expiry:i,relayRpcId:s,clientRpcId:o,throwOnFailedPublish:a}=e,c=(0,Un.formatJsonRpcRequest)(n,r,o);if(Lt()&&co.includes(n)){const e=bt(JSON.stringify(c));this.client.core.verify.register({attestationId:e})}const l=await this.client.core.crypto.encode(t,c),u=io[n].req;return i&&(u.ttl=i),s&&(u.id=s),this.client.core.history.set(t,c),a?(u.internal=vo(yo({},u.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,l,u)):this.client.core.relayer.publish(t,l,u).catch((e=>this.client.logger.error(e))),c.id},this.sendResult=async e=>{const{id:t,topic:n,result:r,throwOnFailedPublish:i}=e,s=(0,Un.formatJsonRpcResult)(t,r),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,t),c=io[a.request.method].res;i?(c.internal=vo(yo({},c.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,o,c)):this.client.core.relayer.publish(n,o,c).catch((e=>this.client.logger.error(e))),await this.client.core.history.resolve(s)},this.sendError=async(e,t,n)=>{const r=(0,Un.formatJsonRpcError)(e,n),i=await this.client.core.crypto.encode(t,r),s=await this.client.core.history.get(t,e),o=io[s.request.method].res;this.client.core.relayer.publish(t,i,o),await this.client.core.history.resolve(r)},this.cleanup=async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let n=!1;Yt(t.expiry)&&(n=!0),this.client.core.crypto.keychain.has(t.topic)||(n=!0),n&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Yt(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state!==ao){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ao;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise((e=>setTimeout(e,300)))}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=oo}else this.client.logger.info("Request queue already active, skipping...")},this.processRequest=e=>{const{topic:t,payload:n}=e,r=n.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeRequest(t,n);case"wc_sessionSettle":return this.onSessionSettleRequest(t,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(t,n);case"wc_sessionExtend":return this.onSessionExtendRequest(t,n);case"wc_sessionPing":return this.onSessionPingRequest(t,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(t,n);case"wc_sessionRequest":return this.onSessionRequest(t,n);case"wc_sessionEvent":return this.onSessionEventRequest(t,n);default:return this.client.logger.info(`Unsupported request method ${r}`)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:n}=e,r=(await this.client.core.history.get(t,n.id)).request.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeResponse(t,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,n);case"wc_sessionExtend":return this.onSessionExtendResponse(t,n);case"wc_sessionPing":return this.onSessionPingResponse(t,n);case"wc_sessionRequest":return this.onSessionRequestResponse(t,n);default:return this.client.logger.info(`Unsupported response method ${r}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:t}=e,{message:n}=pn("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.onSessionProposeRequest=async(e,t)=>{const{params:n,id:r}=t;try{this.isValidConnect(yo({},t.params));const i=n.expiryTimestamp||Wt(io.wc_sessionPropose.req.ttl),s=yo({id:r,pairingTopic:e,expiryTimestamp:i},n);await this.setProposal(r,s);const o=bt(JSON.stringify(t)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:r,params:s,verifyContext:a})}catch(u){await this.sendError(r,e,u),this.client.logger.error(u)}},this.onSessionProposeResponse=async(e,t)=>{const{id:n}=t;if((0,Un.isJsonRpcResult)(t)){const{result:r}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:r});const i=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});const s=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=r.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const c=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else(0,Un.isJsonRpcError)(t)&&(await this.client.proposal.delete(n,fn("USER_DISCONNECTED")),this.events.emit($t("session_connect"),{error:t.error}))},this.onSessionSettleRequest=async(e,t)=>{const{id:n,params:r}=t;try{this.isValidSessionSettleRequest(r);const{relay:n,controller:i,expiry:s,namespaces:o,sessionProperties:a,pairingTopic:c}=t.params,l=yo({topic:e,relay:n,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:c,requiredNamespaces:{},optionalNamespaces:{},controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a});await this.sendResult({id:t.id,topic:e,result:!0}),this.events.emit($t("session_connect"),{session:l}),this.cleanupDuplicatePairings(l)}catch(u){await this.sendError(n,e,u),this.client.logger.error(u)}},this.onSessionSettleResponse=async(e,t)=>{const{id:n}=t;(0,Un.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit($t("session_approve",n),{})):(0,Un.isJsonRpcError)(t)&&(await this.client.session.delete(e,fn("USER_DISCONNECTED")),this.events.emit($t("session_approve",n),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{const{params:n,id:r}=t;try{const t=`${e}_session_update`,i=Ln.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidUpdate(yo({topic:e},n)),await this.client.session.update(e,{namespaces:n.namespaces}),await this.sendResult({id:r,topic:e,result:!0}),this.client.events.emit("session_update",{id:r,topic:e,params:n}),Ln.set(t,r)}catch(u){await this.sendError(r,e,u),this.client.logger.error(u)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{const{id:n}=t;(0,Un.isJsonRpcResult)(t)?this.events.emit($t("session_update",n),{}):(0,Un.isJsonRpcError)(t)&&this.events.emit($t("session_update",n),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{const{id:n}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Wt(ro)),await this.sendResult({id:n,topic:e,result:!0}),this.client.events.emit("session_extend",{id:n,topic:e})}catch(l){await this.sendError(n,e,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(e,t)=>{const{id:n}=t;(0,Un.isJsonRpcResult)(t)?this.events.emit($t("session_extend",n),{}):(0,Un.isJsonRpcError)(t)&&this.events.emit($t("session_extend",n),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{const{id:n}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:n,topic:e,result:!0}),this.client.events.emit("session_ping",{id:n,topic:e})}catch(l){await this.sendError(n,e,l),this.client.logger.error(l)}},this.onSessionPingResponse=(e,t)=>{const{id:n}=t;setTimeout((()=>{(0,Un.isJsonRpcResult)(t)?this.events.emit($t("session_ping",n),{}):(0,Un.isJsonRpcError)(t)&&this.events.emit($t("session_ping",n),{error:t.error})}),500)},this.onSessionDeleteRequest=async(e,t)=>{const{id:n}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise((t=>{this.client.core.relayer.once(Ui,(async()=>{t(await this.deleteSession({topic:e,id:n}))}))})),this.sendResult({id:n,topic:e,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:fn("USER_DISCONNECTED")})])}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(e,t)=>{const{id:n,params:r}=t;try{this.isValidRequest(yo({topic:e},r));const t=bt(JSON.stringify((0,Un.formatJsonRpcRequest)("wc_sessionRequest",r,n))),i=this.client.session.get(e),s={id:n,topic:e,params:r,verifyContext:await this.getVerifyContext(t,i.peer.metadata)};await this.setPendingSessionRequest(s),this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue()}catch(u){await this.sendError(n,e,u),this.client.logger.error(u)}},this.onSessionRequestResponse=(e,t)=>{const{id:n}=t;(0,Un.isJsonRpcResult)(t)?this.events.emit($t("session_request",n),{result:t.result}):(0,Un.isJsonRpcError)(t)&&this.events.emit($t("session_request",n),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{const{id:n,params:r}=t;try{const t=`${e}_session_event_${r.event.name}`,i=Ln.get(t);if(i&&this.isRequestOutOfSync(i,n))return void this.client.logger.info(`Discarding out of sync request - ${n}`);this.isValidEmit(yo({topic:e},r)),this.client.events.emit("session_event",{id:n,topic:e,params:r}),Ln.set(t,n)}catch(u){await this.sendError(n,e,u),this.client.logger.error(u)}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=oo,this.processSessionRequestQueue()}),(0,tt.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{const n=this.client.core.history.pending;n.length>0&&n.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{this.events.emit($t("session_request",e.request.id),{error:t})}))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ao)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=ao,this.client.events.emit("session_request",e)}catch(t){this.client.logger.error(t)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=e=>{if(e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest(e.topic,(0,Un.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id))},this.isValidConnect=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:n,optionalNamespaces:r,sessionProperties:i,relays:s}=e;if(yn(t)||await this.isValidPairingTopic(t),!function(e,t){let n=!1;return t&&!e?n=!0:e&&mn(e)&&e.length&&e.forEach((e=>{n=In(e)})),n}(s,!0)){const{message:e}=pn("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(e)}!yn(n)&&0!==gn(n)&&this.validateNamespaces(n,"requiredNamespaces"),!yn(r)&&0!==gn(r)&&this.validateNamespaces(r,"optionalNamespaces"),yn(i)||this.validateSessionProps(i,"sessionProperties")},this.validateNamespaces=(e,t)=>{const n=function(e,t,n){let r=null;if(e&&gn(e)){const i=Sn(e,t);i&&(r=i);const s=An(e,t,n);s&&(r=s)}else r=pn("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}(e,"connect()",t);if(n)throw new Error(n.message)},this.isValidApprove=async e=>{if(!Pn(e))throw new Error(pn("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:n,relayProtocol:r,sessionProperties:i}=e;await this.isValidProposalId(t);const s=this.client.proposal.get(t),o=xn(n,"approve()");if(o)throw new Error(o.message);const a=Nn(s.requiredNamespaces,n,"approve()");if(a)throw new Error(a.message);if(!vn(r,!0)){const{message:e}=pn("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw new Error(e)}yn(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:n}=e;if(await this.isValidProposalId(t),!function(e){return!(!e||"object"!=typeof e||!e.code||!bn(e.code,!1)||!e.message||!vn(e.message,!1))}(n)){const{message:e}=pn("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidSessionSettleRequest=e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:n,namespaces:r,expiry:i}=e;if(!In(t)){const{message:e}=pn("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e,t){let n=null;return vn(e?.publicKey,!1)||(n=pn("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}(n,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=xn(r,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Yt(i)){const{message:e}=pn("EXPIRED","onSessionSettleRequest()");throw new Error(e)}},this.isValidUpdate=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:n}=e;await this.isValidSessionTopic(t);const r=this.client.session.get(t),i=xn(n,"update()");if(i)throw new Error(i.message);const s=Nn(r.requiredNamespaces,n,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:n,chainId:r,expiry:i}=e;await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!_n(s,r)){const{message:e}=pn("MISSING_OR_INVALID",`request() chainId: ${r}`);throw new Error(e)}if(!function(e){return!(yn(e)||!vn(e.method,!1))}(n)){const{message:e}=pn("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(e)}if(!Rn(s,r,n.method)){const{message:e}=pn("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(e)}if(i&&!function(e,t){return bn(e,!1)&&e<=t.max&&e>=t.min}(i,so)){const{message:e}=pn("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${so.min} and ${so.max}`);throw new Error(e)}},this.isValidRespond=async e=>{var t;if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:n,response:r}=e;try{await this.isValidSessionTopic(n)}catch(u){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),u}if(!function(e){return!(yn(e)||yn(e.result)&&yn(e.error)||!bn(e.id,!1)||!vn(e.jsonrpc,!1))}(r)){const{message:e}=pn("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidPing=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:n,chainId:r}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!_n(i,r)){const{message:e}=pn("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw new Error(e)}if(!function(e){return!(yn(e)||!vn(e.name,!1))}(n)){const{message:e}=pn("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(e)}if(!Cn(i,r,n.name)){const{message:e}=pn("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(e)}},this.isValidDisconnect=async e=>{if(!Pn(e)){const{message:t}=pn("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.getVerifyContext=async(e,t)=>{const n={verified:{verifyUrl:t.verifyUrl||cs,validation:"UNKNOWN",origin:t.url||""}};try{const r=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});r&&(n.verified.origin=r.origin,n.verified.isScam=r.isScam,n.verified.validation=r.origin===new URL(t.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.info(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(e,t)=>{Object.values(e).forEach((e=>{if(!vn(e,!1)){const{message:n}=pn("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw new Error(n)}}))}}async isInitialized(){if(!this.initialized){const{message:e}=pn("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ni,(async e=>{const{topic:t,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const r=await this.client.core.crypto.decode(t,n);try{(0,Un.isJsonRpcRequest)(r)?(this.client.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r})):(0,Un.isJsonRpcResponse)(r)?(await this.client.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.client.core.history.delete(t,r.id)):this.onRelayEventUnknownPayload({topic:t,payload:r})}catch(l){this.client.logger.error(l)}}))}registerExpirerEvents(){this.client.core.expirer.on(ss,(async e=>{const{topic:t,id:n}=Gt(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,pn("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))}))}registerPairingEvents(){this.client.core.pairing.events.on($i,(e=>this.onPairingCreated(e)))}isValidPairingTopic(e){if(!vn(e,!1)){const{message:t}=pn("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=pn("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Yt(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=pn("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!vn(e,!1)){const{message:t}=pn("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=pn("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Yt(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=pn("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=pn("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(vn(e,!1)){const{message:t}=pn("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=pn("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if("number"!=typeof e){const{message:t}=pn("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=pn("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Yt(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=pn("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class wo extends Bs{constructor(e,t){super(e,t,"proposal",Zs),this.core=e,this.logger=t}}class Eo extends Bs{constructor(e,t){super(e,t,"session",Zs),this.core=e,this.logger=t}}class Ao extends Bs{constructor(e,t){super(e,t,"request",Zs,(e=>e.id)),this.core=e,this.logger=t}}class To extends Ke{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=eo,this.events=new oe.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(t){throw this.logger.error(t.message),t}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(t){throw this.logger.error(t.message),t}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(t){throw this.logger.error(t.message),t}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(t){throw this.logger.error(t.message),t}},this.update=async e=>{try{return await this.engine.update(e)}catch(t){throw this.logger.error(t.message),t}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(t){throw this.logger.error(t.message),t}},this.request=async e=>{try{return await this.engine.request(e)}catch(t){throw this.logger.error(t.message),t}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(t){throw this.logger.error(t.message),t}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(t){throw this.logger.error(t.message),t}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(t){throw this.logger.error(t.message),t}},this.find=e=>{try{return this.engine.find(e)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||eo,this.metadata=e?.metadata||(0,rt.D)()||{name:"",description:"",url:"",icons:[""]};const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,ke.gw)((0,ke.jI)({level:e?.logger||to}));this.core=e?.core||new Qs(e),this.logger=(0,ke.Ep)(t,this.name),this.session=new Eo(this.core,this.logger),this.proposal=new wo(this.core,this.logger),this.pendingRequest=new Ao(this.core,this.logger),this.engine=new bo(this)}static async init(e){const t=new To(e);return await t.initialize(),t}get context(){return(0,ke.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const So=To,xo=e=>{const t=e.namespaces.stellar.accounts.map((e=>({network:e.split(":")[1],publicKey:e.split(":")[2]})));return{id:e.topic,name:e.peer.metadata.name,description:e.peer.metadata.description,url:e.peer.metadata.url,icons:e.peer.metadata.icons[0],accounts:t}};class Io{constructor(e){this.wcParams=e,this.moduleType=i.BRIDGE_WALLET,this.productId="wallet_connect",this.productName="Wallet Connect",this.productUrl="https://walletconnect.com/",this.productIcon="https://stellar.creit.tech/wallet-icons/walletconnect.svg",e.sessionId&&this.setSession(e.sessionId),e.client&&e.modal?(this.client=e.client,this.qrModal=e.modal):So.init({projectId:e.projectId,metadata:{name:e.name,url:e.url,description:e.description,icons:e.icons}}).then((t=>{console.log("WalletConnect is ready."),this.client=t,this.qrModal=new se({projectId:e.projectId})})).catch(console.error)}async isAvailable(){return!0}async getPublicKey(){if(!this.client)throw new Error("WalletConnect is not running yet");return(await this.getTargetSession()).accounts[0].publicKey}async signTx(e){if(!this.client)throw new Error("WalletConnect is not running yet");let t=e.xdr;for(const n of e.publicKeys){const i=await this.getTargetSession({publicKey:n});t=await this.client.request({topic:i.id,chainId:e.network===r.PUBLIC?Po.PUBLIC:Po.TESTNET,request:{method:this.wcParams.method,params:{xdr:e.xdr}}}).then((e=>e.signedXDR))}return{result:t}}async signBlob(e){throw new Error("xBull does not support signing random blobs")}async signAuthEntry(e){throw new Error("xBull does not support signing authorization entries")}setSession(e){this.activeSession=e}onSessionDeleted(e){if(!this.client)throw new Error("WalletConnect is not running yet");this.client.on("session_delete",(t=>{e(t.topic)}))}async connectWalletConnect(){if(!this.client)throw new Error("WalletConnect is not running yet");try{const{uri:e,approval:t}=await this.client.connect({requiredNamespaces:{stellar:{methods:[this.wcParams.method],chains:[this.wcParams.network===r.PUBLIC?Po.PUBLIC:Po.TESTNET],events:[]}}}),n=await new Promise(((n,r)=>{e&&this.qrModal.openModal({uri:e}),t().then((e=>{this.qrModal.closeModal(),n(e)})).catch((e=>{this.qrModal.closeModal(),r(e)}))})).then(xo);return this.setSession(n.id),n}catch(e){throw this.qrModal.closeModal(),console.error(e),new Error("There was an error when trying to connect")}}async closeSession(e,t){if(!this.client)throw new Error("WalletConnect is not running yet");await this.client.disconnect({topic:e,reason:{message:t||"Session closed",code:-1}})}async getSessions(){if(!this.client)throw new Error("WalletConnect is not running yet");return this.client.session.values.map(xo)}async getTargetSession(e){let t=(await this.getSessions()).find((t=>t.id===this.activeSession||!!t.accounts.find((t=>t.publicKey===(null===e||void 0===e?void 0:e.publicKey)))));return t||(t=await this.connectWalletConnect()),t}}var Po,_o;!function(e){e.PUBLIC="stellar:pubnet",e.TESTNET="stellar:testnet"}(Po||(Po={})),function(e){e.SIGN="stellar_signXDR",e.SIGN_AND_SUBMIT="stellar_signAndSubmitXDR"}(_o||(_o={}))},14301:function(e,t,n){"use strict";n.d(t,{AV:function(){return s},ConfigCtrl:function(){return p},ExplorerCtrl:function(){return N},OptionsCtrl:function(){return d},ThemeCtrl:function(){return q},ToastCtrl:function(){return V},jb:function(){return k},uA:function(){return l},zv:function(){return o}});var r=n(17832);const i=(0,r.sj)({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),s={state:i,subscribe:e=>(0,r.Ld)(i,(()=>e(i))),push(e,t){e!==i.view&&(i.view=e,t&&(i.data=t),i.history.push(e))},reset(e){i.view=e,i.history=[e]},replace(e){i.history.length>1&&(i.history[i.history.length-1]=e,i.view=e)},goBack(){if(i.history.length>1){i.history.pop();const[e]=i.history.slice(-1);i.view=e}},setData(e){i.data=e}},o={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>typeof window<"u"&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>o.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return o.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);return`${r}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,n){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let r=e;r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);return`${r}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(o.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(o.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(o.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(o.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=s.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},a=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),c=(0,r.sj)({enabled:a,userSessionId:"",events:[],connectedWalletId:void 0}),l={state:c,subscribe:e=>(0,r.Ld)(c.events,(()=>e((0,r.CO)(c.events[c.events.length-1])))),initialize(){c.enabled&&typeof(null==crypto?void 0:crypto.randomUUID)<"u"&&(c.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){c.connectedWalletId=e},click(e){if(c.enabled){const t={type:"CLICK",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}},track(e){if(c.enabled){const t={type:"TRACK",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}},view(e){if(c.enabled){const t={type:"VIEW",name:e.name,userSessionId:c.userSessionId,timestamp:Date.now(),data:e};c.events.push(t)}}},u=(0,r.sj)({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),d={state:u,subscribe:e=>(0,r.Ld)(u,(()=>e(u))),setChains(e){u.chains=e},setWalletConnectUri(e){u.walletConnectUri=e},setIsCustomDesktop(e){u.isCustomDesktop=e},setIsCustomMobile(e){u.isCustomMobile=e},setIsDataLoaded(e){u.isDataLoaded=e},setIsUiLoaded(e){u.isUiLoaded=e},setIsAuth(e){u.isAuth=e}},h=(0,r.sj)({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),p={state:h,subscribe:e=>(0,r.Ld)(h,(()=>e(h))),setConfig(e){var t,n;l.initialize(),d.setChains(e.chains),d.setIsAuth(Boolean(e.enableAuthMode)),d.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),d.setIsCustomDesktop(Boolean(null==(n=e.desktopWallets)?void 0:n.length)),o.setModalVersionInStorage(),Object.assign(h,e)}};var f=Object.defineProperty,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const b="https://explorer-api.walletconnect.com",w="wcm",E="js-2.6.2";async function A(e,t){const n=((e,t)=>{for(var n in t||(t={}))g.call(t,n)&&v(e,n,t[n]);if(m)for(var n of m(t))y.call(t,n)&&v(e,n,t[n]);return e})({sdkType:w,sdkVersion:E},t),r=new URL(e,b);return r.searchParams.append("projectId",p.state.projectId),Object.entries(n).forEach((([e,t])=>{t&&r.searchParams.append(e,String(t))})),(await fetch(r)).json()}const T={getDesktopListings:async e=>A("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>A("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>A("/w3m/v1/getInjectedListings",e),getAllListings:async e=>A("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${b}/w3m/v1/getWalletImage/${e}?projectId=${p.state.projectId}&sdkType=${w}&sdkVersion=${E}`,getAssetImageUrl:e=>`${b}/w3m/v1/getAssetImage/${e}?projectId=${p.state.projectId}&sdkType=${w}&sdkVersion=${E}`};var S=Object.defineProperty,x=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,_=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const R=o.isMobile(),C=(0,r.sj)({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),N={state:C,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=p.state;if("NONE"===e||"ALL"===t&&!e)return C.recomendedWallets;if(o.isArray(e)){const t={recommendedIds:e.join(",")},{listings:n}=await T.getAllListings(t),r=Object.values(n);r.sort(((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))),C.recomendedWallets=r}else{const{chains:e,isAuth:n}=d.state,r=e?.join(","),i=o.isArray(t),s={page:1,sdks:n?"auth_v1":void 0,entries:o.RECOMMENDED_WALLET_AMOUNT,chains:r,version:2,excludedIds:i?t.join(","):void 0},{listings:a}=R?await T.getMobileListings(s):await T.getDesktopListings(s);C.recomendedWallets=Object.values(a)}return C.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var n in t||(t={}))I.call(t,n)&&_(e,n,t[n]);if(x)for(var n of x(t))P.call(t,n)&&_(e,n,t[n]);return e})({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:r}=p.state,{recomendedWallets:i}=C;if("ALL"===r)return C.wallets;i.length?t.excludedIds=i.map((e=>e.id)).join(","):o.isArray(n)&&(t.excludedIds=n.join(",")),o.isArray(r)&&(t.excludedIds=[t.excludedIds,r].filter(Boolean).join(",")),d.state.isAuth&&(t.sdks="auth_v1");const{page:s,search:a}=e,{listings:c,total:l}=R?await T.getMobileListings(t):await T.getDesktopListings(t),u=Object.values(c),h=a?"search":"wallets";return C[h]={listings:[...C[h].listings,...u],total:l,page:s??1},{listings:u,total:l}},getWalletImageUrl:e=>T.getWalletImageUrl(e),getAssetImageUrl:e=>T.getAssetImageUrl(e),resetSearch(){C.search={listings:[],total:0,page:1}}},O=(0,r.sj)({open:!1}),k={state:O,subscribe:e=>(0,r.Ld)(O,(()=>e(O))),open:async e=>new Promise((t=>{const{isUiLoaded:n,isDataLoaded:r}=d.state;if(o.removeWalletConnectDeepLink(),d.setWalletConnectUri(e?.uri),d.setChains(e?.chains),s.reset("ConnectWallet"),n&&r)O.open=!0,t();else{const e=setInterval((()=>{const n=d.state;n.isUiLoaded&&n.isDataLoaded&&(clearInterval(e),O.open=!0,t())}),200)}})),close(){O.open=!1}};var M=Object.defineProperty,D=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,B=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=(0,r.sj)({themeMode:typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),q={state:F,subscribe:e=>(0,r.Ld)(F,(()=>e(F))),setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(F.themeMode=t),n&&(F.themeVariables=((e,t)=>{for(var n in t||(t={}))L.call(t,n)&&B(e,n,t[n]);if(D)for(var n of D(t))U.call(t,n)&&B(e,n,t[n]);return e})({},n))}},j=(0,r.sj)({open:!1,message:"",variant:"success"}),V={state:j,subscribe:e=>(0,r.Ld)(j,(()=>e(j))),openToast(e,t){j.open=!0,j.message=e,j.variant=t},closeToast(){j.open=!1}}},39883:function(e,t,n){"use strict";var r={};!function e(t,n,r,i){var s=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o="function"===typeof Path2D&&"function"===typeof DOMMatrix,a=function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var r=e.transferToImageBitmap();try{n.createPattern(r,"no-repeat")}catch(i){return!1}return!0}();function c(){}function l(e){var r=n.exports.Promise,i=void 0!==r?r:t.Promise;return"function"===typeof i?new i(e):(e(c,c),null)}var u,d,h,p=(u=a,d=new Map,{transform:function(e){if(u)return e;if(d.has(e))return d.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),d.set(e,t),t},clear:function(){d.clear()}}),f=function(){var e,t,n=Math.floor(1e3/60),r={},i=0;return"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?(e=function(e){var t=Math.random();return r[t]=requestAnimationFrame((function s(o){i===o||i+n-1<o?(i=o,delete r[t],e()):r[t]=requestAnimationFrame(s)})),t},t=function(e){r[e]&&cancelAnimationFrame(r[e])}):(e=function(e){return setTimeout(e,n)},t=function(e){return clearTimeout(e)}),{frame:e,cancel:t}}(),m=function(){var t,n,i={};return function(){if(t)return t;if(!r&&s){var o=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([o])))}catch(a){return void 0!==typeof console&&"function"===typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",a),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(r,s,o){if(n)return t(r,null),n;var a=Math.random().toString(36).slice(2);return n=l((function(s){function c(t){t.data.callback===a&&(delete i[a],e.removeEventListener("message",c),n=null,p.clear(),o(),s())}e.addEventListener("message",c),t(r,a),i[a]=c.bind(null,{data:{callback:a}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),i)i[t](),delete i[t]}}(t)}return t}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(e,t,n){return function(e,t){return t?t(e):e}(e&&(null!==(r=e[t])&&void 0!==r)?e[t]:g[t],n);var r}function v(e){return e<0?0:Math.floor(e)}function b(e){return parseInt(e,16)}function w(e){return e.map(E)}function E(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:b(t.substring(0,2)),g:b(t.substring(2,4)),b:b(t.substring(4,6))}}function A(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function T(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function S(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function x(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,i=t.y+t.random*t.tiltSin,s=t.wobbleX+t.random*t.tiltCos,a=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),o&&"path"===t.shape.type&&"string"===typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,r,i,s,o){var a=new Path2D(e),c=new Path2D;c.addPath(a,new DOMMatrix(t));var l=new Path2D;return l.addPath(c,new DOMMatrix([Math.cos(o)*i,Math.sin(o)*i,-Math.sin(o)*s,Math.cos(o)*s,n,r])),l}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(s-r),.1*Math.abs(a-i),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var c=Math.PI/10*t.wobble,l=.1*Math.abs(s-r),u=.1*Math.abs(a-i),d=t.shape.bitmap.width*t.scalar,h=t.shape.bitmap.height*t.scalar,f=new DOMMatrix([Math.cos(c)*l,Math.sin(c)*l,-Math.sin(c)*u,Math.cos(c)*u,t.x,t.y]);f.multiplySelf(new DOMMatrix(t.shape.matrix));var m=e.createPattern(p.transform(t.shape.bitmap),"no-repeat");m.setTransform(f),e.globalAlpha=1-n,e.fillStyle=m,e.fillRect(t.x-d/2,t.y-h/2,d,h),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(s-r)*t.ovalScalar,Math.abs(a-i)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,i,s,o,a,c){e.save(),e.translate(t,n),e.rotate(s),e.scale(r,i),e.arc(0,0,1,o,a,c),e.restore()}(e,t.x,t.y,Math.abs(s-r)*t.ovalScalar,Math.abs(a-i)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,y=4*t.scalar,v=8*t.scalar,b=t.x,w=t.y,E=5,A=Math.PI/E;E--;)b=t.x+Math.cos(g)*v,w=t.y+Math.sin(g)*v,e.lineTo(b,w),g+=A,b=t.x+Math.cos(g)*y,w=t.y+Math.sin(g)*y,e.lineTo(b,w),g+=A;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(i)),e.lineTo(Math.floor(s),Math.floor(a)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function I(e,n){var o,a=!e,c=!!y(n||{},"resize"),u=!1,d=y(n,"disableForReducedMotion",Boolean),h=s&&!!y(n||{},"useWorker")?m():null,g=a?A:T,b=!(!e||!h)&&!!e.__confetti_initialized,E="function"===typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function I(t,n,s){for(var a,c,u=y(t,"particleCount",v),d=y(t,"angle",Number),h=y(t,"spread",Number),m=y(t,"startVelocity",Number),b=y(t,"decay",Number),E=y(t,"gravity",Number),A=y(t,"drift",Number),T=y(t,"colors",w),I=y(t,"ticks",Number),P=y(t,"shapes"),_=y(t,"scalar"),R=!!y(t,"flat"),C=function(e){var t=y(e,"origin",Object);return t.x=y(t,"x",Number),t.y=y(t,"y",Number),t}(t),N=u,O=[],k=e.width*C.x,M=e.height*C.y;N--;)O.push(S({x:k,y:M,angle:d,spread:h,startVelocity:m,color:T[N%T.length],shape:P[(a=0,c=P.length,Math.floor(Math.random()*(c-a))+a)],ticks:I,decay:b,gravity:E,drift:A,scalar:_,flat:R}));return o?o.addFettis(O):(o=function(e,t,n,s,o){var a,c,u=t.slice(),d=e.getContext("2d"),h=l((function(t){function l(){a=c=null,d.clearRect(0,0,s.width,s.height),p.clear(),o(),t()}a=f.frame((function t(){!r||s.width===i.width&&s.height===i.height||(s.width=e.width=i.width,s.height=e.height=i.height),s.width||s.height||(n(e),s.width=e.width,s.height=e.height),d.clearRect(0,0,s.width,s.height),(u=u.filter((function(e){return x(d,e)}))).length?a=f.frame(t):l()})),c=l}));return{addFettis:function(e){return u=u.concat(e),h},canvas:e,promise:h,reset:function(){a&&f.cancel(a),c&&c()}}}(e,O,g,n,s),o.promise)}function P(n){var r=d||y(n,"disableForReducedMotion",Boolean),i=y(n,"zIndex",Number);if(r&&E)return l((function(e){e()}));a&&o?e=o.canvas:a&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(i),document.body.appendChild(e)),c&&!b&&g(e);var s={width:e.width,height:e.height};function p(){if(h){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};return g(t),void h.postMessage({resize:{width:t.width,height:t.height}})}s.width=s.height=null}function f(){o=null,c&&(u=!1,t.removeEventListener("resize",p)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,b=!1)}return h&&!b&&h.init(e),b=!0,h&&(e.__confetti_initialized=!0),c&&!u&&(u=!0,t.addEventListener("resize",p,!1)),h?h.fire(n,s,f):I(n,s,f)}return P.reset=function(){h&&h.reset(),o&&o.reset()},P}function P(){return h||(h=I(null,{useWorker:!0,resize:!0})),h}n.exports=function(){return P().apply(this,arguments)},n.exports.reset=function(){P().reset()},n.exports.create=I,n.exports.shapeFromPath=function(e){if(!o)throw new Error("path confetti are not supported in this browser");var t,n;"string"===typeof e?t=e:(t=e.path,n=e.matrix);var r=new Path2D(t),i=document.createElement("canvas").getContext("2d");if(!n){for(var s,a,c=1e3,l=c,u=c,d=0,h=0,p=0;p<c;p+=2)for(var f=0;f<c;f+=2)i.isPointInPath(r,p,f,"nonzero")&&(l=Math.min(l,p),u=Math.min(u,f),d=Math.max(d,p),h=Math.max(h,f));s=d-l,a=h-u;var m=Math.min(10/s,10/a);n=[m,0,0,m,-Math.round(s/2+l)*m,-Math.round(a/2+u)*m]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,r="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"===typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,i="fontFamily"in e?e.fontFamily:i,r="color"in e?e.color:r);var s=10*n,o=s+"px "+i,a=new OffscreenCanvas(s,s),c=a.getContext("2d");c.font=o;var l=c.measureText(t),u=Math.ceil(l.actualBoundingBoxRight+l.actualBoundingBoxLeft),d=Math.ceil(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent),h=l.actualBoundingBoxLeft+2,p=l.actualBoundingBoxAscent+2;u+=4,d+=4,(c=(a=new OffscreenCanvas(u,d)).getContext("2d")).font=o,c.fillStyle=r,c.fillText(t,h,p);var f=1/n;return{type:"bitmap",bitmap:a.transferToImageBitmap(),matrix:[f,0,0,f,-u*f/2,-d*f/2]}}}(function(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:this||{}}(),r,!1),t.Z=r.exports;r.exports.create},32233:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(45487),i=n(14330),s=n(76432);function o(){let e=!1;const t=new Set,n={subscribe:e=>(t.add(e),()=>{t.delete(e)}),start(n,i){(0,r.k)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");const o=[];return t.forEach((e=>{o.push((0,s.d)(e,n,{transitionOverride:i}))})),Promise.all(o)},set:n=>((0,r.k)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach((e=>{(0,i.gg)(e,n)}))),stop(){t.forEach((e=>{!function(e){e.values.forEach((e=>e.stop()))}(e)}))},mount:()=>(e=!0,()=>{e=!1,n.stop()})};return n}var a=n(96681),c=n(58868);const l=function(){const e=(0,a.h)(o);return(0,c.L)(e.mount,[]),e}},64593:function(e,t,n){"use strict";n.d(t,{v:function(){return Me}});var r=n(45487),i=n(86917);const s=!1,o=e=>Array.isArray(e)&&"number"===typeof e[0];function a(e){return Boolean(!e||"string"===typeof e&&l[e]||o(e)||Array.isArray(e)&&e.every(a))}const c=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,l={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:c([0,.65,.55,1]),circOut:c([.55,0,1,.45]),backIn:c([.31,.01,.66,-.59]),backOut:c([.33,1.53,.69,.99])};function u(e){if(e)return o(e)?c(e):Array.isArray(e)?e.map(u):l[e]}var d=n(81662);const h=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,p=1e-7,f=12;function m(e,t,n,r){if(e===t&&n===r)return d.Z;const i=t=>function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=h(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>p&&++a<f);return o}(t,0,1,e,n);return e=>0===e||1===e?e:h(i(e),t,r)}const g=m(.42,0,1,1),y=m(0,0,.58,1),v=m(.42,0,.58,1),b=e=>Array.isArray(e)&&"number"!==typeof e[0];var w=n(27255),E=n(90415),A=n(75129);const T=m(.33,1.53,.69,.99),S=(0,A.M)(T),x=(0,E.o)(S),I={linear:d.Z,easeIn:g,easeInOut:v,easeOut:y,circIn:w.Z7,circInOut:w.X7,circOut:w.Bn,backIn:S,backInOut:x,backOut:T,anticipate:e=>(e*=2)<1?.5*S(e):.5*(2-Math.pow(2,-10*(e-1)))},P=e=>{if(Array.isArray(e)){(0,r.k)(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,i,s]=e;return m(t,n,i,s)}return"string"===typeof e?((0,r.k)(void 0!==I[e],`Invalid easing type '${e}'`),I[e]):e};var _=n(85385),R=n(24169),C=n(80022);function N(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var O=n(26382),k=n(40819),M=n(93184);const D=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},L=[O.$,k.m,M.J];function U(e){const t=(n=e,L.find((e=>e.test(n))));var n;(0,r.k)(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let i=t.parse(e);return t===M.J&&(i=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,s=0,o=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,a=2*n-r;i=N(a,r,e+1/3),s=N(a,r,e),o=N(a,r,e-1/3)}else i=s=o=n;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:r}}(i)),i}const B=(e,t)=>{const n=U(e),r=U(t),i={...n};return e=>(i.red=D(n.red,r.red,e),i.green=D(n.green,r.green,e),i.blue=D(n.blue,r.blue,e),i.alpha=(0,C.C)(n.alpha,r.alpha,e),k.m.transform(i))};var F=n(83624),q=n(51550);const j=(e,t)=>n=>`${n>0?t:e}`;function V(e,t){return"number"===typeof e?n=>(0,C.C)(e,t,n):_.$.test(e)?B(e,t):e.startsWith("var(")?j(e,t):K(e,t)}const z=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>V(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},H=(e,t)=>{const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=V(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}},K=(e,t)=>{const n=q.P.createTransformer(t),i=(0,q.V)(e),s=(0,q.V)(t);return i.numVars===s.numVars&&i.numColors===s.numColors&&i.numNumbers>=s.numNumbers?(0,F.z)(z(i.values,s.values),n):((0,r.K)(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),j(e,t))};var G=n(23967);const W=(e,t)=>n=>(0,C.C)(e,t,n);function Y(e,t,n){const r=[],i=n||("number"===typeof(s=e[0])?W:"string"===typeof s?_.$.test(s)?B:K:Array.isArray(s)?z:"object"===typeof s?H:W);var s;const o=e.length-1;for(let a=0;a<o;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||d.Z:t;n=(0,F.z)(e,n)}r.push(n)}return r}function $(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const o=e.length;if((0,r.k)(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Y(t,i,s),c=a.length,l=t=>{let n=0;if(c>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=(0,G.Y)(e[n],e[n+1],t);return a[n](r)};return n?t=>l((0,R.u)(e[0],e[o-1],t)):l}function J(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=(0,G.Y)(0,t,r);e.push((0,C.C)(n,1,i))}}(t,e.length-1),t}function Q({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=b(r)?r.map(P):P(r),s={done:!1,value:t[0]},o=function(e,t){return e.map((e=>e*t))}(n&&n.length===t.length?n:J(t),e),a=$(o,t,{ease:Array.isArray(i)?i:(c=t,l=i,c.map((()=>l||v)).splice(0,c.length-1))});var c,l;return{calculatedDuration:e,next:t=>(s.value=a(t),s.done=t>=e,s)}}var X=n(3038);const Z=5;function ee(e,t,n){const r=Math.max(t-Z,0);return(0,X.R)(n-e(r),t-r)}const te=.001,ne=.01,re=10,ie=.05,se=1;function oe({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let o,a;(0,r.K)(e<=(0,i.w)(re),"Spring duration must be 10 seconds or less");let c=1-t;c=(0,R.u)(ie,se,c),e=(0,R.u)(ne,re,(0,i.X)(e)),c<1?(o=t=>{const r=t*c,i=r*e,s=r-n,o=ce(t,c),a=Math.exp(-i);return te-s/o*a},a=t=>{const r=t*c*e,i=r*n+n,s=Math.pow(c,2)*Math.pow(t,2)*e,a=Math.exp(-r),l=ce(Math.pow(t,2),c);return(-o(t)+te>0?-1:1)*((i-s)*a)/l}):(o=t=>Math.exp(-t*e)*((t-n)*e+1)-te,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const l=function(e,t,n){let r=n;for(let i=1;i<ae;i++)r-=e(r)/t(r);return r}(o,a,5/e);if(e=(0,i.w)(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const t=Math.pow(l,2)*s;return{stiffness:t,damping:2*c*Math.sqrt(s*t),duration:e}}}const ae=12;function ce(e,t){return e*Math.sqrt(1-t*t)}const le=["duration","bounce"],ue=["stiffness","damping","mass"];function de(e,t){return t.some((t=>void 0!==e[t]))}function he({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],o=e[e.length-1],a={done:!1,value:s},{stiffness:c,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!de(e,ue)&&de(e,le)){const n=oe(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}({...r,velocity:-(0,i.X)(r.velocity||0)}),f=h||0,m=l/(2*Math.sqrt(c*u)),g=o-s,y=(0,i.X)(Math.sqrt(c/u)),v=Math.abs(g)<5;let b;if(n||(n=v?.01:2),t||(t=v?.005:.5),m<1){const e=ce(y,m);b=t=>{const n=Math.exp(-m*y*t);return o-n*((f+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>o-Math.exp(-y*e)*(g+(f+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return o-n*((f+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:p&&d||null,next:e=>{const r=b(e);if(p)a.done=e>=d;else{let i=f;0!==e&&(i=m<1?ee(b,e,r):0);const s=Math.abs(i)<=n,c=Math.abs(o-r)<=t;a.done=s&&c}return a.value=a.done?o:r,a}}}function pe({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},p=e=>void 0===a?c:void 0===c||Math.abs(a-e)<Math.abs(c-e)?a:c;let f=n*t;const m=d+f,g=void 0===o?m:o(m);g!==m&&(f=g-d);const y=e=>-f*Math.exp(-e/r),v=e=>g+y(e),b=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=l,h.value=h.done?g:n};let w,E;const A=e=>{var t;(t=h.value,void 0!==a&&t<a||void 0!==c&&t>c)&&(w=e,E=he({keyframes:[h.value,p(h.value)],velocity:ee(v,e,h.value),damping:i,stiffness:s,restDelta:l,restSpeed:u}))};return A(0),{calculatedDuration:null,next:e=>{let t=!1;return E||void 0!==w||(t=!0,b(e),A(e)),void 0!==w&&e>w?E.next(e-w):(!t&&b(e),h)}}}var fe=n(2074);const me=e=>{const t=({timestamp:t})=>e(t);return{start:()=>fe.Wi.update(t,!0),stop:()=>(0,fe.Pn)(t),now:()=>fe.frameData.isProcessing?fe.frameData.timestamp:performance.now()}},ge=2e4;function ye(e){let t=0;let n=e.next(t);for(;!n.done&&t<ge;)t+=50,n=e.next(t);return t>=ge?1/0:t}const ve={decay:pe,inertia:pe,tween:Q,keyframes:Q,spring:he};function be({autoplay:e=!0,delay:t=0,driver:n=me,keyframes:r,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:c="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:h,...p}){let f,m,g=1,y=!1;const v=()=>{m=new Promise((e=>{f=e}))};let b;v();const w=ve[s]||Q;let E;w!==Q&&"number"!==typeof r[0]&&(E=$([0,100],r,{clamp:!1}),r=[0,100]);const A=w({...p,keyframes:r});let T;"mirror"===c&&(T=w({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let S="idle",x=null,I=null,P=null;null===A.calculatedDuration&&o&&(A.calculatedDuration=ye(A));const{calculatedDuration:_}=A;let C=1/0,N=1/0;null!==_&&(C=_+a,N=C*(o+1)-a);let O=0;const k=e=>{if(null===I)return;g>0&&(I=Math.min(I,e)),g<0&&(I=Math.min(e-N/g,I)),O=null!==x?x:Math.round(e-I)*g;const n=O-t*(g>=0?1:-1),i=g>=0?n<0:n>N;O=Math.max(n,0),"finished"===S&&null===x&&(O=N);let s=O,l=A;if(o){const e=Math.min(O,N)/C;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,o+1);Boolean(t%2)&&("reverse"===c?(n=1-n,a&&(n-=a/C)):"mirror"===c&&(l=T)),s=(0,R.u)(0,1,n)*C}const u=i?{done:!1,value:r[0]}:l.next(s);E&&(u.value=E(u.value));let{done:d}=u;i||null===_||(d=g>=0?O>=N:O<=0);const p=null===x&&("finished"===S||"running"===S&&d);return h&&h(u.value),p&&L(),u},M=()=>{b&&b.stop(),b=void 0},D=()=>{S="idle",M(),f(),v(),I=P=null},L=()=>{S="finished",d&&d(),M(),f()},U=()=>{if(y)return;b||(b=n(k));const e=b.now();l&&l(),null!==x?I=e-x:I&&"finished"!==S||(I=e),"finished"===S&&v(),P=I,x=null,S="running",b.start()};e&&U();const B={then:(e,t)=>m.then(e,t),get time(){return(0,i.X)(O)},set time(e){e=(0,i.w)(e),O=e,null===x&&b&&0!==g?I=b.now()-e/g:x=e},get duration(){const e=null===A.calculatedDuration?ye(A):A.calculatedDuration;return(0,i.X)(e)},get speed(){return g},set speed(e){e!==g&&b&&(g=e,B.time=(0,i.X)(O))},get state(){return S},play:U,pause:()=>{S="paused",x=O},stop:()=>{y=!0,"idle"!==S&&(S="idle",u&&u(),D())},cancel:()=>{null!==P&&k(P),D()},complete:()=>{S="finished"},sample:e=>(I=0,k(e))};return B}const we=function(e){let t;return()=>(void 0===t&&(t=e()),t)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),Ee=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Ae(e,t,{onUpdate:n,onComplete:r,...s}){if(!(we()&&Ee.has(t)&&!s.repeatDelay&&"mirror"!==s.repeatType&&0!==s.damping&&"inertia"!==s.type))return!1;let o,c,l=!1,h=!1;const p=()=>{c=new Promise((e=>{o=e}))};p();let{keyframes:f,duration:m=300,ease:g,times:y}=s;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!a(t.ease))(t,s)){const e=be({...s,repeat:0,delay:0});let t={done:!1,value:f[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;y=void 0,f=n,m=r-10,g="linear"}const v=function(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:c}={}){const l={[t]:n};c&&(l.offset=c);const d=u(a);return Array.isArray(d)&&(l.easing=d),e.animate(l,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}(e.owner.current,t,f,{...s,duration:m,ease:g,times:y}),b=()=>{h=!1,v.cancel()},w=()=>{h=!0,fe.Wi.update(b),o(),p()};v.onfinish=()=>{h||(e.set(function(e,{repeat:t,repeatType:n="loop"}){return e[t&&"loop"!==n&&t%2===1?0:e.length-1]}(f,s)),r&&r(),w())};return{then:(e,t)=>c.then(e,t),attachTimeline:e=>(v.timeline=e,v.onfinish=null,d.Z),get time(){return(0,i.X)(v.currentTime||0)},set time(e){v.currentTime=(0,i.w)(e)},get speed(){return v.playbackRate},set speed(e){v.playbackRate=e},get duration(){return(0,i.X)(m)},play:()=>{l||(v.play(),(0,fe.Pn)(b))},pause:()=>v.pause(),stop:()=>{if(l=!0,"idle"===v.playState)return;const{currentTime:t}=v;if(t){const n=be({...s,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}w()},complete:()=>{h||v.finish()},cancel:w}}var Te=n(94714);const Se={type:"spring",stiffness:500,damping:25,restSpeed:10},xe={type:"keyframes",duration:.8},Ie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pe=(e,{keyframes:t})=>t.length>2?xe:Te.G.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Se:Ie,_e=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!q.P.test(t)&&"0"!==t||t.startsWith("url(")));var Re=n(79135),Ce=n(30681);function Ne(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||(0,Ce.W)(e):void 0}var Oe=n(31056);const ke=!1,Me=(e,t,n,o={})=>a=>{const c=(0,Oe.e)(o,e)||{},l=c.delay||o.delay||0;let{elapsed:u=0}=o;u-=(0,i.w)(l);const h=function(e,t,n,r){const i=_e(t,n);let s;s=Array.isArray(n)?[...n]:[null,n];const o=void 0!==r.from?r.from:e.get();let a;const c=[];for(let l=0;l<s.length;l++)null===s[l]&&(s[l]=0===l?o:s[l-1]),Ne(s[l])&&c.push(l),"string"===typeof s[l]&&"none"!==s[l]&&"0"!==s[l]&&(a=s[l]);if(i&&c.length&&a)for(let l=0;l<c.length;l++)s[c[l]]=(0,Re.T)(t,a);return s}(t,e,n,c),p=h[0],f=h[h.length-1],m=_e(e,p),g=_e(e,f);(0,r.K)(m===g,`You are trying to animate ${e} from "${p}" to "${f}". ${p} is not an animatable value - to enable this animation set ${p} to a value animatable to ${f} via the \`style\` property.`);let y={keyframes:h,velocity:t.getVelocity(),ease:"easeOut",...c,delay:-u,onUpdate:e=>{t.set(e),c.onUpdate&&c.onUpdate(e)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if((0,Oe.r)(c)||(y={...y,...Pe(e,y)}),y.duration&&(y.duration=(0,i.w)(y.duration)),y.repeatDelay&&(y.repeatDelay=(0,i.w)(y.repeatDelay)),!m||!g||s||!1===c.type||ke)return function({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:d.Z,pause:d.Z,stop:d.Z,then:e=>(e(),Promise.resolve()),cancel:d.Z,complete:d.Z});return t?be({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}(s?{...y,delay:0}:y);if(!o.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=Ae(t,e,y);if(n)return n}return be(y)}},76432:function(e,t,n){"use strict";n.d(t,{d:function(){return g}});var r=n(52248),i=n(94714),s=n(68588),o=n(64593),a=n(12490),c=n(14330),l=n(31056),u=n(2074);function d({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function h(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function p(e,t,{delay:n=0,transitionOverride:r,type:p}={}){let{transition:f=e.getDefaultTransition(),transitionEnd:m,...g}=e.makeTargetAnimatable(t);const y=e.getValue("willChange");r&&(f=r);const v=[],b=p&&e.animationState&&e.animationState.getState()[p];for(const c in g){const t=e.getValue(c),r=g[c];if(!t||void 0===r||b&&d(b,c))continue;const p={delay:n,elapsed:0,...(0,l.e)(f||{},c)};if(window.HandoffAppearAnimations){const n=e.getProps()[s.M];if(n){const e=window.HandoffAppearAnimations(n,c,t,u.Wi);null!==e&&(p.elapsed=e,p.isHandoff=!0)}}let m=!p.isHandoff&&!h(t,r);if("spring"===p.type&&(t.getVelocity()||p.velocity)&&(m=!1),t.animation&&(m=!1),m)continue;t.start((0,o.v)(c,t,r,e.shouldReduceMotion&&i.G.has(c)?{type:!1}:p));const w=t.animation;(0,a.L)(y)&&(y.add(c),w.then((()=>y.remove(c)))),v.push(w)}return m&&Promise.all(v).then((()=>{m&&(0,c.CD)(e,m)})),v}function f(e,t,n={}){const i=(0,r.x)(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(p(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t,n=0,r=0,i=1,s){const o=[],a=(e.variantChildren.size-1)*r,c=1===i?(e=0)=>e*r:(e=0)=>a-e*r;return Array.from(e.variantChildren).sort(m).forEach(((e,r)=>{e.notify("AnimationStart",t),o.push(f(e,t,{...s,delay:n+c(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(o)}(e,t,i+r,o,a,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[e,t]="beforeChildren"===c?[o,a]:[a,o];return e().then((()=>t()))}return Promise.all([o(),a(n.delay)])}function m(e,t){return e.sortNodePosition(t)}function g(e,t,n={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map((t=>f(e,t,n)));i=Promise.all(r)}else if("string"===typeof t)i=f(e,t,n);else{const s="function"===typeof t?(0,r.x)(e,t,n.custom):t;i=Promise.all(p(e,s,n))}return i.then((()=>e.notify("AnimationComplete",t)))}},68588:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r="data-"+(0,n(93193).D)("framerAppearId")},48488:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});const r=e=>Array.isArray(e)},31056:function(e,t,n){"use strict";function r({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}function i(e,t){return e[t]||e.default||e}n.d(t,{e:function(){return i},r:function(){return r}})},27255:function(e,t,n){"use strict";n.d(t,{Bn:function(){return o},X7:function(){return a},Z7:function(){return s}});var r=n(90415),i=n(75129);const s=e=>1-Math.sin(Math.acos(e)),o=(0,i.M)(s),a=(0,r.o)(s)},90415:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});const r=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2},75129:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r=e=>t=>1-e(1-t)},2074:function(e,t,n){"use strict";n.d(t,{Pn:function(){return a},Wi:function(){return o},frameData:function(){return c},S6:function(){return l}});var r=n(81662);class i{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const s=["prepare","read","update","preRender","render","postRender"];const{schedule:o,cancel:a,state:c,steps:l}=function(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=s.reduce(((e,t)=>(e[t]=function(e){let t=new i,n=new i,r=0,s=!1,o=!1;const a=new WeakSet,c={schedule:(e,i=!1,o=!1)=>{const c=o&&s,l=c?t:n;return i&&a.add(e),l.add(e)&&c&&s&&(r=t.order.length),e},cancel:e=>{n.remove(e),a.delete(e)},process:i=>{if(s)o=!0;else{if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(i),a.has(r)&&(c.schedule(r),e())}s=!1,o&&(o=!1,c.process(i))}}};return c}((()=>n=!0)),e)),{}),c=e=>a[e].process(o),l=()=>{const i=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(i-o.timestamp,40),1),o.timestamp=i,o.isProcessing=!0,s.forEach(c),o.isProcessing=!1,n&&t&&(r=!1,e(l))};return{schedule:s.reduce(((t,i)=>{const s=a[i];return t[i]=(t,i=!1,a=!1)=>(n||(n=!0,r=!0,o.isProcessing||e(l)),s.schedule(t,i,a)),t}),{}),cancel:e=>s.forEach((t=>a[t].cancel(e))),state:o,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:r.Z,!0)},2020:function(e,t,n){"use strict";n.d(t,{E:function(){return jr}});var r=n(67294);const i=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),s=(0,r.createContext)({}),o=(0,r.createContext)(null);var a=n(58868);const c=(0,r.createContext)({strict:!1});var l=n(68588);function u(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function d(e){return"string"===typeof e||Array.isArray(e)}function h(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const p=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],f=["initial",...p];function m(e){return h(e.animate)||f.some((t=>d(e[t])))}function g(e){return Boolean(m(e)||e.variants)}function y(e){const{initial:t,animate:n}=function(e,t){if(m(e)){const{initial:t,animate:n}=e;return{initial:!1===t||d(t)?t:void 0,animate:d(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(s));return(0,r.useMemo)((()=>({initial:t,animate:n})),[v(t),v(n)])}function v(e){return Array.isArray(e)?e.join(" "):e}const b={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},w={};for(const zr in b)w[zr]={isEnabled:e=>b[zr].some((t=>!!e[t]))};var E=n(11741);const A=(0,r.createContext)({}),T=(0,r.createContext)({}),S=Symbol.for("motionComponentSymbol");function x({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:d,Component:h}){e&&function(e){for(const t in e)w[t]={...w[t],...e[t]}}(e);const p=(0,r.forwardRef)((function(p,f){let m;const g={...(0,r.useContext)(i),...p,layoutId:I(p)},{isStatic:v}=g,b=y(p),w=d(p,v);if(!v&&E.j){b.visualElement=function(e,t,n,u){const{visualElement:d}=(0,r.useContext)(s),h=(0,r.useContext)(c),p=(0,r.useContext)(o),f=(0,r.useContext)(i).reducedMotion,m=(0,r.useRef)();u=u||h.renderer,!m.current&&u&&(m.current=u(e,{visualState:t,parent:d,props:n,presenceContext:p,blockInitialAnimation:!!p&&!1===p.initial,reducedMotionConfig:f}));const g=m.current;(0,r.useInsertionEffect)((()=>{g&&g.update(n,p)}));const y=(0,r.useRef)(Boolean(n[l.M]&&!window.HandoffComplete));return(0,a.L)((()=>{g&&(g.render(),y.current&&g.animationState&&g.animationState.animateChanges())})),(0,r.useEffect)((()=>{g&&(g.updateFeatures(),!y.current&&g.animationState&&g.animationState.animateChanges(),y.current&&(y.current=!1,window.HandoffComplete=!0))})),g}(h,w,g,t);const n=(0,r.useContext)(T),u=(0,r.useContext)(c).strict;b.visualElement&&(m=b.visualElement.loadFeatures(g,u,e,n))}return r.createElement(s.Provider,{value:b},m&&b.visualElement?r.createElement(m,{visualElement:b.visualElement,...g}):null,n(h,p,function(e,t,n){return(0,r.useCallback)((r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):u(n)&&(n.current=r))}),[t])}(w,b.visualElement,f),w,v,b.visualElement))}));return p[S]=h,p}function I({layoutId:e}){const t=(0,r.useContext)(A).id;return t&&void 0!==e?t+"-"+e:e}function P(e){function t(t,n={}){return x(e(t,n))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const _=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R(e){return"string"===typeof e&&!e.includes("-")&&!!(_.indexOf(e)>-1||/[A-Z]/.test(e))}const C={};var N=n(94714);function O(e,{layout:t,layoutId:n}){return N.G.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!C[e]||"opacity"===e)}var k=n(40406);const M={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D=N._.length;var L=n(57630);const U=(e,t)=>t&&"number"===typeof e?t.transform(e):e;var B=n(36173);function F(e,t,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=e;let c=!1,l=!1,u=!0;for(const d in t){const e=t[d];if((0,L.f9)(d)){s[d]=e;continue}const n=B.j[d],r=U(e,n);if(N.G.has(d)){if(c=!0,o[d]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(l=!0,a[d]=r):i[d]=r}if(t.transform||(c||r?i.transform=function(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<D;o++){const t=N._[o];void 0!==e[t]&&(s+=`${M[t]||t}(${e[t]}) `)}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}(e.transform,n,u,r):i.transform&&(i.transform="none")),l){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;i.transformOrigin=`${e} ${t} ${n}`}}const q=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function j(e,t,n){for(const r in t)(0,k.i)(t[r])||O(r,n)||(e[r]=t[r])}function V(e,t,n){const i={};return j(i,e.style||{},e),Object.assign(i,function({transformTemplate:e},t,n){return(0,r.useMemo)((()=>{const r=q();return F(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)}),[t])}(e,t,n)),e.transformValues?e.transformValues(i):i}function z(e,t,n){const r={},i=V(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const H=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function K(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||H.has(e)}let G=e=>!K(e);try{(W=require("@emotion/is-prop-valid").default)&&(G=e=>e.startsWith("on")?!K(e):W(e))}catch(Vr){}var W;var Y=n(96190);function $(e,t,n){return"string"===typeof e?e:Y.px.transform(t+n*e)}const J={offset:"stroke-dashoffset",array:"stroke-dasharray"},Q={offset:"strokeDashoffset",array:"strokeDasharray"};function X(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...l},u,d,h){if(F(e,l,u,h),d)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==i||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,n){return`${$(t,e.x,e.width)} ${$(n,e.y,e.height)}`}(m,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==t&&(p.x=t),void 0!==n&&(p.y=n),void 0!==r&&(p.scale=r),void 0!==o&&function(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?J:Q;e[s.offset]=Y.px.transform(-r);const o=Y.px.transform(t),a=Y.px.transform(n);e[s.array]=`${o} ${a}`}(p,o,a,c,!1)}const Z=()=>({...q(),attrs:{}}),ee=e=>"string"===typeof e&&"svg"===e.toLowerCase();function te(e,t,n,i){const s=(0,r.useMemo)((()=>{const n=Z();return X(n,t,{enableHardwareAcceleration:!1},ee(i),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};j(t,e.style,e),s.style={...t,...s.style}}return s}function ne(e=!1){return(t,n,i,{latestValues:s},o)=>{const a=(R(t)?te:z)(n,s,o,t),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(G(i)||!0===n&&K(i)||!t&&!K(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),l={...c,...a,ref:i},{children:u}=n,d=(0,r.useMemo)((()=>(0,k.i)(u)?u.get():u),[u]);return(0,r.createElement)(t,{...l,children:d})}}var re=n(93193);function ie(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const se=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oe(e,t,n,r){ie(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(se.has(i)?i:(0,re.D)(i),t.attrs[i])}function ae(e,t){const{style:n}=e,r={};for(const i in n)((0,k.i)(n[i])||t.style&&(0,k.i)(t.style[i])||O(i,e))&&(r[i]=n[i]);return r}function ce(e,t){const n=ae(e,t);for(const r in e)if((0,k.i)(e[r])||(0,k.i)(t[r])){n[-1!==N._.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}var le=n(79432),ue=n(96681),de=n(8715);function he(e){const t=(0,k.i)(e)?e.get():e;return(0,de.p)(t)?t.toValue():t}const pe=e=>(t,n)=>{const i=(0,r.useContext)(s),a=(0,r.useContext)(o),c=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const o={latestValues:fe(r,i,s,e),renderState:t()};return n&&(o.mount=e=>n(r,e,o)),o}(e,t,i,a);return n?c():(0,ue.h)(c)};function fe(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=he(s[h]);let{initial:o,animate:a}=e;const c=m(e),l=g(e);t&&l&&!c&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const d=u?a:o;if(d&&"boolean"!==typeof d&&!h(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const n=(0,le.o)(e,t);if(!n)return;const{transitionEnd:r,transition:s,...o}=n;for(const e in o){let t=o[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]}))}return i}var me=n(2074);const ge={useVisualState:pe({scrapeMotionValuesFromProps:ce,createRenderState:Z,onMount:(e,t,{renderState:n,latestValues:r})=>{me.Wi.read((()=>{try{n.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}})),me.Wi.render((()=>{X(n,r,{enableHardwareAcceleration:!1},ee(t.tagName),e.transformTemplate),oe(t,n)}))}})},ye={useVisualState:pe({scrapeMotionValuesFromProps:ae,createRenderState:q})};function ve(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const be=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function we(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Ee=e=>t=>be(t)&&e(t,we(t));function Ae(e,t,n,r){return ve(e,t,Ee(n),r)}var Te=n(83624);function Se(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const xe=Se("dragHorizontal"),Ie=Se("dragVertical");function Pe(e){let t=!1;if("y"===e)t=Ie();else if("x"===e)t=xe();else{const e=xe(),n=Ie();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function _e(){const e=Pe(!0);return!e||(e(),!1)}class Re{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ce(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Ae(e.current,n,((n,i)=>{if("touch"===n.pointerType||_e())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[r]&&me.Wi.update((()=>s[r](n,i)))}),{passive:!e.getProps()[r]})}const Ne=(e,t)=>!!t&&(e===t||Ne(e,t.parentElement));var Oe=n(81662);function ke(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,we(n))}const Me=new WeakMap,De=new WeakMap,Le=e=>{const t=Me.get(e.target);t&&t(e)},Ue=e=>{e.forEach(Le)};function Be(e,t,n){const r=function({root:e,...t}){const n=e||document;De.has(n)||De.set(n,{});const r=De.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Ue,{root:e,...t})),r[i]}(t);return Me.set(e,n),r.observe(e),()=>{Me.delete(e),r.unobserve(e)}}const Fe={some:0,all:1};const qe={inView:{Feature:class extends Re{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Fe[r]};return Be(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Re{constructor(){super(...arguments),this.removeStartListeners=Oe.Z,this.removeEndListeners=Oe.Z,this.removeAccessibleListeners=Oe.Z,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Ae(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps();me.Wi.update((()=>{i||Ne(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)}))}),{passive:!(n.onTap||n.onPointerUp)}),i=Ae(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=(0,Te.z)(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=ve(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=ve(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&ke("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&me.Wi.update((()=>n(e,t)))}))})),ke("down",((e,t)=>{this.startPress(e,t)}))})),t=ve(this.node.current,"blur",(()=>{this.isPressing&&ke("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=(0,Te.z)(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&me.Wi.update((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!_e()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&me.Wi.update((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=Ae(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ve(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=(0,Te.z)(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Re{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=(0,Te.z)(ve(this.node.current,"focus",(()=>this.onFocus())),ve(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Re{mount(){this.unmount=(0,Te.z)(Ce(this.node,!0),Ce(this.node,!1))}unmount(){}}}};var je=n(48488);function Ve(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var ze=n(52248),He=n(76432);const Ke=[...p].reverse(),Ge=p.length;function We(e){let t=function(e){return t=>Promise.all(t.map((({animation:t,options:n})=>(0,He.d)(e,t,n))))}(e);const n={animate:$e(!0),whileInView:$e(),whileHover:$e(),whileTap:$e(),whileDrag:$e(),whileFocus:$e(),exit:$e()};let r=!0;const i=(t,n)=>{const r=(0,ze.x)(e,n);if(r){const{transition:e,transitionEnd:n,...i}=r;t={...t,...i,...n}}return t};function s(s,o){const a=e.getProps(),c=e.getVariantContext(!0)||{},l=[],u=new Set;let p={},f=1/0;for(let t=0;t<Ge;t++){const m=Ke[t],g=n[m],y=void 0!==a[m]?a[m]:c[m],v=d(y),b=m===o?g.isActive:null;!1===b&&(f=t);let w=y===c[m]&&y!==a[m]&&v;if(w&&r&&e.manuallyAnimateOnMount&&(w=!1),g.protectedKeys={...p},!g.isActive&&null===b||!y&&!g.prevProp||h(y)||"boolean"===typeof y)continue;let E=Ye(g.prevProp,y)||m===o&&g.isActive&&!w&&v||t>f&&v,A=!1;const T=Array.isArray(y)?y:[y];let S=T.reduce(i,{});!1===b&&(S={});const{prevResolvedValues:x={}}=g,I={...x,...S},P=e=>{E=!0,u.has(e)&&(A=!0,u.delete(e)),g.needsAnimating[e]=!0};for(const e in I){const t=S[e],n=x[e];if(p.hasOwnProperty(e))continue;let r=!1;r=(0,je.C)(t)&&(0,je.C)(n)?!Ve(t,n):t!==n,r?void 0!==t?P(e):u.add(e):void 0!==t&&u.has(e)?P(e):g.protectedKeys[e]=!0}g.prevProp=y,g.prevResolvedValues=S,g.isActive&&(p={...p,...S}),r&&e.blockInitialAnimation&&(E=!1),!E||w&&!A||l.push(...T.map((e=>({animation:e,options:{type:m,...s}}))))}if(u.size){const t={};u.forEach((n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)})),l.push({animation:t})}let m=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(m=!1),r=!1,m?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const a=s(i,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Ye(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Ve(t,e)}function $e(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Je=0;const Qe={animation:{Feature:class extends Re{constructor(e){super(e),e.animationState||(e.animationState=We(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),h(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Re{constructor(){super(...arguments),this.id=Je++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};var Xe=n(45487),Ze=n(86917);const et=(e,t)=>Math.abs(e-t);class tt{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=it(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=et(e.x,t.x),r=et(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=me.frameData;this.history.push({...r,timestamp:i});const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=nt(t,this.transformPagePoint),me.Wi.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=it("pointercancel"===e.type?this.lastMoveEventInfo:nt(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!be(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const s=nt(we(e),this.transformPagePoint),{point:o}=s,{timestamp:a}=me.frameData;this.history=[{...o,timestamp:a}];const{onSessionStart:c}=t;c&&c(e,it(s,this.history)),this.removeListeners=(0,Te.z)(Ae(this.contextWindow,"pointermove",this.handlePointerMove),Ae(this.contextWindow,"pointerup",this.handlePointerUp),Ae(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),(0,me.Pn)(this.updatePoint)}}function nt(e,t){return t?{point:t(e.point)}:e}function rt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function it({point:e},t){return{point:e,delta:rt(e,ot(t)),offset:rt(e,st(t)),velocity:at(t,.1)}}function st(e){return e[0]}function ot(e){return e[e.length-1]}function at(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=ot(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>(0,Ze.w)(t)));)n--;if(!r)return{x:0,y:0};const s=(0,Ze.X)(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}var ct=n(23967),lt=n(80022);function ut(e){return e.max-e.min}function dt(e,t=0,n=.01){return Math.abs(e-t)<=n}function ht(e,t,n,r=.5){e.origin=r,e.originPoint=(0,lt.C)(t.min,t.max,e.origin),e.scale=ut(n)/ut(t),(dt(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=(0,lt.C)(n.min,n.max,e.origin)-e.originPoint,(dt(e.translate)||isNaN(e.translate))&&(e.translate=0)}function pt(e,t,n,r){ht(e.x,t.x,n.x,r?r.originX:void 0),ht(e.y,t.y,n.y,r?r.originY:void 0)}function ft(e,t,n){e.min=n.min+t.min,e.max=e.min+ut(t)}function mt(e,t,n){e.min=t.min-n.min,e.max=e.min+ut(t)}function gt(e,t,n){mt(e.x,t.x,n.x),mt(e.y,t.y,n.y)}var yt=n(24169);function vt(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function bt(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const wt=.35;function Et(e,t,n){return{min:At(e,t),max:At(e,n)}}function At(e,t){return"number"===typeof e?e:e[t]||0}const Tt=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),St=()=>({x:{min:0,max:0},y:{min:0,max:0}});function xt(e){return[e("x"),e("y")]}function It({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Pt(e){return void 0===e||1===e}function _t({scale:e,scaleX:t,scaleY:n}){return!Pt(e)||!Pt(t)||!Pt(n)}function Rt(e){return _t(e)||Ct(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Ct(e){return Nt(e.x)||Nt(e.y)}function Nt(e){return e&&"0%"!==e}function Ot(e,t,n){return n+t*(e-n)}function kt(e,t,n,r,i){return void 0!==i&&(e=Ot(e,i,r)),Ot(e,n,r)+t}function Mt(e,t=0,n=1,r,i){e.min=kt(e.min,t,n,r,i),e.max=kt(e.max,t,n,r,i)}function Dt(e,{x:t,y:n}){Mt(e.x,t.translate,t.scale,t.originPoint),Mt(e.y,n.translate,n.scale,n.originPoint)}function Lt(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ut(e,t){e.min=e.min+t,e.max=e.max+t}function Bt(e,t,[n,r,i]){const s=void 0!==t[i]?t[i]:.5,o=(0,lt.C)(e.min,e.max,s);Mt(e,t[n],t[r],o,t.scale)}const Ft=["x","scaleX","originX"],qt=["y","scaleY","originY"];function jt(e,t){Bt(e.x,t,Ft),Bt(e.y,t,qt)}function Vt(e,t){return It(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var zt=n(64593);const Ht=({current:e})=>e?e.ownerDocument.defaultView:null,Kt=new WeakMap;class Gt{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new tt(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(we(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Pe(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xt((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Y.aQ.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=ut(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&me.Wi.update((()=>i(e,t)),!1,!0);const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>xt((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Ht(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&me.Wi.update((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Wt(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?(0,lt.C)(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?(0,lt.C)(n,e,r.max):Math.min(e,n)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&u(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:i}){return{x:vt(e.x,n,i),y:vt(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=wt){return!1===e?e=0:!0===e&&(e=wt),{x:Et(e,"left","right"),y:Et(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xt((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!u(e))return!1;const n=e.current;(0,Xe.k)(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Vt(e,n),{scroll:i}=t;return i&&(Ut(r.x,i.offset.x),Ut(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:bt(e.x,t.x),y:bt(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=It(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},c=xt((o=>{if(!Wt(o,t,this.currentDirection))return;let c=a&&a[o]||{};s&&(c={min:0,max:0});const l=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(o,d)}));return Promise.all(c).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start((0,zt.v)(e,n,0,t))}stopAnimation(){xt((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){xt((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){xt((t=>{const{drag:n}=this.getProps();if(!Wt(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-(0,lt.C)(n,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!u(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};xt((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=ut(e),i=ut(t);return i>r?n=(0,ct.Y)(t.min,t.max-r,e.min):r>i&&(n=(0,ct.Y)(e.min,e.max-i,t.min)),(0,yt.u)(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),xt((t=>{if(!Wt(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set((0,lt.C)(i,s,r[t]))}))}addListeners(){if(!this.visualElement.current)return;Kt.set(this.visualElement,this);const e=Ae(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();u(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=ve(window,"resize",(()=>this.scalePositionWithinConstraints())),s=n.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(xt((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=wt,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function Wt(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Yt=e=>(t,n)=>{e&&me.Wi.update((()=>e(t,n)))};const $t={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Jt(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Qt={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Y.px.test(e))return e;e=parseFloat(e)}return`${Jt(e,t.target.x)}% ${Jt(e,t.target.y)}%`}};var Xt=n(51550);const Zt={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Xt.P.parse(e);if(i.length>5)return r;const s=Xt.P.createTransformer(e),o="number"!==typeof i[0]?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=c;const l=(0,lt.C)(a,c,.5);return"number"===typeof i[2+o]&&(i[2+o]/=l),"number"===typeof i[3+o]&&(i[3+o]/=l),s(i)}};class en extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var s;s=nn,Object.assign(C,s),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$t.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||me.Wi.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tn(e){const[t,n]=function(){const e=(0,r.useContext)(o);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=(0,r.useId)();return(0,r.useEffect)((()=>i(s)),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}(),i=(0,r.useContext)(A);return r.createElement(en,{...e,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(T),isPresent:t,safeToRemove:n})}const nn={borderRadius:{...Qt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qt,borderTopRightRadius:Qt,borderBottomLeftRadius:Qt,borderBottomRightRadius:Qt,boxShadow:Zt};var rn=n(21560),sn=n(27255);const on=["TopLeft","TopRight","BottomLeft","BottomRight"],an=on.length,cn=e=>"string"===typeof e?parseFloat(e):e,ln=e=>"number"===typeof e||Y.px.test(e);function un(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const dn=pn(0,.5,sn.Bn),hn=pn(.5,.95,Oe.Z);function pn(e,t,n){return r=>r<e?0:r>t?1:n((0,ct.Y)(e,t,r))}function fn(e,t){e.min=t.min,e.max=t.max}function mn(e,t){fn(e.x,t.x),fn(e.y,t.y)}function gn(e,t,n,r,i){return e=Ot(e-=t,1/n,r),void 0!==i&&(e=Ot(e,1/i,r)),e}function yn(e,t,[n,r,i],s,o){!function(e,t=0,n=1,r=.5,i,s=e,o=e){Y.aQ.test(t)&&(t=parseFloat(t),t=(0,lt.C)(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=(0,lt.C)(s.min,s.max,r);e===s&&(a-=t),e.min=gn(e.min,t,n,a,i),e.max=gn(e.max,t,n,a,i)}(e,t[n],t[r],t[i],t.scale,s,o)}const vn=["x","scaleX","originX"],bn=["y","scaleY","originY"];function wn(e,t,n,r){yn(e.x,t,vn,n?n.x:void 0,r?r.x:void 0),yn(e.y,t,bn,n?n.y:void 0,r?r.y:void 0)}var En=n(31056);function An(e){return 0===e.translate&&1===e.scale}function Tn(e){return An(e.x)&&An(e.y)}function Sn(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function xn(e){return ut(e.x)/ut(e.y)}var In=n(10010);class Pn{constructor(){this.members=[]}add(e){(0,In.y4)(this.members,e),e.scheduleRender()}remove(e){if((0,In.cl)(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _n(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+=`rotate(${e}deg) `),t&&(r+=`rotateX(${t}deg) `),i&&(r+=`rotateY(${i}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return 1===o&&1===a||(r+=`scale(${o}, ${a})`),r||"none"}const Rn=(e,t)=>e.depth-t.depth;class Cn{constructor(){this.children=[],this.isDirty=!1}add(e){(0,In.y4)(this.children,e),this.isDirty=!0}remove(e){(0,In.cl)(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Rn),this.isDirty=!1,this.children.forEach(e)}}var Nn=n(33234);const On=["","X","Y","Z"],kn={visibility:"hidden"};let Mn=0;const Dn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ln({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=(null===t||void 0===t?void 0:t())){this.id=Mn++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,Dn.totalNodes=Dn.resolvedTargetDeltas=Dn.recalculatedProjection=0,this.nodes.forEach(Fn),this.nodes.forEach(Gn),this.nodes.forEach(Wn),this.nodes.forEach(qn),e=Dn,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Cn)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new rn.L),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=t)instanceof SVGElement&&"svg"!==r.tagName,this.instance=t;const{layoutId:i,layout:s,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&((0,me.Pn)(r),e(s-t))};return me.Wi.read(r,!0),()=>(0,me.Pn)(r)}(r,250),$t.hasAnimatedSinceResize&&($t.hasAnimatedSinceResize=!1,this.nodes.forEach(Kn))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||s)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||Zn,{onLayoutAnimationStart:s,onLayoutAnimationComplete:a}=o.getProps(),c=!this.targetLayout||!Sn(this.targetLayout,r)||n,l=!t&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||l||t&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,l);const t={...(0,En.e)(i,"layout"),onPlay:s,onComplete:a};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||Kn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,(0,me.Pn)(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Yn),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Vn);this.isUpdating||this.nodes.forEach(zn),this.isUpdating=!1,this.nodes.forEach(Hn),this.nodes.forEach(Un),this.nodes.forEach(Bn),this.clearAllSnapshots();const e=performance.now();me.frameData.delta=(0,yt.u)(0,1e3/60,e-me.frameData.timestamp),me.frameData.timestamp=e,me.frameData.isProcessing=!0,me.S6.update.process(me.frameData),me.S6.preRender.process(me.frameData),me.S6.render.process(me.frameData),me.frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(jn),this.sharedNodes.forEach($n)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.Wi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.Wi.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Tn(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||Rt(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),nr((r=n).x),nr(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return St();const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Ut(t.x,n.offset.x),Ut(t.y,n.offset.y)),t}removeElementScroll(e){const t=St();mn(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:s}=r;if(r!==this.root&&i&&s.layoutScroll){if(i.isRoot){mn(t,e);const{scroll:n}=this.root;n&&(Ut(t.x,-n.offset.x),Ut(t.y,-n.offset.y))}Ut(t.x,i.offset.x),Ut(t.y,i.offset.y)}}return t}applyTransform(e,t=!1){const n=St();mn(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&jt(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Rt(e.latestValues)&&jt(n,e.latestValues)}return Rt(this.latestValues)&&jt(n,this.latestValues),n}removeTransform(e){const t=St();mn(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Rt(e.latestValues))continue;_t(e.latestValues)&&e.updateSnapshot();const r=St();mn(r,e.measurePageBox()),wn(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Rt(this.latestValues)&&wn(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==me.frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=me.frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),gt(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,c;if(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,c=this.relativeParent.target,ft(o.x,a.x,c.x),ft(o.y,a.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),Dt(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),gt(this.relativeTargetOrigin,this.target,e.target),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Dn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!_t(this.parent.latestValues)&&!Ct(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===me.frameData.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;mn(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,r=!1){const i=n.length;if(!i)return;let s,o;t.x=t.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const i=s.instance;i&&i.style&&"contents"===i.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&jt(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Dt(e,o)),r&&Rt(s.latestValues)&&jt(e,s.latestValues))}t.x=Lt(t.x),t.y=Lt(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:c}=t;if(!c)return void(this.projectionTransform&&(this.projectionDelta=Tt(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=Tt(),this.projectionDeltaWithTransform=Tt());const l=this.projectionTransform;pt(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=_n(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),Dn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s=Tt();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o=St(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(Xn));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var c,h,p,f,m,g;Jn(s.x,e.x,n),Jn(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gt(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=o,g=n,Qn(p.x,f.x,m.x,g),Qn(p.y,f.y,m.y,g),d&&(c=this.relativeTarget,h=d,c.x.min===h.x.min&&c.x.max===h.x.max&&c.y.min===h.y.min&&c.y.max===h.y.max)&&(this.isProjectionDirty=!1),d||(d=St()),mn(d,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=(0,lt.C)(0,void 0!==n.opacity?n.opacity:1,dn(r)),e.opacityExit=(0,lt.C)(void 0!==t.opacity?t.opacity:1,0,hn(r))):s&&(e.opacity=(0,lt.C)(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let o=0;o<an;o++){const i=`border${on[o]}Radius`;let s=un(t,i),a=un(n,i);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||ln(s)===ln(a)?(e[i]=Math.max((0,lt.C)(cn(s),cn(a),r),0),(Y.aQ.test(a)||Y.aQ.test(s))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=(0,lt.C)(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&((0,me.Pn)(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.Wi.update((()=>{$t.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=(0,k.i)(e)?e:(0,Nn.BX)(e);return r.start((0,zt.v)("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&rr(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||St();const t=ut(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=ut(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}mn(t,n),jt(t,i),pt(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Pn);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let i=0;i<On.length;i++){const t="rotate"+On[i];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const i in r)e.setStaticValue(i,r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return kn;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=he(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=he(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Rt(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=_n(this.projectionDeltaWithTransform,this.treeScale,o),i&&(r.transform=i(o,r.transform));const{x:a,y:c}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*c.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const l in C){if(void 0===o[l])continue;const{correct:e,applyTo:t}=C[l],n="none"===r.transform?o[l]:e(o[l],s);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[l]=n}return this.options.layoutId&&(r.pointerEvents=s===this?he(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Vn),this.root.sharedNodes.clear()}}}function Un(e){e.updateLayout()}function Bn(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?xt((e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=ut(r);r.min=t[e].min,r.max=r.min+i})):rr(i,n.layoutBox,t)&&xt((r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],o=ut(t[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)}));const o=Tt();pt(o,t,n.layoutBox);const a=Tt();s?pt(a,e.applyTransform(r,!0),n.measuredBox):pt(a,t,n.layoutBox);const c=!Tn(o);let l=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o=St();gt(o,n.layoutBox,i.layoutBox);const a=St();gt(a,t,s.layoutBox),Sn(o,a)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:l})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Fn(e){Dn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function qn(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jn(e){e.clearSnapshot()}function Vn(e){e.clearMeasurements()}function zn(e){e.isLayoutDirty=!1}function Hn(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Kn(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Gn(e){e.resolveTargetDelta()}function Wn(e){e.calcProjection()}function Yn(e){e.resetRotation()}function $n(e){e.removeLeadSnapshot()}function Jn(e,t,n){e.translate=(0,lt.C)(t.translate,0,n),e.scale=(0,lt.C)(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Qn(e,t,n,r){e.min=(0,lt.C)(t.min,n.min,r),e.max=(0,lt.C)(t.max,n.max,r)}function Xn(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Zn={duration:.45,ease:[.4,0,.1,1]},er=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),tr=er("applewebkit/")&&!er("chrome/")?Math.round:Oe.Z;function nr(e){e.min=tr(e.min),e.max=tr(e.max)}function rr(e,t,n){return"position"===e||"preserve-aspect"===e&&!dt(xn(t),xn(n),.2)}const ir=Ln({attachResizeListener:(e,t)=>ve(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sr={current:void 0},or=Ln({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!sr.current){const e=new ir({});e.mount(window),e.setOptions({layoutScroll:!0}),sr.current=e}return sr.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),ar={pan:{Feature:class extends Re{constructor(){super(...arguments),this.removePointerDownListener=Oe.Z}onPointerDown(e){this.session=new tt(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ht(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Yt(e),onStart:Yt(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&me.Wi.update((()=>r(e,t)))}}}mount(){this.removePointerDownListener=Ae(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Re{constructor(e){super(e),this.removeGroupControls=Oe.Z,this.removeListeners=Oe.Z,this.controls=new Gt(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Oe.Z}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:or,MeasureLayout:tn}};var cr=n(2728),lr=n(14330),ur=n(80585);const dr=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;const hr=4;function pr(e,t,n=1){(0,Xe.k)(n<=hr,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const t=dr.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return(0,ur.P)(e)?parseFloat(e):e}return(0,L.tm)(i)?pr(i,t,n+1):i}var fr=n(56440),mr=n(61649);const gr=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),yr=e=>gr.has(e),vr=e=>e===mr.Rx||e===Y.px,br=(e,t)=>parseFloat(e.split(", ")[t]),wr=(e,t)=>(n,{transform:r})=>{if("none"===r||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return br(i[1],t);{const t=r.match(/^matrix\((.+)\)$/);return t?br(t[1],e):0}},Er=new Set(["x","y","z"]),Ar=N._.filter((e=>!Er.has(e)));const Tr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:wr(4,13),y:wr(5,14)};Tr.translateX=Tr.x,Tr.translateY=Tr.y;const Sr=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(yr);let s=[],o=!1;const a=[];if(i.forEach((i=>{const c=e.getValue(i);if(!e.hasValue(i))return;let l=n[i],u=(0,fr.C)(l);const d=t[i];let h;if((0,je.C)(d)){const e=d.length,t=null===d[0]?1:0;l=d[t],u=(0,fr.C)(l);for(let n=t;n<e&&null!==d[n];n++)h?(0,Xe.k)((0,fr.C)(d[n])===h,"All keyframes must be of the same type"):(h=(0,fr.C)(d[n]),(0,Xe.k)(h===u||vr(u)&&vr(h),"Keyframes must be of the same dimension as the current value"))}else h=(0,fr.C)(d);if(u!==h)if(vr(u)&&vr(h)){const e=c.get();"string"===typeof e&&c.set(parseFloat(e)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&h===Y.px&&(t[i]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===l||0===d)?0===l?c.set(h.transform(l)):t[i]=u.transform(d):(o||(s=function(e){const t=[];return Ar.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),o=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],c.jump(d))})),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:o}=s,a={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{a[e]=Tr[e](r,s)})),t.render();const c=t.measureViewportBox();return n.forEach((n=>{const r=t.getValue(n);r&&r.jump(a[n]),e[n]=Tr[n](c,s)})),e})(t,e,a);return s.length&&s.forEach((([t,n])=>{e.getValue(t).set(n)})),e.render(),E.j&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}};function xr(e,t,n,r){return(e=>Object.keys(e).some(yr))(t)?Sr(e,t,n,r):{target:t,transitionEnd:r}}const Ir=(e,t,n,r)=>{const i=function(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach((e=>{const t=e.get();if(!(0,L.tm)(t))return;const n=pr(t,r);n&&e.set(n)}));for(const i in t){const e=t[i];if(!(0,L.tm)(e))continue;const s=pr(e,r);s&&(t[i]=s,n||(n={}),void 0===n[i]&&(n[i]=e))}return{target:t,transitionEnd:n}}(e,t,r);return xr(e,t=i.target,n,r=i.transitionEnd)},Pr={current:null},_r={current:!1};var Rr=n(12490);const Cr=new WeakMap,Nr=Object.keys(w),Or=Nr.length,kr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Mr=f.length;class Dr{constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>me.Wi.render(this.render,!1,!0);const{latestValues:o,renderState:a}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=a,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.isControllingVariants=m(t),this.isVariantNode=g(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...l}=this.scrapeMotionValuesFromProps(t,{});for(const u in l){const e=l[u];void 0!==o[u]&&(0,k.i)(e)&&(e.set(o[u],!1),(0,Rr.L)(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Cr.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),_r.current||function(){if(_r.current=!0,E.j)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Pr.current=e.matches;e.addListener(t),t()}else Pr.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Pr.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Cr.delete(this.current),this.projection&&this.projection.unmount(),(0,me.Pn)(this.notifyUpdate),(0,me.Pn)(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=N.G.has(e),r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&me.Wi.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{r(),i()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures({children:e,...t},n,r,i){let s,o;for(let a=0;a<Or;a++){const e=Nr[a],{isEnabled:n,Feature:r,ProjectionNode:i,MeasureLayout:c}=w[e];i&&(s=i),n(t)&&(!this.features[e]&&r&&(this.features[e]=new r(this)),c&&(o=c))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:n,drag:r,dragConstraints:o,layoutScroll:a,layoutRoot:c}=t;this.projection.setOptions({layoutId:e,layout:n,alwaysMeasureLayout:Boolean(r)||o&&u(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof n?n:"both",initialPromotionConfig:i,layoutScroll:a,layoutRoot:c})}return o}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<kr.length;n++){const t=kr[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],o=n[i];if((0,k.i)(s))e.addValue(i,s),(0,Rr.L)(r)&&r.add(i);else if((0,k.i)(o))e.addValue(i,(0,Nn.BX)(s,{owner:e})),(0,Rr.L)(r)&&r.remove(i);else if(o!==s)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(s)}else{const t=e.getStaticValue(i);e.addValue(i,(0,Nn.BX)(void 0!==t?t:s,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const t={};for(let n=0;n<Mr;n++){const e=f[n],r=this.props[e];(d(r)||!1===r)&&(t[e]=r)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=(0,Nn.BX)(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=(0,le.o)(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||(0,k.i)(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new rn.L),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Lr extends Dr{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...n},{transformValues:r},i){let s=(0,lr.P$)(n,e||{},this);if(r&&(t&&(t=r(t)),n&&(n=r(n)),s&&(s=r(s))),i){(0,lr.GJ)(this,n,s);const e=Ir(this,n,s,t);t=e.transitionEnd,n=e.target}return{transition:e,transitionEnd:t,...n}}}class Ur extends Lr{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(N.G.has(t)){const e=(0,cr.A)(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=((0,L.f9)(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return Vt(e,t)}build(e,t,n,r){F(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return ae(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;(0,k.i)(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}renderInstance(e,t,n,r){ie(e,t,n,r)}}class Br extends Lr{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(N.G.has(t)){const e=(0,cr.A)(t);return e&&e.default||0}return t=se.has(t)?t:(0,re.D)(t),e.getAttribute(t)}measureInstanceViewportBox(){return St()}scrapeMotionValuesFromProps(e,t){return ce(e,t)}build(e,t,n,r){X(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){oe(e,t,0,r)}mount(e){this.isSVGTag=ee(e.tagName),super.mount(e)}}const Fr=(e,t)=>R(e)?new Br(t,{enableHardwareAcceleration:!1}):new Ur(t,{enableHardwareAcceleration:!0}),qr={...Qe,...qe,...ar,...{layout:{ProjectionNode:or,MeasureLayout:tn}}},jr=P(((e,t)=>function(e,{forwardMotionProps:t=!1},n,r){return{...R(e)?ge:ye,preloadedFeatures:n,useRender:ne(t),createVisualElement:r,Component:e}}(e,t,qr,Fr)))},93193:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});const r=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},57630:function(e,t,n){"use strict";n.d(t,{Xp:function(){return o},f9:function(){return i},tm:function(){return s}});const r=e=>t=>"string"===typeof t&&t.startsWith(e),i=r("--"),s=r("var(--"),o=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g},79135:function(e,t,n){"use strict";n.d(t,{T:function(){return o}});var r=n(51550),i=n(97197),s=n(2728);function o(e,t){let n=(0,s.A)(e);return n!==i.h&&(n=r.P),n.getAnimatableNone?n.getAnimatableNone(t):void 0}},2728:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(85385),i=n(97197);const s={...n(36173).j,color:r.$,backgroundColor:r.$,outlineColor:r.$,fill:r.$,stroke:r.$,borderColor:r.$,borderTopColor:r.$,borderRightColor:r.$,borderBottomColor:r.$,borderLeftColor:r.$,filter:i.h,WebkitFilter:i.h},o=e=>s[e]},56440:function(e,t,n){"use strict";n.d(t,{$:function(){return o},C:function(){return a}});var r=n(61649),i=n(96190),s=n(88340);const o=[r.Rx,i.px,i.aQ,i.RW,i.vw,i.vh,{test:e=>"auto"===e,parse:e=>e}],a=e=>o.find((0,s.l)(e))},36173:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(61649),i=n(96190);const s={...r.Rx,transform:Math.round},o={borderWidth:i.px,borderTopWidth:i.px,borderRightWidth:i.px,borderBottomWidth:i.px,borderLeftWidth:i.px,borderRadius:i.px,radius:i.px,borderTopLeftRadius:i.px,borderTopRightRadius:i.px,borderBottomRightRadius:i.px,borderBottomLeftRadius:i.px,width:i.px,maxWidth:i.px,height:i.px,maxHeight:i.px,size:i.px,top:i.px,right:i.px,bottom:i.px,left:i.px,padding:i.px,paddingTop:i.px,paddingRight:i.px,paddingBottom:i.px,paddingLeft:i.px,margin:i.px,marginTop:i.px,marginRight:i.px,marginBottom:i.px,marginLeft:i.px,rotate:i.RW,rotateX:i.RW,rotateY:i.RW,rotateZ:i.RW,scale:r.bA,scaleX:r.bA,scaleY:r.bA,scaleZ:r.bA,skew:i.RW,skewX:i.RW,skewY:i.RW,distance:i.px,translateX:i.px,translateY:i.px,translateZ:i.px,x:i.px,y:i.px,z:i.px,perspective:i.px,transformPerspective:i.px,opacity:r.Fq,originX:i.$C,originY:i.$C,originZ:i.px,zIndex:s,fillOpacity:r.Fq,strokeOpacity:r.Fq,numOctaves:s}},88340:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});const r=e=>t=>t.test(e)},94714:function(e,t,n){"use strict";n.d(t,{G:function(){return i},_:function(){return r}});const r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i=new Set(r)},52248:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(79432);function i(e,t,n){const i=e.getProps();return(0,r.o)(i,t,void 0!==n?n:i.custom,function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.getVelocity())),t}(e))}},79432:function(e,t,n){"use strict";function r(e,t,n,r={},i={}){return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}n.d(t,{o:function(){return r}})},14330:function(e,t,n){"use strict";n.d(t,{GJ:function(){return b},P$:function(){return E},CD:function(){return g},gg:function(){return v}});var r=n(80585),i=n(30681),s=n(8715),o=n(33234),a=n(51550),c=n(79135),l=n(85385),u=n(56440),d=n(88340);const h=[...u.$,l.$,a.P],p=e=>h.find((0,d.l)(e));var f=n(52248);function m(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,(0,o.BX)(n))}function g(e,t){const n=(0,f.x)(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const a in o){m(e,a,(0,s.Y)(o[a]))}}function y(e,t){[...t].reverse().forEach((n=>{const r=e.getVariant(n);r&&g(e,r),e.variantChildren&&e.variantChildren.forEach((e=>{y(e,t)}))}))}function v(e,t){return Array.isArray(t)?y(e,t):"string"===typeof t?y(e,[t]):void g(e,t)}function b(e,t,n){var s,l;const u=Object.keys(t).filter((t=>!e.hasValue(t))),d=u.length;if(d)for(let h=0;h<d;h++){const d=u[h],f=t[d];let m=null;Array.isArray(f)&&(m=f[0]),null===m&&(m=null!==(l=null!==(s=n[d])&&void 0!==s?s:e.readValue(d))&&void 0!==l?l:t[d]),void 0!==m&&null!==m&&("string"===typeof m&&((0,r.P)(m)||(0,i.W)(m))?m=parseFloat(m):!p(m)&&a.P.test(f)&&(m=(0,c.T)(d,f)),e.addValue(d,(0,o.BX)(m,{owner:e})),void 0===n[d]&&(n[d]=m),null!==m&&e.setBaseTarget(d,m))}}function w(e,t){if(!t)return;return(t[e]||t.default||t).from}function E(e,t,n){const r={};for(const i in e){const e=w(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}},10010:function(e,t,n){"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}function i(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}n.d(t,{cl:function(){return i},y4:function(){return r}})},24169:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});const r=(e,t,n)=>Math.min(Math.max(n,e),t)},45487:function(e,t,n){"use strict";n.d(t,{K:function(){return i},k:function(){return s}});var r=n(81662);let i=r.Z,s=r.Z},11741:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});const r="undefined"!==typeof document},80585:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});const r=e=>/^\-?\d*\.?\d+$/.test(e)},30681:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});const r=e=>/^0[^.\s]+$/.test(e)},80022:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});const r=(e,t,n)=>-n*e+n*t+e},81662:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=e=>e},83624:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});const r=(e,t)=>n=>t(e(n)),i=(...e)=>e.reduce(r)},23967:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});const r=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r}},8715:function(e,t,n){"use strict";n.d(t,{Y:function(){return s},p:function(){return i}});var r=n(48488);const i=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),s=e=>(0,r.C)(e)?e[e.length-1]||0:e},21560:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(10010);class i{constructor(){this.subscriptions=[]}add(e){return(0,r.y4)(this.subscriptions,e),()=>(0,r.cl)(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}},86917:function(e,t,n){"use strict";n.d(t,{X:function(){return i},w:function(){return r}});const r=e=>1e3*e,i=e=>e/1e3},96681:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(67294);function i(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}},19215:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(67294),i=n(45487);const s={some:0,all:1};function o(e,t,{root:n,margin:r,amount:o="some"}={}){const a=function(e,t,n){var r;if("string"===typeof e){let s=document;t&&((0,i.k)(Boolean(t.current),"Scope provided, but no element detected."),s=t.current),n?(null!==(r=n[e])&&void 0!==r||(n[e]=s.querySelectorAll(e)),e=n[e]):e=s.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}(e),c=new WeakMap,l=new IntersectionObserver((e=>{e.forEach((e=>{const n=c.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){const n=t(e);"function"===typeof n?c.set(e.target,n):l.unobserve(e.target)}else n&&(n(e),c.delete(e.target))}))}),{root:n,rootMargin:r,threshold:"number"===typeof o?o:s[o]});return a.forEach((e=>l.observe(e))),()=>l.disconnect()}function a(e,{root:t,margin:n,amount:i,once:s=!1}={}){const[a,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(!e.current||s&&a)return;const r={root:t&&t.current||void 0,margin:n,amount:i};return o(e.current,(()=>(c(!0),s?void 0:()=>c(!1))),r)}),[t,e,n,s,i]),a}},58868:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(67294);const i=n(11741).j?r.useLayoutEffect:r.useEffect},3038:function(e,t,n){"use strict";function r(e,t){return t?e*(1e3/t):0}n.d(t,{R:function(){return r}})},33234:function(e,t,n){"use strict";n.d(t,{BX:function(){return c}});var r=n(21560),i=n(3038),s=n(2074);const o={current:void 0};class a{constructor(e,t={}){var n;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(e,t=!0)=>{this.prev=this.current,this.current=e;const{delta:n,timestamp:r}=s.frameData;this.lastUpdated!==r&&(this.timeDelta=n,this.lastUpdated=r,s.Wi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>s.Wi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:e})=>{e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new r.L);const n=this.events[e].add(t);return"change"===e?()=>{n(),s.Wi.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return o.current&&o.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?(0,i.R)(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function c(e,t){return new a(e,t)}},26382:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(40819);const i={test:(0,n(98834).i)("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:r.m.transform}},93184:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(61649),i=n(96190),s=n(36430),o=n(98834);const a={test:(0,o.i)("hsl","hue"),parse:(0,o.d)("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+i.aQ.transform((0,s.Nw)(t))+", "+i.aQ.transform((0,s.Nw)(n))+", "+(0,s.Nw)(r.Fq.transform(o))+")"}},85385:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var r=n(36430),i=n(26382),s=n(93184),o=n(40819);const a={test:e=>o.m.test(e)||i.$.test(e)||s.J.test(e),parse:e=>o.m.test(e)?o.m.parse(e):s.J.test(e)?s.J.parse(e):i.$.parse(e),transform:e=>(0,r.HD)(e)?e:e.hasOwnProperty("red")?o.m.transform(e):s.J.transform(e)}},40819:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var r=n(24169),i=n(61649),s=n(36430),o=n(98834);const a={...i.Rx,transform:e=>Math.round((e=>(0,r.u)(0,255,e))(e))},c={test:(0,o.i)("rgb","red"),parse:(0,o.d)("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+a.transform(e)+", "+a.transform(t)+", "+a.transform(n)+", "+(0,s.Nw)(i.Fq.transform(r))+")"}},98834:function(e,t,n){"use strict";n.d(t,{d:function(){return s},i:function(){return i}});var r=n(36430);const i=(e,t)=>n=>Boolean((0,r.HD)(n)&&r.mj.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),s=(e,t,n)=>i=>{if(!(0,r.HD)(i))return i;const[s,o,a,c]=i.match(r.KP);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==c?parseFloat(c):1}}},97197:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(51550),i=n(36430);const s=new Set(["brightness","contrast","saturate","opacity"]);function o(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(i.KP)||[];if(!r)return e;const o=n.replace(r,"");let a=s.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+o+")"}const a=/([a-z-]*)\(.*?\)/g,c={...r.P,getAnimatableNone:e=>{const t=e.match(a);return t?t.map(o).join(" "):e}}},51550:function(e,t,n){"use strict";n.d(t,{P:function(){return g},V:function(){return h}});var r=n(57630),i=n(81662),s=n(85385),o=n(61649),a=n(36430);const c={regex:r.Xp,countKey:"Vars",token:"${v}",parse:i.Z},l={regex:a.dA,countKey:"Colors",token:"${c}",parse:s.$.parse},u={regex:a.KP,countKey:"Numbers",token:"${n}",parse:o.Rx.parse};function d(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function h(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&d(n,c),d(n,l),d(n,u),n}function p(e){return h(e).values}function f(e){const{values:t,numColors:n,numVars:r,tokenised:i}=h(e),o=t.length;return e=>{let t=i;for(let i=0;i<o;i++)t=i<r?t.replace(c.token,e[i]):i<r+n?t.replace(l.token,s.$.transform(e[i])):t.replace(u.token,(0,a.Nw)(e[i]));return t}}const m=e=>"number"===typeof e?0:e;const g={test:function(e){var t,n;return isNaN(e)&&(0,a.HD)(e)&&((null===(t=e.match(a.KP))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(a.dA))||void 0===n?void 0:n.length)||0)>0},parse:p,createTransformer:f,getAnimatableNone:function(e){const t=p(e);return f(e)(t.map(m))}}},61649:function(e,t,n){"use strict";n.d(t,{Fq:function(){return s},Rx:function(){return i},bA:function(){return o}});var r=n(24169);const i={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},s={...i,transform:e=>(0,r.u)(0,1,e)},o={...i,default:1}},96190:function(e,t,n){"use strict";n.d(t,{$C:function(){return u},RW:function(){return s},aQ:function(){return o},px:function(){return a},vh:function(){return c},vw:function(){return l}});var r=n(36430);const i=e=>({test:t=>(0,r.HD)(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),s=i("deg"),o=i("%"),a=i("px"),c=i("vh"),l=i("vw"),u={...o,parse:e=>o.parse(e)/100,transform:e=>o.transform(100*e)}},36430:function(e,t,n){"use strict";n.d(t,{HD:function(){return a},KP:function(){return i},Nw:function(){return r},dA:function(){return s},mj:function(){return o}});const r=e=>Math.round(1e5*e)/1e5,i=/(-)?([\d]*\.?[\d])+/g,s=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,o=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function a(e){return"string"===typeof e}},12490:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(40406);function i(e){return Boolean((0,r.i)(e)&&e.add)}},40406:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});const r=e=>Boolean(e&&e.getVelocity)},71508:function(e,t,n){"use strict";n.d(t,{tv:function(){return S}});var r,i=n(67294),s=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))c.call(t,n)&&l(e,n,t[n]);return e},d=(e,t)=>{var n={};for(var r in e)a.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&o)for(var r of o(e))t.indexOf(r)<0&&c.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class{constructor(e,n,r,i){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let o=[];for(let t=0;t<this.size;t++)o.push(!1);for(let t=0;t<this.size;t++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(r);if(this.drawCodewords(a),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(i=t,e=n),this.applyMask(t)}}s(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(n,r){const i=e.QrSegment.makeSegments(n);return t.encodeSegments(i,r)}static encodeBinary(n,r){const i=e.QrSegment.makeBytes(n);return t.encodeSegments([i],r)}static encodeSegments(e,n,i=1,o=40,c=-1,l=!0){if(!(t.MIN_VERSION<=i&&i<=o&&o<=t.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let u,d;for(u=i;;u++){const r=8*t.getNumDataCodewords(u,n),i=a.getTotalBits(e,u);if(i<=r){d=i;break}if(u>=o)throw new RangeError("Data too long")}for(const r of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])l&&d<=8*t.getNumDataCodewords(u,r)&&(n=r);let h=[];for(const t of e){r(t.mode.modeBits,4,h),r(t.numChars,t.mode.numCharCountBits(u),h);for(const e of t.getData())h.push(e)}s(h.length==d);const p=8*t.getNumDataCodewords(u,n);s(h.length<=p),r(0,Math.min(4,p-h.length),h),r(0,(8-h.length%8)%8,h),s(h.length%8==0);for(let t=236;h.length<p;t^=253)r(t,8,h);let f=[];for(;8*f.length<h.length;)f.push(0);return h.forEach(((e,t)=>f[t>>>3]|=e<<7-(7&t))),new t(u,n,f,c)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let i=0;i<10;i++)n=n<<1^1335*(n>>>9);const r=21522^(t<<10|n);s(r>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,i(r,s));this.setFunctionModule(8,7,i(r,6)),this.setFunctionModule(8,8,i(r,7)),this.setFunctionModule(7,8,i(r,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,i(r,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,i(r,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,i(r,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let n=0;n<18;n++){const e=i(t,n),r=this.size-11+n%3,s=Math.floor(n/3);this.setFunctionModule(r,s,e),this.setFunctionModule(s,r,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const i=Math.max(Math.abs(r),Math.abs(n)),s=e+r,o=t+n;0<=s&&s<this.size&&0<=o&&o<this.size&&this.setFunctionModule(s,o,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const i=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],o=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],a=Math.floor(t.getNumRawDataModules(n)/8),c=i-a%i,l=Math.floor(a/i);let u=[];const d=t.reedSolomonComputeDivisor(o);for(let s=0,p=0;s<i;s++){let n=e.slice(p,p+l-o+(s<c?0:1));p+=n.length;const r=t.reedSolomonComputeRemainder(n,d);s<c&&n.push(0),u.push(n.concat(r))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach(((e,n)=>{(t!=l-o||n>=c)&&h.push(e[t])}));return s(h.length==a),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let s=0;s<2;s++){const o=t-s,a=0==(t+1&2)?this.size-1-r:r;!this.isFunction[a][o]&&n<8*e.length&&(this.modules[a][o]=i(e[n>>>3],7-(7&n)),n++)}}s(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let n=!1,r=0,i=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[s][o]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[s][o],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,i)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let n=!1,r=0,i=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[o][s]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[o][s],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,i)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let n=0;n<this.size-1;n++){const r=this.modules[s][n];r==this.modules[s][n+1]&&r==this.modules[s+1][n]&&r==this.modules[s+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce(((e,t)=>e+(t?1:0)),n);const r=this.size*this.size,i=Math.ceil(Math.abs(20*n-10*r)/r)-1;return s(0<=i&&i<=9),e+=i*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return s(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let i=0;i<e;i++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map((e=>0));for(const i of e){const e=i^r.shift();r.push(0),n.forEach(((n,i)=>r[i]^=t.reedSolomonMultiply(n,e)))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return s(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};let n=t;function r(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function i(e,t){return 0!=(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;const o=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)r(n,8,t);return new o(o.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!o.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){const i=Math.min(e.length-n,3);r(parseInt(e.substr(n,i),10),3*i+1,t),n+=i}return new o(o.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!o.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t,n=[];for(t=0;t+2<=e.length;t+=2){let i=45*o.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));i+=o.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),r(i,11,n)}return t<e.length&&r(o.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,n),new o(o.Mode.ALPHANUMERIC,e.length,n)}static makeSegments(e){return""==e?[]:o.isNumeric(e)?[o.makeNumeric(e)]:o.isAlphanumeric(e)?[o.makeAlphanumeric(e)]:[o.makeBytes(o.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)r(e,8,t);else if(e<16384)r(2,2,t),r(e,14,t);else{if(!(e<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,t),r(e,21,t)}return new o(o.Mode.ECI,0,t)}static isNumeric(e){return o.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return o.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let a=o;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=a})(r||(r={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};let n=t;n.LOW=new t(0,1),n.MEDIUM=new t(1,0),n.QUARTILE=new t(2,3),n.HIGH=new t(3,2),e.Ecc=n})(t=e.QrCode||(e.QrCode={}))})(r||(r={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};let n=t;n.NUMERIC=new t(1,[10,12,14]),n.ALPHANUMERIC=new t(2,[9,11,13]),n.BYTE=new t(4,[8,16,16]),n.KANJI=new t(8,[8,10,12]),n.ECI=new t(7,[0,0,0]),e.Mode=n})(t=e.QrSegment||(e.QrSegment={}))})(r||(r={}));var h=r,p={L:h.QrCode.Ecc.LOW,M:h.QrCode.Ecc.MEDIUM,Q:h.QrCode.Ecc.QUARTILE,H:h.QrCode.Ecc.HIGH},f=128,m="L",g="#FFFFFF",y="#000000",v=!1,b=4,w=.1;function E(e,t=0){const n=[];return e.forEach((function(e,r){let i=null;e.forEach((function(s,o){if(!s&&null!==i)return n.push(`M${i+t} ${r+t}h${o-i}v1H${i+t}z`),void(i=null);if(o!==e.length-1)s&&null===i&&(i=o);else{if(!s)return;null===i?n.push(`M${o+t},${r+t} h1v1H${o+t}z`):n.push(`M${i+t},${r+t} h${o+1-i}v1H${i+t}z`)}}))})),n.join("")}function A(e,t){return e.slice().map(((e,n)=>n<t.y||n>=t.y+t.h?e:e.map(((e,n)=>(n<t.x||n>=t.x+t.w)&&e))))}function T(e,t,n,r){if(null==r)return null;const i=n?b:0,s=e.length+2*i,o=Math.floor(t*w),a=s/t,c=(r.width||o)*a,l=(r.height||o)*a,u=null==r.x?e.length/2-c/2:r.x*a,d=null==r.y?e.length/2-l/2:r.y*a;let h=null;if(r.excavate){let e=Math.floor(u),t=Math.floor(d);h={x:e,y:t,w:Math.ceil(c+u-e),h:Math.ceil(l+d-t)}}return{x:u,y:d,h:l,w:c,excavation:h}}!function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}}();function S(e){const t=e,{value:n,size:r=f,level:s=m,bgColor:o=g,fgColor:a=y,includeMargin:c=v,imageSettings:l}=t,w=d(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let S=h.QrCode.encodeText(n,p[s]).getModules();const x=c?b:0,I=S.length+2*x,P=T(S,r,c,l);let _=null;null!=l&&null!=P&&(null!=P.excavation&&(S=A(S,P.excavation)),_=i.createElement("image",{xlinkHref:l.src,height:P.h,width:P.w,x:P.x+x,y:P.y+x,preserveAspectRatio:"none"}));const R=E(S,x);return i.createElement("svg",u({height:r,width:r,viewBox:`0 0 ${I} ${I}`},w),i.createElement("path",{fill:o,d:`M0,0 h${I}v${I}H0z`,shapeRendering:"crispEdges"}),i.createElement("path",{fill:a,d:R,shapeRendering:"crispEdges"}),_)}},44228:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var r=n(14503),i=n(8998),s=n(61228),o=n(93714),a=n(79524),c=n(86162);async function l(e,t){const{account:n=e.account,chainId:l,nonce:u}=t;if(!n)throw new i.o({docsPath:"/docs/eip7702/prepareAuthorization"});const d=(0,r.T)(n),h=(()=>{if(t.executor)return"self"===t.executor?t.executor:(0,r.T)(t.executor)})(),p={address:t.contractAddress??t.address,chainId:l,nonce:u};return"undefined"===typeof p.chainId&&(p.chainId=e.chain?.id??await(0,o.s)(e,a.L,"getChainId")({})),"undefined"===typeof p.nonce&&(p.nonce=await(0,o.s)(e,c.K,"getTransactionCount")({address:d.address,blockTag:"pending"}),("self"===h||h?.address&&(0,s.E)(h.address,d.address))&&(p.nonce+=1)),p}},41795:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var r=n(36117),i=n(22514),s=n(23),o=n(15116),a=n(96070),c=n(83785);async function l(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:l=(({statusCode:e})=>e>=200),timeout:d=6e4}=t,h=(0,a.P)(["waitForCallsStatus",e.uid,n]),{promise:p,resolve:f,reject:m}=(0,o.n)();let g;const y=(0,i.N7)(h,{resolve:f,reject:m},(t=>{const i=(0,s.$)((async()=>{const r=e=>{clearTimeout(g),i(),e(),y()};try{const i=await(0,c.$)(e,{id:n});if(!l(i))return;r((()=>t.resolve(i)))}catch(s){r((()=>t.reject(s)))}}),{interval:r,emitOnBegin:!0});return i}));return g=d?setTimeout((()=>{y(),clearTimeout(g),m(new u({id:n}))}),d):void 0,await p}class u extends r.G{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}},48486:function(e,t,n){"use strict";n.d(t,{q:function(){return d}});var r=n(98029);function i(e){return{mutationFn:t=>async function(e,t={}){let n;if(t.connector)n=t.connector;else{const{connections:t,current:r}=e.state,i=t.get(r);n=i?.connector}const r=e.state.connections;n&&(await n.disconnect(),n.emitter.off("change",e._internal.events.change),n.emitter.off("disconnect",e._internal.events.disconnect),n.emitter.on("connect",e._internal.events.connect),r.delete(n.uid)),e.setState((e=>{if(0===r.size)return{...e,connections:new Map,current:null,status:"disconnected"};const t=r.values().next().value;return{...e,connections:new Map(r),current:t.connector.uid}}));{const t=e.state.current;if(!t)return;const n=e.state.connections.get(t)?.connector;if(!n)return;await(e.storage?.setItem("recentConnectorId",n.id))}}(e,t),mutationKey:["disconnect"]}}var s=n(80666),o=n(74751);let a=[];function c(e){const t=[...e.state.connections.values()];return"reconnecting"===e.state.status||(0,o.v)(a,t)?a:(a=t,t)}var l=n(67294);function u(e={}){const t=(0,s.Z)(e);return(0,l.useSyncExternalStore)((e=>function(e,t){const{onChange:n}=t;return e.subscribe((()=>c(e)),n,{equalityFn:o.v})}(t,{onChange:e})),(()=>c(t)),(()=>c(t)))}function d(e={}){const{mutation:t}=e,n=(0,s.Z)(e),o=i(n),{mutate:a,mutateAsync:c,...l}=(0,r.D)({...t,...o});return{...l,connectors:u({config:n}).map((e=>e.connector)),disconnect:a,disconnectAsync:c}}},90474:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var r=n(95602),i=n(81946);var s=n(36100);function o(e,t={}){return{async queryFn({queryKey:t}){const{address:n,scopeKey:s,...o}=t[1];if(!n)throw new Error("address is required");return function(e,t){const{chainId:n,...s}=t,o=e.getClient({chainId:n});return(0,i.s)(o,r.w,"getEnsName")(s)}(e,{...o,address:n})},queryKey:a(t)}}function a(e={}){return["ensName",(0,s.OP)(e)]}var c=n(82451),l=n(82002),u=n(80666);function d(e={}){const{address:t,query:n={}}=e,r=(0,u.Z)(e),i=(0,l.x)({config:r}),s=o(r,{...e,chainId:e.chainId??i}),a=Boolean(t&&(n.enabled??!0));return(0,c.aM)({...n,...s,enabled:a})}},71099:function(e,t,n){"use strict";n.d(t,{p:function(){return D}});var r=n(30202),i=n(79524),s=n(92106);var o=n(30286),a=n(38301);var c=n(45775);var l=n(83785),u=n(5496);var d=n(44228),h=n(37397);var p=n(12072),f=n(99238);var m=n(14503),g=n(8998);var y=n(33840),v=n(74688),b=n(93714),w=n(47531);var E=n(54891);var A=n(41795);var T=n(55629),S=n(72365);function x(e){return{addChain:t=>async function(e,{chain:t}){const{id:n,name:r,nativeCurrency:i,rpcUrls:o,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,s.eC)(n),chainName:r,nativeCurrency:i,rpcUrls:o.default.http,blockExplorerUrls:a?Object.values(a).map((({url:e})=>e)):void 0}]},{dedupe:!0,retryCount:0})}(e,t),deployContract:t=>function(e,t){const{abi:n,args:r,bytecode:i,...s}=t,c=(0,o.w)({abi:n,args:r,bytecode:i});return(0,a.T)(e,{...s,...s.authorizationList?{to:null}:{},data:c})}(e,t),getAddresses:()=>async function(e){return"local"===e.account?.type?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map((e=>(0,c.x)(e)))}(e),getCallsStatus:t=>(0,l.$)(e,t),getCapabilities:t=>(0,u.F)(e,t),getChainId:()=>(0,i.L)(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}(e),prepareAuthorization:t=>(0,d.x)(e,t),prepareTransactionRequest:t=>(0,h.ZE)(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map((e=>(0,c.K)(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}(e,t),sendCalls:t=>(0,p.s_)(e,t),sendRawTransaction:t=>(0,f.p)(e,t),sendTransaction:t=>(0,a.T)(e,t),showCallsStatus:t=>async function(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}(e,t),signAuthorization:t=>async function(e,t){const{account:n=e.account}=t;if(!n)throw new g.o({docsPath:"/docs/eip7702/signAuthorization"});const r=(0,m.T)(n);if(!r.signAuthorization)throw new g.Y({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const i=await(0,d.x)(e,t);return r.signAuthorization(i)}(e,t),signMessage:t=>async function(e,{account:t=e.account,message:n}){if(!t)throw new g.o({docsPath:"/docs/actions/wallet/signMessage"});const r=(0,m.T)(t);if(r.signMessage)return r.signMessage({message:n});const i="string"===typeof n?(0,s.$G)(n):n.raw instanceof Uint8Array?(0,s.NC)(n.raw):n.raw;return e.request({method:"personal_sign",params:[i,r.address]},{retryCount:0})}(e,t),signTransaction:t=>async function(e,t){const{account:n=e.account,chain:r=e.chain,...o}=t;if(!n)throw new g.o({docsPath:"/docs/actions/wallet/signTransaction"});const a=(0,m.T)(n);(0,w.F)({account:a,...t});const c=await(0,b.s)(e,i.L,"getChainId")({});null!==r&&(0,y.q)({currentChainId:c,chain:r});const l=r?.formatters||e.chain?.formatters,u=l?.transactionRequest?.format||v.tG;return a.signTransaction?a.signTransaction({...o,chainId:c},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...u(o),chainId:(0,s.eC)(c),from:a.address}]},{retryCount:0})}(e,t),signTypedData:t=>async function(e,t){const{account:n=e.account,domain:r,message:i,primaryType:s}=t;if(!n)throw new g.o({docsPath:"/docs/actions/wallet/signTypedData"});const o=(0,m.T)(n),a={EIP712Domain:(0,E.cj)({domain:r}),...t.types};if((0,E.iC)({domain:r,message:i,primaryType:s,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:i,primaryType:s,types:a});const c=(0,E.H6)({domain:r,message:i,primaryType:s,types:a});return e.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,s.eC)(t)}]},{retryCount:0})}(e,t),waitForCallsStatus:t=>(0,A.l)(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}(e,t),writeContract:t=>async function(e,t){const{abi:n,account:r=e.account,address:i,args:s,dataSuffix:o,functionName:c,...l}=t;if("undefined"===typeof r)throw new g.o({docsPath:"/docs/contract/writeContract"});const u=r?(0,m.T)(r):null,d=(0,T.R)({abi:n,args:s,functionName:c});try{return await(0,b.s)(e,a.T,"sendTransaction")({data:`${d}${o?o.replace("0x",""):""}`,to:i,account:u,...l})}catch(h){throw(0,S.S)(h,{abi:n,address:i,args:s,docsPath:"/docs/contract/writeContract",functionName:c,sender:u?.address})}}(e,t)}}var I=n(75230);var P=n(36100);function _(e,t={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=t,{connectorUid:i,scopeKey:s,...o}=n[1];return async function(e,t={}){return(await(0,I.e)(e,t)).extend(x)}(e,{...o,connector:r})},queryKey:R(t)}}function R(e={}){const{connector:t,...n}=e;return["walletClient",{...(0,P.OP)(n),connectorUid:t?.uid}]}var C=n(67294),N=n(82451),O=n(73552),k=n(82002),M=n(80666);function D(e={}){const{query:t={},...n}=e,i=(0,M.Z)(n),s=(0,r.NL)(),{address:o,connector:a,status:c}=(0,O.m)({config:i}),l=(0,k.x)({config:i}),u=e.connector??a,{queryKey:d,...h}=_(i,{...e,chainId:e.chainId??l,connector:e.connector??a}),p=Boolean(("connected"===c||"reconnecting"===c&&u?.getProvider)&&(t.enabled??!0)),f=(0,C.useRef)(o);return(0,C.useEffect)((()=>{const e=f.current;!o&&e?(s.removeQueries({queryKey:d}),f.current=void 0):o!==e&&(s.invalidateQueries({queryKey:d}),f.current=o)}),[o,s]),(0,N.aM)({...t,...h,queryKey:d,enabled:p,staleTime:Number.POSITIVE_INFINITY})}}}]);